webpackJsonp([1],{0:function(t,e){},"1uuo":function(t,e){},"84sD":function(t,e){},AHEq:function(t,e){},CzYD:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("7t+N"),s=a.n(i),o=a("VYsD"),r=a.n(o),l=(a("84sD"),a("AHEq"),a("DmT9")),u=a.n(l);function c(){}c.GetKLineOption=function(){return{Type:"历史K线图",Windows:[{Index:"MA",Modify:!1,Change:!1},{Index:"VOL",Modify:!1,Change:!1},{Index:"RSI",Modify:!1,Change:!1}],IsAutoUpdate:!1,AutoUpdateFrequency:5e3,IsApiPeriod:!0,IsShowRightMenu:!1,IsClickShowCorssCursor:!0,StepPixel:5,ZoomStepPixel:8,KLine:{DragMode:1,Right:0,Period:0,MaxReqeustDataCount:1e3,MaxRequestMinuteDayCount:10,PageSize:30,IsShowTooltip:!1,DrawType:0},KLineTitle:{IsShowName:!1,IsShowSettingInfo:!0},Border:{Left:1,Right:60,Bottom:25,Top:1},Frame:[{SplitCount:3,IsShowLeftText:!1,Custom:[{Type:0}]},{SplitCount:2,IsShowLeftText:!1},{SplitCount:2,IsShowLeftText:!1}],ExtendChart:[{Name:"KLineTooltip"}]}};var h=[{Period:0,Range:864e5},{Period:1,Range:6048e5},{Period:4,Range:6e4},{Period:5,Range:3e5},{Period:6,Range:9e5},{Period:7,Range:18e5},{Period:8,Range:36e5},{Period:20003,Range:18e4},{Period:20120,Range:72e5},{Period:20240,Range:144e5},{Period:20360,Range:216e5},{Period:20720,Range:432e5}],v={name:"KLineChart",props:["DefaultSymbol"],data:function(){var t={Symbol:"1000000",Name:"1000000",Chart:null,Option:c.GetKLineOption(),ApiUrl:"https://api.ccfox.com/futureQuot/queryCandlestick",WSUrl:"https://futurews.ccfox.com/",LatestData:null};return t},created:function(){this.DefaultSymbol&&(this.Symbol=this.DefaultSymbol)},mounted:function(){console.log("[KLineChart::mounted]"),this.OnSize(),this.CreateKLineChart()},methods:{ChangePeriod:function(t){var e=this.GetPeriodID(t),a=this.Symbol;this.LatestData=null,this.Chart.ChangePeriod(t),this.Socket&&this.Socket.emit("subscribe",{header:{type:1003},body:{topics:[{topic:"future_kline",params:{symbols:[{symbol:a,ranges:[e.toString()]}]}},{topic:"future_tick",params:{symbols:[{symbol:a}]}}]}})},ChangeIndex:function(t,e){this.Chart.ChangeIndex(t,e)},ChangeSymbol:function(t,e){if(this.Symbol!=t){this.Symbol=t,this.Name=e,this.LatestData=null,this.Chart.ChangeSymbol(this.Symbol+".BIT");var a=this.GetPeriodID(this.Chart.JSChartContainer.Period);this.Socket.emit("subscribe",{header:{type:1003},body:{topics:[{topic:"future_kline",params:{symbols:[{symbol:t,ranges:[a.toString()]}]}},{topic:"future_tick",params:{symbols:[{symbol:t}]}}]}})}},OnSize:function(){var t=this.$refs.app,e=t.offsetHeight,a=t.offsetWidth;console.log("[KLineChart::OnSize] width="+a+" height="+e);var n=this.$refs.kline;n.style.width=a+"px",n.style.height=e-90+"px",this.Chart&&this.Chart.OnSize()},CreateKLineChart:function(){var t=this;if(!this.Chart){this.Option.Symbol=this.Symbol+".BIT",this.Option.NetworkFilter=function(e,a){t.NetworkFilter(e,a)};var e=r.a.Chart.JSChart.Init(this.$refs.kline);e.SetOption(this.Option),this.Chart=e,this.CreateWebSocket()}},GetPeriodID:function(t){for(var e in h)if(h[e].Period==t)return h[e].Range},GetPeriodByID:function(t){for(var e in h)if(h[e].Range==t)return h[e].Period},NetworkFilter:function(t,e){switch(console.log("[KLineChart::NetworkFilter] data",t),t.Name){case"KLineChartContainer::ReqeustHistoryMinuteData":this.RequestHistoryMinuteData(t,e);break;case"KLineChartContainer::RequestHistoryData":this.RequestHistoryData(t,e)}},RequestHistoryMinuteData:function(t,e){t.PreventDefault=!0;var a=this,n=t.Request.Data.symbol,i=this.GetPeriodID(t.Self.Period),o=this.ApiUrl+"?symbol="+this.Symbol+"&range="+i;s.a.ajax({url:o,type:"get",dataType:"json",async:!0,success:function(t){a.RecvHistoryMinuteData(t,e,n,a.Name)},error:function(t,e){a.ChartSplashPaint.IsEnableSplash=!1}})},RecvHistoryMinuteData:function(t,e,a,n){var i={code:0,data:[]};i.symbol=a,i.name=n;var s=null;for(var o in t.data.lines){var r=t.data.lines[o],l=r[0],u=new Date;u.setTime(l);var c=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),h=100*u.getHours()+u.getMinutes(),v=[c,s,parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4]),parseFloat(r[5]),null,h];s=parseFloat(r[4]),i.data.push(v)}e(i)},RequestHistoryData:function(t,e){t.PreventDefault=!0;var a=this,n=t.Request.Data.symbol,i=this.GetPeriodID(t.Self.Period),o=this.ApiUrl+"?symbol="+this.Symbol+"&range="+i;s.a.ajax({url:o,type:"get",dataType:"json",async:!0,success:function(t){a.RecvHistoryData(t,e,n,a.Name)},error:function(t,e){a.ChartSplashPaint.IsEnableSplash=!1}})},RecvHistoryData:function(t,e,a,n){var i={code:0,data:[]};i.symbol=a,i.name=n;var s=null;for(var o in t.data.lines){var r=t.data.lines[o],l=r[0],u=new Date;u.setTime(l);var c=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),h=(u.getHours(),u.getMinutes(),[c,s,parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4]),parseFloat(r[5]),null]);s=parseFloat(r[4]),i.data.push(h)}e(i)},CreateWebSocket:function(){var t=this,e=this,a=this.Symbol,n=this.GetPeriodID(this.Option.KLine.Period);this.Socket=u()(this.WSUrl),this.Socket.emit("subscribe",{header:{type:1003},body:{topics:[{topic:"future_kline",params:{symbols:[{symbol:a,ranges:[n.toString()]}]}},{topic:"future_tick",params:{symbols:[{symbol:a}]}}]}}),this.Socket.on("future_kline",function(e){t.RecvWSMessage(e)}),this.Socket.on("future_tick",function(t){e.RecvWSTickMessage(t)})},RecvWSTickMessage:function(t){if(console.log("[KLineChart::RecvWSTickMessage]",t),this.LatestData&&t.trades&&!(t.trades.length<=2)&&t.contractId==this.Symbol){var e=parseFloat(t.trades[1]),a=this.Chart.JSChartContainer,n=a.Period;if(console.log("[KLineChart::RecvWSTickMessage] latest price="+e+" , period="+n),0==n||1==n){if(this.LatestData.stock[0].price==e)return;this.LatestData.stock[0].price=e,a.RecvRealtimeData(this.LatestData)}else{if(this.LatestData.data[0][5]==e)return;this.LatestData.data[0][5]=e,a.RecvMinuteRealtimeData(this.LatestData)}}},RecvWSMessage:function(t){console.log("[KLineChart::RecvWSMessage]",t);var e=t.contractId+".BIT",a=parseInt(t.range),n=this.GetPeriodByID(a),i=this.Chart.JSChartContainer;i&&(i.IsEnableSplash||e==i.Symbol&&n==i.Period&&(0==n||1==n?this.UpdateDayData(t,e,i):this.UpdateMinuteData(t,e,i)))},UpdateMinuteData:function(t,e,a){var n={code:0,data:[],ver:2};n.symbol=e,n.name=this.Name;var i=null;for(var s in t.lines){var o=t.lines[s],r=o[0],l=new Date;l.setTime(r);var u=1e4*l.getFullYear()+100*(l.getMonth()+1)+l.getDate(),c=100*l.getHours()+l.getMinutes(),h=[u,i,parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4]),parseFloat(o[5]),null,c];i=parseFloat(o[4]),n.data.push(h)}a.RecvMinuteRealtimeData(n),n.data.length>0&&(this.LatestData={code:0,data:[n.data[n.data.length-1]],ver:2})},UpdateDayData:function(t,e,a){var n={symbol:e,name:this.Name},i={code:0,stock:[n]},s=[],o=null;for(var r in t.lines){var l=(d=t.lines[r])[0],u=new Date;u.setTime(l);var c=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),h=100*u.getHours()+u.getMinutes(),v=[c,o,parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4]),parseFloat(d[5]),null,h];o=parseFloat(d[4]),s.push(v)}var d=s[s.length-1];n.date=d[0],n.yclose=v[1],n.open=d[2],n.high=d[3],n.low=d[4],n.price=d[5],n.vol=d[6],n.amount=null,a.RecvRealtimeData(i),this.LatestData=i}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"app",staticStyle:{height:"100%",width:"100%"},attrs:{id:"app"}},[a("div",{ref:"kline",staticStyle:{height:"400px",width:"500px"},attrs:{id:"kline"}}),t._v(" "),a("div",[a("button",{staticClass:"1D",on:{click:function(e){return t.ChangePeriod(0)}}},[t._v("1D")]),t._v(" "),a("button",{staticClass:"1W",on:{click:function(e){return t.ChangePeriod(1)}}},[t._v("1W")]),t._v(" "),a("button",{staticClass:"1Min",on:{click:function(e){return t.ChangePeriod(4)}}},[t._v("1Min")]),t._v(" "),a("button",{staticClass:"3Min",on:{click:function(e){return t.ChangePeriod(20003)}}},[t._v("3Min")]),t._v(" "),a("button",{staticClass:"5Min",on:{click:function(e){return t.ChangePeriod(5)}}},[t._v("5Min")]),t._v(" "),a("button",{staticClass:"15Min",on:{click:function(e){return t.ChangePeriod(6)}}},[t._v("15Min")]),t._v(" "),a("button",{staticClass:"30Min",on:{click:function(e){return t.ChangePeriod(7)}}},[t._v("30Min")]),t._v(" "),a("button",{staticClass:"60Min",on:{click:function(e){return t.ChangePeriod(8)}}},[t._v("60Min")]),t._v(" "),a("button",{staticClass:"2H",on:{click:function(e){return t.ChangePeriod(20120)}}},[t._v("2H")]),t._v(" "),a("button",{staticClass:"4H",on:{click:function(e){return t.ChangePeriod(20240)}}},[t._v("4H")]),t._v(" "),a("button",{staticClass:"6H",on:{click:function(e){return t.ChangePeriod(20360)}}},[t._v("6H")]),t._v(" "),a("button",{staticClass:"12H",on:{click:function(e){return t.ChangePeriod(20720)}}},[t._v("12H")])]),t._v(" "),a("div",[a("button",{staticClass:"MACD",on:{click:function(e){return t.ChangeIndex(1,"MACD")}}},[t._v("MACD")]),t._v(" "),a("button",{staticClass:"KDJ",on:{click:function(e){return t.ChangeIndex(1,"KDJ")}}},[t._v("KDJ")]),t._v(" "),a("button",{staticClass:"BIAS",on:{click:function(e){return t.ChangeIndex(2,"BIAS")}}},[t._v("BIAS")]),t._v(" "),a("button",{staticClass:"BOLL",on:{click:function(e){return t.ChangeIndex(0,"BOLL")}}},[t._v("BOLL")]),t._v(" "),a("button",{staticClass:"BBI",on:{click:function(e){return t.ChangeIndex(0,"BBI")}}},[t._v("BBI")]),t._v(" "),a("button",{staticClass:"RSI",on:{click:function(e){return t.ChangeIndex(2,"RSI")}}},[t._v("RSI")]),t._v(" "),a("button",{staticClass:"MA",on:{click:function(e){return t.ChangeIndex(0,"MA")}}},[t._v("MA")]),t._v(" "),a("button",{staticClass:"VOL",on:{click:function(e){return t.ChangeIndex(1,"VOL")}}},[t._v("VOL")])]),t._v(" "),a("div",[a("button",{staticClass:"S1000009",on:{click:function(e){return t.ChangeSymbol("1000009","1000009")}}},[t._v("1000009")]),t._v(" "),a("button",{staticClass:"S1000000",on:{click:function(e){return t.ChangeSymbol("1000000","1000000")}}},[t._v("1000000")])])])},staticRenderFns:[]};var p=a("VU/8")(v,d,!1,function(t){a("CzYD")},null,null).exports,f=a("/ocq"),g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var C=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},g,!1,function(t){a("1uuo")},"data-v-d8ec41bc",null).exports;n.a.use(f.a);var m=new f.a({routes:[{path:"/",name:"HelloWorld",component:C}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:m,components:{App:p},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.f41f554e1ee271388ae7.js.map