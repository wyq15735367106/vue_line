webpackJsonp([0],{"+lzb":function(t,e){function a(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=a,a.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),a=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-a:t+a}return 0|Math.min(t,this.max)},a.prototype.reset=function(){this.attempts=0},a.prototype.setMin=function(t){this.ms=t},a.prototype.setMax=function(t){this.max=t},a.prototype.setJitter=function(t){this.jitter=t}},"/ocq":function(t,e,a){"use strict";
/*!
  * vue-router v3.1.3
  * (c) 2019 Evan You
  * @license MIT
  */function i(t,e){0}function n(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function r(t,e){return e instanceof t||e&&(e.name===t.name||e._name===t._name)}function s(t,e){for(var a in e)t[a]=e[a];return t}var o={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var a=e.props,i=e.children,n=e.parent,r=e.data;r.routerView=!0;for(var o=n.$createElement,h=a.name,l=n.$route,u=n._routerViewCache||(n._routerViewCache={}),c=0,f=!1;n&&n._routerRoot!==n;){var C=n.$vnode&&n.$vnode.data;C&&(C.routerView&&c++,C.keepAlive&&n._inactive&&(f=!0)),n=n.$parent}if(r.routerViewDepth=c,f)return o(u[h],r,i);var d=l.matched[c];if(!d)return u[h]=null,o();var D=u[h]=d.components[h];r.registerRouteInstance=function(t,e){var a=d.instances[h];(e&&a!==t||!e&&a===t)&&(d.instances[h]=e)},(r.hook||(r.hook={})).prepatch=function(t,e){d.instances[h]=e.componentInstance},r.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==d.instances[h]&&(d.instances[h]=t.componentInstance)};var p=r.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}(l,d.props&&d.props[h]);if(p){p=r.props=s({},p);var m=r.attrs=r.attrs||{};for(var v in p)D.props&&v in D.props||(m[v]=p[v],delete p[v])}return o(D,r,i)}};var h=/[!'()*]/g,l=function(t){return"%"+t.charCodeAt(0).toString(16)},u=/%2C/g,c=function(t){return encodeURIComponent(t).replace(h,l).replace(u,",")},f=decodeURIComponent;function C(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var a=t.replace(/\+/g," ").split("="),i=f(a.shift()),n=a.length>0?f(a.join("=")):null;void 0===e[i]?e[i]=n:Array.isArray(e[i])?e[i].push(n):e[i]=[e[i],n]}),e):e}function d(t){var e=t?Object.keys(t).map(function(e){var a=t[e];if(void 0===a)return"";if(null===a)return c(e);if(Array.isArray(a)){var i=[];return a.forEach(function(t){void 0!==t&&(null===t?i.push(c(e)):i.push(c(e)+"="+c(t)))}),i.join("&")}return c(e)+"="+c(a)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}var D=/\/?$/;function p(t,e,a,i){var n=i&&i.options.stringifyQuery,r=e.query||{};try{r=m(r)}catch(t){}var s={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:r,params:e.params||{},fullPath:S(e,n),matched:t?function(t){var e=[];for(;t;)e.unshift(t),t=t.parent;return e}(t):[]};return a&&(s.redirectedFrom=S(a,n)),Object.freeze(s)}function m(t){if(Array.isArray(t))return t.map(m);if(t&&"object"==typeof t){var e={};for(var a in t)e[a]=m(t[a]);return e}return t}var v=p(null,{path:"/"});function S(t,e){var a=t.path,i=t.query;void 0===i&&(i={});var n=t.hash;return void 0===n&&(n=""),(a||"/")+(e||d)(i)+n}function g(t,e){return e===v?t===e:!!e&&(t.path&&e.path?t.path.replace(D,"")===e.path.replace(D,"")&&t.hash===e.hash&&I(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&I(t.query,e.query)&&I(t.params,e.params)))}function I(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var a=Object.keys(t),i=Object.keys(e);return a.length===i.length&&a.every(function(a){var i=t[a],n=e[a];return"object"==typeof i&&"object"==typeof n?I(i,n):String(i)===String(n)})}function A(t,e,a){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var n=e.split("/");a&&n[n.length-1]||n.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var o=r[s];".."===o?n.pop():"."!==o&&n.push(o)}return""!==n[0]&&n.unshift(""),n.join("/")}function y(t){return t.replace(/\/\//g,"/")}var T=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},F=k,E=M,L=function(t,e){return R(M(t,e))},x=R,N=H,O=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function M(t,e){for(var a,i=[],n=0,r=0,s="",o=e&&e.delimiter||"/";null!=(a=O.exec(t));){var h=a[0],l=a[1],u=a.index;if(s+=t.slice(r,u),r=u+h.length,l)s+=l[1];else{var c=t[r],f=a[2],C=a[3],d=a[4],D=a[5],p=a[6],m=a[7];s&&(i.push(s),s="");var v=null!=f&&null!=c&&c!==f,S="+"===p||"*"===p,g="?"===p||"*"===p,I=a[2]||o,A=d||D;i.push({name:C||n++,prefix:f||"",delimiter:I,optional:g,repeat:S,partial:v,asterisk:!!m,pattern:A?b(A):m?".*":"[^"+P(I)+"]+?"})}}return r<t.length&&(s+=t.substr(r)),s&&i.push(s),i}function w(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function R(t){for(var e=new Array(t.length),a=0;a<t.length;a++)"object"==typeof t[a]&&(e[a]=new RegExp("^(?:"+t[a].pattern+")$"));return function(a,i){for(var n="",r=a||{},s=(i||{}).pretty?w:encodeURIComponent,o=0;o<t.length;o++){var h=t[o];if("string"!=typeof h){var l,u=r[h.name];if(null==u){if(h.optional){h.partial&&(n+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(T(u)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(l=s(u[c]),!e[o].test(l))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(l)+"`");n+=(0===c?h.prefix:h.delimiter)+l}}else{if(l=h.asterisk?encodeURI(u).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):s(u),!e[o].test(l))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+l+'"');n+=h.prefix+l}}else n+=h}return n}}function P(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function b(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function B(t,e){return t.keys=e,t}function _(t){return t.sensitive?"":"i"}function H(t,e,a){T(e)||(a=e||a,e=[]);for(var i=(a=a||{}).strict,n=!1!==a.end,r="",s=0;s<t.length;s++){var o=t[s];if("string"==typeof o)r+=P(o);else{var h=P(o.prefix),l="(?:"+o.pattern+")";e.push(o),o.repeat&&(l+="(?:"+h+l+")*"),r+=l=o.optional?o.partial?h+"("+l+")?":"(?:"+h+"("+l+"))?":h+"("+l+")"}}var u=P(a.delimiter||"/"),c=r.slice(-u.length)===u;return i||(r=(c?r.slice(0,-u.length):r)+"(?:"+u+"(?=$))?"),r+=n?"$":i&&c?"":"(?="+u+"|$)",B(new RegExp("^"+r,_(a)),e)}function k(t,e,a){return T(e)||(a=e||a,e=[]),a=a||{},t instanceof RegExp?function(t,e){var a=t.source.match(/\((?!\?)/g);if(a)for(var i=0;i<a.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return B(t,e)}(t,e):T(t)?function(t,e,a){for(var i=[],n=0;n<t.length;n++)i.push(k(t[n],e,a).source);return B(new RegExp("(?:"+i.join("|")+")",_(a)),e)}(t,e,a):function(t,e,a){return H(M(t,a),e,a)}(t,e,a)}F.parse=E,F.compile=L,F.tokensToFunction=x,F.tokensToRegExp=N;var V=Object.create(null);function G(t,e,a){e=e||{};try{var i=V[t]||(V[t]=F.compile(t));return e.pathMatch&&(e[0]=e.pathMatch),i(e,{pretty:!0})}catch(t){return""}finally{delete e[0]}}function Y(t,e,a,i){var n="string"==typeof t?{path:t}:t;if(n._normalized)return n;if(n.name)return s({},t);if(!n.path&&n.params&&e){(n=s({},n))._normalized=!0;var r=s(s({},e.params),n.params);if(e.name)n.name=e.name,n.params=r;else if(e.matched.length){var o=e.matched[e.matched.length-1].path;n.path=G(o,r,e.path)}else 0;return n}var h=function(t){var e="",a="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var n=t.indexOf("?");return n>=0&&(a=t.slice(n+1),t=t.slice(0,n)),{path:t,query:a,hash:e}}(n.path||""),l=e&&e.path||"/",u=h.path?A(h.path,l,a||n.append):l,c=function(t,e,a){void 0===e&&(e={});var i,n=a||C;try{i=n(t||"")}catch(t){i={}}for(var r in e)i[r]=e[r];return i}(h.query,n.query,i&&i.options.parseQuery),f=n.hash||h.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:u,query:c,hash:f}}var U,W=[String,Object],X=[String,Array],J=function(){},K={name:"RouterLink",props:{to:{type:W,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:X,default:"click"}},render:function(t){var e=this,a=this.$router,i=this.$route,n=a.resolve(this.to,i,this.append),r=n.location,o=n.route,h=n.href,l={},u=a.options.linkActiveClass,c=a.options.linkExactActiveClass,f=null==u?"router-link-active":u,C=null==c?"router-link-exact-active":c,d=null==this.activeClass?f:this.activeClass,m=null==this.exactActiveClass?C:this.exactActiveClass,v=o.redirectedFrom?p(null,Y(o.redirectedFrom),null,a):o;l[m]=g(i,v),l[d]=this.exact?l[m]:function(t,e){return 0===t.path.replace(D,"/").indexOf(e.path.replace(D,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var a in e)if(!(a in t))return!1;return!0}(t.query,e.query)}(i,v);var S=function(t){q(t)&&(e.replace?a.replace(r,J):a.push(r,J))},I={click:q};Array.isArray(this.event)?this.event.forEach(function(t){I[t]=S}):I[this.event]=S;var A={class:l},y=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:h,route:o,navigate:S,isActive:l[d],isExactActive:l[m]});if(y){if(1===y.length)return y[0];if(y.length>1||!y.length)return 0===y.length?t():t("span",{},y)}if("a"===this.tag)A.on=I,A.attrs={href:h};else{var T=function t(e){if(e)for(var a,i=0;i<e.length;i++){if("a"===(a=e[i]).tag)return a;if(a.children&&(a=t(a.children)))return a}}(this.$slots.default);if(T){T.isStatic=!1;var F=T.data=s({},T.data);for(var E in F.on=F.on||{},F.on){var L=F.on[E];E in I&&(F.on[E]=Array.isArray(L)?L:[L])}for(var x in I)x in F.on?F.on[x].push(I[x]):F.on[x]=S;(T.data.attrs=s({},T.data.attrs)).href=h}else A.on=I}return t(this.tag,A,this.$slots.default)}};function q(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function z(t){if(!z.installed||U!==t){z.installed=!0,U=t;var e=function(t){return void 0!==t},a=function(t,a){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,a)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",o),t.component("RouterLink",K);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var j="undefined"!=typeof window;function $(t,e,a,i){var n=e||[],r=a||Object.create(null),s=i||Object.create(null);t.forEach(function(t){!function t(e,a,i,n,r,s){var o=n.path;var h=n.name;0;var l=n.pathToRegexpOptions||{};var u=function(t,e,a){a||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return y(e.path+"/"+t)}(o,r,l.strict);"boolean"==typeof n.caseSensitive&&(l.sensitive=n.caseSensitive);var c={path:u,regex:function(t,e){var a=F(t,[],e);return a}(u,l),components:n.components||{default:n.component},instances:{},name:h,parent:r,matchAs:s,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};n.children&&n.children.forEach(function(n){var r=s?y(s+"/"+n.path):void 0;t(e,a,i,n,c,r)});a[c.path]||(e.push(c.path),a[c.path]=c);if(void 0!==n.alias)for(var f=Array.isArray(n.alias)?n.alias:[n.alias],C=0;C<f.length;++C){var d=f[C];0;var D={path:d,children:n.children};t(e,a,i,D,r,c.path||"/")}h&&(i[h]||(i[h]=c))}(n,r,s,t)});for(var o=0,h=n.length;o<h;o++)"*"===n[o]&&(n.push(n.splice(o,1)[0]),h--,o--);return{pathList:n,pathMap:r,nameMap:s}}function Z(t,e){var a=$(t),i=a.pathList,n=a.pathMap,r=a.nameMap;function s(t,a,s){var o=Y(t,a,!1,e),l=o.name;if(l){var u=r[l];if(!u)return h(null,o);var c=u.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof o.params&&(o.params={}),a&&"object"==typeof a.params)for(var f in a.params)!(f in o.params)&&c.indexOf(f)>-1&&(o.params[f]=a.params[f]);return o.path=G(u.path,o.params),h(u,o,s)}if(o.path){o.params={};for(var C=0;C<i.length;C++){var d=i[C],D=n[d];if(Q(D.regex,o.path,o.params))return h(D,o,s)}}return h(null,o)}function o(t,a){var i=t.redirect,n="function"==typeof i?i(p(t,a,null,e)):i;if("string"==typeof n&&(n={path:n}),!n||"object"!=typeof n)return h(null,a);var o=n,l=o.name,u=o.path,c=a.query,f=a.hash,C=a.params;if(c=o.hasOwnProperty("query")?o.query:c,f=o.hasOwnProperty("hash")?o.hash:f,C=o.hasOwnProperty("params")?o.params:C,l){r[l];return s({_normalized:!0,name:l,query:c,hash:f,params:C},void 0,a)}if(u){var d=function(t,e){return A(t,e.parent?e.parent.path:"/",!0)}(u,t);return s({_normalized:!0,path:G(d,C),query:c,hash:f},void 0,a)}return h(null,a)}function h(t,a,i){return t&&t.redirect?o(t,i||a):t&&t.matchAs?function(t,e,a){var i=s({_normalized:!0,path:G(a,e.params)});if(i){var n=i.matched,r=n[n.length-1];return e.params=i.params,h(r,e)}return h(null,e)}(0,a,t.matchAs):p(t,a,i,e)}return{match:s,addRoutes:function(t){$(t,i,n,r)}}}function Q(t,e,a){var i=e.match(t);if(!i)return!1;if(!a)return!0;for(var n=1,r=i.length;n<r;++n){var s=t.keys[n-1],o="string"==typeof i[n]?decodeURIComponent(i[n]):i[n];s&&(a[s.name||"pathMatch"]=o)}return!0}var tt=j&&window.performance&&window.performance.now?window.performance:Date;function et(){return tt.now().toFixed(3)}var at=et();function it(){return at}function nt(t){return at=t}var rt=Object.create(null);function st(){var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,"");window.history.replaceState({key:it()},"",e),window.addEventListener("popstate",function(t){ht(),t.state&&t.state.key&&nt(t.state.key)})}function ot(t,e,a,i){if(t.app){var n=t.options.scrollBehavior;n&&t.app.$nextTick(function(){var r=function(){var t=it();if(t)return rt[t]}(),s=n.call(t,e,a,i?r:null);s&&("function"==typeof s.then?s.then(function(t){Ct(t,r)}).catch(function(t){0}):Ct(s,r))})}}function ht(){var t=it();t&&(rt[t]={x:window.pageXOffset,y:window.pageYOffset})}function lt(t){return ct(t.x)||ct(t.y)}function ut(t){return{x:ct(t.x)?t.x:window.pageXOffset,y:ct(t.y)?t.y:window.pageYOffset}}function ct(t){return"number"==typeof t}var ft=/^#\d/;function Ct(t,e){var a,i="object"==typeof t;if(i&&"string"==typeof t.selector){var n=ft.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(n){var r=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var a=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-a.left-e.x,y:i.top-a.top-e.y}}(n,r={x:ct((a=r).x)?a.x:0,y:ct(a.y)?a.y:0})}else lt(t)&&(e=ut(t))}else i&&lt(t)&&(e=ut(t));e&&window.scrollTo(e.x,e.y)}var dt,Dt=j&&((-1===(dt=window.navigator.userAgent).indexOf("Android 2.")&&-1===dt.indexOf("Android 4.0")||-1===dt.indexOf("Mobile Safari")||-1!==dt.indexOf("Chrome")||-1!==dt.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history);function pt(t,e){ht();var a=window.history;try{e?a.replaceState({key:it()},"",t):a.pushState({key:nt(et())},"",t)}catch(a){window.location[e?"replace":"assign"](t)}}function mt(t){pt(t,!0)}function vt(t,e,a){var i=function(n){n>=t.length?a():t[n]?e(t[n],function(){i(n+1)}):i(n+1)};i(0)}function St(t){return function(e,a,i){var r=!1,s=0,o=null;gt(t,function(t,e,a,h){if("function"==typeof t&&void 0===t.cid){r=!0,s++;var l,u=yt(function(e){var n;((n=e).__esModule||At&&"Module"===n[Symbol.toStringTag])&&(e=e.default),t.resolved="function"==typeof e?e:U.extend(e),a.components[h]=e,--s<=0&&i()}),c=yt(function(t){var e="Failed to resolve async component "+h+": "+t;o||(o=n(t)?t:new Error(e),i(o))});try{l=t(u,c)}catch(t){c(t)}if(l)if("function"==typeof l.then)l.then(u,c);else{var f=l.component;f&&"function"==typeof f.then&&f.then(u,c)}}}),r||i()}}function gt(t,e){return It(t.map(function(t){return Object.keys(t.components).map(function(a){return e(t.components[a],t.instances[a],t,a)})}))}function It(t){return Array.prototype.concat.apply([],t)}var At="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function yt(t){var e=!1;return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(!e)return e=!0,t.apply(this,a)}}var Tt=function(t){function e(e){t.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+e.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new t).stack,writable:!0,configurable:!0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);Tt._name="NavigationDuplicated";var Ft=function(t,e){this.router=t,this.base=function(t){if(!t)if(j){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";"/"!==t.charAt(0)&&(t="/"+t);return t.replace(/\/$/,"")}(e),this.current=v,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function Et(t,e,a,i){var n=gt(t,function(t,i,n,r){var s=function(t,e){"function"!=typeof t&&(t=U.extend(t));return t.options[e]}(t,e);if(s)return Array.isArray(s)?s.map(function(t){return a(t,i,n,r)}):a(s,i,n,r)});return It(i?n.reverse():n)}function Lt(t,e){if(e)return function(){return t.apply(e,arguments)}}Ft.prototype.listen=function(t){this.cb=t},Ft.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Ft.prototype.onError=function(t){this.errorCbs.push(t)},Ft.prototype.transitionTo=function(t,e,a){var i=this,n=this.router.match(t,this.current);this.confirmTransition(n,function(){i.updateRoute(n),e&&e(n),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach(function(t){t(n)}))},function(t){a&&a(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach(function(e){e(t)}))})},Ft.prototype.confirmTransition=function(t,e,a){var s=this,o=this.current,h=function(t){!r(Tt,t)&&n(t)&&(s.errorCbs.length?s.errorCbs.forEach(function(e){e(t)}):(i(),console.error(t))),a&&a(t)};if(g(t,o)&&t.matched.length===o.matched.length)return this.ensureURL(),h(new Tt(t));var l=function(t,e){var a,i=Math.max(t.length,e.length);for(a=0;a<i&&t[a]===e[a];a++);return{updated:e.slice(0,a),activated:e.slice(a),deactivated:t.slice(a)}}(this.current.matched,t.matched),u=l.updated,c=l.deactivated,f=l.activated,C=[].concat(function(t){return Et(t,"beforeRouteLeave",Lt,!0)}(c),this.router.beforeHooks,function(t){return Et(t,"beforeRouteUpdate",Lt)}(u),f.map(function(t){return t.beforeEnter}),St(f));this.pending=t;var d=function(e,a){if(s.pending!==t)return h();try{e(t,o,function(t){!1===t||n(t)?(s.ensureURL(!0),h(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(h(),"object"==typeof t&&t.replace?s.replace(t):s.push(t)):a(t)})}catch(t){h(t)}};vt(C,d,function(){var a=[];vt(function(t,e,a){return Et(t,"beforeRouteEnter",function(t,i,n,r){return function(t,e,a,i,n){return function(r,s,o){return t(r,s,function(t){"function"==typeof t&&i.push(function(){!function t(e,a,i,n){a[i]&&!a[i]._isBeingDestroyed?e(a[i]):n()&&setTimeout(function(){t(e,a,i,n)},16)}(t,e.instances,a,n)}),o(t)})}}(t,n,r,e,a)})}(f,a,function(){return s.current===t}).concat(s.router.resolveHooks),d,function(){if(s.pending!==t)return h();s.pending=null,e(t),s.router.app&&s.router.app.$nextTick(function(){a.forEach(function(t){t()})})})})},Ft.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(a){a&&a(t,e)})};var xt=function(t){function e(e,a){var i=this;t.call(this,e,a);var n=e.options.scrollBehavior,r=Dt&&n;r&&st();var s=Nt(this.base);window.addEventListener("popstate",function(t){var a=i.current,n=Nt(i.base);i.current===v&&n===s||i.transitionTo(n,function(t){r&&ot(e,t,a,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,a){var i=this,n=this.current;this.transitionTo(t,function(t){pt(y(i.base+t.fullPath)),ot(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,n=this.current;this.transitionTo(t,function(t){mt(y(i.base+t.fullPath)),ot(i.router,t,n,!1),e&&e(t)},a)},e.prototype.ensureURL=function(t){if(Nt(this.base)!==this.current.fullPath){var e=y(this.base+this.current.fullPath);t?pt(e):mt(e)}},e.prototype.getCurrentLocation=function(){return Nt(this.base)},e}(Ft);function Nt(t){var e=decodeURI(window.location.pathname);return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var Ot=function(t){function e(e,a,i){t.call(this,e,a),i&&function(t){var e=Nt(t);if(!/^\/#/.test(e))return window.location.replace(y(t+"/#"+e)),!0}(this.base)||Mt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router.options.scrollBehavior,a=Dt&&e;a&&st(),window.addEventListener(Dt?"popstate":"hashchange",function(){var e=t.current;Mt()&&t.transitionTo(wt(),function(i){a&&ot(t.router,i,e,!0),Dt||bt(i.fullPath)})})},e.prototype.push=function(t,e,a){var i=this,n=this.current;this.transitionTo(t,function(t){Pt(t.fullPath),ot(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,n=this.current;this.transitionTo(t,function(t){bt(t.fullPath),ot(i.router,t,n,!1),e&&e(t)},a)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;wt()!==e&&(t?Pt(e):bt(e))},e.prototype.getCurrentLocation=function(){return wt()},e}(Ft);function Mt(){var t=wt();return"/"===t.charAt(0)||(bt("/"+t),!1)}function wt(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";var a=(t=t.slice(e+1)).indexOf("?");if(a<0){var i=t.indexOf("#");t=i>-1?decodeURI(t.slice(0,i))+t.slice(i):decodeURI(t)}else a>-1&&(t=decodeURI(t.slice(0,a))+t.slice(a));return t}function Rt(t){var e=window.location.href,a=e.indexOf("#");return(a>=0?e.slice(0,a):e)+"#"+t}function Pt(t){Dt?pt(Rt(t)):window.location.hash=t}function bt(t){Dt?mt(Rt(t)):window.location.replace(Rt(t))}var Bt=function(t){function e(e,a){t.call(this,e,a),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},a)},e.prototype.go=function(t){var e=this,a=this.index+t;if(!(a<0||a>=this.stack.length)){var i=this.stack[a];this.confirmTransition(i,function(){e.index=a,e.updateRoute(i)},function(t){r(Tt,t)&&(e.index=a)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Ft),_t=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Z(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Dt&&!1!==t.fallback,this.fallback&&(e="hash"),j||(e="abstract"),this.mode=e,e){case"history":this.history=new xt(this,t.base);break;case"hash":this.history=new Ot(this,t.base,this.fallback);break;case"abstract":this.history=new Bt(this,t.base);break;default:0}},Ht={currentRoute:{configurable:!0}};function kt(t,e){return t.push(e),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}_t.prototype.match=function(t,e,a){return this.matcher.match(t,e,a)},Ht.currentRoute.get=function(){return this.history&&this.history.current},_t.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",function(){var a=e.apps.indexOf(t);a>-1&&e.apps.splice(a,1),e.app===t&&(e.app=e.apps[0]||null)}),!this.app){this.app=t;var a=this.history;if(a instanceof xt)a.transitionTo(a.getCurrentLocation());else if(a instanceof Ot){var i=function(){a.setupListeners()};a.transitionTo(a.getCurrentLocation(),i,i)}a.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},_t.prototype.beforeEach=function(t){return kt(this.beforeHooks,t)},_t.prototype.beforeResolve=function(t){return kt(this.resolveHooks,t)},_t.prototype.afterEach=function(t){return kt(this.afterHooks,t)},_t.prototype.onReady=function(t,e){this.history.onReady(t,e)},_t.prototype.onError=function(t){this.history.onError(t)},_t.prototype.push=function(t,e,a){var i=this;if(!e&&!a&&"undefined"!=typeof Promise)return new Promise(function(e,a){i.history.push(t,e,a)});this.history.push(t,e,a)},_t.prototype.replace=function(t,e,a){var i=this;if(!e&&!a&&"undefined"!=typeof Promise)return new Promise(function(e,a){i.history.replace(t,e,a)});this.history.replace(t,e,a)},_t.prototype.go=function(t){this.history.go(t)},_t.prototype.back=function(){this.go(-1)},_t.prototype.forward=function(){this.go(1)},_t.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},_t.prototype.resolve=function(t,e,a){var i=Y(t,e=e||this.history.current,a,this),n=this.match(i,e),r=n.redirectedFrom||n.fullPath;return{location:i,route:n,href:function(t,e,a){var i="hash"===a?"#"+e:e;return t?y(t+"/"+i):i}(this.history.base,r,this.mode),normalizedTo:i,resolved:n}},_t.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==v&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(_t.prototype,Ht),_t.install=z,_t.version="3.1.3",j&&window.Vue&&window.Vue.use(_t),e.a=_t},"2gBs":function(t,e){t.exports=Object.keys||function(t){var e=[],a=Object.prototype.hasOwnProperty;for(var i in t)a.call(t,i)&&e.push(i);return e}},"3qsH":function(t,e){var a=1e3,i=60*a,n=60*i,r=24*n,s=7*r,o=365.25*r;function h(t,e,a,i){var n=e>=1.5*a;return Math.round(t/a)+" "+i+(n?"s":"")}t.exports=function(t,e){e=e||{};var l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var h=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*i;case"seconds":case"second":case"secs":case"sec":case"s":return h*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}(t);if("number"===l&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=r)return h(t,e,r,"day");if(e>=n)return h(t,e,n,"hour");if(e>=i)return h(t,e,i,"minute");if(e>=a)return h(t,e,a,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=r)return Math.round(t/r)+"d";if(e>=n)return Math.round(t/n)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=a)return Math.round(t/a)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"4ThM":function(t,e,a){var i=a("sib1")("socket.io-parser"),n=a("qjVX"),r=a("CdYZ"),s=a("IMZa"),o=a("sVLd");function h(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=h,e.Decoder=c;var l=e.ERROR+'"encode error"';function u(t){var a=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(a+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(a+=t.nsp+","),null!=t.id&&(a+=t.id),null!=t.data){var n=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===n)return l;a+=n}return i("encoded %j as %s",t,a),a}function c(){this.reconstructor=null}function f(t){this.reconPack=t,this.buffers=[]}function C(t){return{type:e.ERROR,data:"parser error: "+t}}h.prototype.encode=function(t,a){(i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){r.removeBlobs(t,function(t){var a=r.deconstructPacket(t),i=u(a.packet),n=a.buffers;n.unshift(i),e(n)})}(t,a):a([u(t)])},n(c.prototype),c.prototype.add=function(t){var a;if("string"==typeof t)a=function(t){var a=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return C("unknown packet type "+n.type);if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var r="";"-"!==t.charAt(++a)&&(r+=t.charAt(a),a!=t.length););if(r!=Number(r)||"-"!==t.charAt(a))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(a+1))for(n.nsp="";++a;){var o=t.charAt(a);if(","===o)break;if(n.nsp+=o,a===t.length)break}else n.nsp="/";var h=t.charAt(a+1);if(""!==h&&Number(h)==h){for(n.id="";++a;){var o=t.charAt(a);if(null==o||Number(o)!=o){--a;break}if(n.id+=t.charAt(a),a===t.length)break}n.id=Number(n.id)}if(t.charAt(++a)){var l=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(a)),u=!1!==l&&(n.type===e.ERROR||s(l));if(!u)return C("invalid payload");n.data=l}return i("decoded %s as %j",t,n),n}(t),e.BINARY_EVENT===a.type||e.BINARY_ACK===a.type?(this.reconstructor=new f(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a);else{if(!o(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(a=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",a))}},c.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},"4ptk":function(t,e,a){t.exports=function(t){function e(t){let e=0;for(let a=0;a<t.length;a++)e=(e<<5)-e+t.charCodeAt(a),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let a;function s(...t){if(!s.enabled)return;const e=s,n=Number(new Date),r=n-(a||n);e.diff=r,e.prev=a,e.curr=n,a=n,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(a,n)=>{if("%%"===a)return a;o++;const r=i.formatters[n];if("function"==typeof r){const i=t[o];a=r.call(e,i),t.splice(o,1),o--}return a}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return s.namespace=t,s.enabled=i.enabled(t),s.useColors=i.useColors(),s.color=e(t),s.destroy=n,s.extend=r,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function n(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,e){const a=i(this.namespace+(void 0===e?":":e)+t);return a.log=this.log,a}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const a=("string"==typeof t?t:"").split(/[\s,]+/),n=a.length;for(e=0;e<n;e++)a[e]&&("-"===(t=a[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,a;for(e=0,a=i.skips.length;e<a;e++)if(i.skips[e].test(t))return!1;for(e=0,a=i.names.length;e<a;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=a("3qsH"),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},"5+9/":function(t,e,a){var i=a("ZOjo"),n=a("gVZZ"),r=a("ElvI"),s=a("QamB"),o=a("9rXv"),h=a("ARv7")("engine.io-client:polling");t.exports=u;var l=null!=new(a("P2cu"))({xdomain:!1}).responseType;function u(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),i.call(this,t)}s(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(t){var e=this;function a(){h("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(h("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){h("pre-pause polling complete"),--i||a()})),this.writable||(h("we are currently writing - waiting to pause"),i++,this.once("drain",function(){h("pre-pause writing complete"),--i||a()}))}else a()},u.prototype.poll=function(){h("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(t){var e=this;h("polling got data %s",t);r.decodePayload(t,this.socket.binaryType,function(t,a,i){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():h('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var t=this;function e(){h("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(h("transport open - closing"),e()):(h("transport not open - deferring close"),this.once("open",e))},u.prototype.write=function(t){var e=this;this.writable=!1;var a=function(){e.writable=!0,e.emit("drain")};r.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,a)})},u.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",a="";return!1!==this.timestampRequests&&(t[this.timestampParam]=o()),this.supportsBinary||t.sid||(t.b64=1),t=n.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(a=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+a+this.path+t}},"5+KW":function(t,e,a){(function(e){var i=a("w9ur"),n=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);t.exports=function t(a){if(!a||"object"!=typeof a)return!1;if(i(a)){for(var n=0,o=a.length;n<o;n++)if(t(a[n]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(a)||"function"==typeof ArrayBuffer&&a instanceof ArrayBuffer||r&&a instanceof Blob||s&&a instanceof File)return!0;if(a.toJSON&&"function"==typeof a.toJSON&&1===arguments.length)return t(a.toJSON(),!0);for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)&&t(a[h]))return!0;return!1}}).call(e,a("EuP9").Buffer)},"6RrG":function(t,e){var a=1e3,i=60*a,n=60*i,r=24*n,s=7*r,o=365.25*r;function h(t,e,a,i){var n=e>=1.5*a;return Math.round(t/a)+" "+i+(n?"s":"")}t.exports=function(t,e){e=e||{};var l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var h=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*i;case"seconds":case"second":case"secs":case"sec":case"s":return h*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}(t);if("number"===l&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=r)return h(t,e,r,"day");if(e>=n)return h(t,e,n,"hour");if(e>=i)return h(t,e,i,"minute");if(e>=a)return h(t,e,a,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=r)return Math.round(t/r)+"d";if(e>=n)return Math.round(t/n)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=a)return Math.round(t/a)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"6mly":function(t,e){var a=void 0!==a?a:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),n=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),r=a&&a.prototype.append&&a.prototype.getBlob;function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var a=new Uint8Array(t.byteLength);a.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=a.buffer}return e}return t})}function o(t,e){e=e||{};var i=new a;return s(t).forEach(function(t){i.append(t)}),e.type?i.getBlob(e.type):i.getBlob()}function h(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(o.prototype=Blob.prototype,h.prototype=Blob.prototype),t.exports=i?n?Blob:h:r?o:void 0},"7+uW":function(t,e,a){"use strict";(function(t){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var a=Object.freeze({});function i(t){return void 0===t||null===t}function n(t){return void 0!==t&&null!==t}function r(t){return!0===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function o(t){return null!==t&&"object"==typeof t}var h=Object.prototype.toString;function l(t){return"[object Object]"===h.call(t)}function u(t){return"[object RegExp]"===h.call(t)}function c(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return n(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function C(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===h?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function D(t,e){for(var a=Object.create(null),i=t.split(","),n=0;n<i.length;n++)a[i[n]]=!0;return e?function(t){return a[t.toLowerCase()]}:function(t){return a[t]}}var p=D("slot,component",!0),m=D("key,ref,slot,slot-scope,is");function v(t,e){if(t.length){var a=t.indexOf(e);if(a>-1)return t.splice(a,1)}}var S=Object.prototype.hasOwnProperty;function g(t,e){return S.call(t,e)}function I(t){var e=Object.create(null);return function(a){return e[a]||(e[a]=t(a))}}var A=/-(\w)/g,y=I(function(t){return t.replace(A,function(t,e){return e?e.toUpperCase():""})}),T=I(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),F=/\B([A-Z])/g,E=I(function(t){return t.replace(F,"-$1").toLowerCase()});var L=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function a(a){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,a):t.call(e)}return a._length=t.length,a};function x(t,e){e=e||0;for(var a=t.length-e,i=new Array(a);a--;)i[a]=t[a+e];return i}function N(t,e){for(var a in e)t[a]=e[a];return t}function O(t){for(var e={},a=0;a<t.length;a++)t[a]&&N(e,t[a]);return e}function M(t,e,a){}var w=function(t,e,a){return!1},R=function(t){return t};function P(t,e){if(t===e)return!0;var a=o(t),i=o(e);if(!a||!i)return!a&&!i&&String(t)===String(e);try{var n=Array.isArray(t),r=Array.isArray(e);if(n&&r)return t.length===e.length&&t.every(function(t,a){return P(t,e[a])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(n||r)return!1;var s=Object.keys(t),h=Object.keys(e);return s.length===h.length&&s.every(function(a){return P(t[a],e[a])})}catch(t){return!1}}function b(t,e){for(var a=0;a<t.length;a++)if(P(t[a],e))return a;return-1}function B(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var _="data-server-rendered",H=["component","directive","filter"],k=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:w,isReservedAttr:w,isUnknownElement:w,getTagNamespace:M,parsePlatformTagName:R,mustUseProp:w,async:!0,_lifecycleHooks:k},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Y(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function U(t,e,a,i){Object.defineProperty(t,e,{value:a,enumerable:!!i,writable:!0,configurable:!0})}var W=new RegExp("[^"+G.source+".$_\\d]");var X,J="__proto__"in{},K="undefined"!=typeof window,q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,z=q&&WXEnvironment.platform.toLowerCase(),j=K&&window.navigator.userAgent.toLowerCase(),$=j&&/msie|trident/.test(j),Z=j&&j.indexOf("msie 9.0")>0,Q=j&&j.indexOf("edge/")>0,tt=(j&&j.indexOf("android"),j&&/iphone|ipad|ipod|ios/.test(j)||"ios"===z),et=(j&&/chrome\/\d+/.test(j),j&&/phantomjs/.test(j),j&&j.match(/firefox\/(\d+)/)),at={}.watch,it=!1;if(K)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,nt)}catch(t){}var rt=function(){return void 0===X&&(X=!K&&!q&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),X},st=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var ht,lt="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);ht="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ut=M,ct=0,ft=function(){this.id=ct++,this.subs=[]};ft.prototype.addSub=function(t){this.subs.push(t)},ft.prototype.removeSub=function(t){v(this.subs,t)},ft.prototype.depend=function(){ft.target&&ft.target.addDep(this)},ft.prototype.notify=function(){var t=this.subs.slice();for(var e=0,a=t.length;e<a;e++)t[e].update()},ft.target=null;var Ct=[];function dt(t){Ct.push(t),ft.target=t}function Dt(){Ct.pop(),ft.target=Ct[Ct.length-1]}var pt=function(t,e,a,i,n,r,s,o){this.tag=t,this.data=e,this.children=a,this.text=i,this.elm=n,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},mt={child:{configurable:!0}};mt.child.get=function(){return this.componentInstance},Object.defineProperties(pt.prototype,mt);var vt=function(t){void 0===t&&(t="");var e=new pt;return e.text=t,e.isComment=!0,e};function St(t){return new pt(void 0,void 0,void 0,String(t))}function gt(t){var e=new pt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var It=Array.prototype,At=Object.create(It);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=It[t];U(At,t,function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];var n,r=e.apply(this,a),s=this.__ob__;switch(t){case"push":case"unshift":n=a;break;case"splice":n=a.slice(2)}return n&&s.observeArray(n),s.dep.notify(),r})});var yt=Object.getOwnPropertyNames(At),Tt=!0;function Ft(t){Tt=t}var Et=function(t){var e;this.value=t,this.dep=new ft,this.vmCount=0,U(t,"__ob__",this),Array.isArray(t)?(J?(e=At,t.__proto__=e):function(t,e,a){for(var i=0,n=a.length;i<n;i++){var r=a[i];U(t,r,e[r])}}(t,At,yt),this.observeArray(t)):this.walk(t)};function Lt(t,e){var a;if(o(t)&&!(t instanceof pt))return g(t,"__ob__")&&t.__ob__ instanceof Et?a=t.__ob__:Tt&&!rt()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(a=new Et(t)),e&&a&&a.vmCount++,a}function xt(t,e,a,i,n){var r=new ft,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var o=s&&s.get,h=s&&s.set;o&&!h||2!==arguments.length||(a=t[e]);var l=!n&&Lt(a);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):a;return ft.target&&(r.depend(),l&&(l.dep.depend(),Array.isArray(e)&&function t(e){for(var a=void 0,i=0,n=e.length;i<n;i++)(a=e[i])&&a.__ob__&&a.__ob__.dep.depend(),Array.isArray(a)&&t(a)}(e))),e},set:function(e){var i=o?o.call(t):a;e===i||e!=e&&i!=i||o&&!h||(h?h.call(t,e):a=e,l=!n&&Lt(e),r.notify())}})}}function Nt(t,e,a){if(Array.isArray(t)&&c(e))return t.length=Math.max(t.length,e),t.splice(e,1,a),a;if(e in t&&!(e in Object.prototype))return t[e]=a,a;var i=t.__ob__;return t._isVue||i&&i.vmCount?a:i?(xt(i.value,e,a),i.dep.notify(),a):(t[e]=a,a)}function Ot(t,e){if(Array.isArray(t)&&c(e))t.splice(e,1);else{var a=t.__ob__;t._isVue||a&&a.vmCount||g(t,e)&&(delete t[e],a&&a.dep.notify())}}Et.prototype.walk=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)xt(t,e[a])},Et.prototype.observeArray=function(t){for(var e=0,a=t.length;e<a;e++)Lt(t[e])};var Mt=V.optionMergeStrategies;function wt(t,e){if(!e)return t;for(var a,i,n,r=lt?Reflect.ownKeys(e):Object.keys(e),s=0;s<r.length;s++)"__ob__"!==(a=r[s])&&(i=t[a],n=e[a],g(t,a)?i!==n&&l(i)&&l(n)&&wt(i,n):Nt(t,a,n));return t}function Rt(t,e,a){return a?function(){var i="function"==typeof e?e.call(a,a):e,n="function"==typeof t?t.call(a,a):t;return i?wt(i,n):n}:e?t?function(){return wt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Pt(t,e){var a=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return a?function(t){for(var e=[],a=0;a<t.length;a++)-1===e.indexOf(t[a])&&e.push(t[a]);return e}(a):a}function bt(t,e,a,i){var n=Object.create(t||null);return e?N(n,e):n}Mt.data=function(t,e,a){return a?Rt(t,e,a):e&&"function"!=typeof e?t:Rt(t,e)},k.forEach(function(t){Mt[t]=Pt}),H.forEach(function(t){Mt[t+"s"]=bt}),Mt.watch=function(t,e,a,i){if(t===at&&(t=void 0),e===at&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var n={};for(var r in N(n,t),e){var s=n[r],o=e[r];s&&!Array.isArray(s)&&(s=[s]),n[r]=s?s.concat(o):Array.isArray(o)?o:[o]}return n},Mt.props=Mt.methods=Mt.inject=Mt.computed=function(t,e,a,i){if(!t)return e;var n=Object.create(null);return N(n,t),e&&N(n,e),n},Mt.provide=Rt;var Bt=function(t,e){return void 0===e?t:e};function _t(t,e,a){if("function"==typeof e&&(e=e.options),function(t,e){var a=t.props;if(a){var i,n,r={};if(Array.isArray(a))for(i=a.length;i--;)"string"==typeof(n=a[i])&&(r[y(n)]={type:null});else if(l(a))for(var s in a)n=a[s],r[y(s)]=l(n)?n:{type:n};t.props=r}}(e),function(t,e){var a=t.inject;if(a){var i=t.inject={};if(Array.isArray(a))for(var n=0;n<a.length;n++)i[a[n]]={from:a[n]};else if(l(a))for(var r in a){var s=a[r];i[r]=l(s)?N({from:r},s):{from:s}}}}(e),function(t){var e=t.directives;if(e)for(var a in e){var i=e[a];"function"==typeof i&&(e[a]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=_t(t,e.extends,a)),e.mixins))for(var i=0,n=e.mixins.length;i<n;i++)t=_t(t,e.mixins[i],a);var r,s={};for(r in t)o(r);for(r in e)g(t,r)||o(r);function o(i){var n=Mt[i]||Bt;s[i]=n(t[i],e[i],a,i)}return s}function Ht(t,e,a,i){if("string"==typeof a){var n=t[e];if(g(n,a))return n[a];var r=y(a);if(g(n,r))return n[r];var s=T(r);return g(n,s)?n[s]:n[a]||n[r]||n[s]}}function kt(t,e,a,i){var n=e[t],r=!g(a,t),s=a[t],o=Yt(Boolean,n.type);if(o>-1)if(r&&!g(n,"default"))s=!1;else if(""===s||s===E(t)){var h=Yt(String,n.type);(h<0||o<h)&&(s=!0)}if(void 0===s){s=function(t,e,a){if(!g(e,"default"))return;var i=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[a]&&void 0!==t._props[a])return t._props[a];return"function"==typeof i&&"Function"!==Vt(e.type)?i.call(t):i}(i,n,t);var l=Tt;Ft(!0),Lt(s),Ft(l)}return s}function Vt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Gt(t,e){return Vt(t)===Vt(e)}function Yt(t,e){if(!Array.isArray(e))return Gt(e,t)?0:-1;for(var a=0,i=e.length;a<i;a++)if(Gt(e[a],t))return a;return-1}function Ut(t,e,a){dt();try{if(e)for(var i=e;i=i.$parent;){var n=i.$options.errorCaptured;if(n)for(var r=0;r<n.length;r++)try{if(!1===n[r].call(i,t,e,a))return}catch(t){Xt(t,i,"errorCaptured hook")}}Xt(t,e,a)}finally{Dt()}}function Wt(t,e,a,i,n){var r;try{(r=a?t.apply(e,a):t.call(e))&&!r._isVue&&f(r)&&!r._handled&&(r.catch(function(t){return Ut(t,i,n+" (Promise/async)")}),r._handled=!0)}catch(t){Ut(t,i,n)}return r}function Xt(t,e,a){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,a)}catch(e){e!==t&&Jt(e,null,"config.errorHandler")}Jt(t,e,a)}function Jt(t,e,a){if(!K&&!q||"undefined"==typeof console)throw t;console.error(t)}var Kt,qt=!1,zt=[],jt=!1;function $t(){jt=!1;var t=zt.slice(0);zt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&ot(Promise)){var Zt=Promise.resolve();Kt=function(){Zt.then($t),tt&&setTimeout(M)},qt=!0}else if($||"undefined"==typeof MutationObserver||!ot(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Kt="undefined"!=typeof setImmediate&&ot(setImmediate)?function(){setImmediate($t)}:function(){setTimeout($t,0)};else{var Qt=1,te=new MutationObserver($t),ee=document.createTextNode(String(Qt));te.observe(ee,{characterData:!0}),Kt=function(){Qt=(Qt+1)%2,ee.data=String(Qt)},qt=!0}function ae(t,e){var a;if(zt.push(function(){if(t)try{t.call(e)}catch(t){Ut(t,e,"nextTick")}else a&&a(e)}),jt||(jt=!0,Kt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){a=t})}var ie=new ht;function ne(t){!function t(e,a){var i,n;var r=Array.isArray(e);if(!r&&!o(e)||Object.isFrozen(e)||e instanceof pt)return;if(e.__ob__){var s=e.__ob__.dep.id;if(a.has(s))return;a.add(s)}if(r)for(i=e.length;i--;)t(e[i],a);else for(n=Object.keys(e),i=n.length;i--;)t(e[n[i]],a)}(t,ie),ie.clear()}var re=I(function(t){var e="&"===t.charAt(0),a="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=a?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:a,capture:i,passive:e}});function se(t,e){function a(){var t=arguments,i=a.fns;if(!Array.isArray(i))return Wt(i,null,arguments,e,"v-on handler");for(var n=i.slice(),r=0;r<n.length;r++)Wt(n[r],null,t,e,"v-on handler")}return a.fns=t,a}function oe(t,e,a,n,s,o){var h,l,u,c;for(h in t)l=t[h],u=e[h],c=re(h),i(l)||(i(u)?(i(l.fns)&&(l=t[h]=se(l,o)),r(c.once)&&(l=t[h]=s(c.name,l,c.capture)),a(c.name,l,c.capture,c.passive,c.params)):l!==u&&(u.fns=l,t[h]=u));for(h in e)i(t[h])&&n((c=re(h)).name,e[h],c.capture)}function he(t,e,a){var s;t instanceof pt&&(t=t.data.hook||(t.data.hook={}));var o=t[e];function h(){a.apply(this,arguments),v(s.fns,h)}i(o)?s=se([h]):n(o.fns)&&r(o.merged)?(s=o).fns.push(h):s=se([o,h]),s.merged=!0,t[e]=s}function le(t,e,a,i,r){if(n(e)){if(g(e,a))return t[a]=e[a],r||delete e[a],!0;if(g(e,i))return t[a]=e[i],r||delete e[i],!0}return!1}function ue(t){return s(t)?[St(t)]:Array.isArray(t)?function t(e,a){var o=[];var h,l,u,c;for(h=0;h<e.length;h++)i(l=e[h])||"boolean"==typeof l||(u=o.length-1,c=o[u],Array.isArray(l)?l.length>0&&(ce((l=t(l,(a||"")+"_"+h))[0])&&ce(c)&&(o[u]=St(c.text+l[0].text),l.shift()),o.push.apply(o,l)):s(l)?ce(c)?o[u]=St(c.text+l):""!==l&&o.push(St(l)):ce(l)&&ce(c)?o[u]=St(c.text+l.text):(r(e._isVList)&&n(l.tag)&&i(l.key)&&n(a)&&(l.key="__vlist"+a+"_"+h+"__"),o.push(l)));return o}(t):void 0}function ce(t){return n(t)&&n(t.text)&&!1===t.isComment}function fe(t,e){if(t){for(var a=Object.create(null),i=lt?Reflect.ownKeys(t):Object.keys(t),n=0;n<i.length;n++){var r=i[n];if("__ob__"!==r){for(var s=t[r].from,o=e;o;){if(o._provided&&g(o._provided,s)){a[r]=o._provided[s];break}o=o.$parent}if(!o)if("default"in t[r]){var h=t[r].default;a[r]="function"==typeof h?h.call(e):h}else 0}}return a}}function Ce(t,e){if(!t||!t.length)return{};for(var a={},i=0,n=t.length;i<n;i++){var r=t[i],s=r.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,r.context!==e&&r.fnContext!==e||!s||null==s.slot)(a.default||(a.default=[])).push(r);else{var o=s.slot,h=a[o]||(a[o]=[]);"template"===r.tag?h.push.apply(h,r.children||[]):h.push(r)}}for(var l in a)a[l].every(de)&&delete a[l];return a}function de(t){return t.isComment&&!t.asyncFactory||" "===t.text}function De(t,e,i){var n,r=Object.keys(e).length>0,s=t?!!t.$stable:!r,o=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&i&&i!==a&&o===i.$key&&!r&&!i.$hasNormal)return i;for(var h in n={},t)t[h]&&"$"!==h[0]&&(n[h]=pe(e,h,t[h]))}else n={};for(var l in e)l in n||(n[l]=me(e,l));return t&&Object.isExtensible(t)&&(t._normalized=n),U(n,"$stable",s),U(n,"$key",o),U(n,"$hasNormal",r),n}function pe(t,e,a){var i=function(){var t=arguments.length?a.apply(null,arguments):a({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:ue(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return a.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function me(t,e){return function(){return t[e]}}function ve(t,e){var a,i,r,s,h;if(Array.isArray(t)||"string"==typeof t)for(a=new Array(t.length),i=0,r=t.length;i<r;i++)a[i]=e(t[i],i);else if("number"==typeof t)for(a=new Array(t),i=0;i<t;i++)a[i]=e(i+1,i);else if(o(t))if(lt&&t[Symbol.iterator]){a=[];for(var l=t[Symbol.iterator](),u=l.next();!u.done;)a.push(e(u.value,a.length)),u=l.next()}else for(s=Object.keys(t),a=new Array(s.length),i=0,r=s.length;i<r;i++)h=s[i],a[i]=e(t[h],h,i);return n(a)||(a=[]),a._isVList=!0,a}function Se(t,e,a,i){var n,r=this.$scopedSlots[t];r?(a=a||{},i&&(a=N(N({},i),a)),n=r(a)||e):n=this.$slots[t]||e;var s=a&&a.slot;return s?this.$createElement("template",{slot:s},n):n}function ge(t){return Ht(this.$options,"filters",t)||R}function Ie(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Ae(t,e,a,i,n){var r=V.keyCodes[e]||a;return n&&i&&!V.keyCodes[e]?Ie(n,i):r?Ie(r,t):i?E(i)!==e:void 0}function ye(t,e,a,i,n){if(a)if(o(a)){var r;Array.isArray(a)&&(a=O(a));var s=function(s){if("class"===s||"style"===s||m(s))r=t;else{var o=t.attrs&&t.attrs.type;r=i||V.mustUseProp(e,o,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var h=y(s),l=E(s);h in r||l in r||(r[s]=a[s],n&&((t.on||(t.on={}))["update:"+s]=function(t){a[s]=t}))};for(var h in a)s(h)}else;return t}function Te(t,e){var a=this._staticTrees||(this._staticTrees=[]),i=a[t];return i&&!e?i:(Ee(i=a[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i)}function Fe(t,e,a){return Ee(t,"__once__"+e+(a?"_"+a:""),!0),t}function Ee(t,e,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Le(t[i],e+"_"+i,a);else Le(t,e,a)}function Le(t,e,a){t.isStatic=!0,t.key=e,t.isOnce=a}function xe(t,e){if(e)if(l(e)){var a=t.on=t.on?N({},t.on):{};for(var i in e){var n=a[i],r=e[i];a[i]=n?[].concat(n,r):r}}else;return t}function Ne(t,e,a,i){e=e||{$stable:!a};for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?Ne(r,e,a):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return i&&(e.$key=i),e}function Oe(t,e){for(var a=0;a<e.length;a+=2){var i=e[a];"string"==typeof i&&i&&(t[e[a]]=e[a+1])}return t}function Me(t,e){return"string"==typeof t?e+t:t}function we(t){t._o=Fe,t._n=d,t._s=C,t._l=ve,t._t=Se,t._q=P,t._i=b,t._m=Te,t._f=ge,t._k=Ae,t._b=ye,t._v=St,t._e=vt,t._u=Ne,t._g=xe,t._d=Oe,t._p=Me}function Re(t,e,i,n,s){var o,h=this,l=s.options;g(n,"_uid")?(o=Object.create(n))._original=n:(o=n,n=n._original);var u=r(l._compiled),c=!u;this.data=t,this.props=e,this.children=i,this.parent=n,this.listeners=t.on||a,this.injections=fe(l.inject,n),this.slots=function(){return h.$slots||De(t.scopedSlots,h.$slots=Ce(i,n)),h.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return De(t.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=De(t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,a,i){var r=Ye(o,t,e,a,i,c);return r&&!Array.isArray(r)&&(r.fnScopeId=l._scopeId,r.fnContext=n),r}:this._c=function(t,e,a,i){return Ye(o,t,e,a,i,c)}}function Pe(t,e,a,i,n){var r=gt(t);return r.fnContext=a,r.fnOptions=i,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function be(t,e){for(var a in e)t[y(a)]=e[a]}we(Re.prototype);var Be={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var a=t;Be.prepatch(a,a)}else{(t.componentInstance=function(t,e){var a={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;n(i)&&(a.render=i.render,a.staticRenderFns=i.staticRenderFns);return new t.componentOptions.Ctor(a)}(t,Ze)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,n,r){0;var s=n.data.scopedSlots,o=t.$scopedSlots,h=!!(s&&!s.$stable||o!==a&&!o.$stable||s&&t.$scopedSlots.$key!==s.$key),l=!!(r||t.$options._renderChildren||h);t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n);if(t.$options._renderChildren=r,t.$attrs=n.data.attrs||a,t.$listeners=i||a,e&&t.$options.props){Ft(!1);for(var u=t._props,c=t.$options._propKeys||[],f=0;f<c.length;f++){var C=c[f],d=t.$options.props;u[C]=kt(C,d,e,t)}Ft(!0),t.$options.propsData=e}i=i||a;var D=t.$options._parentListeners;t.$options._parentListeners=i,$e(t,i,D),l&&(t.$slots=Ce(r,n.context),t.$forceUpdate());0}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e,a=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,aa(i,"mounted")),t.data.keepAlive&&(a._isMounted?((e=i)._inactive=!1,na.push(e)):ea(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,a){if(a&&(e._directInactive=!0,ta(e)))return;if(!e._inactive){e._inactive=!0;for(var i=0;i<e.$children.length;i++)t(e.$children[i]);aa(e,"deactivated")}}(e,!0):e.$destroy())}},_e=Object.keys(Be);function He(t,e,s,h,l){if(!i(t)){var u=s.$options._base;if(o(t)&&(t=u.extend(t)),"function"==typeof t){var c;if(i(t.cid)&&void 0===(t=function(t,e){if(r(t.error)&&n(t.errorComp))return t.errorComp;if(n(t.resolved))return t.resolved;var a=We;a&&n(t.owners)&&-1===t.owners.indexOf(a)&&t.owners.push(a);if(r(t.loading)&&n(t.loadingComp))return t.loadingComp;if(a&&!n(t.owners)){var s=t.owners=[a],h=!0,l=null,u=null;a.$on("hook:destroyed",function(){return v(s,a)});var c=function(t){for(var e=0,a=s.length;e<a;e++)s[e].$forceUpdate();t&&(s.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},C=B(function(a){t.resolved=Xe(a,e),h?s.length=0:c(!0)}),d=B(function(e){n(t.errorComp)&&(t.error=!0,c(!0))}),D=t(C,d);return o(D)&&(f(D)?i(t.resolved)&&D.then(C,d):f(D.component)&&(D.component.then(C,d),n(D.error)&&(t.errorComp=Xe(D.error,e)),n(D.loading)&&(t.loadingComp=Xe(D.loading,e),0===D.delay?t.loading=!0:l=setTimeout(function(){l=null,i(t.resolved)&&i(t.error)&&(t.loading=!0,c(!1))},D.delay||200)),n(D.timeout)&&(u=setTimeout(function(){u=null,i(t.resolved)&&d(null)},D.timeout)))),h=!1,t.loading?t.loadingComp:t.resolved}}(c=t,u)))return function(t,e,a,i,n){var r=vt();return r.asyncFactory=t,r.asyncMeta={data:e,context:a,children:i,tag:n},r}(c,e,s,h,l);e=e||{},Ta(t),n(e.model)&&function(t,e){var a=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[a]=e.model.value;var r=e.on||(e.on={}),s=r[i],o=e.model.callback;n(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(r[i]=[o].concat(s)):r[i]=o}(t.options,e);var C=function(t,e,a){var r=e.options.props;if(!i(r)){var s={},o=t.attrs,h=t.props;if(n(o)||n(h))for(var l in r){var u=E(l);le(s,h,l,u,!0)||le(s,o,l,u,!1)}return s}}(e,t);if(r(t.options.functional))return function(t,e,i,r,s){var o=t.options,h={},l=o.props;if(n(l))for(var u in l)h[u]=kt(u,l,e||a);else n(i.attrs)&&be(h,i.attrs),n(i.props)&&be(h,i.props);var c=new Re(i,h,s,r,t),f=o.render.call(null,c._c,c);if(f instanceof pt)return Pe(f,i,c.parent,o);if(Array.isArray(f)){for(var C=ue(f)||[],d=new Array(C.length),D=0;D<C.length;D++)d[D]=Pe(C[D],i,c.parent,o);return d}}(t,C,e,s,h);var d=e.on;if(e.on=e.nativeOn,r(t.options.abstract)){var D=e.slot;e={},D&&(e.slot=D)}!function(t){for(var e=t.hook||(t.hook={}),a=0;a<_e.length;a++){var i=_e[a],n=e[i],r=Be[i];n===r||n&&n._merged||(e[i]=n?ke(r,n):r)}}(e);var p=t.options.name||l;return new pt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,s,{Ctor:t,propsData:C,listeners:d,tag:l,children:h},c)}}}function ke(t,e){var a=function(a,i){t(a,i),e(a,i)};return a._merged=!0,a}var Ve=1,Ge=2;function Ye(t,e,a,h,l,u){return(Array.isArray(a)||s(a))&&(l=h,h=a,a=void 0),r(u)&&(l=Ge),function(t,e,a,s,h){if(n(a)&&n(a.__ob__))return vt();n(a)&&n(a.is)&&(e=a.is);if(!e)return vt();0;Array.isArray(s)&&"function"==typeof s[0]&&((a=a||{}).scopedSlots={default:s[0]},s.length=0);h===Ge?s=ue(s):h===Ve&&(s=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(s));var l,u;if("string"==typeof e){var c;u=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),l=V.isReservedTag(e)?new pt(V.parsePlatformTagName(e),a,s,void 0,void 0,t):a&&a.pre||!n(c=Ht(t.$options,"components",e))?new pt(e,a,s,void 0,void 0,t):He(c,a,t,s,e)}else l=He(e,a,t,s);return Array.isArray(l)?l:n(l)?(n(u)&&function t(e,a,s){e.ns=a;"foreignObject"===e.tag&&(a=void 0,s=!0);if(n(e.children))for(var o=0,h=e.children.length;o<h;o++){var l=e.children[o];n(l.tag)&&(i(l.ns)||r(s)&&"svg"!==l.tag)&&t(l,a,s)}}(l,u),n(a)&&function(t){o(t.style)&&ne(t.style);o(t.class)&&ne(t.class)}(a),l):vt()}(t,e,a,h,l)}var Ue,We=null;function Xe(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),o(t)?e.extend(t):t}function Je(t){return t.isComment&&t.asyncFactory}function Ke(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var a=t[e];if(n(a)&&(n(a.componentOptions)||Je(a)))return a}}function qe(t,e){Ue.$on(t,e)}function ze(t,e){Ue.$off(t,e)}function je(t,e){var a=Ue;return function i(){null!==e.apply(null,arguments)&&a.$off(t,i)}}function $e(t,e,a){Ue=t,oe(e,a||{},qe,ze,je,t),Ue=void 0}var Ze=null;function Qe(t){var e=Ze;return Ze=t,function(){Ze=e}}function ta(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function ea(t,e){if(e){if(t._directInactive=!1,ta(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var a=0;a<t.$children.length;a++)ea(t.$children[a]);aa(t,"activated")}}function aa(t,e){dt();var a=t.$options[e],i=e+" hook";if(a)for(var n=0,r=a.length;n<r;n++)Wt(a[n],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),Dt()}var ia=[],na=[],ra={},sa=!1,oa=!1,ha=0;var la=0,ua=Date.now;if(K&&!$){var ca=window.performance;ca&&"function"==typeof ca.now&&ua()>document.createEvent("Event").timeStamp&&(ua=function(){return ca.now()})}function fa(){var t,e;for(la=ua(),oa=!0,ia.sort(function(t,e){return t.id-e.id}),ha=0;ha<ia.length;ha++)(t=ia[ha]).before&&t.before(),e=t.id,ra[e]=null,t.run();var a=na.slice(),i=ia.slice();ha=ia.length=na.length=0,ra={},sa=oa=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,ea(t[e],!0)}(a),function(t){var e=t.length;for(;e--;){var a=t[e],i=a.vm;i._watcher===a&&i._isMounted&&!i._isDestroyed&&aa(i,"updated")}}(i),st&&V.devtools&&st.emit("flush")}var Ca=0,da=function(t,e,a,i,n){this.vm=t,n&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=a,this.id=++Ca,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!W.test(t)){var e=t.split(".");return function(t){for(var a=0;a<e.length;a++){if(!t)return;t=t[e[a]]}return t}}}(e),this.getter||(this.getter=M)),this.value=this.lazy?void 0:this.get()};da.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ut(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ne(t),Dt(),this.cleanupDeps()}return t},da.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},da.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var a=this.depIds;this.depIds=this.newDepIds,this.newDepIds=a,this.newDepIds.clear(),a=this.deps,this.deps=this.newDeps,this.newDeps=a,this.newDeps.length=0},da.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==ra[e]){if(ra[e]=!0,oa){for(var a=ia.length-1;a>ha&&ia[a].id>t.id;)a--;ia.splice(a+1,0,t)}else ia.push(t);sa||(sa=!0,ae(fa))}}(this)},da.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||o(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ut(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},da.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},da.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},da.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Da={enumerable:!0,configurable:!0,get:M,set:M};function pa(t,e,a){Da.get=function(){return this[e][a]},Da.set=function(t){this[e][a]=t},Object.defineProperty(t,a,Da)}function ma(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var a=t.$options.propsData||{},i=t._props={},n=t.$options._propKeys=[],r=!t.$parent;r||Ft(!1);var s=function(r){n.push(r);var s=kt(r,e,a,t);xt(i,r,s),r in t||pa(t,"_props",r)};for(var o in e)s(o);Ft(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var a in e)t[a]="function"!=typeof e[a]?M:L(e[a],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;l(e=t._data="function"==typeof e?function(t,e){dt();try{return t.call(e,e)}catch(t){return Ut(t,e,"data()"),{}}finally{Dt()}}(e,t):e||{})||(e={});var a=Object.keys(e),i=t.$options.props,n=(t.$options.methods,a.length);for(;n--;){var r=a[n];0,i&&g(i,r)||Y(r)||pa(t,"_data",r)}Lt(e,!0)}(t):Lt(t._data={},!0),e.computed&&function(t,e){var a=t._computedWatchers=Object.create(null),i=rt();for(var n in e){var r=e[n],s="function"==typeof r?r:r.get;0,i||(a[n]=new da(t,s||M,M,va)),n in t||Sa(t,n,r)}}(t,e.computed),e.watch&&e.watch!==at&&function(t,e){for(var a in e){var i=e[a];if(Array.isArray(i))for(var n=0;n<i.length;n++)Aa(t,a,i[n]);else Aa(t,a,i)}}(t,e.watch)}var va={lazy:!0};function Sa(t,e,a){var i=!rt();"function"==typeof a?(Da.get=i?ga(e):Ia(a),Da.set=M):(Da.get=a.get?i&&!1!==a.cache?ga(e):Ia(a.get):M,Da.set=a.set||M),Object.defineProperty(t,e,Da)}function ga(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ft.target&&e.depend(),e.value}}function Ia(t){return function(){return t.call(this,this)}}function Aa(t,e,a,i){return l(a)&&(i=a,a=a.handler),"string"==typeof a&&(a=t[a]),t.$watch(e,a,i)}var ya=0;function Ta(t){var e=t.options;if(t.super){var a=Ta(t.super);if(a!==t.superOptions){t.superOptions=a;var i=function(t){var e,a=t.options,i=t.sealedOptions;for(var n in a)a[n]!==i[n]&&(e||(e={}),e[n]=a[n]);return e}(t);i&&N(t.extendOptions,i),(e=t.options=_t(a,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Fa(t){this._init(t)}function Ea(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var a=this,i=a.cid,n=t._Ctor||(t._Ctor={});if(n[i])return n[i];var r=t.name||a.options.name;var s=function(t){this._init(t)};return(s.prototype=Object.create(a.prototype)).constructor=s,s.cid=e++,s.options=_t(a.options,t),s.super=a,s.options.props&&function(t){var e=t.options.props;for(var a in e)pa(t.prototype,"_props",a)}(s),s.options.computed&&function(t){var e=t.options.computed;for(var a in e)Sa(t.prototype,a,e[a])}(s),s.extend=a.extend,s.mixin=a.mixin,s.use=a.use,H.forEach(function(t){s[t]=a[t]}),r&&(s.options.components[r]=s),s.superOptions=a.options,s.extendOptions=t,s.sealedOptions=N({},s.options),n[i]=s,s}}function La(t){return t&&(t.Ctor.options.name||t.tag)}function xa(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!u(t)&&t.test(e)}function Na(t,e){var a=t.cache,i=t.keys,n=t._vnode;for(var r in a){var s=a[r];if(s){var o=La(s.componentOptions);o&&!e(o)&&Oa(a,r,i,n)}}}function Oa(t,e,a,i){var n=t[e];!n||i&&n.tag===i.tag||n.componentInstance.$destroy(),t[e]=null,v(a,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=ya++,e._isVue=!0,t&&t._isComponent?function(t,e){var a=t.$options=Object.create(t.constructor.options),i=e._parentVnode;a.parent=e.parent,a._parentVnode=i;var n=i.componentOptions;a.propsData=n.propsData,a._parentListeners=n.listeners,a._renderChildren=n.children,a._componentTag=n.tag,e.render&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=_t(Ta(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,a=e.parent;if(a&&!e.abstract){for(;a.$options.abstract&&a.$parent;)a=a.$parent;a.$children.push(t)}t.$parent=a,t.$root=a?a.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&$e(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,n=i&&i.context;t.$slots=Ce(e._renderChildren,n),t.$scopedSlots=a,t._c=function(e,a,i,n){return Ye(t,e,a,i,n,!1)},t.$createElement=function(e,a,i,n){return Ye(t,e,a,i,n,!0)};var r=i&&i.data;xt(t,"$attrs",r&&r.attrs||a,null,!0),xt(t,"$listeners",e._parentListeners||a,null,!0)}(e),aa(e,"beforeCreate"),function(t){var e=fe(t.$options.inject,t);e&&(Ft(!1),Object.keys(e).forEach(function(a){xt(t,a,e[a])}),Ft(!0))}(e),ma(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),aa(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Fa),function(t){var e={get:function(){return this._data}},a={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",a),t.prototype.$set=Nt,t.prototype.$delete=Ot,t.prototype.$watch=function(t,e,a){if(l(e))return Aa(this,t,e,a);(a=a||{}).user=!0;var i=new da(this,t,e,a);if(a.immediate)try{e.call(this,i.value)}catch(t){Ut(t,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Fa),function(t){var e=/^hook:/;t.prototype.$on=function(t,a){var i=this;if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.$on(t[n],a);else(i._events[t]||(i._events[t]=[])).push(a),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var a=this;function i(){a.$off(t,i),e.apply(a,arguments)}return i.fn=e,a.$on(t,i),a},t.prototype.$off=function(t,e){var a=this;if(!arguments.length)return a._events=Object.create(null),a;if(Array.isArray(t)){for(var i=0,n=t.length;i<n;i++)a.$off(t[i],e);return a}var r,s=a._events[t];if(!s)return a;if(!e)return a._events[t]=null,a;for(var o=s.length;o--;)if((r=s[o])===e||r.fn===e){s.splice(o,1);break}return a},t.prototype.$emit=function(t){var e=this,a=e._events[t];if(a){a=a.length>1?x(a):a;for(var i=x(arguments,1),n='event handler for "'+t+'"',r=0,s=a.length;r<s;r++)Wt(a[r],e,i,e,n)}return e}}(Fa),function(t){t.prototype._update=function(t,e){var a=this,i=a.$el,n=a._vnode,r=Qe(a);a._vnode=t,a.$el=n?a.__patch__(n,t):a.__patch__(a.$el,t,e,!1),r(),i&&(i.__vue__=null),a.$el&&(a.$el.__vue__=a),a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode&&(a.$parent.$el=a.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){aa(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||v(e.$children,t),t._watcher&&t._watcher.teardown();for(var a=t._watchers.length;a--;)t._watchers[a].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),aa(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Fa),function(t){we(t.prototype),t.prototype.$nextTick=function(t){return ae(t,this)},t.prototype._render=function(){var t,e=this,a=e.$options,i=a.render,n=a._parentVnode;n&&(e.$scopedSlots=De(n.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=n;try{We=e,t=i.call(e._renderProxy,e.$createElement)}catch(a){Ut(a,e,"render"),t=e._vnode}finally{We=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof pt||(t=vt()),t.parent=n,t}}(Fa);var Ma=[String,RegExp,Array],wa={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ma,exclude:Ma,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Oa(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){Na(t,function(t){return xa(e,t)})}),this.$watch("exclude",function(e){Na(t,function(t){return!xa(e,t)})})},render:function(){var t=this.$slots.default,e=Ke(t),a=e&&e.componentOptions;if(a){var i=La(a),n=this.include,r=this.exclude;if(n&&(!i||!xa(n,i))||r&&i&&xa(r,i))return e;var s=this.cache,o=this.keys,h=null==e.key?a.Ctor.cid+(a.tag?"::"+a.tag:""):e.key;s[h]?(e.componentInstance=s[h].componentInstance,v(o,h),o.push(h)):(s[h]=e,o.push(h),this.max&&o.length>parseInt(this.max)&&Oa(s,o[0],o,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:ut,extend:N,mergeOptions:_t,defineReactive:xt},t.set=Nt,t.delete=Ot,t.nextTick=ae,t.observable=function(t){return Lt(t),t},t.options=Object.create(null),H.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,N(t.options.components,wa),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var a=x(arguments,1);return a.unshift(this),"function"==typeof t.install?t.install.apply(t,a):"function"==typeof t&&t.apply(null,a),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=_t(this.options,t),this}}(t),Ea(t),function(t){H.forEach(function(e){t[e]=function(t,a){return a?("component"===e&&l(a)&&(a.name=a.name||t,a=this.options._base.extend(a)),"directive"===e&&"function"==typeof a&&(a={bind:a,update:a}),this.options[e+"s"][t]=a,a):this.options[e+"s"][t]}})}(t)}(Fa),Object.defineProperty(Fa.prototype,"$isServer",{get:rt}),Object.defineProperty(Fa.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Fa,"FunctionalRenderContext",{value:Re}),Fa.version="2.6.10";var Ra=D("style,class"),Pa=D("input,textarea,option,select,progress"),ba=function(t,e,a){return"value"===a&&Pa(t)&&"button"!==e||"selected"===a&&"option"===t||"checked"===a&&"input"===t||"muted"===a&&"video"===t},Ba=D("contenteditable,draggable,spellcheck"),_a=D("events,caret,typing,plaintext-only"),Ha=function(t,e){return Ua(e)||"false"===e?"false":"contenteditable"===t&&_a(e)?e:"true"},ka=D("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Va="http://www.w3.org/1999/xlink",Ga=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Ya=function(t){return Ga(t)?t.slice(6,t.length):""},Ua=function(t){return null==t||!1===t};function Wa(t){for(var e=t.data,a=t,i=t;n(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Xa(i.data,e));for(;n(a=a.parent);)a&&a.data&&(e=Xa(e,a.data));return function(t,e){if(n(t)||n(e))return Ja(t,Ka(e));return""}(e.staticClass,e.class)}function Xa(t,e){return{staticClass:Ja(t.staticClass,e.staticClass),class:n(t.class)?[t.class,e.class]:e.class}}function Ja(t,e){return t?e?t+" "+e:t:e||""}function Ka(t){return Array.isArray(t)?function(t){for(var e,a="",i=0,r=t.length;i<r;i++)n(e=Ka(t[i]))&&""!==e&&(a&&(a+=" "),a+=e);return a}(t):o(t)?function(t){var e="";for(var a in t)t[a]&&(e&&(e+=" "),e+=a);return e}(t):"string"==typeof t?t:""}var qa={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},za=D("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ja=D("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),$a=function(t){return za(t)||ja(t)};function Za(t){return ja(t)?"svg":"math"===t?"math":void 0}var Qa=Object.create(null);var ti=D("text,number,password,search,email,tel,url");function ei(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var ai=Object.freeze({createElement:function(t,e){var a=document.createElement(t);return"select"!==t?a:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&a.setAttribute("multiple","multiple"),a)},createElementNS:function(t,e){return document.createElementNS(qa[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,a){t.insertBefore(e,a)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),ii={create:function(t,e){ni(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ni(t,!0),ni(e))},destroy:function(t){ni(t,!0)}};function ni(t,e){var a=t.data.ref;if(n(a)){var i=t.context,r=t.componentInstance||t.elm,s=i.$refs;e?Array.isArray(s[a])?v(s[a],r):s[a]===r&&(s[a]=void 0):t.data.refInFor?Array.isArray(s[a])?s[a].indexOf(r)<0&&s[a].push(r):s[a]=[r]:s[a]=r}}var ri=new pt("",{},[]),si=["create","activate","update","remove","destroy"];function oi(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&n(t.data)===n(e.data)&&function(t,e){if("input"!==t.tag)return!0;var a,i=n(a=t.data)&&n(a=a.attrs)&&a.type,r=n(a=e.data)&&n(a=a.attrs)&&a.type;return i===r||ti(i)&&ti(r)}(t,e)||r(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function hi(t,e,a){var i,r,s={};for(i=e;i<=a;++i)n(r=t[i].key)&&(s[r]=i);return s}var li={create:ui,update:ui,destroy:function(t){ui(t,ri)}};function ui(t,e){(t.data.directives||e.data.directives)&&function(t,e){var a,i,n,r=t===ri,s=e===ri,o=fi(t.data.directives,t.context),h=fi(e.data.directives,e.context),l=[],u=[];for(a in h)i=o[a],n=h[a],i?(n.oldValue=i.value,n.oldArg=i.arg,di(n,"update",e,t),n.def&&n.def.componentUpdated&&u.push(n)):(di(n,"bind",e,t),n.def&&n.def.inserted&&l.push(n));if(l.length){var c=function(){for(var a=0;a<l.length;a++)di(l[a],"inserted",e,t)};r?he(e,"insert",c):c()}u.length&&he(e,"postpatch",function(){for(var a=0;a<u.length;a++)di(u[a],"componentUpdated",e,t)});if(!r)for(a in o)h[a]||di(o[a],"unbind",t,t,s)}(t,e)}var ci=Object.create(null);function fi(t,e){var a,i,n=Object.create(null);if(!t)return n;for(a=0;a<t.length;a++)(i=t[a]).modifiers||(i.modifiers=ci),n[Ci(i)]=i,i.def=Ht(e.$options,"directives",i.name);return n}function Ci(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function di(t,e,a,i,n){var r=t.def&&t.def[e];if(r)try{r(a.elm,t,a,i,n)}catch(i){Ut(i,a.context,"directive "+t.name+" "+e+" hook")}}var Di=[ii,li];function pi(t,e){var a=e.componentOptions;if(!(n(a)&&!1===a.Ctor.options.inheritAttrs||i(t.data.attrs)&&i(e.data.attrs))){var r,s,o=e.elm,h=t.data.attrs||{},l=e.data.attrs||{};for(r in n(l.__ob__)&&(l=e.data.attrs=N({},l)),l)s=l[r],h[r]!==s&&mi(o,r,s);for(r in($||Q)&&l.value!==h.value&&mi(o,"value",l.value),h)i(l[r])&&(Ga(r)?o.removeAttributeNS(Va,Ya(r)):Ba(r)||o.removeAttribute(r))}}function mi(t,e,a){t.tagName.indexOf("-")>-1?vi(t,e,a):ka(e)?Ua(a)?t.removeAttribute(e):(a="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,a)):Ba(e)?t.setAttribute(e,Ha(e,a)):Ga(e)?Ua(a)?t.removeAttributeNS(Va,Ya(e)):t.setAttributeNS(Va,e,a):vi(t,e,a)}function vi(t,e,a){if(Ua(a))t.removeAttribute(e);else{if($&&!Z&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==a&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,a)}}var Si={create:pi,update:pi};function gi(t,e){var a=e.elm,r=e.data,s=t.data;if(!(i(r.staticClass)&&i(r.class)&&(i(s)||i(s.staticClass)&&i(s.class)))){var o=Wa(e),h=a._transitionClasses;n(h)&&(o=Ja(o,Ka(h))),o!==a._prevClass&&(a.setAttribute("class",o),a._prevClass=o)}}var Ii,Ai,yi,Ti,Fi,Ei,Li={create:gi,update:gi},xi=/[\w).+\-_$\]]/;function Ni(t){var e,a,i,n,r,s=!1,o=!1,h=!1,l=!1,u=0,c=0,f=0,C=0;for(i=0;i<t.length;i++)if(a=e,e=t.charCodeAt(i),s)39===e&&92!==a&&(s=!1);else if(o)34===e&&92!==a&&(o=!1);else if(h)96===e&&92!==a&&(h=!1);else if(l)47===e&&92!==a&&(l=!1);else if(124!==e||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||u||c||f){switch(e){case 34:o=!0;break;case 39:s=!0;break;case 96:h=!0;break;case 40:f++;break;case 41:f--;break;case 91:c++;break;case 93:c--;break;case 123:u++;break;case 125:u--}if(47===e){for(var d=i-1,D=void 0;d>=0&&" "===(D=t.charAt(d));d--);D&&xi.test(D)||(l=!0)}}else void 0===n?(C=i+1,n=t.slice(0,i).trim()):p();function p(){(r||(r=[])).push(t.slice(C,i).trim()),C=i+1}if(void 0===n?n=t.slice(0,i).trim():0!==C&&p(),r)for(i=0;i<r.length;i++)n=Oi(n,r[i]);return n}function Oi(t,e){var a=e.indexOf("(");if(a<0)return'_f("'+e+'")('+t+")";var i=e.slice(0,a),n=e.slice(a+1);return'_f("'+i+'")('+t+(")"!==n?","+n:n)}function Mi(t,e){console.error("[Vue compiler]: "+t)}function wi(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function Ri(t,e,a,i,n){(t.props||(t.props=[])).push(Ui({name:e,value:a,dynamic:n},i)),t.plain=!1}function Pi(t,e,a,i,n){(n?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(Ui({name:e,value:a,dynamic:n},i)),t.plain=!1}function bi(t,e,a,i){t.attrsMap[e]=a,t.attrsList.push(Ui({name:e,value:a},i))}function Bi(t,e,a,i,n,r,s,o){(t.directives||(t.directives=[])).push(Ui({name:e,rawName:a,value:i,arg:n,isDynamicArg:r,modifiers:s},o)),t.plain=!1}function _i(t,e,a){return a?"_p("+e+',"'+t+'")':t+e}function Hi(t,e,i,n,r,s,o,h){var l;(n=n||a).right?h?e="("+e+")==='click'?'contextmenu':("+e+")":"click"===e&&(e="contextmenu",delete n.right):n.middle&&(h?e="("+e+")==='click'?'mouseup':("+e+")":"click"===e&&(e="mouseup")),n.capture&&(delete n.capture,e=_i("!",e,h)),n.once&&(delete n.once,e=_i("~",e,h)),n.passive&&(delete n.passive,e=_i("&",e,h)),n.native?(delete n.native,l=t.nativeEvents||(t.nativeEvents={})):l=t.events||(t.events={});var u=Ui({value:i.trim(),dynamic:h},o);n!==a&&(u.modifiers=n);var c=l[e];Array.isArray(c)?r?c.unshift(u):c.push(u):l[e]=c?r?[u,c]:[c,u]:u,t.plain=!1}function ki(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}function Vi(t,e,a){var i=Gi(t,":"+e)||Gi(t,"v-bind:"+e);if(null!=i)return Ni(i);if(!1!==a){var n=Gi(t,e);if(null!=n)return JSON.stringify(n)}}function Gi(t,e,a){var i;if(null!=(i=t.attrsMap[e]))for(var n=t.attrsList,r=0,s=n.length;r<s;r++)if(n[r].name===e){n.splice(r,1);break}return a&&delete t.attrsMap[e],i}function Yi(t,e){for(var a=t.attrsList,i=0,n=a.length;i<n;i++){var r=a[i];if(e.test(r.name))return a.splice(i,1),r}}function Ui(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function Wi(t,e,a){var i=a||{},n=i.number,r="$$v";i.trim&&(r="(typeof $$v === 'string'? $$v.trim(): $$v)"),n&&(r="_n("+r+")");var s=Xi(e,r);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+s+"}"}}function Xi(t,e){var a=function(t){if(t=t.trim(),Ii=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Ii-1)return(Ti=t.lastIndexOf("."))>-1?{exp:t.slice(0,Ti),key:'"'+t.slice(Ti+1)+'"'}:{exp:t,key:null};Ai=t,Ti=Fi=Ei=0;for(;!Ki();)qi(yi=Ji())?ji(yi):91===yi&&zi(yi);return{exp:t.slice(0,Fi),key:t.slice(Fi+1,Ei)}}(t);return null===a.key?t+"="+e:"$set("+a.exp+", "+a.key+", "+e+")"}function Ji(){return Ai.charCodeAt(++Ti)}function Ki(){return Ti>=Ii}function qi(t){return 34===t||39===t}function zi(t){var e=1;for(Fi=Ti;!Ki();)if(qi(t=Ji()))ji(t);else if(91===t&&e++,93===t&&e--,0===e){Ei=Ti;break}}function ji(t){for(var e=t;!Ki()&&(t=Ji())!==e;);}var $i,Zi="__r",Qi="__c";function tn(t,e,a){var i=$i;return function n(){null!==e.apply(null,arguments)&&nn(t,n,a,i)}}var en=qt&&!(et&&Number(et[1])<=53);function an(t,e,a,i){if(en){var n=la,r=e;e=r._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=n||t.timeStamp<=0||t.target.ownerDocument!==document)return r.apply(this,arguments)}}$i.addEventListener(t,e,it?{capture:a,passive:i}:a)}function nn(t,e,a,i){(i||$i).removeEventListener(t,e._wrapper||e,a)}function rn(t,e){if(!i(t.data.on)||!i(e.data.on)){var a=e.data.on||{},r=t.data.on||{};$i=e.elm,function(t){if(n(t[Zi])){var e=$?"change":"input";t[e]=[].concat(t[Zi],t[e]||[]),delete t[Zi]}n(t[Qi])&&(t.change=[].concat(t[Qi],t.change||[]),delete t[Qi])}(a),oe(a,r,an,nn,tn,e.context),$i=void 0}}var sn,on={create:rn,update:rn};function hn(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var a,r,s=e.elm,o=t.data.domProps||{},h=e.data.domProps||{};for(a in n(h.__ob__)&&(h=e.data.domProps=N({},h)),o)a in h||(s[a]="");for(a in h){if(r=h[a],"textContent"===a||"innerHTML"===a){if(e.children&&(e.children.length=0),r===o[a])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===a&&"PROGRESS"!==s.tagName){s._value=r;var l=i(r)?"":String(r);ln(s,l)&&(s.value=l)}else if("innerHTML"===a&&ja(s.tagName)&&i(s.innerHTML)){(sn=sn||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=sn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}else if(r!==o[a])try{s[a]=r}catch(t){}}}}function ln(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var a=!0;try{a=document.activeElement!==t}catch(t){}return a&&t.value!==e}(t,e)||function(t,e){var a=t.value,i=t._vModifiers;if(n(i)){if(i.number)return d(a)!==d(e);if(i.trim)return a.trim()!==e.trim()}return a!==e}(t,e))}var un={create:hn,update:hn},cn=I(function(t){var e={},a=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var i=t.split(a);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e});function fn(t){var e=Cn(t.style);return t.staticStyle?N(t.staticStyle,e):e}function Cn(t){return Array.isArray(t)?O(t):"string"==typeof t?cn(t):t}var dn,Dn=/^--/,pn=/\s*!important$/,mn=function(t,e,a){if(Dn.test(e))t.style.setProperty(e,a);else if(pn.test(a))t.style.setProperty(E(e),a.replace(pn,""),"important");else{var i=Sn(e);if(Array.isArray(a))for(var n=0,r=a.length;n<r;n++)t.style[i]=a[n];else t.style[i]=a}},vn=["Webkit","Moz","ms"],Sn=I(function(t){if(dn=dn||document.createElement("div").style,"filter"!==(t=y(t))&&t in dn)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),a=0;a<vn.length;a++){var i=vn[a]+e;if(i in dn)return i}});function gn(t,e){var a=e.data,r=t.data;if(!(i(a.staticStyle)&&i(a.style)&&i(r.staticStyle)&&i(r.style))){var s,o,h=e.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},c=l||u,f=Cn(e.data.style)||{};e.data.normalizedStyle=n(f.__ob__)?N({},f):f;var C=function(t,e){var a,i={};if(e)for(var n=t;n.componentInstance;)(n=n.componentInstance._vnode)&&n.data&&(a=fn(n.data))&&N(i,a);(a=fn(t.data))&&N(i,a);for(var r=t;r=r.parent;)r.data&&(a=fn(r.data))&&N(i,a);return i}(e,!0);for(o in c)i(C[o])&&mn(h,o,"");for(o in C)(s=C[o])!==c[o]&&mn(h,o,null==s?"":s)}}var In={create:gn,update:gn},An=/\s+/;function yn(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(An).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var a=" "+(t.getAttribute("class")||"")+" ";a.indexOf(" "+e+" ")<0&&t.setAttribute("class",(a+e).trim())}}function Tn(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(An).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var a=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";a.indexOf(i)>=0;)a=a.replace(i," ");(a=a.trim())?t.setAttribute("class",a):t.removeAttribute("class")}}function Fn(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&N(e,En(t.name||"v")),N(e,t),e}return"string"==typeof t?En(t):void 0}}var En=I(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ln=K&&!Z,xn="transition",Nn="animation",On="transition",Mn="transitionend",wn="animation",Rn="animationend";Ln&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(On="WebkitTransition",Mn="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(wn="WebkitAnimation",Rn="webkitAnimationEnd"));var Pn=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function bn(t){Pn(function(){Pn(t)})}function Bn(t,e){var a=t._transitionClasses||(t._transitionClasses=[]);a.indexOf(e)<0&&(a.push(e),yn(t,e))}function _n(t,e){t._transitionClasses&&v(t._transitionClasses,e),Tn(t,e)}function Hn(t,e,a){var i=Vn(t,e),n=i.type,r=i.timeout,s=i.propCount;if(!n)return a();var o=n===xn?Mn:Rn,h=0,l=function(){t.removeEventListener(o,u),a()},u=function(e){e.target===t&&++h>=s&&l()};setTimeout(function(){h<s&&l()},r+1),t.addEventListener(o,u)}var kn=/\b(transform|all)(,|$)/;function Vn(t,e){var a,i=window.getComputedStyle(t),n=(i[On+"Delay"]||"").split(", "),r=(i[On+"Duration"]||"").split(", "),s=Gn(n,r),o=(i[wn+"Delay"]||"").split(", "),h=(i[wn+"Duration"]||"").split(", "),l=Gn(o,h),u=0,c=0;return e===xn?s>0&&(a=xn,u=s,c=r.length):e===Nn?l>0&&(a=Nn,u=l,c=h.length):c=(a=(u=Math.max(s,l))>0?s>l?xn:Nn:null)?a===xn?r.length:h.length:0,{type:a,timeout:u,propCount:c,hasTransform:a===xn&&kn.test(i[On+"Property"])}}function Gn(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,a){return Yn(e)+Yn(t[a])}))}function Yn(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Un(t,e){var a=t.elm;n(a._leaveCb)&&(a._leaveCb.cancelled=!0,a._leaveCb());var r=Fn(t.data.transition);if(!i(r)&&!n(a._enterCb)&&1===a.nodeType){for(var s=r.css,h=r.type,l=r.enterClass,u=r.enterToClass,c=r.enterActiveClass,f=r.appearClass,C=r.appearToClass,D=r.appearActiveClass,p=r.beforeEnter,m=r.enter,v=r.afterEnter,S=r.enterCancelled,g=r.beforeAppear,I=r.appear,A=r.afterAppear,y=r.appearCancelled,T=r.duration,F=Ze,E=Ze.$vnode;E&&E.parent;)F=E.context,E=E.parent;var L=!F._isMounted||!t.isRootInsert;if(!L||I||""===I){var x=L&&f?f:l,N=L&&D?D:c,O=L&&C?C:u,M=L&&g||p,w=L&&"function"==typeof I?I:m,R=L&&A||v,P=L&&y||S,b=d(o(T)?T.enter:T);0;var _=!1!==s&&!Z,H=Jn(w),k=a._enterCb=B(function(){_&&(_n(a,O),_n(a,N)),k.cancelled?(_&&_n(a,x),P&&P(a)):R&&R(a),a._enterCb=null});t.data.show||he(t,"insert",function(){var e=a.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),w&&w(a,k)}),M&&M(a),_&&(Bn(a,x),Bn(a,N),bn(function(){_n(a,x),k.cancelled||(Bn(a,O),H||(Xn(b)?setTimeout(k,b):Hn(a,h,k)))})),t.data.show&&(e&&e(),w&&w(a,k)),_||H||k()}}}function Wn(t,e){var a=t.elm;n(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var r=Fn(t.data.transition);if(i(r)||1!==a.nodeType)return e();if(!n(a._leaveCb)){var s=r.css,h=r.type,l=r.leaveClass,u=r.leaveToClass,c=r.leaveActiveClass,f=r.beforeLeave,C=r.leave,D=r.afterLeave,p=r.leaveCancelled,m=r.delayLeave,v=r.duration,S=!1!==s&&!Z,g=Jn(C),I=d(o(v)?v.leave:v);0;var A=a._leaveCb=B(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[t.key]=null),S&&(_n(a,u),_n(a,c)),A.cancelled?(S&&_n(a,l),p&&p(a)):(e(),D&&D(a)),a._leaveCb=null});m?m(y):y()}function y(){A.cancelled||(!t.data.show&&a.parentNode&&((a.parentNode._pending||(a.parentNode._pending={}))[t.key]=t),f&&f(a),S&&(Bn(a,l),Bn(a,c),bn(function(){_n(a,l),A.cancelled||(Bn(a,u),g||(Xn(I)?setTimeout(A,I):Hn(a,h,A)))})),C&&C(a,A),S||g||A())}}function Xn(t){return"number"==typeof t&&!isNaN(t)}function Jn(t){if(i(t))return!1;var e=t.fns;return n(e)?Jn(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Kn(t,e){!0!==e.data.show&&Un(e)}var qn=function(t){var e,a,o={},h=t.modules,l=t.nodeOps;for(e=0;e<si.length;++e)for(o[si[e]]=[],a=0;a<h.length;++a)n(h[a][si[e]])&&o[si[e]].push(h[a][si[e]]);function u(t){var e=l.parentNode(t);n(e)&&l.removeChild(e,t)}function c(t,e,a,i,s,h,u){if(n(t.elm)&&n(h)&&(t=h[u]=gt(t)),t.isRootInsert=!s,!function(t,e,a,i){var s=t.data;if(n(s)){var h=n(t.componentInstance)&&s.keepAlive;if(n(s=s.hook)&&n(s=s.init)&&s(t,!1),n(t.componentInstance))return f(t,e),C(a,t.elm,i),r(h)&&function(t,e,a,i){for(var r,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,n(r=s.data)&&n(r=r.transition)){for(r=0;r<o.activate.length;++r)o.activate[r](ri,s);e.push(s);break}C(a,t.elm,i)}(t,e,a,i),!0}}(t,e,a,i)){var c=t.data,D=t.children,p=t.tag;n(p)?(t.elm=t.ns?l.createElementNS(t.ns,p):l.createElement(p,t),v(t),d(t,D,e),n(c)&&m(t,e),C(a,t.elm,i)):r(t.isComment)?(t.elm=l.createComment(t.text),C(a,t.elm,i)):(t.elm=l.createTextNode(t.text),C(a,t.elm,i))}}function f(t,e){n(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,p(t)?(m(t,e),v(t)):(ni(t),e.push(t))}function C(t,e,a){n(t)&&(n(a)?l.parentNode(a)===t&&l.insertBefore(t,e,a):l.appendChild(t,e))}function d(t,e,a){if(Array.isArray(e))for(var i=0;i<e.length;++i)c(e[i],a,t.elm,null,!0,e,i);else s(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function p(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return n(t.tag)}function m(t,a){for(var i=0;i<o.create.length;++i)o.create[i](ri,t);n(e=t.data.hook)&&(n(e.create)&&e.create(ri,t),n(e.insert)&&a.push(t))}function v(t){var e;if(n(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var a=t;a;)n(e=a.context)&&n(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),a=a.parent;n(e=Ze)&&e!==t.context&&e!==t.fnContext&&n(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function S(t,e,a,i,n,r){for(;i<=n;++i)c(a[i],r,t,e,!1,a,i)}function g(t){var e,a,i=t.data;if(n(i))for(n(e=i.hook)&&n(e=e.destroy)&&e(t),e=0;e<o.destroy.length;++e)o.destroy[e](t);if(n(e=t.children))for(a=0;a<t.children.length;++a)g(t.children[a])}function I(t,e,a,i){for(;a<=i;++a){var r=e[a];n(r)&&(n(r.tag)?(A(r),g(r)):u(r.elm))}}function A(t,e){if(n(e)||n(t.data)){var a,i=o.remove.length+1;for(n(e)?e.listeners+=i:e=function(t,e){function a(){0==--a.listeners&&u(t)}return a.listeners=e,a}(t.elm,i),n(a=t.componentInstance)&&n(a=a._vnode)&&n(a.data)&&A(a,e),a=0;a<o.remove.length;++a)o.remove[a](t,e);n(a=t.data.hook)&&n(a=a.remove)?a(t,e):e()}else u(t.elm)}function y(t,e,a,i){for(var r=a;r<i;r++){var s=e[r];if(n(s)&&oi(t,s))return r}}function T(t,e,a,s,h,u){if(t!==e){n(e.elm)&&n(s)&&(e=s[h]=gt(e));var f=e.elm=t.elm;if(r(t.isAsyncPlaceholder))n(e.asyncFactory.resolved)?L(t.elm,e,a):e.isAsyncPlaceholder=!0;else if(r(e.isStatic)&&r(t.isStatic)&&e.key===t.key&&(r(e.isCloned)||r(e.isOnce)))e.componentInstance=t.componentInstance;else{var C,d=e.data;n(d)&&n(C=d.hook)&&n(C=C.prepatch)&&C(t,e);var D=t.children,m=e.children;if(n(d)&&p(e)){for(C=0;C<o.update.length;++C)o.update[C](t,e);n(C=d.hook)&&n(C=C.update)&&C(t,e)}i(e.text)?n(D)&&n(m)?D!==m&&function(t,e,a,r,s){for(var o,h,u,f=0,C=0,d=e.length-1,D=e[0],p=e[d],m=a.length-1,v=a[0],g=a[m],A=!s;f<=d&&C<=m;)i(D)?D=e[++f]:i(p)?p=e[--d]:oi(D,v)?(T(D,v,r,a,C),D=e[++f],v=a[++C]):oi(p,g)?(T(p,g,r,a,m),p=e[--d],g=a[--m]):oi(D,g)?(T(D,g,r,a,m),A&&l.insertBefore(t,D.elm,l.nextSibling(p.elm)),D=e[++f],g=a[--m]):oi(p,v)?(T(p,v,r,a,C),A&&l.insertBefore(t,p.elm,D.elm),p=e[--d],v=a[++C]):(i(o)&&(o=hi(e,f,d)),i(h=n(v.key)?o[v.key]:y(v,e,f,d))?c(v,r,t,D.elm,!1,a,C):oi(u=e[h],v)?(T(u,v,r,a,C),e[h]=void 0,A&&l.insertBefore(t,u.elm,D.elm)):c(v,r,t,D.elm,!1,a,C),v=a[++C]);f>d?S(t,i(a[m+1])?null:a[m+1].elm,a,C,m,r):C>m&&I(0,e,f,d)}(f,D,m,a,u):n(m)?(n(t.text)&&l.setTextContent(f,""),S(f,null,m,0,m.length-1,a)):n(D)?I(0,D,0,D.length-1):n(t.text)&&l.setTextContent(f,""):t.text!==e.text&&l.setTextContent(f,e.text),n(d)&&n(C=d.hook)&&n(C=C.postpatch)&&C(t,e)}}}function F(t,e,a){if(r(a)&&n(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var E=D("attrs,class,staticClass,staticStyle,key");function L(t,e,a,i){var s,o=e.tag,h=e.data,l=e.children;if(i=i||h&&h.pre,e.elm=t,r(e.isComment)&&n(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(n(h)&&(n(s=h.hook)&&n(s=s.init)&&s(e,!0),n(s=e.componentInstance)))return f(e,a),!0;if(n(o)){if(n(l))if(t.hasChildNodes())if(n(s=h)&&n(s=s.domProps)&&n(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var u=!0,c=t.firstChild,C=0;C<l.length;C++){if(!c||!L(c,l[C],a,i)){u=!1;break}c=c.nextSibling}if(!u||c)return!1}else d(e,l,a);if(n(h)){var D=!1;for(var p in h)if(!E(p)){D=!0,m(e,a);break}!D&&h.class&&ne(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,a,s){if(!i(e)){var h,u=!1,f=[];if(i(t))u=!0,c(e,f);else{var C=n(t.nodeType);if(!C&&oi(t,e))T(t,e,f,null,null,s);else{if(C){if(1===t.nodeType&&t.hasAttribute(_)&&(t.removeAttribute(_),a=!0),r(a)&&L(t,e,f))return F(e,f,!0),t;h=t,t=new pt(l.tagName(h).toLowerCase(),{},[],void 0,h)}var d=t.elm,D=l.parentNode(d);if(c(e,f,d._leaveCb?null:D,l.nextSibling(d)),n(e.parent))for(var m=e.parent,v=p(e);m;){for(var S=0;S<o.destroy.length;++S)o.destroy[S](m);if(m.elm=e.elm,v){for(var A=0;A<o.create.length;++A)o.create[A](ri,m);var y=m.data.hook.insert;if(y.merged)for(var E=1;E<y.fns.length;E++)y.fns[E]()}else ni(m);m=m.parent}n(D)?I(0,[t],0,0):n(t.tag)&&g(t)}}return F(e,f,u),e.elm}n(t)&&g(t)}}({nodeOps:ai,modules:[Si,Li,on,un,In,K?{create:Kn,activate:Kn,remove:function(t,e){!0!==t.data.show?Wn(t,e):e()}}:{}].concat(Di)});Z&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&ar(t,"input")});var zn={inserted:function(t,e,a,i){"select"===a.tag?(i.elm&&!i.elm._vOptions?he(a,"postpatch",function(){zn.componentUpdated(t,e,a)}):jn(t,e,a.context),t._vOptions=[].map.call(t.options,Qn)):("textarea"===a.tag||ti(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",tr),t.addEventListener("compositionend",er),t.addEventListener("change",er),Z&&(t.vmodel=!0)))},componentUpdated:function(t,e,a){if("select"===a.tag){jn(t,e,a.context);var i=t._vOptions,n=t._vOptions=[].map.call(t.options,Qn);if(n.some(function(t,e){return!P(t,i[e])}))(t.multiple?e.value.some(function(t){return Zn(t,n)}):e.value!==e.oldValue&&Zn(e.value,n))&&ar(t,"change")}}};function jn(t,e,a){$n(t,e,a),($||Q)&&setTimeout(function(){$n(t,e,a)},0)}function $n(t,e,a){var i=e.value,n=t.multiple;if(!n||Array.isArray(i)){for(var r,s,o=0,h=t.options.length;o<h;o++)if(s=t.options[o],n)r=b(i,Qn(s))>-1,s.selected!==r&&(s.selected=r);else if(P(Qn(s),i))return void(t.selectedIndex!==o&&(t.selectedIndex=o));n||(t.selectedIndex=-1)}}function Zn(t,e){return e.every(function(e){return!P(e,t)})}function Qn(t){return"_value"in t?t._value:t.value}function tr(t){t.target.composing=!0}function er(t){t.target.composing&&(t.target.composing=!1,ar(t.target,"input"))}function ar(t,e){var a=document.createEvent("HTMLEvents");a.initEvent(e,!0,!0),t.dispatchEvent(a)}function ir(t){return!t.componentInstance||t.data&&t.data.transition?t:ir(t.componentInstance._vnode)}var nr={model:zn,show:{bind:function(t,e,a){var i=e.value,n=(a=ir(a)).data&&a.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&n?(a.data.show=!0,Un(a,function(){t.style.display=r})):t.style.display=i?r:"none"},update:function(t,e,a){var i=e.value;!i!=!e.oldValue&&((a=ir(a)).data&&a.data.transition?(a.data.show=!0,i?Un(a,function(){t.style.display=t.__vOriginalDisplay}):Wn(a,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,a,i,n){n||(t.style.display=t.__vOriginalDisplay)}}},rr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function sr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?sr(Ke(e.children)):t}function or(t){var e={},a=t.$options;for(var i in a.propsData)e[i]=t[i];var n=a._parentListeners;for(var r in n)e[y(r)]=n[r];return e}function hr(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var lr=function(t){return t.tag||Je(t)},ur=function(t){return"show"===t.name},cr={name:"transition",props:rr,abstract:!0,render:function(t){var e=this,a=this.$slots.default;if(a&&(a=a.filter(lr)).length){0;var i=this.mode;0;var n=a[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return n;var r=sr(n);if(!r)return n;if(this._leaving)return hr(t,n);var o="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?o+"comment":o+r.tag:s(r.key)?0===String(r.key).indexOf(o)?r.key:o+r.key:r.key;var h=(r.data||(r.data={})).transition=or(this),l=this._vnode,u=sr(l);if(r.data.directives&&r.data.directives.some(ur)&&(r.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(r,u)&&!Je(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var c=u.data.transition=N({},h);if("out-in"===i)return this._leaving=!0,he(c,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),hr(t,n);if("in-out"===i){if(Je(r))return l;var f,C=function(){f()};he(h,"afterEnter",C),he(h,"enterCancelled",C),he(c,"delayLeave",function(t){f=t})}}return n}}},fr=N({tag:String,moveClass:String},rr);function Cr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function dr(t){t.data.newPos=t.elm.getBoundingClientRect()}function Dr(t){var e=t.data.pos,a=t.data.newPos,i=e.left-a.left,n=e.top-a.top;if(i||n){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+i+"px,"+n+"px)",r.transitionDuration="0s"}}delete fr.mode;var pr={Transition:cr,TransitionGroup:{props:fr,beforeMount:function(){var t=this,e=this._update;this._update=function(a,i){var n=Qe(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,n(),e.call(t,a,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",a=Object.create(null),i=this.prevChildren=this.children,n=this.$slots.default||[],r=this.children=[],s=or(this),o=0;o<n.length;o++){var h=n[o];if(h.tag)if(null!=h.key&&0!==String(h.key).indexOf("__vlist"))r.push(h),a[h.key]=h,(h.data||(h.data={})).transition=s;else;}if(i){for(var l=[],u=[],c=0;c<i.length;c++){var f=i[c];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),a[f.key]?l.push(f):u.push(f)}this.kept=t(e,null,l),this.removed=u}return t(e,null,r)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Cr),t.forEach(dr),t.forEach(Dr),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var a=t.elm,i=a.style;Bn(a,e),i.transform=i.WebkitTransform=i.transitionDuration="",a.addEventListener(Mn,a._moveCb=function t(i){i&&i.target!==a||i&&!/transform$/.test(i.propertyName)||(a.removeEventListener(Mn,t),a._moveCb=null,_n(a,e))})}}))},methods:{hasMove:function(t,e){if(!Ln)return!1;if(this._hasMove)return this._hasMove;var a=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Tn(a,t)}),yn(a,e),a.style.display="none",this.$el.appendChild(a);var i=Vn(a);return this.$el.removeChild(a),this._hasMove=i.hasTransform}}}};Fa.config.mustUseProp=ba,Fa.config.isReservedTag=$a,Fa.config.isReservedAttr=Ra,Fa.config.getTagNamespace=Za,Fa.config.isUnknownElement=function(t){if(!K)return!0;if($a(t))return!1;if(t=t.toLowerCase(),null!=Qa[t])return Qa[t];var e=document.createElement(t);return t.indexOf("-")>-1?Qa[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Qa[t]=/HTMLUnknownElement/.test(e.toString())},N(Fa.options.directives,nr),N(Fa.options.components,pr),Fa.prototype.__patch__=K?qn:M,Fa.prototype.$mount=function(t,e){return function(t,e,a){return t.$el=e,t.$options.render||(t.$options.render=vt),aa(t,"beforeMount"),new da(t,function(){t._update(t._render(),a)},M,{before:function(){t._isMounted&&!t._isDestroyed&&aa(t,"beforeUpdate")}},!0),a=!1,null==t.$vnode&&(t._isMounted=!0,aa(t,"mounted")),t}(this,t=t&&K?ei(t):void 0,e)},K&&setTimeout(function(){V.devtools&&st&&st.emit("init",Fa)},0);var mr=/\{\{((?:.|\r?\n)+?)\}\}/g,vr=/[-.*+?^${}()|[\]\/\\]/g,Sr=I(function(t){var e=t[0].replace(vr,"\\$&"),a=t[1].replace(vr,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+a,"g")});function gr(t,e){var a=e?Sr(e):mr;if(a.test(t)){for(var i,n,r,s=[],o=[],h=a.lastIndex=0;i=a.exec(t);){(n=i.index)>h&&(o.push(r=t.slice(h,n)),s.push(JSON.stringify(r)));var l=Ni(i[1].trim());s.push("_s("+l+")"),o.push({"@binding":l}),h=n+i[0].length}return h<t.length&&(o.push(r=t.slice(h)),s.push(JSON.stringify(r))),{expression:s.join("+"),tokens:o}}}var Ir={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var a=Gi(t,"class");a&&(t.staticClass=JSON.stringify(a));var i=Vi(t,"class",!1);i&&(t.classBinding=i)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var Ar,yr={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var a=Gi(t,"style");a&&(t.staticStyle=JSON.stringify(cn(a)));var i=Vi(t,"style",!1);i&&(t.styleBinding=i)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Tr=function(t){return(Ar=Ar||document.createElement("div")).innerHTML=t,Ar.textContent},Fr=D("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Er=D("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Lr=D("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),xr=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Nr=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Or="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+G.source+"]*",Mr="((?:"+Or+"\\:)?"+Or+")",wr=new RegExp("^<"+Mr),Rr=/^\s*(\/?)>/,Pr=new RegExp("^<\\/"+Mr+"[^>]*>"),br=/^<!DOCTYPE [^>]+>/i,Br=/^<!\--/,_r=/^<!\[/,Hr=D("script,style,textarea",!0),kr={},Vr={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Gr=/&(?:lt|gt|quot|amp|#39);/g,Yr=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ur=D("pre,textarea",!0),Wr=function(t,e){return t&&Ur(t)&&"\n"===e[0]};function Xr(t,e){var a=e?Yr:Gr;return t.replace(a,function(t){return Vr[t]})}var Jr,Kr,qr,zr,jr,$r,Zr,Qr,ts=/^@|^v-on:/,es=/^v-|^@|^:/,as=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,is=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ns=/^\(|\)$/g,rs=/^\[.*\]$/,ss=/:(.*)$/,os=/^:|^\.|^v-bind:/,hs=/\.[^.\]]+(?=[^\]]*$)/g,ls=/^v-slot(:|$)|^#/,us=/[\r\n]/,cs=/\s+/g,fs=I(Tr),Cs="_empty_";function ds(t,e,a){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},a=0,i=t.length;a<i;a++)e[t[a].name]=t[a].value;return e}(e),rawAttrsMap:{},parent:a,children:[]}}function Ds(t,e){Jr=e.warn||Mi,$r=e.isPreTag||w,Zr=e.mustUseProp||w,Qr=e.getTagNamespace||w;var a=e.isReservedTag||w;(function(t){return!!t.component||!a(t.tag)}),qr=wi(e.modules,"transformNode"),zr=wi(e.modules,"preTransformNode"),jr=wi(e.modules,"postTransformNode"),Kr=e.delimiters;var i,n,r=[],s=!1!==e.preserveWhitespace,o=e.whitespace,h=!1,l=!1;function u(t){if(c(t),h||t.processed||(t=ps(t,e)),r.length||t===i||i.if&&(t.elseif||t.else)&&vs(i,{exp:t.elseif,block:t}),n&&!t.forbidden)if(t.elseif||t.else)s=t,(o=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(n.children))&&o.if&&vs(o,{exp:s.elseif,block:s});else{if(t.slotScope){var a=t.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[a]=t}n.children.push(t),t.parent=n}var s,o;t.children=t.children.filter(function(t){return!t.slotScope}),c(t),t.pre&&(h=!1),$r(t.tag)&&(l=!1);for(var u=0;u<jr.length;u++)jr[u](t,e)}function c(t){if(!l)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}return function(t,e){for(var a,i,n=[],r=e.expectHTML,s=e.isUnaryTag||w,o=e.canBeLeftOpenTag||w,h=0;t;){if(a=t,i&&Hr(i)){var l=0,u=i.toLowerCase(),c=kr[u]||(kr[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),f=t.replace(c,function(t,a,i){return l=i.length,Hr(u)||"noscript"===u||(a=a.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Wr(u,a)&&(a=a.slice(1)),e.chars&&e.chars(a),""});h+=t.length-f.length,t=f,E(u,h-l,h)}else{var C=t.indexOf("<");if(0===C){if(Br.test(t)){var d=t.indexOf("--\x3e");if(d>=0){e.shouldKeepComment&&e.comment(t.substring(4,d),h,h+d+3),y(d+3);continue}}if(_r.test(t)){var D=t.indexOf("]>");if(D>=0){y(D+2);continue}}var p=t.match(br);if(p){y(p[0].length);continue}var m=t.match(Pr);if(m){var v=h;y(m[0].length),E(m[1],v,h);continue}var S=T();if(S){F(S),Wr(S.tagName,t)&&y(1);continue}}var g=void 0,I=void 0,A=void 0;if(C>=0){for(I=t.slice(C);!(Pr.test(I)||wr.test(I)||Br.test(I)||_r.test(I)||(A=I.indexOf("<",1))<0);)C+=A,I=t.slice(C);g=t.substring(0,C)}C<0&&(g=t),g&&y(g.length),e.chars&&g&&e.chars(g,h-g.length,h)}if(t===a){e.chars&&e.chars(t);break}}function y(e){h+=e,t=t.substring(e)}function T(){var e=t.match(wr);if(e){var a,i,n={tagName:e[1],attrs:[],start:h};for(y(e[0].length);!(a=t.match(Rr))&&(i=t.match(Nr)||t.match(xr));)i.start=h,y(i[0].length),i.end=h,n.attrs.push(i);if(a)return n.unarySlash=a[1],y(a[0].length),n.end=h,n}}function F(t){var a=t.tagName,h=t.unarySlash;r&&("p"===i&&Lr(a)&&E(i),o(a)&&i===a&&E(a));for(var l=s(a)||!!h,u=t.attrs.length,c=new Array(u),f=0;f<u;f++){var C=t.attrs[f],d=C[3]||C[4]||C[5]||"",D="a"===a&&"href"===C[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;c[f]={name:C[1],value:Xr(d,D)}}l||(n.push({tag:a,lowerCasedTag:a.toLowerCase(),attrs:c,start:t.start,end:t.end}),i=a),e.start&&e.start(a,c,l,t.start,t.end)}function E(t,a,r){var s,o;if(null==a&&(a=h),null==r&&(r=h),t)for(o=t.toLowerCase(),s=n.length-1;s>=0&&n[s].lowerCasedTag!==o;s--);else s=0;if(s>=0){for(var l=n.length-1;l>=s;l--)e.end&&e.end(n[l].tag,a,r);n.length=s,i=s&&n[s-1].tag}else"br"===o?e.start&&e.start(t,[],!0,a,r):"p"===o&&(e.start&&e.start(t,[],!1,a,r),e.end&&e.end(t,a,r))}E()}(t,{warn:Jr,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,a,s,o,c){var f=n&&n.ns||Qr(t);$&&"svg"===f&&(a=function(t){for(var e=[],a=0;a<t.length;a++){var i=t[a];Is.test(i.name)||(i.name=i.name.replace(As,""),e.push(i))}return e}(a));var C,d=ds(t,a,n);f&&(d.ns=f),"style"!==(C=d).tag&&("script"!==C.tag||C.attrsMap.type&&"text/javascript"!==C.attrsMap.type)||rt()||(d.forbidden=!0);for(var D=0;D<zr.length;D++)d=zr[D](d,e)||d;h||(!function(t){null!=Gi(t,"v-pre")&&(t.pre=!0)}(d),d.pre&&(h=!0)),$r(d.tag)&&(l=!0),h?function(t){var e=t.attrsList,a=e.length;if(a)for(var i=t.attrs=new Array(a),n=0;n<a;n++)i[n]={name:e[n].name,value:JSON.stringify(e[n].value)},null!=e[n].start&&(i[n].start=e[n].start,i[n].end=e[n].end);else t.pre||(t.plain=!0)}(d):d.processed||(ms(d),function(t){var e=Gi(t,"v-if");if(e)t.if=e,vs(t,{exp:e,block:t});else{null!=Gi(t,"v-else")&&(t.else=!0);var a=Gi(t,"v-else-if");a&&(t.elseif=a)}}(d),function(t){null!=Gi(t,"v-once")&&(t.once=!0)}(d)),i||(i=d),s?u(d):(n=d,r.push(d))},end:function(t,e,a){var i=r[r.length-1];r.length-=1,n=r[r.length-1],u(i)},chars:function(t,e,a){if(n&&(!$||"textarea"!==n.tag||n.attrsMap.placeholder!==t)){var i,r,u,c=n.children;if(t=l||t.trim()?"script"===(i=n).tag||"style"===i.tag?t:fs(t):c.length?o?"condense"===o&&us.test(t)?"":" ":s?" ":"":"")l||"condense"!==o||(t=t.replace(cs," ")),!h&&" "!==t&&(r=gr(t,Kr))?u={type:2,expression:r.expression,tokens:r.tokens,text:t}:" "===t&&c.length&&" "===c[c.length-1].text||(u={type:3,text:t}),u&&c.push(u)}},comment:function(t,e,a){if(n){var i={type:3,text:t,isComment:!0};0,n.children.push(i)}}}),i}function ps(t,e){var a,i;!function(t){var e=Vi(t,"key");if(e){t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,(i=Vi(a=t,"ref"))&&(a.ref=i,a.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(a)),function(t){var e;"template"===t.tag?(e=Gi(t,"scope"),t.slotScope=e||Gi(t,"slot-scope")):(e=Gi(t,"slot-scope"))&&(t.slotScope=e);var a=Vi(t,"slot");a&&(t.slotTarget='""'===a?'"default"':a,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||Pi(t,"slot",a,ki(t,"slot")));if("template"===t.tag){var i=Yi(t,ls);if(i){0;var n=Ss(i),r=n.name,s=n.dynamic;t.slotTarget=r,t.slotTargetDynamic=s,t.slotScope=i.value||Cs}}else{var o=Yi(t,ls);if(o){0;var h=t.scopedSlots||(t.scopedSlots={}),l=Ss(o),u=l.name,c=l.dynamic,f=h[u]=ds("template",[],t);f.slotTarget=u,f.slotTargetDynamic=c,f.children=t.children.filter(function(t){if(!t.slotScope)return t.parent=f,!0}),f.slotScope=o.value||Cs,t.children=[],t.plain=!1}}}(t),function(t){"slot"===t.tag&&(t.slotName=Vi(t,"name"))}(t),function(t){var e;(e=Vi(t,"is"))&&(t.component=e);null!=Gi(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var n=0;n<qr.length;n++)t=qr[n](t,e)||t;return function(t){var e,a,i,n,r,s,o,h,l=t.attrsList;for(e=0,a=l.length;e<a;e++){if(i=n=l[e].name,r=l[e].value,es.test(i))if(t.hasBindings=!0,(s=gs(i.replace(es,"")))&&(i=i.replace(hs,"")),os.test(i))i=i.replace(os,""),r=Ni(r),(h=rs.test(i))&&(i=i.slice(1,-1)),s&&(s.prop&&!h&&"innerHtml"===(i=y(i))&&(i="innerHTML"),s.camel&&!h&&(i=y(i)),s.sync&&(o=Xi(r,"$event"),h?Hi(t,'"update:"+('+i+")",o,null,!1,0,l[e],!0):(Hi(t,"update:"+y(i),o,null,!1,0,l[e]),E(i)!==y(i)&&Hi(t,"update:"+E(i),o,null,!1,0,l[e])))),s&&s.prop||!t.component&&Zr(t.tag,t.attrsMap.type,i)?Ri(t,i,r,l[e],h):Pi(t,i,r,l[e],h);else if(ts.test(i))i=i.replace(ts,""),(h=rs.test(i))&&(i=i.slice(1,-1)),Hi(t,i,r,s,!1,0,l[e],h);else{var u=(i=i.replace(es,"")).match(ss),c=u&&u[1];h=!1,c&&(i=i.slice(0,-(c.length+1)),rs.test(c)&&(c=c.slice(1,-1),h=!0)),Bi(t,i,n,r,c,h,s,l[e])}else Pi(t,i,JSON.stringify(r),l[e]),!t.component&&"muted"===i&&Zr(t.tag,t.attrsMap.type,i)&&Ri(t,i,"true",l[e])}}(t),t}function ms(t){var e;if(e=Gi(t,"v-for")){var a=function(t){var e=t.match(as);if(!e)return;var a={};a.for=e[2].trim();var i=e[1].trim().replace(ns,""),n=i.match(is);n?(a.alias=i.replace(is,"").trim(),a.iterator1=n[1].trim(),n[2]&&(a.iterator2=n[2].trim())):a.alias=i;return a}(e);a&&N(t,a)}}function vs(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Ss(t){var e=t.name.replace(ls,"");return e||"#"!==t.name[0]&&(e="default"),rs.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function gs(t){var e=t.match(hs);if(e){var a={};return e.forEach(function(t){a[t.slice(1)]=!0}),a}}var Is=/^xmlns:NS\d+/,As=/^NS\d+:/;function ys(t){return ds(t.tag,t.attrsList.slice(),t.parent)}var Ts=[Ir,yr,{preTransformNode:function(t,e){if("input"===t.tag){var a,i=t.attrsMap;if(!i["v-model"])return;if((i[":type"]||i["v-bind:type"])&&(a=Vi(t,"type")),i.type||a||!i["v-bind"]||(a="("+i["v-bind"]+").type"),a){var n=Gi(t,"v-if",!0),r=n?"&&("+n+")":"",s=null!=Gi(t,"v-else",!0),o=Gi(t,"v-else-if",!0),h=ys(t);ms(h),bi(h,"type","checkbox"),ps(h,e),h.processed=!0,h.if="("+a+")==='checkbox'"+r,vs(h,{exp:h.if,block:h});var l=ys(t);Gi(l,"v-for",!0),bi(l,"type","radio"),ps(l,e),vs(h,{exp:"("+a+")==='radio'"+r,block:l});var u=ys(t);return Gi(u,"v-for",!0),bi(u,":type",a),ps(u,e),vs(h,{exp:n,block:u}),s?h.else=!0:o&&(h.elseif=o),h}}}}];var Fs,Es,Ls={expectHTML:!0,modules:Ts,directives:{model:function(t,e,a){a;var i=e.value,n=e.modifiers,r=t.tag,s=t.attrsMap.type;if(t.component)return Wi(t,i,n),!1;if("select"===r)!function(t,e,a){var i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(a&&a.number?"_n(val)":"val")+"});";i=i+" "+Xi(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Hi(t,"change",i,null,!0)}(t,i,n);else if("input"===r&&"checkbox"===s)!function(t,e,a){var i=a&&a.number,n=Vi(t,"value")||"null",r=Vi(t,"true-value")||"true",s=Vi(t,"false-value")||"false";Ri(t,"checked","Array.isArray("+e+")?_i("+e+","+n+")>-1"+("true"===r?":("+e+")":":_q("+e+","+r+")")),Hi(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+r+"):("+s+");if(Array.isArray($$a)){var $$v="+(i?"_n("+n+")":n)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Xi(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Xi(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Xi(e,"$$c")+"}",null,!0)}(t,i,n);else if("input"===r&&"radio"===s)!function(t,e,a){var i=a&&a.number,n=Vi(t,"value")||"null";Ri(t,"checked","_q("+e+","+(n=i?"_n("+n+")":n)+")"),Hi(t,"change",Xi(e,n),null,!0)}(t,i,n);else if("input"===r||"textarea"===r)!function(t,e,a){var i=t.attrsMap.type,n=a||{},r=n.lazy,s=n.number,o=n.trim,h=!r&&"range"!==i,l=r?"change":"range"===i?Zi:"input",u="$event.target.value";o&&(u="$event.target.value.trim()"),s&&(u="_n("+u+")");var c=Xi(e,u);h&&(c="if($event.target.composing)return;"+c),Ri(t,"value","("+e+")"),Hi(t,l,c,null,!0),(o||s)&&Hi(t,"blur","$forceUpdate()")}(t,i,n);else if(!V.isReservedTag(r))return Wi(t,i,n),!1;return!0},text:function(t,e){e.value&&Ri(t,"textContent","_s("+e.value+")",e)},html:function(t,e){e.value&&Ri(t,"innerHTML","_s("+e.value+")",e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:Fr,mustUseProp:ba,canBeLeftOpenTag:Er,isReservedTag:$a,getTagNamespace:Za,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Ts)},xs=I(function(t){return D("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))});function Ns(t,e){t&&(Fs=xs(e.staticKeys||""),Es=e.isReservedTag||w,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||p(t.tag)||!Es(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(Fs)))}(e);if(1===e.type){if(!Es(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var a=0,i=e.children.length;a<i;a++){var n=e.children[a];t(n),n.static||(e.static=!1)}if(e.ifConditions)for(var r=1,s=e.ifConditions.length;r<s;r++){var o=e.ifConditions[r].block;t(o),o.static||(e.static=!1)}}}(t),function t(e,a){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=a),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var i=0,n=e.children.length;i<n;i++)t(e.children[i],a||!!e.for);if(e.ifConditions)for(var r=1,s=e.ifConditions.length;r<s;r++)t(e.ifConditions[r].block,a)}}(t,!1))}var Os=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,Ms=/\([^)]*?\);*$/,ws=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Rs={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ps={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},bs=function(t){return"if("+t+")return null;"},Bs={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:bs("$event.target !== $event.currentTarget"),ctrl:bs("!$event.ctrlKey"),shift:bs("!$event.shiftKey"),alt:bs("!$event.altKey"),meta:bs("!$event.metaKey"),left:bs("'button' in $event && $event.button !== 0"),middle:bs("'button' in $event && $event.button !== 1"),right:bs("'button' in $event && $event.button !== 2")};function _s(t,e){var a=e?"nativeOn:":"on:",i="",n="";for(var r in t){var s=Hs(t[r]);t[r]&&t[r].dynamic?n+=r+","+s+",":i+='"'+r+'":'+s+","}return i="{"+i.slice(0,-1)+"}",n?a+"_d("+i+",["+n.slice(0,-1)+"])":a+i}function Hs(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return Hs(t)}).join(",")+"]";var e=ws.test(t.value),a=Os.test(t.value),i=ws.test(t.value.replace(Ms,""));if(t.modifiers){var n="",r="",s=[];for(var o in t.modifiers)if(Bs[o])r+=Bs[o],Rs[o]&&s.push(o);else if("exact"===o){var h=t.modifiers;r+=bs(["ctrl","shift","alt","meta"].filter(function(t){return!h[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else s.push(o);return s.length&&(n+=function(t){return"if(!$event.type.indexOf('key')&&"+t.map(ks).join("&&")+")return null;"}(s)),r&&(n+=r),"function($event){"+n+(e?"return "+t.value+"($event)":a?"return ("+t.value+")($event)":i?"return "+t.value:t.value)+"}"}return e||a?t.value:"function($event){"+(i?"return "+t.value:t.value)+"}"}function ks(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var a=Rs[t],i=Ps[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(a)+",$event.key,"+JSON.stringify(i)+")"}var Vs={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(a){return"_b("+a+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:M},Gs=function(t){this.options=t,this.warn=t.warn||Mi,this.transforms=wi(t.modules,"transformCode"),this.dataGenFns=wi(t.modules,"genData"),this.directives=N(N({},Vs),t.directives);var e=t.isReservedTag||w;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Ys(t,e){var a=new Gs(e);return{render:"with(this){return "+(t?Us(t,a):'_c("div")')+"}",staticRenderFns:a.staticRenderFns}}function Us(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Ws(t,e);if(t.once&&!t.onceProcessed)return Xs(t,e);if(t.for&&!t.forProcessed)return Ks(t,e);if(t.if&&!t.ifProcessed)return Js(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var a=t.slotName||'"default"',i=$s(t,e),n="_t("+a+(i?","+i:""),r=t.attrs||t.dynamicAttrs?to((t.attrs||[]).concat(t.dynamicAttrs||[]).map(function(t){return{name:y(t.name),value:t.value,dynamic:t.dynamic}})):null,s=t.attrsMap["v-bind"];!r&&!s||i||(n+=",null");r&&(n+=","+r);s&&(n+=(r?"":",null")+","+s);return n+")"}(t,e);var a;if(t.component)a=function(t,e,a){var i=e.inlineTemplate?null:$s(e,a,!0);return"_c("+t+","+qs(e,a)+(i?","+i:"")+")"}(t.component,t,e);else{var i;(!t.plain||t.pre&&e.maybeComponent(t))&&(i=qs(t,e));var n=t.inlineTemplate?null:$s(t,e,!0);a="_c('"+t.tag+"'"+(i?","+i:"")+(n?","+n:"")+")"}for(var r=0;r<e.transforms.length;r++)a=e.transforms[r](t,a);return a}return $s(t,e)||"void 0"}function Ws(t,e){t.staticProcessed=!0;var a=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+Us(t,e)+"}"),e.pre=a,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Xs(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Js(t,e);if(t.staticInFor){for(var a="",i=t.parent;i;){if(i.for){a=i.key;break}i=i.parent}return a?"_o("+Us(t,e)+","+e.onceId+++","+a+")":Us(t,e)}return Ws(t,e)}function Js(t,e,a,i){return t.ifProcessed=!0,function t(e,a,i,n){if(!e.length)return n||"_e()";var r=e.shift();return r.exp?"("+r.exp+")?"+s(r.block)+":"+t(e,a,i,n):""+s(r.block);function s(t){return i?i(t,a):t.once?Xs(t,a):Us(t,a)}}(t.ifConditions.slice(),e,a,i)}function Ks(t,e,a,i){var n=t.for,r=t.alias,s=t.iterator1?","+t.iterator1:"",o=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(i||"_l")+"(("+n+"),function("+r+s+o+"){return "+(a||Us)(t,e)+"})"}function qs(t,e){var a="{",i=function(t,e){var a=t.directives;if(!a)return;var i,n,r,s,o="directives:[",h=!1;for(i=0,n=a.length;i<n;i++){r=a[i],s=!0;var l=e.directives[r.name];l&&(s=!!l(t,r,e.warn)),s&&(h=!0,o+='{name:"'+r.name+'",rawName:"'+r.rawName+'"'+(r.value?",value:("+r.value+"),expression:"+JSON.stringify(r.value):"")+(r.arg?",arg:"+(r.isDynamicArg?r.arg:'"'+r.arg+'"'):"")+(r.modifiers?",modifiers:"+JSON.stringify(r.modifiers):"")+"},")}if(h)return o.slice(0,-1)+"]"}(t,e);i&&(a+=i+","),t.key&&(a+="key:"+t.key+","),t.ref&&(a+="ref:"+t.ref+","),t.refInFor&&(a+="refInFor:true,"),t.pre&&(a+="pre:true,"),t.component&&(a+='tag:"'+t.tag+'",');for(var n=0;n<e.dataGenFns.length;n++)a+=e.dataGenFns[n](t);if(t.attrs&&(a+="attrs:"+to(t.attrs)+","),t.props&&(a+="domProps:"+to(t.props)+","),t.events&&(a+=_s(t.events,!1)+","),t.nativeEvents&&(a+=_s(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(a+="slot:"+t.slotTarget+","),t.scopedSlots&&(a+=function(t,e,a){var i=t.for||Object.keys(e).some(function(t){var a=e[t];return a.slotTargetDynamic||a.if||a.for||zs(a)}),n=!!t.if;if(!i)for(var r=t.parent;r;){if(r.slotScope&&r.slotScope!==Cs||r.for){i=!0;break}r.if&&(n=!0),r=r.parent}var s=Object.keys(e).map(function(t){return js(e[t],a)}).join(",");return"scopedSlots:_u(["+s+"]"+(i?",null,true":"")+(!i&&n?",null,false,"+function(t){var e=5381,a=t.length;for(;a;)e=33*e^t.charCodeAt(--a);return e>>>0}(s):"")+")"}(t,t.scopedSlots,e)+","),t.model&&(a+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var r=function(t,e){var a=t.children[0];0;if(a&&1===a.type){var i=Ys(a,e.options);return"inlineTemplate:{render:function(){"+i.render+"},staticRenderFns:["+i.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);r&&(a+=r+",")}return a=a.replace(/,$/,"")+"}",t.dynamicAttrs&&(a="_b("+a+',"'+t.tag+'",'+to(t.dynamicAttrs)+")"),t.wrapData&&(a=t.wrapData(a)),t.wrapListeners&&(a=t.wrapListeners(a)),a}function zs(t){return 1===t.type&&("slot"===t.tag||t.children.some(zs))}function js(t,e){var a=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!a)return Js(t,e,js,"null");if(t.for&&!t.forProcessed)return Ks(t,e,js);var i=t.slotScope===Cs?"":String(t.slotScope),n="function("+i+"){return "+("template"===t.tag?t.if&&a?"("+t.if+")?"+($s(t,e)||"undefined")+":undefined":$s(t,e)||"undefined":Us(t,e))+"}",r=i?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+n+r+"}"}function $s(t,e,a,i,n){var r=t.children;if(r.length){var s=r[0];if(1===r.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag){var o=a?e.maybeComponent(s)?",1":",0":"";return""+(i||Us)(s,e)+o}var h=a?function(t,e){for(var a=0,i=0;i<t.length;i++){var n=t[i];if(1===n.type){if(Zs(n)||n.ifConditions&&n.ifConditions.some(function(t){return Zs(t.block)})){a=2;break}(e(n)||n.ifConditions&&n.ifConditions.some(function(t){return e(t.block)}))&&(a=1)}}return a}(r,e.maybeComponent):0,l=n||Qs;return"["+r.map(function(t){return l(t,e)}).join(",")+"]"+(h?","+h:"")}}function Zs(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function Qs(t,e){return 1===t.type?Us(t,e):3===t.type&&t.isComment?(i=t,"_e("+JSON.stringify(i.text)+")"):"_v("+(2===(a=t).type?a.expression:eo(JSON.stringify(a.text)))+")";var a,i}function to(t){for(var e="",a="",i=0;i<t.length;i++){var n=t[i],r=eo(n.value);n.dynamic?a+=n.name+","+r+",":e+='"'+n.name+'":'+r+","}return e="{"+e.slice(0,-1)+"}",a?"_d("+e+",["+a.slice(0,-1)+"])":e}function eo(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function ao(t,e){try{return new Function(t)}catch(a){return e.push({err:a,code:t}),M}}function io(t){var e=Object.create(null);return function(a,i,n){(i=N({},i)).warn;delete i.warn;var r=i.delimiters?String(i.delimiters)+a:a;if(e[r])return e[r];var s=t(a,i);var o={},h=[];return o.render=ao(s.render,h),o.staticRenderFns=s.staticRenderFns.map(function(t){return ao(t,h)}),e[r]=o}}var no,ro,so=(no=function(t,e){var a=Ds(t.trim(),e);!1!==e.optimize&&Ns(a,e);var i=Ys(a,e);return{ast:a,render:i.render,staticRenderFns:i.staticRenderFns}},function(t){function e(e,a){var i=Object.create(t),n=[],r=[],s=function(t,e,a){(a?r:n).push(t)};if(a)for(var o in a.modules&&(i.modules=(t.modules||[]).concat(a.modules)),a.directives&&(i.directives=N(Object.create(t.directives||null),a.directives)),a)"modules"!==o&&"directives"!==o&&(i[o]=a[o]);i.warn=s;var h=no(e.trim(),i);return h.errors=n,h.tips=r,h}return{compile:e,compileToFunctions:io(e)}})(Ls),oo=(so.compile,so.compileToFunctions);function ho(t){return(ro=ro||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',ro.innerHTML.indexOf("&#10;")>0}var lo=!!K&&ho(!1),uo=!!K&&ho(!0),co=I(function(t){var e=ei(t);return e&&e.innerHTML}),fo=Fa.prototype.$mount;Fa.prototype.$mount=function(t,e){if((t=t&&ei(t))===document.body||t===document.documentElement)return this;var a=this.$options;if(!a.render){var i=a.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&(i=co(i));else{if(!i.nodeType)return this;i=i.innerHTML}else t&&(i=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(i){0;var n=oo(i,{outputSourceRange:!1,shouldDecodeNewlines:lo,shouldDecodeNewlinesForHref:uo,delimiters:a.delimiters,comments:a.comments},this),r=n.render,s=n.staticRenderFns;a.render=r,a.staticRenderFns=s}}return fo.call(this,t,e)},Fa.compile=oo,e.a=Fa}).call(e,a("DuR2"))},"78th":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7t+N"),r=a.n(n);function s(){}s.HttpReqeust=function(t){r.a.ajax({url:t.url,data:t.data,type:t.type,dataType:t.dataType,async:t.async,success:t.success,error:t.error})},s.HttpRequest=function(t){r.a.ajax({url:t.url,data:t.data,type:t.type,dataType:t.dataType,async:t.async,success:t.success,error:t.error})};var o={MINUTE_ID:101,MULTIDAY_MINUTE_ID:102,HISTORY_MINUTE_ID:103,KLINE_DAY_ID:0,KLINE_WEEK_ID:1,KLINE_MONTH_ID:2,KLINE_YEAR_ID:3,KLINE_MINUTE_ID:4,KLINE_5_MINUTE_ID:5,KLINE_15_MINUTE_ID:6,KLINE_30_MINUTE_ID:7,KLINE_60_MINUTE_ID:8};var h=new function(){this.DataMap=new Map,this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Add=function(t){this.DataMap.set(t.ID,t)}};function l(){this.DataMap=new Map([["MA",this.MA],["",this.MA],["BOLL",this.BOLL],["BOLL",this.BOLL2],["BBI",this.BBI],["DKX",this.DKX],["MIKE",this.MIKE],["PBX",this.PBX],["ENE",this.ENE],["MACD",this.MACD],["KDJ",this.KDJ],["VOL",this.VOL],["RSI",this.RSI],["BRAR",this.BRAR],["WR",this.WR],["BIAS",this.BIAS],["OBV",this.OBV],["DMI",this.DMI],["CR",this.CR],["PSY",this.PSY],["CCI",this.CCI],["DMA",this.DMA],["TRIX",this.TRIX],["VR",this.VR],["EMV",this.EMV],["ROC",this.ROC],["MTM",this.MTM],["FSL",this.FSL],["CYR",this.CYR],["MASS",this.MASS],["WAD",this.WAD],["CHO",this.CHO],["ADTM",this.ADTM],["HSL",this.HSL],["BIAS36",this.BIAS36],["BIAS_QL",this.BIAS_QL],["DPO",this.DPO],["OSC",this.OSC],["ATR",this.ATR],["NVI",this.NVI],["PVI",this.PVI],["UOS",this.UOS],["CYW",this.CYW],["LON",this.LON],["NDB",this.NDB],["SKDJ",this.SKDJ],["KD",this.KD],["FKX",this.FKX],["DKCOL",this.DKCOL],["UDL",this.UDL],["MFI",this.MFI],["LWR",this.LWR],["MARSI",this.MARSI],["CYD",this.CYD],["CYF",this.CYF],["TAPI",this.TAPI],["VMACD",this.VMACD],["QACD",this.QACD],["VPT",this.VPT],["WVAD",this.WVAD],["DBQR",this.DBQR],["JS",this.JS],["CYE",this.CYE],["QR",this.QR],["GDX",this.GDX],["JLHB",this.JLHB],["PCNT",this.PCNT],["BTX",this.BTX],["AMO",this.AMO],["VRSI",this.VRSI],["HSCOL",this.HSCOL],["DBQRV",this.DBQRV],["DBLB",this.DBLB],["ACD",this.ACD],["EXPMA",this.EXPMA],["EXPMA_S",this.EXPMA_S],["HMA",this.HMA],["LMA",this.LMA],["VMA",this.VMA],["AMV",this.AMV],["BBIBOLL",this.BBIBOLL],["ALLIGAT",this.ALLIGAT],["ZX",this.ZX],["XS",this.XS],["XS2",this.XS2],["SG-XDT",this.SG_XDT],["SG-SMX",this.SG_SMX],["SG-LB",this.SG_LB],["SG-PF",this.SG_PF],["RAD",this.RAD],["SHT",this.SHT],["ZLJC",this.ZLJC],["ZLMM",this.ZLMM],["SLZT",this.SLZT],["ADVOL",this.ADVOL],["CYC",this.CYC],["CYS",this.CYS],["CYQKL",this.CYQKL],["SCR",this.SCR],["ASR",this.ASR],["SAR",this.SAR],["TJCJL",this.TJCJL],["",this.VOLRate],["K",this.HeikinAshi],["EMPTY",this.EMPTY],["",this.Dragon4_Main],["-",this.Dragon4_Fig],["",this.FundsAnalysis],["",this.MarginProportion],["",this.NewsNegative],["",this.UpDownAnalyze],["",this.HK2SHSZ],["",this.ShareHolder],["Zealink-",this.Zealink_Index1],["Zealink-",this.Zealink_Index2],["Zealink-",this.Zealink_Index3],["Zealink-",this.Zealink_Index4],["Zealink-",this.Zealink_Index5],["Zealink-",this.Zealink_Index6],["Zealink-",this.Zealink_Index7],["Zealink-",this.Zealink_Index8],["Zealink-",this.Zealink_Index9],["Zealink-BS",this.Zealink_Index10],["Zealink-BS2",this.Zealink_Index11],["-BS",this.FXG_BSPoint],["-",this.FXG_INDEX],["-",this.FXG_INDEX2],["-",this.FXG_INDEX3],["K-",this.COLOR_KSTAR1],["K-",this.COLOR_KSTAR2],["K-",this.COLOR_KSTAR3],["K-",this.COLOR_SHI1],["K-",this.COLOR_K220],["K-",this.COLOR_K300],["K-",this.COLOR_K310],["K-",this.COLOR_K380],["K-",this.COLOR_K390],["K-",this.COLOR_K134],["K-",this.COLOR_K140],["K-",this.COLOR_K150],["K-",this.COLOR_K160],["K-",this.COLOR_K165],["K-",this.COLOR_K170],["K-",this.COLOR_K180],["K-",this.COLOR_K190],["K-",this.COLOR_CSFR],["K-",this.COLOR_WYGD],["K-",this.COLOR_SGCJ],["K-",this.COLOR_SZTAI],["K-",this.COLOR_SWORD],["K-",this.COLOR_PINGDING],["K-",this.COLOR_PINGDI],["K-",this.COLOR_DAYANZHU],["K-",this.COLOR_DAYINGZHU],["K-",this.COLOR_HYFG],["K-",this.COLOR_TKQK],["K-",this.COLOR_SFWY],["K-",this.COLOR_SSSBQ],["K-",this.COLOR_XDSBQ],["K-",this.COLOR_CHXY],["K-",this.COLOR_CHSY],["K-",this.COLOR_FENLI],["-BIAS",this.TRADE_BIAS],["-CCI",this.TRADE_CCI],["-DMI",this.TRADE_DMI],["-KD",this.TRADE_KD],["-BOLL",this.TRADE_BOLL],["-KDJ",this.TRADE_KDJ],["-MA",this.TRADE_MA],["-MACD",this.TRADE_MACD],["-MTM",this.TRADE_MTM],["-PSY",this.TRADE_PSY],["-ROC",this.TRADE_ROC],["-RSI",this.TRADE_RSI],["-VR",this.TRADE_VR],["-DPSJ",this.TRADE_DPSJ],["TEST",this.TEST]])}function u(t){this.DivElement=t,this.DivToolElement=null,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jschart-drawing",this.CanvasElement.id=m(),this.CanvasElement.setAttribute("tabindex",0),t.hasChildNodes("canvas")||t.appendChild(this.CanvasElement),this.ModifyIndexDialog=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.Title={ID:m()},this.ParamList={ID:m()},this.ParamData=[],this.Identify,this.HQChart,this.Create=function(){this.ID=m();var t=document.createElement("div");t.className="jchart-modifyindex-box",t.id=this.ID,t.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span></span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'><input/>MA</div>        <div class='parameter-footer'>            <button class='submit' ></button>            <button class='cancel' ></button>        </div>        </div>",this.DivElement.appendChild(t),r()("#"+this.ID+" .submit").click({divBox:this},function(t){t.data.divBox.Hide()});var e=t.getElementsByTagName("span")[0];e.id=this.Title.ID;var a=t.getElementsByClassName("parameter-content")[0];a.id=this.ParamList.ID},this.SetTitle=function(t){r()("#"+this.Title.ID).html(t)},this.ClearParamList=function(){r()("#"+this.ParamList.ID).empty(),this.ParamData=[]},this.BindParam=function(t,e){var a=t.WindowIndex[e];for(var i in a.Arguments){var n=a.Arguments[i];if(null==n.Name||isNaN(n.Value))break;var s=m(),o='<input class="row-line" id="'+s+'" value="'+n.Value+'" type="number" step="1"/>'+n.Name+"<br>";r()("#"+this.ParamList.ID).append(o),this.ParamData.push({ID:s,Value:n.Value})}var h=this;for(var i in this.ParamData){var n=this.ParamData[i];r()("#"+n.ID).mouseup({Chart:t,Identify:e,ParamIndex:i},function(t){var e=parseInt(r()(this).val()),a=h.HQChart,i=h.Identify,n=t.data.ParamIndex;a.WindowIndex[i].Arguments[n].Value=e,a.UpdateWindowIndex(i)}),r()("#"+n.ID).keyup({Chart:t,Identify:e,ParamIndex:i},function(t){var e=parseInt(r()(this).val()),a=h.HQChart,i=h.Identify,n=t.data.ParamIndex;a.WindowIndex[i].Arguments[n].Value=e,a.UpdateWindowIndex(i)})}},this.BindCancel=function(){var t=this;r()("#"+this.ID+" .cancel").click(function(){var e=t.HQChart,a=t.Identify;t.RestoreParam(e.WindowIndex[a]),e.UpdateWindowIndex(a),t.Hide()}),r()("#"+this.ID+" #close").click(function(){var e=t.HQChart,a=t.Identify;t.RestoreParam(e.WindowIndex[a]),e.UpdateWindowIndex(a),t.Hide()})},this.RestoreParam=function(t){for(var e in this.ParamData){var a=this.ParamData[e];t.Arguments[e].Value=a.Value}},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ModifyIndexDialog;if(i){null==i.ID&&i.Create(),i.Identify=a,i.HQChart=e,i.SetTitle(e.WindowIndex[a].Name+" "),i.ClearParamList(),i.BindParam(e,a),i.BindCancel();var n=e.Frame.ChartBorder,r=(v(),n.GetLeft()+n.GetWidth()/2),s=n.GetTop()+n.GetHeight()/2;i.Show(r,s,200,200)}}}(t),this.ChangeIndexDialog=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.DivElement=t,this.IndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.OverlayIndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.IsOverlayIndex=!1,this.Create=function(){var t=document.createElement("div");t.className="jchart-changeindex-box",t.id=this.ID=m(),t.innerHTML='<div class="target-panel">\n            <div class="target-header">\n                <span></span>\n                <strong class="close-tar icon iconfont icon-close"></strong>\n            </div>\n            <div class="target-content">\n                <div class="target-left">\n                    <input type="text">\n                    <ul></ul>\n                </div>\n                <div class="target-right">\n                    <ul></ul>\n                </div>\n            </div>\n        </div>',this.DivElement.appendChild(t)},this.ReqeustData=function(){if(r()(".target-left ul li").length>0)return!1;var t=this.IndexTreeApiUrl;1==this.IsOverlayIndex&&(t=this.OverlayIndexTreeApiUrl),s.HttpRequest({url:t,type:"get",success:function(t){var e,a,i,n=t.list;!function(t){r.a.each(t,function(t,e){var a;a="<li>"+e.node+"</li>",r()(".target-left ul").append(a)}),r()(".target-left ul li:first-child").addClass("active-list")}(n),e=n,i=[],r.a.each(e,function(t,e){i.push(e.list)}),r.a.each(i[0],function(t,e){a="<li id="+e.id+">"+e.name+"</li>",r()(".target-right ul").append(a)}),r()(".target-left ul").delegate("li","click",function(){r()(this).addClass("active-list").siblings().removeClass("active-list");var t=r()(this).index();r()(".target-right ul").html(""),r.a.each(i[t],function(t,e){a="<li id="+e.id+">"+e.name+"</li>",r()(".target-right ul").append(a)})})}})},this.BindClose=function(t){r()("#"+this.ID+" .close-tar").click({Chart:t},function(t){var e=t.data.Chart;e.ChangeIndexDialog.Hide()})},this.BindSearch=function(t){r()(".target-left input").on("input",{Chart:t},function(t){let e=new l,a=e.Search(t.target.value);for(var i in r()(".target-right ul").html(""),a){var n=a[i],s="<li id="+n+">"+n+"</li>";r()(".target-right ul").append(s)}})},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ChangeIndexDialog,n=t.data.IsOverlay;if(i){null==i.ID&&i.Create(),i.IsOverlayIndex=n,i.ReqeustData(),r()(".target-right ul").undelegate().delegate("li","click",function(){var t=r()(this).attr("id");n?e.AddOverlayIndex({WindowIndex:a,IndexName:t}):e.ChangeIndex(a,t),r()(this).addClass("active-list").siblings().removeClass("active-list")}),i.BindSearch(e),i.BindClose(e);var s=e.Frame.ChartBorder,o=(v(),s.GetLeft()+s.GetWidth()/2),h=s.GetTop()+s.GetHeight()/2;i.Show(o,h,200,200)}}}(t),this.MinuteDialog=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.JSChart=null,this.Height=500,this.Width=600,this.Symbol,this.TradeDate,this.HistoryData,this.Create=function(){this.ID=m();var t=document.createElement("div");t.className="jchart-kline-minute-box",t.id=this.ID;var e=m();t.innerHTML=`<div><div class='minute-dialog-title'><span></span><strong class='close-munite icon iconfont icon-close'></strong></div><div class='minute-hqchart' id='${e}' ></div></div>`,t.style.width=this.Height+"px",t.style.height=this.Width+"px",this.DivElement.appendChild(t),this.JSChart=u.Init(document.getElementById(e));var a={Type:"",Symbol:this.Symbol,IsAutoUpdate:!1,IsShowRightMenu:!1,HistoryMinute:{TradeDate:this.TradeDate,IsShowName:!1,IsShowDate:!1}};this.JSChart.SetOption(a)},this.BindClose=function(t){r()("#"+this.ID+" .close-munite").click({Chart:t},function(t){var e=t.data.Chart;e.MinuteDialog.Hide()})},this.DoModal=function(t){this.UpColor=fe.UpTextColor,this.DownColor=fe.DownTextColor,this.UnchagneColor=fe.UnchagneTextColor;var e=t.data.Chart,a=t.data.Tooltip,i=e.MinuteDialog;if(i.Symbol=e.Symbol,i.TradeDate=a.Data.Date,i){null==i.ID?i.Create():(i.JSChart.JSChartContainer.TradeDate=i.TradeDate,i.JSChart.ChangeSymbol(this.Symbol));t.clientX,t.clientY;i.Show(500,100,600,500),i.JSChart.OnSize(),this.BindClose(e),this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor};var n=t.data.Chart.Name,s=t.data.Tooltip.Data,o=(new Date(parseInt(s.Date/1e4),s.Date/100%100-1,s.Date%100),s.Date.toString()),h=o.substring(0,4)+"-"+o.substring(4,6)+"-"+o.substring(6,8),l="<span>"+n+"</span><span>"+h+"</span>&nbsp;<span style='color:"+this.GetColor(s.Open,s.YClose)+";'>:"+s.Open.toFixed(2)+"</span><span style='color:"+this.GetColor(s.High,s.YClose)+";'>:"+s.High.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Low,s.YClose)+";'>:"+s.Low.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Close,s.YClose)+";'>:"+s.Close.toFixed(2)+"</span><span style='color:"+this.VolColor+";'>:"+It.FormatValueString(s.Vol,2)+"</span><span style='color:"+this.AmountColor+";'>:"+It.FormatValueString(s.Amount,2)+"</span>";r()(".minute-dialog-title span").html(l)}}}(t),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.ToolElement&&(t-=this.ToolElement.style.height.replace("px","")),this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=d();this.CanvasElement.height*=e,this.CanvasElement.width*=e,console.log(`[JSChart::OnSize] devicePixelRatio=${window.devicePixelRatio}, height=${this.CanvasElement.height}, width=${this.CanvasElement.width}`),this.JSChartContainer&&this.JSChartContainer.Frame&&this.JSChartContainer.Frame.SetSizeChage(!0),this.JSChartContainer&&this.JSChartContainer.Draw()},this.AdjustChartBorder=function(t){var e=d();t.Frame.ChartBorder.Left*=e,t.Frame.ChartBorder.Right*=e,t.Frame.ChartBorder.Top*=e,t.Frame.ChartBorder.Bottom*=e},this.AdjustTitleHeight=function(t){var e=d();for(let a in t.Frame.SubFrame)t.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight*=e;t.ChartCorssCursor.TextHeight*=e},this.CreateKLineChartContainer=function(t){var e=null;if(e="K"===t.Type?new ge(this.CanvasElement):new me(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new Oe(this.DivElement)),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),e.SelectRectRightMenu=new function(t){this.newMethod=Oe,this.newMethod(t),delete this.newMethod,this.DoModal=function(e){var a=e.data.Chart,i=e.data.X,n=e.data.Y,s=[{text:"",click:function(){console.log("[KLineSelectRightMenu::click] ");var a=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null),this.HQChart.HideSelectRect()},this.Create=function(){this.ID=m();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span></span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'></div>        <div class='parameter-footer'>            <button id='close' class='submit' ></button>            <button id='match' class='submit' ></button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,r()("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()}),r()("#"+this.ID+" #match").click({divBox:this},function(t){t.data.divBox.KLineMatch()})},this.BindData=function(){for(var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End,i={Open:0,Close:0,High:0,Low:0,YClose:0,Vol:0,Amount:0,Date:{Start:0,End:0},Count:0,KLine:{Up:0,Down:0,Unchanged:0}},n=e;n<=a&&n<t.Data.length;++n){var s=t.Data[n];n==e&&(i.Date.Start=s.Date,i.Open=s.Open,i.High=s.High,i.Low=s.Low,i.YClose=s.YClose),i.Date.End=s.Date,i.Close=s.Close,i.Vol+=s.Vol,i.Amount+=s.Amount,++i.Count,i.High<s.High&&(i.High=s.High),i.Low>s.Low&&(i.Low=s.Low),s.Close>s.Open?++i.KLine.Up:s.Close<s.Open?++i.KLine.Down:++i.KLine.Unchanged}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),s.YClose>0&&(i.Increase=(i.Close-i.YClose)/i.YClose*100,i.Amplitude=(i.High-i.Low)/i.YClose*100);var o=Be(this.SelectData.Symbol),h=i.Date.Start.toString().substring(0,4)+"/"+i.Date.Start.toString().substring(4,6)+"/"+i.Date.Start.toString().substring(6,8),l=i.Date.End.toString().substring(0,4)+"/"+i.Date.End.toString().substring(4,6)+"/"+i.Date.End.toString().substring(6,8),u="",c="",f="",C="";e<=0&&(u="BtnBackground"),e>=a&&(c="BtnBackground",f="BtnBackground"),a>=t.Data.length-1&&(C="BtnBackground");var d=document.createElement("div");d.className="jchart-select-table-right",d.innerHTML='<div class="jchart-select-date">\n            <span>: '+h+'<i class="start-date-left '+u+'"><</i><i class="start-date-right '+c+'">></i></span>\n            <span>: '+l+'<i class="end-date-left '+f+'"><</i><i class="end-date-right '+C+'">></i></span>\n            <span>: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>: </strong><span>"+i.YClose.toFixed(o)+"</span></td>               <td><strong>: </strong><span>"+i.Close.toFixed(o)+"</span></td>               <td><strong>: </strong><span>"+i.AvPrice.toFixed(o)+"</span></td></tr>\n            <tr><td><strong>: </strong><span>"+i.Low.toFixed(o)+"</span></td>               <td><strong>: </strong><span>"+i.High.toFixed(o)+'</span></td>               <td><strong>: </strong><span class="'+It.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>: </strong><span>"+It.FormatValueString(i.Vol,2)+"</span></td>               <td><strong>: </strong><span>"+It.FormatValueString(i.Amount,2)+"</span></td></tr>\n            <tr><td><strong>: </strong><span>"+i.KLine.Up+"</span></td>               <td><strong>: </strong><span>"+i.KLine.Down+"</span></td>               <td><strong>: </strong><span>"+i.KLine.Unchanged+"</span></td></tr>\n        </table>",r()(".parameter-content").html(d),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&r()(".jchart-select-date .start-date-left").click(function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),t.SelectData.Start<t.SelectData.End&&(r()(".jchart-select-date .start-date-right").click(function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),r()(".jchart-select-date .end-date-left").click(function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.End<t.SelectData.Data.Data.length-1&&r()(".jchart-select-date .end-date-right").click(function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.HQChart=e,this.BindData();var a=e.Frame.ChartBorder,i=(v(),a.GetWidth()/2),n=a.GetHeight()/2;this.Show(i,n,200,200)},this.KLineMatch=function(t){var e=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.Title="......",this.Dialog,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null)},this.SetTitle=function(t){this.Title=t,this.Dialog},this.Create=function(){this.ID=m();var t=document.createElement("div");t.className="jchart-wait-box",t.id=this.ID,t.innerHTML=`<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>${this.Title}</span>\n            </div>\n        </div>`.trim(),this.DivElement.appendChild(t),this.Dialog=t},this.DoModal=function(t){this.Title=t.data.Title;var e=t.data.Chart;null==this.ID&&this.Create();var a=e.Frame.ChartBorder,i=(v(),a.GetWidth()/2),n=a.GetHeight()/2;this.Show(i,n,200,40)}}(this.DivElement);e.DoModal({data:{Title:"......",Chart:this.HQChart}}),this.Close();var a=this.HQChart,i={Scope:{Plate:["CNA.ci"],Minsimilar:.9},WaitDialog:e};a.RequestKLineMatch(this.SelectData,i)}}(t);a.DoModal(e)}}];this.Show({x:i,y:n,position:a.Frame.Position,data:s})},this.Show=function(t){r.a.extend(this.option,t),this.ID||this.Create();var e=r()("#topMenu_"+this.ID),a=e.outerWidth(),i=e.outerHeight(),n=this.option.x,s=this.option.y;a>this.option.position.X+this.option.position.W-n&&(n-=a),i>this.option.position.Y+this.option.position.H-s&&(s-=i),e.hide(),e.css({position:"absolute",left:n+"px",top:s+"px"}).show(),r()("#topMenu_"+this.ID).find("tr").show(),this.isInit=!0}}(this.DivElement),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(e.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(e.KLineDrawType=t.KLine.DrawType),t.KLine.FirstShowDate>20000101&&(e.CustomShow={Date:t.KLine.FirstShowDate})),t.Page&&(t.Page.Day&&1==t.Page.Day.Enable&&(e.Page.Day.Enable=!0),t.Page.Minute&&1==t.Page.Minute.Enable&&(e.Page.Minute.Enable=!0)),t.DragDownload&&(t.DragDownload.Day&&1==t.DragDownload.Day.Enable&&(e.DragDownload.Day.Enable=!0),t.DragDownload.Minute&&1==t.DragDownload.Minute.Enable&&(e.DragDownload.Minute.Enable=!0)),t.Language&&("CN"===t.Language?e.LanguageID=Ce.LANGUAGE_CHINESE_ID:"EN"===t.Language&&(e.LanguageID=Ce.LANGUAGE_ENGLISH_ID)),t.DrawPicture&&t.DrawPicture.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawPicture.StorageKey),t.StepPixel>0&&(e.StepPixel=t.StepPixel),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),1==t.IsApiPeriod&&(e.IsApiPeriod=t.IsApiPeriod),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom)),this.AdjustChartBorder(e),t.KLine&&t.KLine.PageSize>0){let a=e.GetMaxMinPageSize();a.Max>10&&a.Max<t.KLine.PageSize?e.PageSize=a.Max:a.Min>10&&a.Min>t.KLine.PageSize?e.PageSize=a.Min:e.PageSize=t.KLine.PageSize}if(!0===t.IsCorssOnlyDrawKLine&&(e.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(e.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(e.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(e.PressTime=t.CorssCursorInfo.PressTime)),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),t.Frame)for(var a in t.Frame){var i=t.Frame[a];e.Frame.SubFrame[a]&&(i.SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=i.StringFormat),It.IsNumber(i.FloatPrecision)&&(e.Frame.SubFrame[a].Frame.YSplitOperator.FloatPrecision=i.FloatPrecision),i.Custom&&(e.Frame.SubFrame[a].Frame.YSplitOperator.Custom=i.Custom),isNaN(i.Height)||(e.Frame.SubFrame[a].Height=i.Height),!1!==i.IsShowLeftText&&!0!==i.IsShowLeftText||(e.Frame.SubFrame[a].Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.SubFrame[a].Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),!1!==i.IsShowRightText&&!0!==i.IsShowRightText||(e.Frame.SubFrame[a].Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.SubFrame[a].Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),i.TopSpace>=0&&(e.Frame.SubFrame[a].Frame.ChartBorder.TopSpace=i.TopSpace),i.BottomSpace>=0&&(e.Frame.SubFrame[a].Frame.ChartBorder.BottomSpace=i.BottomSpace))}if(t.KLine&&(0==t.KLine.ShowKLine&&(e.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(e.ChartPaint[0].InfoPosition=t.KLine.InfoPosition)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(e.TitlePaint[0].IsShow=!1)),t.Overlay)for(var a in t.Overlay){i=t.Overlay[a];e.OverlaySymbol(i.Symbol,i)}if(t.ExtendChart)for(var a in t.ExtendChart){i=t.ExtendChart[a];e.CreateExtendChart(i.Name,i)}let n=new l;if(t.ColorIndex){i=t.ColorIndex;let a=n.Get(i.Index);a&&(a.ID=i.Index,e.ColorIndex=new ea(a.Name,a.Script,a.Args,a))}if(t.TradeIndex){i=t.TradeIndex;let a=n.Get(i.Index);a&&(a.ID=i.Index,e.TradeIndex=new ea(a.Name,a.Script,a.Args,a))}for(var a in t.Windows){if((i=t.Windows[a]).Script)e.WindowIndex[a]=new ea(i.Name,i.Script,i.Args,i);else if(i.JsonData)e.WindowIndex[a]=new Te(i.Name,i.Script,i.Args,i);else if(i.Local&&i.Local.Data)e.WindowIndex[a]=new ia(i.Local.Name,i.Local.Args,{JsonData:i.Local.Data});else if(i.API){var s=i.API;e.WindowIndex[a]=new aa(s.Name,s.Script,s.Args,i)}else{let t=De.Get(i.Index);if(t)e.WindowIndex[a]=t.Create(),e.CreateWindowIndex(a);else{let t=n.Get(i.Index);if(!t)continue;i.Lock&&(t.Lock=i.Lock),t.ID=i.Index;var o=t.Args;i.Args&&(o=i.Args),e.WindowIndex[a]=new ea(t.Name,t.Script,o,t),i.StringFormat>0&&(e.WindowIndex[a].StringFormat=i.StringFormat),i.FloatPrecision>=0&&(e.WindowIndex[a].FloatPrecision=i.FloatPrecision)}}null!=i.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=i.Modify),null!=i.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=i.Change),null!=i.Close&&(e.Frame.SubFrame[a].Frame.CloseIndex=i.Close),null!=i.Overlay&&(e.Frame.SubFrame[a].Frame.OverlayIndex=i.Overlay),isNaN(i.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=i.TitleHeight)}for(var a in t.OverlayIndexFrameWidth>40&&(e.OverlayIndexFrameWidth=t.OverlayIndexFrameWidth),t.OverlayIndex){(i=t.OverlayIndex[a]).Windows>=e.Frame.SubFrame.length||e.CreateOverlayWindowsIndex({WindowIndex:i.Windows,IndexName:i.Index,ShowRightText:i.ShowRightText})}return this.AdjustTitleHeight(e),e},this.CreateCustomKLineChartContainer=function(t){var e=new function(t){this.newMethod=me,this.newMethod(t),delete this.newMethod,this.ClassName="CustomKLineChartContainer",this.CustomKLineApiUrl=fe.Domain+"/API/IndexCalculate",this.CustomStock,this.QueryDate={Start:20180101,End:20180627},this.RequestHistoryData=function(){var t=this;this.ChartSplashPaint.IsEnableSplash=!0,this.Draw(),s.HttpRequest({url:this.CustomKLineApiUrl,data:{stock:t.CustomStock,Name:t.Symbol,date:{startdate:t.QueryDate.Start,enddate:t.QueryDate.End}},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryData(e)}})},this.RecvHistoryData=function(t){var e=me.JsonDataToHistoryData(t),a=new V;a.Data=e,a.DataType=0;var i=new V;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Right>0){var n=i.GetRightDate(i.Right);i.Data=n}if(V.IsDayPeriod(this.Period,!1)){var r=a.GetPeriodData(i.Period);i.Data=r}this.SourceData=a,this.Name=t.name,this.BindMainData(i,this.PageSize);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);if(e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new Oe(this.DivElement)),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),t.KLine.PageSize>0&&(e.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1)),t.CustomStock&&(e.CustomStock=t.CustomStock),t.QueryDate&&(e.QueryDate=t.QueryDate),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Frame)for(var a in t.Frame){(n=t.Frame[a]).SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=n.StringFormat)}t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1));let i=new l;for(var a in t.Windows){var n;if((n=t.Windows[a]).Script)e.WindowIndex[a]=new ea(n.Name,n.Script,n.Args,n);else{let t=De.Get(n.Index);if(t)e.WindowIndex[a]=t.Create(),e.CreateWindowIndex(a);else{let t=i.Get(n.Index);if(!t)continue;n.Lock&&(t.Lock=n.Lock),e.WindowIndex[a]=new ea(t.Name,t.Script,t.Args,t)}}null!=n.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=n.Modify),null!=n.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=n.Change),isNaN(n.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=n.TitleHeight)}return e},this.CreateMinuteChartContainer=function(t){var e=null;e=""===t.Type?new function(t){this.newMethod=ve,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartHScreenContainer",this.OnMouseMove=function(t,e,a){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e),this.DrawDynamicInfo()},this.Create=function(t){for(var e in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Lt,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new wt,this.ChartCorssCursor.StringFormatY=new Ot,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new R,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var a=new Gt;a.Frame=this.Frame.SubFrame[e].Frame,a.Canvas=this.Canvas,a.LanguageID=this.LanguageID,this.TitlePaint.push(a)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",D,!0)},this.CreateChildWindow=function(t){for(var e=0;e<t;++e){var a=new y;a.UIElement=this.UIElement;var i=new x;i.Canvas=this.Canvas,i.ChartBorder=a,e<2&&(i.ChartBorder.TitleHeight=0),i.XPointCount=243;var n=[9,8,7,6,5,4,3,2,1];for(var r in i.HorizontalMax=n[0],i.HorizontalMin=n[n.length-1],0==e?(i.YSplitOperator=new Ft,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price")):(i.YSplitOperator=new yt,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double")),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new Et,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,e!=t-1&&(i.XSplitOperator.ShowText=!1),i.XSplitOperator.Operator(),n)i.HorizontalInfo[r]=new A,i.HorizontalInfo[r].Value=n[r],0==e&&r==i.HorizontalMin||(i.HorizontalInfo[r].Message[1]=n[r].toString(),i.HorizontalInfo[r].Font="14px ");var s=new M;s.Frame=i,s.Height=0==e?20:10,this.Frame.SubFrame[e]=s}}}(this.CanvasElement):new ve(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter);var a=2;if(t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),t.Language&&("CN"===t.Language?e.LanguageID=Ce.LANGUAGE_CHINESE_ID:"EN"===t.Language&&(e.LanguageID=Ce.LANGUAGE_ENGLISH_ID)),t.Info&&t.Info.length>0&&e.SetMinuteInfo(t.Info,!1),e.Create(a),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss)),t.MinuteInfo&&e.CreateMinuteInfo(t.MinuteInfo),1==t.IsShowRightMenu&&(e.RightMenu=new function(t){this.newMethod=Oe,this.newMethod(t),delete this.newMethod,this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,n=t.offsetY,s=[{text:"",children:this.GetOverlay(e)},{text:"",children:this.GetDayCount(e)},{text:"",children:this.GetIndexWindowCount(e)},{text:"",children:this.GetIndex(e)}],o=e.Symbol;we.IsSHSZStockA(o)&&s.push({text:"",children:this.GetShowBeforeData(e)});var h=t.data.FrameID;console.log("[MinuteRightMenu::DoModal]",h),a.Show({windowIndex:h,x:i+e.UIElement.offsetLeft,y:n+e.UIElement.offsetTop,position:e.Frame.Position,data:s}),r()(document).click(function(){a.Hide()})},this.GetDayCount=function(t){var e=[{text:"",click:function(){t.ChangeDayCount(1)},isBorder:!0},{text:"2",click:function(){t.ChangeDayCount(2)}},{text:"3",click:function(){t.ChangeDayCount(3)}},{text:"4",click:function(){t.ChangeDayCount(4)}},{text:"5",click:function(){t.ChangeDayCount(5)}},{text:"6",click:function(){t.ChangeDayCount(6)}}];return t.DayCount-1>=0&&t.DayCount-1<e.length&&(e[t.DayCount-1].selected=!0),e},this.GetIndex=function(t){var e=[{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}}];return e},this.GetShowBeforeData=function(t){if(t.IsShowBeforeData){var e=[{text:"",click:function(){t.ShowBeforeData(!1)}}];return e}var e=[{text:"",click:function(){t.ShowBeforeData(!0)}}];return e},this.GetIndexWindowCount=function(t){var e=[{text:"1",click:function(){t.ChangeIndexWindowCount(2)}},{text:"2",click:function(){t.ChangeIndexWindowCount(3)}},{text:"3",click:function(){t.ChangeIndexWindowCount(4)}}],a=t.Frame.SubFrame.length-1;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e}}(this.DivElement)),t.DayCount>1&&(e.DayCount=t.DayCount),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom)),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),this.AdjustChartBorder(e),t.Frame)for(var i in t.Frame){var n=t.Frame[i];e.Frame.SubFrame[i]&&(n.SplitCount&&(e.Frame.SubFrame[i].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(e.Frame.SubFrame[i].Frame.YSplitOperator.StringFormat=n.StringFormat),0==n.IsShowLeftText&&(e.Frame.SubFrame[i].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(e.Frame.SubFrame[i].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText),n.Height>0&&(e.Frame.SubFrame[i].Height=n.Height))}if(t.ExtendChart)for(var i in t.ExtendChart){n=t.ExtendChart[i];e.CreateExtendChart(n.Name,n)}if(t.Overlay)for(var i in t.Overlay){n=t.Overlay[i];e.OverlaySymbol(n.Symbol)}t.MinuteLine&&(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice&&(e.ChartPaint[1].IsShow=!1),1===t.MinuteLine.SplitType&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)),t.MinuteTitle&&(0==t.MinuteTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),!1!==t.MinuteTitle.IsShowDate&&!0!==t.MinuteTitle.IsShowDate||(e.TitlePaint[0].IsShowDate=t.MinuteTitle.IsShowDate)),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),!0===t.IsShowBeforeData&&(e.IsShowBeforeData=t.IsShowBeforeData);let s=new l;for(var i in t.Windows){if((n=t.Windows[i]).Script)e.WindowIndex[2+parseInt(i)]=new ea(n.Name,n.Script,n.Args);else if(n.API){var o=n.API;e.WindowIndex[2+parseInt(i)]=new aa(o.Name,o.Script,o.Args,n)}else{var h=De.Get(n.Index);if(h)e.WindowIndex[2+parseInt(i)]=h.Create(),e.CreateWindowIndex(2+parseInt(i));else{let t=s.Get(n.Index);if(!t)continue;t.ID=n.Index;var u=t.Args;n.Args&&(u=n.Args),e.WindowIndex[2+parseInt(i)]=new ea(t.Name,t.Script,u,t),n.StringFormat>0&&(e.WindowIndex[2+parseInt(i)].StringFormat=n.StringFormat),n.FloatPrecision>=0&&(e.WindowIndex[2+parseInt(i)].FloatPrecision=n.FloatPrecision)}}isNaN(n.TitleHeight)||(e.Frame.SubFrame[2+parseInt(i)].Frame.ChartBorder.TitleHeight=n.TitleHeight)}if(this.AdjustTitleHeight(e),t.Function){var c=t.Function;c.RequestMinuteData&&(e.RequestMinuteData=c.RequestMinuteData),c.RecvMinuteData&&(e.RecvMinuteData=c.RecvMinuteData)}return e},this.CreateHistoryMinuteChartContainer=function(t){var e=new Se(this.CanvasElement),a=2;t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),e.Create(a),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom));let i=new l;for(var n in t.Windows){var r=t.Windows[n];if(r.Script)e.WindowIndex[2+parseInt(n)]=new ea(r.Name,r.Script,r.Args);else{var s=De.Get(r.Index);if(s)e.WindowIndex[2+parseInt(n)]=s.Create(),e.CreateWindowIndex(2+parseInt(n));else{let t=i.Get(r.Index);if(!t)continue;e.WindowIndex[2+parseInt(n)]=new ea(t.Name,t.Script,t.Args)}}isNaN(r.TitleHeight)||(e.Frame.SubFrame[2+parseInt(n)].Frame.ChartBorder.TitleHeight=r.TitleHeight)}return e.TradeDate=20181009,t.HistoryMinute.TradeDate&&(e.TradeDate=t.HistoryMinute.TradeDate),null!=t.HistoryMinute.IsShowName&&(e.TitlePaint[0].IsShowName=t.HistoryMinute.IsShowName),null!=t.HistoryMinute.IsShowDate&&(e.TitlePaint[0].IsShowDate=t.HistoryMinute.IsShowDate),e},this.CreateKLineTrainChartContainer=function(t){var e="K"==t.Type,a=new function(t,e){!0===e?(this.newMethod=ge,this.newMethod(t),delete this.newMethod):(this.newMethod=me,this.newMethod(t),delete this.newMethod);this.BuySellPaint,this.TrainDataCount=300,this.AutoRunTimer=null,this.BuySellData=[],this.TrainDataIndex,this.TrainCallback,this.DragMode=0,this.TrainStartEnd={},this.OnKeyDown=function(t){var e=t.keyCode?t.keyCode:t.which;switch(e){case 37:this.CursorIndex>1&&(--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown());break;case 39:var a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1<a){var i=null;if(!(i=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+i.DataOffset+1>=i.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(n))break;this.CursorIndex=n.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown();break;case 40:var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(n))break;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown()}t.preventDefault?t.preventDefault():t.returnValue=!1},t.ontouchstart=function(e){if(this.JSChartContainer){this.JSChartContainer.PhonePinch=null,e.preventDefault();var a=this.JSChartContainer;if(a.IsPhoneDragging(e)){var i={Click:{},LastMove:{}},n=a.GetToucheData(e,!1);if(i.Click.X=n[0].clientX,i.Click.Y=n[0].clientY,i.LastMove.X=n[0].clientX,i.LastMove.Y=n[0].clientY,i.Click.X==i.LastMove.X&&i.Click.Y==i.LastMove.Y){a.MouseDrag;a.MouseDrag=null;var r=d(),s=i.Click.X-t.getBoundingClientRect().left*r,o=i.Click.Y-t.getBoundingClientRect().top*r;a.OnMouseMove(s,o,e)}document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null}else if(a.IsPhonePinching(e)){var h={Start:{},Last:{}},n=a.GetToucheData(e,!1);h.Start={X:n[0].pageX,Y:n[0].pageY,X2:n[1].pageX,Y2:n[1].pageY},h.Last={X:n[0].pageX,Y:n[0].pageY,X2:n[1].pageX,Y2:n[1].pageY},this.JSChartContainer.PhonePinch=h,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null}t.ontouchmove=function(t){if(this.JSChartContainer){t.preventDefault();var e=a.GetToucheData(t,!1);if(a.IsPhoneDragging(t)){var i=this.JSChartContainer.MouseDrag;if(null==i){var n=d(),r=e[0].clientX-this.getBoundingClientRect().left*n,s=e[0].clientY-this.getBoundingClientRect().top*n;this.JSChartContainer.OnMouseMove(r,s,t)}}else a.IsPhonePinching(t)&&(h.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY})}},t.ontouchend=function(t){clearTimeout(Qe)}}},this.CreateBuySellPaint=function(){var t=new function(){this.newMethod=ht,this.newMethod(),delete this.newMethod,this.ClassName="ChartBuySell",this.TextFont=fe.KLineTrain.Font,this.LastDataIcon=fe.KLineTrain.LastDataIcon,this.BuyIcon=fe.KLineTrain.BuyIcon,this.SellIcon=fe.KLineTrain.SellIcon,this.BuySellData=new Map,this.LastData={},this.IconFont=fe.KLineTrain.IconFont,this.Draw=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();!0===t&&(i=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount;if(this.IconFont){var r=d(),s=e+a,o=18*r;s<o&&(s=o),this.Canvas.font=s+"px "+this.IconFont.Family}else this.Canvas.font=this.TextFont;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l){var u=this.Data.Data[h];if(null!=u){if(f>i)break;if(this.LastData={ID:l,Data:u},this.BuySellData.has(u.Date)){var c=this.BuySellData.get(u.Date),f=this.ChartFrame.GetXFromIndex(l),C=this.ChartFrame.GetYFromData(u.High),D=this.ChartFrame.GetYFromData(u.Low);0==c.Op?(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Buy.Color,this.DrawText(this.IconFont.Buy.Text,f,D,t)):(this.Canvas.fillStyle=this.BuyIcon.Color,this.DrawText(this.BuyIcon.Text,f,D,t))):(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Sell.Color,this.DrawText(this.IconFont.Sell.Text,f,C,t)):(this.Canvas.fillStyle=this.SellIcon.Color,this.DrawText(this.SellIcon.Text,f,C,t)))}}}var f=this.ChartFrame.GetXFromIndex(this.LastData.ID),C=this.ChartFrame.GetYFromData(this.LastData.Data.High);this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Last.Color,this.DrawText(this.IconFont.Last.Text,f,C,t)):(this.Canvas.fillStyle=this.LastDataIcon.Color,this.Canvas.font=this.TextFont,this.DrawText(this.LastDataIcon.Text,f,C,t))}}};t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="KLine-Train-BuySell",this.ChartPaintEx[0]=t},this.BindMainData=function(t,e){for(var a in this.ChartPaint[0].Data=t,this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame;i.XPointCount=e,i.Data=this.ChartPaint[0].Data}for(var a in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.ChartPaintEx[0]||this.CreateBuySellPaint(),this.ChartPaintEx[0].Data=this.ChartPaint[0].Data,this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.MainData=this.ChartPaint[0].Data}var n=t.Data.length-e-this.TrainDataCount-20;n<0&&(n=0),this.ChartPaint[0].Data.DataOffset=n,this.CursorIndex=e,this.CursorIndex+n>=t.Data.length&&(this.CursorIndex=n),this.TrainDataIndex=this.CursorIndex,this.TrainStartEnd.Start=t.Data[this.TrainDataIndex+n-1]},this.Run=function(){if(!(this.AutoRunTimer||this.TrainDataCount<=0)){var t=this;this.AutoRunTimer=setInterval(function(){t.MoveNextKLineData()||clearInterval(t.AutoRunTimer)},1e3)}},this.MoveNextKLineData=function(){if(this.TrainDataCount<=0)return!1;var t=0;return this.Frame.XPointCount&&(t=this.Frame.XPointCount),this.TrainDataIndex+1>=t&&(this.CursorIndex=this.TrainDataIndex,!!this.DataMoveRight()&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),++this.TrainDataIndex,--this.TrainDataCount,this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback(),!1):(this.UpdateTrainUICallback(),!0)))},this.UpdateTrainUICallback=function(){var t=this.ChartPaintEx[0],e=t.LastData.Data;if(this.TrainStartEnd.End=e,this.TrainCallback&&this.TrainCallback(this),this.mapEvent.has(c.RECV_TRAIN_MOVE_STEP)){var a=this.mapEvent.get(c.RECV_TRAIN_MOVE_STEP);if(a.Callback){var i={TrainDataCount:this.TrainDataCount,BuySellData:this.BuySellData,Operator:this.GetOperator(),KLine:this.TrainStartEnd};a.Callback(a,i,this)}}},this.FinishTrainData=function(){var t=this.ChartPaintEx[0];if(t&&this.BuySellData.length){var e=t.LastData.Data,a=this.BuySellData[this.BuySellData.length-1];a.Sell||(a.Sell={Price:e.Close,Date:e.Date},t.BuySellData.set(e.Date,{Op:1}))}},this.GetLastBuySellData=function(){var t=this.ChartPaintEx[0];if(!t)return null;if(this.BuySellData.length){var e=this.BuySellData[this.BuySellData.length-1];return e}return null},this.GetOperator=function(){var t=this.GetLastBuySellData();return t&&t.Buy&&!t.Sell?1:0},this.Stop=function(){null!=this.AutoRunTimer&&clearInterval(this.AutoRunTimer),this.AutoRunTimer=null},this.BuyOrSell=function(){var t=this.ChartPaintEx[0],e=t.LastData.Data,a=this.GetLastBuySellData();if(a&&a.Buy&&!a.Sell)return a.Sell={Price:e.Close,Date:e.Date},t.BuySellData.set(e.Date,{Op:1}),void this.MoveNextKLineData();this.BuySellData.push({Buy:{Price:e.Close,Date:e.Date},Sell:null}),t.BuySellData.set(e.Date,{Op:0}),this.MoveNextKLineData()}}(this.CanvasElement,e);if(a.ModifyIndexDialog=this.ModifyIndexDialog,a.ChangeIndexDialog=this.ChangeIndexDialog,t.ScriptError&&(a.ScriptErrorCallback=t.ScriptError),t.KLine&&(t.KLine.Right>=0&&(a.Right=t.KLine.Right),t.KLine.Period>=0&&(a.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(a.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&a.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(a.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(a.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(a.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(a.KLineDrawType=t.KLine.DrawType)),t.Train&&(t.Train.DataCount&&(a.TrainDataCount=t.Train.DataCount),t.Train.Callback&&(a.TrainCallback=t.Train.Callback)),!t.Windows||t.Windows.length<=0)return null;if(a.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(a.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(a.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(a.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(a.Frame.ChartBorder.Bottom=t.Border.Bottom)),this.AdjustChartBorder(a),0==t.IsShowCorssCursorInfo&&(a.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),!0===t.IsCorssOnlyDrawKLine&&(a.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(a.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(a.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.Frame)for(var i in t.Frame){var n=t.Frame[i];a.Frame.SubFrame[i]&&(n.SplitCount&&(a.Frame.SubFrame[i].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(a.Frame.SubFrame[i].Frame.YSplitOperator.StringFormat=n.StringFormat),0==n.IsShowLeftText&&(a.Frame.SubFrame[i].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(a.Frame.SubFrame[i].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText))}if(t.ExtendChart)for(var i in t.ExtendChart){n=t.ExtendChart[i];a.CreateExtendChart(n.Name,n)}a.TitlePaint[0].IsShowName=!1,a.TitlePaint[0].IsShowSettingInfo=!1,a.TitlePaint[0].IsShowDateTime=!1;let r=new l;for(var i in t.Windows){if((n=t.Windows[i]).Script)a.WindowIndex[i]=new ea(n.Name,n.Script,n.Args,n);else{let t=De.Get(n.Index);if(t)a.WindowIndex[i]=t.Create(),a.CreateWindowIndex(i);else{let t=r.Get(n.Index);if(!t)continue;n.Lock&&(t.Lock=n.Lock),a.WindowIndex[i]=new ea(t.Name,t.Script,t.Args,t)}}null!=n.Modify&&(a.Frame.SubFrame[i].Frame.ModifyIndex=n.Modify),null!=n.Change&&(a.Frame.SubFrame[i].Frame.ChangeIndex=n.Change),null!=n.Close&&(a.Frame.SubFrame[i].Frame.CloseIndex=n.Close),isNaN(n.TitleHeight)||(a.Frame.SubFrame[i].Frame.ChartBorder.TitleHeight=n.TitleHeight)}return this.AdjustTitleHeight(a),a},this.SetOption=function(t){var e=null;switch(t.Type){case"K":case"K":e=this.CreateKLineChartContainer(t);break;case"K":e=this.CreateCustomKLineChartContainer(t);break;case"":case"":e=this.CreateMinuteChartContainer(t);break;case"":e=this.CreateHistoryMinuteChartContainer(t);break;case"K":case"K":e=this.CreateKLineTrainChartContainer(t);break;case"":return this.CreateSimpleChart(t);case"":case"":return this.CreatePieChart(t);case"":return this.CreateMapChart(t);default:return!1}return!!e&&(null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),!!t.Symbol&&(e.Draw(),e.ChangeSymbol(t.Symbol),this.JSChartContainer=e,this.DivElement.JSChart=this,void this.JSChartContainer.Draw()))},this.CreateSimpleChart=function(t){var e=new function(t){this.newMethod=C,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new function(){this.newMethod=E,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.DrawFrame=function(){if(this.XPointCount>0){let t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,a=1;a<=t;++a)e+=this.DistanceWidth+this.DataWidth;return e},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}}},this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart(),this.UIElement.addEventListener("keydown",D,!0)},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){for(let e in this.MainDataControl.DataType){let a=this.MainDataControl.DataType[e];if("BAR"==a.Type){var t=new Ct;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=a.Name,a.Color&&(t.UpBarColor=a.Color),a.Color2&&(t.DownBarColor=a.Color2),this.ChartPaint.push(t)}else if("LINE"==a.Type){var t=new Q;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=a.Name,a.Color&&(t.Color=a.Color),this.ChartPaint.push(t)}}this.Frame.YSplitOperator=new yt,this.Frame.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),this.Frame.YSplitOperator.Frame=this.Frame,this.Frame.YSplitOperator.ChartBorder=this.Frame.ChartBorder,this.Frame.XSplitOperator=new function(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Operator=function(){if(null!=this.Frame.Data&&null!=this.Frame.XData){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=0,i=t;a<e&&i<this.Frame.Data.Data.length;++a,++i){var n=new A;n.Value=i-t,this.ShowText&&(n.Message[0]=this.Frame.XData[a]),this.Frame.VerticalInfo.push(n),distance=0}}}},this.Frame.XSplitOperator.Frame=this.Frame,this.Frame.XSplitOperator.ChartBorder=this.Frame.ChartBorder}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){let e=0;for(let a in t.Data){let i=new V;i.Data=t.Data[a],this.ChartPaint[a].Data=i,e<i.Data.length&&(e=i.Data.length)}this.Frame.XPointCount=e,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.XData=t.XData,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreatePieChart=function(t){var e=new function(t){this.Radius,this.newMethod=C,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new F,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl)for(let e in this.MainDataControl.DataType){let a=this.MainDataControl.DataType[e];if("PIE"==a.Type){var t=new mt;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=a.Name,this.Radius&&(t.Radius=this.Radius),this.ChartPaint.push(t)}else if("RADAR"==a.Type){var t=new vt;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=a.Name,a.StartAngle&&(t.StartAngle=a.StartAngle),this.ChartPaint.push(t)}}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){for(let e in t.Data){let a=new V;a.Data=t.Data[e],this.ChartPaint[e].Data=a}this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),t.Radius&&(e.Radius=t.Radius),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),this.AdjustChartBorder(e),t.Frame&&0==t.Frame[0].IsShowBorder&&(e.Frame.IsShowBorder=t.Frame[0].IsShowBorder),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateMapChart=function(t){var e=new function(t){this.newMethod=C,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new F,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(!this.MainDataControl)return;let t=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ImageData=null,this.Left,this.Top,this.Width,this.Height,this.ImageWidth,this.ImageHeight,this.DefaultColor=[217,222,239],this.Color=[{Name:"",Color:"rgb(217,222,223)"},{Name:"",Color:"rgb(217,222,225)"},{Name:"",Color:"rgb(217,222,226)"},{Name:"",Color:"rgb(217,222,227)"},{Name:"",Color:"rgb(217,222,228)"},{Name:"",Color:"rgb(217,222,229)"},{Name:"",Color:"rgb(217,222,230)"},{Name:"",Color:"rgb(217,222,231)"},{Name:"",Color:"rgb(217,222,232)"},{Name:"",Color:"rgb(217,222,233)"},{Name:"",Color:"rgb(217,222,234)"},{Name:"",Color:"rgb(217,222,235)"},{Name:"",Color:"rgb(217,222,236)"},{Name:"",Color:"rgb(217,222,237)"},{Name:"",Color:"rgb(217,222,238)"},{Name:"",Color:"rgb(217,222,239)"},{Name:"",Color:"rgb(217,222,240)"},{Name:"",Color:"rgb(217,222,241)"},{Name:"",Color:"rgb(217,222,242)"},{Name:"",Color:"rgb(217,222,243)"},{Name:"",Color:"rgb(217,222,244)"},{Name:"",Color:"rgb(217,222,245)"},{Name:"",Color:"rgb(217,222,246)"},{Name:"",Color:"rgb(217,222,247)"},{Name:"",Color:"rgb(217,222,248)"},{Name:"",Color:"rgb(217,222,249)"},{Name:"",Color:"rgb(217,222,250)"}],this.Draw=function(){let t=this.ChartBorder.GetLeft()+1,e=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()+1),a=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()-2),i=this.ChartBorder.GetHeight()-2,n=CHINA_MAP_IMAGE.width,r=CHINA_MAP_IMAGE.height,s=n,o=r;if(i<o||a<s)this.ImageData=null;else if(this.Left==t&&this.Top==e&&this.Width==a&&this.Height==i&&this.ImageWidth==n&&this.ImageHeight==r||(this.ImageData=null,this.ImageWidth=n,this.ImageHeight=r,this.Left=t,this.Top=e,this.Width=a,this.Height=i,console.log(n,r)),null==this.ImageData){this.Canvas.drawImage(CHINA_MAP_IMAGE,0,0,n,r,t,e,s,o),this.ImageData=this.Canvas.getImageData(t,e,s,o);let a=new Set,i=new Map,l=new Map;if(this.Data.length>0)for(let t in this.Data){let e=this.Data[t];l.set(e.Name,e.Color)}console.log(this.Data);for(let t in this.Color){let e=this.Color[t];l.has(e.Name)?i.set(e.Color,l.get(e.Name)):a.add(e.Color)}var h;for(let t=0;t<this.ImageData.data.length;t+=4)if(h="rgb("+this.ImageData.data[t]+","+this.ImageData.data[t+1]+","+this.ImageData.data[t+2]+")",a.has(h))this.ImageData.data[t]=this.DefaultColor[0],this.ImageData.data[t+1]=this.DefaultColor[1],this.ImageData.data[t+2]=this.DefaultColor[2];else if(i.has(h)){let e=i.get(h);this.ImageData.data[t]=e[0],this.ImageData.data[t+1]=e[1],this.ImageData.data[t+2]=e[2]}this.Canvas.clearRect(t,e,s,o),this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}else this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}};t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=this.MainDataControl.DataType[0].Name,this.Radius&&(t.Radius=this.Radius),this.ChartPaint.push(t)},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){this.ChartPaint[0].Data=t.Data[0],this.Frame.SetSizeChage(!0),this.Draw()}}(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateToolbar=function(t){},this.CreateSettingDiv=function(t){},this.Focus=function(){this.CanvasElement&&this.CanvasElement.focus()},this.ChangeSymbol=function(t){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t)},this.ChangeIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndex&&this.JSChartContainer.ChangeIndex(t,e,a)},this.ChangeScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeScriptIndex&&this.JSChartContainer.ChangeScriptIndex(t,e)},this.ChangePyScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePyScriptIndex&&this.JSChartContainer.ChangePyScriptIndex(t,e)},this.GetIndexInfo=function(){return this.JSChartContainer&&"function"==typeof this.JSChartContainer.GetIndexInfo?this.JSChartContainer.GetIndexInfo():[]},this.ChangeInstructionIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionIndex(t)},this.ChangeInstructionScriptIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionScriptIndex(t)},this.CancelInstructionIndex=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CancelInstructionIndex&&this.JSChartContainer.CancelInstructionIndex()},this.ChangePeriod=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePeriod&&this.JSChartContainer.ChangePeriod(t)},this.ChangeRight=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeRight&&this.JSChartContainer.ChangeRight(t)},this.OverlaySymbol=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OverlaySymbol&&this.JSChartContainer.OverlaySymbol(t,e)},this.DeleteOverlaySymbol=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlaySymbol&&this.JSChartContainer.DeleteOverlaySymbol(t)},this.SetFirstShowDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFirstShowDate&&this.JSChartContainer.SetFirstShowDate(t)},this.ChangeKLineDrawType=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeKLineDrawType&&this.JSChartContainer.ChangeKLineDrawType(t)},this.ChangeIndexWindowCount=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindowCount&&this.JSChartContainer.ChangeIndexWindowCount(t)},this.ClearOverlaySymbol=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearOverlaySymbol&&this.JSChartContainer.ClearOverlaySymbol()},this.DeleteKLineInfo=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteKLineInfo&&this.JSChartContainer.DeleteKLineInfo(t)},this.ClearKLineInfo=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearKLineInfo&&this.JSChartContainer.ClearKLineInfo()},this.AddKLineInfo=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddKLineInfo&&this.JSChartContainer.AddKLineInfo(t,e)},this.ChangMainDataControl=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetMainDataConotrl&&this.JSChartContainer.SetMainDataConotrl(t)},this.AddOverlayIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddOverlayIndex&&this.JSChartContainer.AddOverlayIndex(t)},this.DeleteOverlayWindowsIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlayWindowsIndex&&this.JSChartContainer.DeleteOverlayWindowsIndex(t)},this.StopAutoUpdate=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAutoUpdate&&this.JSChartContainer.StopAutoUpdate()},this.ForceLandscape=function(t){this.JSChartContainer&&(console.log("[JSChart::ForceLandscape] bForceLandscape="+t),this.JSChartContainer.IsForceLandscape=t)},this.LockIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.LockIndex&&(console.log("[JSChart:LockIndex] lockData",t),this.JSChartContainer.LockIndex(t))},this.ChangeTradeDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeTradeDate&&(console.log("[JSChart:ChangeTradeDate] date",t),this.JSChartContainer.ChangeTradeDate(t))},this.ChangeDayCount=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeDayCount&&(console.log("[JSChart:ChangeDayCount] count",t),this.JSChartContainer.ChangeDayCount(t))},this.StartAnimation=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StartAnimation)return console.log("[JSChart:StartAnimation] start."),this.JSChartContainer.StartAnimation(t)},this.StopAnimation=function(){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAnimation)return console.log("[JSChart:StopAnimation] start."),this.JSChartContainer.StopAnimation()},this.SaveToImage=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImage)return this.JSChartContainer.SaveToImage(t,e)},this.SaveToImageUrl=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImageUrl)return this.JSChartContainer.SaveToImageUrl(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(console.log("[JSChart:AddEventCallback] ",t),this.JSChartContainer.AddEventCallback(t))},this.SetLanguage=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetLanguage&&(console.log("[JSChart:SetLanguage] ",t),this.JSChartContainer.SetLanguage(t))},this.ChangeIndexTemplate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexTemplate&&(console.log("[JSChart:ChangeIndexTemplate] ",t),this.JSChartContainer.ChangeIndexTemplate(t))}}l.AddIndex=function(t){for(var e in t)h.Add(t[e])},l.prototype.Get=function(t){var e=h.Get(t);if(e)return e;var a=this.DataMap.get(t);return a?a():null},l.prototype.Search=function(t){var e=[],a=new RegExp(t,"i");return this.DataMap.forEach(function(t,i){0!=i.indexOf("-")&&0!=i.indexOf("K-")&&i.search(a)>=0&&e.push(i)}),e},l.prototype.MA=function(){return{Name:"MA",Description:"",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);"}},l.prototype.BOLL=function(){return{Name:"BOLL",Description:"",IsMainIndex:!0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},l.prototype.BOLL2=function(){return{Name:"BOLL2",Description:"",IsMainIndex:!1,KLineType:0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},l.prototype.BBI=function(){return{Name:"BBI",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:3},{Name:"M2",Value:6},{Name:"M3",Value:12},{Name:"M4",Value:24}],Script:"BBI:(MA(CLOSE,M1)+MA(CLOSE,M2)+MA(CLOSE,M3)+MA(CLOSE,M4))/4;"}},l.prototype.DKX=function(){return{Name:"DKX",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:10}],Script:"MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;\nDKX:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+\n16*REF(MID,4)+15*REF(MID,5)+14*REF(MID,6)+\n13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+\n10*REF(MID,10)+9*REF(MID,11)+8*REF(MID,12)+\n7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+\n4*REF(MID,16)+3*REF(MID,17)+2*REF(MID,18)+REF(MID,20))/210;\nMADKX:MA(DKX,M);"}},l.prototype.MIKE=function(){return{Name:"MIKE",Description:"",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1);\nHV:=EMA(HHV(HIGH,N),3);\nLV:=EMA(LLV(LOW,N),3);\nSTOR:EMA(2*HV-LV,3);\nMIDR:EMA(HLC+HV-LV,3);\nWEKR:EMA(HLC*2-LV,3);\nWEKS:EMA(HLC*2-HV,3);\nMIDS:EMA(HLC-HV+LV,3);\nSTOS:EMA(2*LV-HV,3);"}},l.prototype.PBX=function(){return{Name:"PBX",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:4},{Name:"M2",Value:6},{Name:"M3",Value:9},{Name:"M4",Value:13},{Name:"M5",Value:18},{Name:"M6",Value:24}],Script:"PBX1:(EMA(CLOSE,M1)+MA(CLOSE,M1*2)+MA(CLOSE,M1*4))/3;\nPBX2:(EMA(CLOSE,M2)+MA(CLOSE,M2*2)+MA(CLOSE,M2*4))/3;\nPBX3:(EMA(CLOSE,M3)+MA(CLOSE,M3*2)+MA(CLOSE,M3*4))/3;\nPBX4:(EMA(CLOSE,M4)+MA(CLOSE,M4*2)+MA(CLOSE,M4*4))/3;\nPBX5:(EMA(CLOSE,M5)+MA(CLOSE,M5*2)+MA(CLOSE,M5*4))/3;\nPBX6:(EMA(CLOSE,M6)+MA(CLOSE,M6*2)+MA(CLOSE,M6*4))/3;"}},l.prototype.ENE=function(){return{Name:"ENE",Description:"",IsMainIndex:!0,Args:[{Name:"N",Value:25},{Name:"M1",Value:6},{Name:"M2",Value:6}],Script:"UPPER:(1+M1/100)*MA(CLOSE,N);\nLOWER:(1-M2/100)*MA(CLOSE,N);\nENE:(UPPER+LOWER)/2;"}},l.prototype.MACD=function(){return{Name:"MACD",Description:"",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA:EMA(DIF,MID);\nMACD:(DIF-DEA)*2,COLORSTICK;"}},l.prototype.KDJ=function(){return{Name:"KDJ",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);\nJ:3*K-2*D;"}},l.prototype.VOL=function(){return{Name:"VOL",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"VOL:VOL,VOLSTICK;\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},l.prototype.RSI=function(){return{Name:"RSI",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(CLOSE,1);\nRSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\nRSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\nRSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;"}},l.prototype.BRAR=function(){return{Name:"BRAR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:26}],Script:"BR:SUM(MAX(0,HIGH-REF(CLOSE,1)),N)/SUM(MAX(0,REF(CLOSE,1)-LOW),N)*100;\nAR:SUM(HIGH-OPEN,N)/SUM(OPEN-LOW,N)*100;"}},l.prototype.WR=function(){return{Name:"WR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:10},{Name:"N1",Value:6}],Script:"WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N));\nWR2:100*(HHV(HIGH,N1)-CLOSE)/(HHV(HIGH,N1)-LLV(LOW,N1));"}},l.prototype.BIAS=function(){return{Name:"BIAS",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"BIAS1 :(CLOSE-MA(CLOSE,N1))/MA(CLOSE,N1)*100;\nBIAS2 :(CLOSE-MA(CLOSE,N2))/MA(CLOSE,N2)*100;\nBIAS3 :(CLOSE-MA(CLOSE,N3))/MA(CLOSE,N3)*100;"}},l.prototype.OBV=function(){return{Name:"OBV",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"VA:=IF(CLOSE>REF(CLOSE,1),VOL,-VOL);\nOBV:SUM(IF(CLOSE==REF(CLOSE,1),0,VA),0);\nMAOBV:MA(OBV,M);"}},l.prototype.DMI=function(){return{Name:"DMI",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"MM",Value:6}],Script:"MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nDMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\nDMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\nPDI: DMP*100/MTR;\nMDI: DMM*100/MTR;\nADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\nADXR:EXPMEMA(ADX,MM);"}},l.prototype.CR=function(){return{Name:"CR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:40},{Name:"M4",Value:62}],Script:"MID:=REF(HIGH+LOW,1)/2;\nCR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\nMA1:REF(MA(CR,M1),M1/2.5+1);\nMA2:REF(MA(CR,M2),M2/2.5+1);\nMA3:REF(MA(CR,M3),M3/2.5+1);\nMA4:REF(MA(CR,M4),M4/2.5+1);"}},l.prototype.PSY=function(){return{Name:"PSY",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"PSY:COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\rPSYMA:MA(PSY,M);"}},l.prototype.CCI=function(){return{Name:"CCI",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"}},l.prototype.DMA=function(){return{Name:"DMA",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:50},{Name:"M",Value:10}],Script:"DIF:MA(CLOSE,N1)-MA(CLOSE,N2);\nDIFMA:MA(DIF,M);"}},l.prototype.TRIX=function(){return{Name:"TRIX",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:9}],Script:"MTR:=EMA(EMA(EMA(CLOSE,N),N),N);\nTRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\nMATRIX:MA(TRIX,M) ;"}},l.prototype.VR=function(){return{Name:"VR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M",Value:6}],Script:"TH:=SUM(IF(CLOSE>REF(CLOSE,1),VOL,0),N);\nTL:=SUM(IF(CLOSE<REF(CLOSE,1),VOL,0),N);\nTQ:=SUM(IF(CLOSE==REF(CLOSE,1),VOL,0),N);\nVR:100*(TH*2+TQ)/(TL*2+TQ);\nMAVR:MA(VR,M);"}},l.prototype.EMV=function(){return{Name:"EMV",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"M",Value:9}],Script:"VOLUME:=MA(VOL,N)/VOL;\nMID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);\nEMV:MA(MID*VOLUME*(HIGH-LOW)/MA(HIGH-LOW,N),N);\nMAEMV:MA(EMV,M);"}},l.prototype.ROC=function(){return{Name:"ROC",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMAROC:MA(ROC,M);"}},l.prototype.MTM=function(){return{Name:"MTM",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"MTM:CLOSE-REF(CLOSE,N);\nMAMTM:MA(MTM,M);"}},l.prototype.FSL=function(){return{Name:"FSL",Description:"",IsMainIndex:!1,Args:[],Script:"SWL:(EMA(CLOSE,5)*7+EMA(CLOSE,10)*3)/10;\nSWS:DMA(EMA(CLOSE,12),MAX(1,100*(SUM(VOL,5)/(3*CAPITAL))));"}},l.prototype.CYR=function(){return{Name:"CYR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:13},{Name:"M",Value:5}],Script:"DIVE:=0.01*EMA(AMOUNT,N)/EMA(VOL,N);\nCYR:(DIVE/REF(DIVE,1)-1)*100;\nMACYR:MA(CYR,M);"}},l.prototype.MASS=function(){return{Name:"MASS",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:9},{Name:"N2",Value:25},{Name:"M",Value:6}],Script:"MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);\nMAMASS:MA(MASS,M);"}},l.prototype.WAD=function(){return{Name:"WAD",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);\nMIDB:=IF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);\nWAD:SUM(IF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);\nMAWAD:MA(WAD,M);"}},l.prototype.CHO=function(){return{Name:"CHO",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:20},{Name:"M",Value:6}],Script:"MID:=SUM(VOL*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);\nCHO:MA(MID,N1)-MA(MID,N2);\nMACHO:MA(CHO,M);"}},l.prototype.ADTM=function(){return{Name:"ADTM",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:23},{Name:"M",Value:8}],Script:"DTM:=IF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));\nDBM:=IF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));\nSTM:=SUM(DTM,N);\nSBM:=SUM(DBM,N);\nADTM:IF(STM>SBM,(STM-SBM)/STM,IF(STM==SBM,0,(STM-SBM)/SBM));\nMAADTM:MA(ADTM,M);"}},l.prototype.HSL=function(){return{Name:"HSL",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100);\nMAHSL:MA(HSL,N);"}},l.prototype.BIAS36=function(){return{Name:"BIAS36",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"BIAS36:MA(CLOSE,3)-MA(CLOSE,6);\nBIAS612:MA(CLOSE,6)-MA(CLOSE,12);\nMABIAS:MA(BIAS36,M);"}},l.prototype.BIAS_QL=function(){return{Name:"BIAS_QL",Description:"-",IsMainIndex:!1,Args:[{Name:"N",Value:6},{Name:"M",Value:6}],Script:"BIAS :(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nBIASMA :MA(BIAS,M);"}},l.prototype.DPO=function(){return{Name:"DPO",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);\nMADPO:MA(DPO,M);"}},l.prototype.OSC=function(){return{Name:"OSC",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"OSC:100*(CLOSE-MA(CLOSE,N));\nMAOSC:EXPMEMA(OSC,M);"}},l.prototype.ATR=function(){return{Name:"ATR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));\nATR:MA(MTR,N);"}},l.prototype.NVI=function(){return{Name:"ATR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V<REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},l.prototype.PVI=function(){return{Name:"PVI",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V>REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},l.prototype.UOS=function(){return{Name:"UOS",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:7},{Name:"N2",Value:14},{Name:"N3",Value:28},{Name:"M",Value:6}],Script:"TH:=MAX(HIGH,REF(CLOSE,1));\nTL:=MIN(LOW,REF(CLOSE,1));\nACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1);\nACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2);\nACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3);\nUOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3);\nMAUOS:EXPMEMA(UOS,M);"}},l.prototype.CYW=function(){return{Name:"CYW",Description:"",IsMainIndex:!1,Args:[],Script:"VAR1:=CLOSE-LOW;\nVAR2:=HIGH-LOW;\nVAR3:=CLOSE-HIGH;\nVAR4:=IF(HIGH>LOW,(VAR1/VAR2+VAR3/VAR2)*VOL,0);\nCYW: SUM(VAR4,10)/10000, COLORSTICK;"}},l.prototype.LON=function(){return{Name:"LON",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"LC := REF(CLOSE,1);\nVID := SUM(VOL,2)/(((HHV(HIGH,2)-LLV(LOW,2)))*100);\nRC := (CLOSE-LC)*VID;\nLONG := SUM(RC,0);\nDIFF := SMA(LONG,10,1);\nDEA := SMA(LONG,20,1);\nLON : DIFF-DEA;\nLONMA : MA(LON,10);\nLONT : LON, COLORSTICK;"}},l.prototype.NDB=function(){return{Name:"NDB",Description:"",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"HH:=IF(C/REF(C,1)>1.098 AND L>REF(H,1),2*C-REF(C,1)-H,2*C-H-L);\nV1:= BARSCOUNT(C) - 1;\nV2:= 2 * REF(C, V1) - REF(H, V1) - REF(L, V1);\nDK: SUM(HH, 0) + V2;\nMDK5: MA(DK, P1);\nMDK10: MA(DK, P2);"}},l.prototype.SKDJ=function(){return{Name:"SKDJ",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M",Value:3}],Script:"LOWV:=LLV(LOW,N);\nHIGHV:=HHV(HIGH,N);\nRSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,M);\nK:EMA(RSV,M);\nD:MA(K,M);"}},l.prototype.KD=function(){return{Name:"KD",Description:"KD",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);"}},l.prototype.FKX=function(){return{Name:"FKX",Description:"K",IsMainIndex:!0,Args:[],Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},l.prototype.DKCOL=function(){return{Name:"DKCOL",Description:"()",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"FF:=(C-REF(C,N))/REF(C,N);\nSTICKLINE(FF>0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORRED;\nSTICKLINE(FF<0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORGREEN;"}},l.prototype.UDL=function(){return{Name:"UDL",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:3},{Name:"N2",Value:5},{Name:"N3",Value:10},{Name:"N4",Value:20},{Name:"M",Value:6}],Script:"UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;\nMAUDL:MA(UDL,M);"}},l.prototype.MFI=function(){return{Name:"MFI",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"N2",Value:6}],Script:"TYP := (HIGH + LOW + CLOSE)/3;\nV1:=SUM(IF(TYP>REF(TYP,1),TYP*VOL,0),N)/SUM(IF(TYP<REF(TYP,1),TYP*VOL,0),N);\nMFI:100-(100/(1+V1));"}},l.prototype.LWR=function(){return{Name:"LWR",Description:"LWR",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;\nLWR1:SMA(RSV,M1,1);\nLWR2:SMA(LWR1,M2,1);"}},l.prototype.MARSI=function(){return{Name:"MARSI",Description:"",IsMainIndex:!1,Args:[{Name:"M1",Value:10},{Name:"M2",Value:6}],Script:"DIF:=CLOSE-REF(CLOSE,1);\nVU:=IF(DIF>=0,DIF,0);\nVD:=IF(DIF<0,-DIF,0);\nMAU1:=MEMA(VU,M1);\nMAD1:=MEMA(VD,M1);\nMAU2:=MEMA(VU,M2);\nMAD2:=MEMA(VD,M2);\nRSI10:MA(100*MAU1/(MAU1+MAD1),M1);\nRSI6:MA(100*MAU2/(MAU2+MAD2),M2);"}},l.prototype.CYD=function(){return{Name:"CYD",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYDS:WINNER(CLOSE)/(VOL/CAPITAL);\nCYDN:WINNER(CLOSE)/MA(VOL/CAPITAL,N);"}},l.prototype.CYF=function(){return{Name:"CYF",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYF:100-100/(1+EMA(HSL,N));"}},l.prototype.TAPI=function(){return{Name:"TAPI",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"TAPI:AMOUNT/INDEXC;\nMATAIP:MA(TAPI,M);"}},l.prototype.VMACD=function(){return{Name:"VMACD",Description:"",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(VOL,SHORT)-EMA(VOL,LONG);\nDEA:EMA(DIF,MID);\nMACD:DIF-DEA,COLORSTICK;"}},l.prototype.QACD=function(){return{Name:"QACD",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:12},{Name:"N2",Value:26},{Name:"M",Value:9}],Script:"DIF:EMA(CLOSE,N1)-EMA(CLOSE,N2);\nMACD:EMA(DIF,M);\nDDIF:DIF-MACD;"}},l.prototype.VPT=function(){return{Name:"VPT",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:51},{Name:"M",Value:6}],Script:"VPT:SUM(VOL*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);\nMAVPT:MA(VPT,M);"}},l.prototype.WVAD=function(){return{Name:"WVAD",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:24},{Name:"M",Value:6}],Script:"WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*VOL,N)/10000;\nMAWVAD:MA(WVAD,M);"}},l.prototype.DBQR=function(){return{Name:"WVAD",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:60}],Script:"ZS:(INDEXC-REF(INDEXC,N))/REF(INDEXC,N);\nGG:(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMADBQR1:MA(GG,M1);\nMADBQR2:MA(GG,M2);\nMADBQR3:MA(GG,M3);"}},l.prototype.JS=function(){return{Name:"JS",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"JS:100*(CLOSE-REF(CLOSE,N))/(N*REF(CLOSE,N));\nMAJS1:MA(JS,M1);\nMAJS2:MA(JS,M2);\nMAJS3:MA(JS,M3);"}},l.prototype.CYE=function(){return{Name:"CYE",Description:"",IsMainIndex:!1,Args:[],Script:"MAL:=MA(CLOSE,5);\nMAS:=MA(MA(CLOSE,20),5);\nCYEL:(MAL-REF(MAL,1))/REF(MAL,1)*100;\nCYES:(MAS-REF(MAS,1))/REF(MAS,1)*100;"}},l.prototype.QR=function(){return{Name:"QR",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:": (CLOSE-REF(CLOSE,N))/REF(CLOSE,N)*100; \n: (INDEXC-REF(INDEXC,N))/REF(INDEXC,N)*100; \n:EMA(-,2),COLORSTICK;"}},l.prototype.GDX=function(){return{Name:"GDX",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:30},{Name:"M",Value:9}],Script:"AA:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,N))/MA(CLOSE,N); \n:DMA(CLOSE,AA);\n:(1+M/100)*; \n:(1-M/100)*;"}},l.prototype.JLHB=function(){return{Name:"JLHB",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:7},{Name:"M",Value:5}],Script:"VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80; \nB:SMA(VAR1,N,1); \nVAR2:SMA(B,M,1); \n:IF(CROSS(B,VAR2) AND B<40,50,0);"}},l.prototype.PCNT=function(){return{Name:"PCNT",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:5}],Script:"PCNT:(CLOSE-REF(CLOSE,1))/CLOSE*100;\nMAPCNT:EXPMEMA(PCNT,M);"}},l.prototype.BTX=function(){return{Name:"BTX",Description:"",IsMainIndex:!1,Args:[],Script:"B1:=REF(C,1);\nB2:= REF(C, 2);\nSS:= IF(C > REF(C, 1) AND REF(C, 1) >= REF(C, 2), 1, IF(C < REF(C, 1) AND REF(C, 1) <= REF(C, 2), -1, IF(C > REF(C, 2) AND REF(C, 2) > REF(C, 1), 2, IF(C < REF(C, 2) AND REF(C, 2) < REF(C, 1), -2, 0))));\nSM:= IF(REF(SS, 1) <> 0, REF(SS, 1), IF(REF(SS, 2) <> 0, REF(SS, 2), IF(REF(SS, 3) <> 0, REF(SS, 3), IF(REF(SS, 5) <> 0, REF(SS, 5), IF(REF(SS, 6) <> 0, REF(SS, 6), IF(REF(SS, 7) <> 0, REF(SS, 7), 0))))));\nMC:= IF(REF(SS, 1) <> 0, B2, IF(SM > 0, MIN(B1, B2), MAX(B1, B2)));\nTOW1:= IF(C > REF(C, 1), C, REF(C, 1));\nTOW2:= IF((SS == -1 OR SS == -2) AND SM > 0, B2, TOW1);\nTOWER:= IF(TOW1 > TOW2, TOW1, TOW2);\nSTICKLINE(SS == 1 OR SM >= 1 AND SS == 0, B1, C, 10, 1), COLORRED;\nSTICKLINE(SS == -1 OR SM <= -1 AND SS == 0, B1, C, 10, 0), COLORCYAN;\nSTICKLINE(SS == 2, B2, C, 10, 1), COLORRED;\nSTICKLINE(SS == -2, B2, C, 10, 0), COLORCYAN;\nSTICKLINE((SS == -1 OR SS == -2) AND SM > 0, B2, B1, 10, 1), COLORRED;\nSTICKLINE((SS == 1 OR SS == 2) AND SM < 0, B2, B1, 10, 0), COLORCYAN;"}},l.prototype.AMO=function(){return{Name:"AMO",Description:"",IsMainIndex:!1,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"AMOW:AMOUNT/10000.0,VOLSTICK;\nAMO1:MA(AMOW,M1);\nAMO2:MA(AMOW,M2);"}},l.prototype.VRSI=function(){return{Name:"VRSI",Description:"",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(VOL,1);\nRSI1:SMA(MAX(VOL-LC,0),N1,1)/SMA(ABS(VOL-LC),N1,1)*100;\nRSI2:SMA(MAX(VOL-LC,0),N2,1)/SMA(ABS(VOL-LC),N2,1)*100;\nRSI3:SMA(MAX(VOL-LC,0),N3,1)/SMA(ABS(VOL-LC),N3,1)*100;"}},l.prototype.HSCOL=function(){return{Name:"HSCOL",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSCOL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100),VOLSTICK;\nMAHSL:MA(HSCOL,N);"}},l.prototype.DBQRV=function(){return{Name:"DBQRV",Description:"()",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"ZS:(INDEXV-REF(INDEXV,N))/REF(INDEXV,N);\nGG:(VOL-REF(VOL,N))/REF(VOL,N);"}},l.prototype.DBLB=function(){return{Name:"DBLB",Description:"()",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M",Value:5}],Script:"GG:=VOL/SUM(REF(VOL,1),N);\nZS:=INDEXV/SUM(REF(INDEXV,1),N);\nDBLB:GG/ZS;\nMADBLB:MA(DBLB,M);"}},l.prototype.ACD=function(){return{Name:"ACD",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:20}],Script:"LC:=REF(CLOSE,1);\nDIF:=CLOSE-IF(CLOSE>LC,MIN(LOW,LC),MAX(HIGH,LC));\nACD:SUM(IF(CLOSE==LC,0,DIF),0);\nMAACD:EXPMEMA(ACD,M);"}},l.prototype.EXPMA=function(){return{Name:"EXPMA",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},l.prototype.EXPMA_S=function(){return{Name:"EXPMA_S",Description:"-",IsMainIndex:!1,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},l.prototype.HMA=function(){return{Name:"HMA",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"HMA1:MA(HIGH,M1);\nHMA2:MA(HIGH,M2);\nHMA3:MA(HIGH,M3);\nHMA4:MA(HIGH,M4);\nHMA5:MA(HIGH,M5);"}},l.prototype.LMA=function(){return{Name:"LMA",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"LMA1:MA(LOW,M1);\nLMA2:MA(LOW,M2);\nLMA3:MA(LOW,M3);\nLMA4:MA(LOW,M4);\nLMA5:MA(LOW,M5);"}},l.prototype.VMA=function(){return{Name:"VMA",Description:"",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"VV:=(HIGH+OPEN+LOW+CLOSE)/4;\nVMA1:MA(VV,M1);\nVMA2:MA(VV,M2);\nVMA3:MA(VV,M3);\nVMA4:MA(VV,M4);\nVMA5:MA(VV,M5);"}},l.prototype.AMV=function(){return{Name:"AMV",Description:"",IsMainIndex:!1,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"AMOV:=VOL*(OPEN+CLOSE)/2;\nAMV1:SUM(AMOV,M1)/SUM(VOL,M1);\nAMV2:SUM(AMOV,M2)/SUM(VOL,M2);\nAMV3:SUM(AMOV,M3)/SUM(VOL,M3);\nAMV4:SUM(AMOV,M4)/SUM(VOL,M4);"}},l.prototype.BBIBOLL=function(){return{Name:"BBIBOLL",Description:"",IsMainIndex:!0,Args:[{Name:"N",Value:11},{Name:"M",Value:6}],Script:"CV:=CLOSE;\nBBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;\nUPR:BBIBOLL+M*STD(BBIBOLL,N);\nDWN:BBIBOLL-M*STD(BBIBOLL,N);"}},l.prototype.ALLIGAT=function(){return{Name:"ALLIGAT",Description:"",IsMainIndex:!0,Args:[],Script:"NN:=(H+L)/2;\n:REF(MA(NN,5),3),COLOR40FF40;\n:REF(MA(NN,8),5),COLOR0000C0;\n:REF(MA(NN,13),8),COLORFF4040;"}},l.prototype.ZX=function(){return{Name:"ZX",Description:"",IsMainIndex:!1,Args:[],Script:"AV:0.01*AMOUNT/VOL;"}},l.prototype.XS=function(){return{Name:"XS",Description:"",IsMainIndex:!0,Args:[{Name:"N",Value:13}],Script:"VAR2:=CLOSE*VOL;\nVAR3:=EMA((EMA(VAR2,3)/EMA(VOL,3)+EMA(VAR2,6)/EMA(VOL,6)+EMA(VAR2,12)/EMA(VOL,12)+EMA(VAR2,24)/EMA(VOL,24))/4,N);\nSUP:1.06*VAR3;\nSDN:VAR3*0.94;\nVAR4:=EMA(CLOSE,9);\nLUP:EMA(VAR4*1.14,5);\nLDN:EMA(VAR4*0.86,5);"}},l.prototype.XS2=function(){return{Name:"XS2",Description:"II",IsMainIndex:!0,Args:[{Name:"N",Value:102},{Name:"M",Value:7}],Script:"AA:=MA((2*CLOSE+HIGH+LOW)/4,5); \n1:AA*N/100; \n2:AA*(200-N)/100; \nCC:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,20))/MA(CLOSE,20); \nDD:=DMA(CLOSE,CC); \n3:(1+M/100)*DD; \n4:(1-M/100)*DD;"}},l.prototype.SG_XDT=function(){return{Name:"SG-XDT",Description:"()",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"QR:CLOSE/INDEXC*1000;\nMQR1:MA(QR,5);\nMQR2:MA(QR,10);"}},l.prototype.SG_SMX=function(){return{Name:"SG-SMX",Description:"()",IsMainIndex:!1,Args:[{Name:"N",Value:50}],Script:"H1:=HHV(HIGH,N);\nL1:=LLV(LOW,N);\nH2:=HHV(INDEXH,N);\nL2:=LLV(INDEXL,N);\nZY:=CLOSE/INDEXC*2000;\nZY1:EMA(ZY,3);\nZY2:EMA(ZY,17);\nZY3:EMA(ZY,34);"}},l.prototype.SG_LB=function(){return{Name:"SG-LB",Description:"()",IsMainIndex:!1,Args:[],Script:"ZY2:=VOL/INDEXV*1000;\n:ZY2;\nMA5:MA(ZY2,5);\nMA10:MA(ZY2,10);"}},l.prototype.SG_PF=function(){return{Name:"SG-PF",Description:"()",IsMainIndex:!1,Args:[],Script:"ZY1:=CLOSE/INDEXC*1000;\nA1:=IF(ZY1>HHV(ZY1,3),10,0);\nA2:=IF(ZY1>HHV(ZY1,5),15,0);\nA3:=IF(ZY1>HHV(ZY1,10),20,0);\nA4:=IF(ZY1>HHV(ZY1,2),10,0);\nA5:=COUNT(ZY1>REF(ZY1,1) ,9)*5;\n:A1+A2+A3+A4+A5;"}},l.prototype.RAD=function(){return{Name:"RAD",Description:"()",IsMainIndex:!1,Args:[{Name:"D",Value:3},{Name:"S",Value:30},{Name:"M",Value:30}],Script:"SM:=(OPEN+HIGH+CLOSE+LOW)/4;\nSMID:=MA(SM,D);\nIM:=(INDEXO+INDEXH+INDEXL+INDEXC)/4;\nIMID:=MA(IM,D);\nSI1:=(SMID-REF(SMID,1))/SMID;\nII:=(IMID-REF(IMID,1))/IMID;\nRADER1:SUM((SI1-II)*2,S)*1000;\nRADERMA:SMA(RADER1,M,1);"}},l.prototype.SHT=function(){return{Name:"SHT",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"VAR1:=MA((VOL-REF(VOL,1))/REF(VOL,1),5);\nVAR2:=(CLOSE-MA(CLOSE,24))/MA(CLOSE,24)*100;\nMY: VAR2*(1+VAR1);\nSHT: MY, COLORSTICK;\nSHTMA: MA(SHT,N);"}},l.prototype.ZLJC=function(){return{Name:"ZLJC",Description:"",IsMainIndex:!1,Args:[],Script:"VAR1:=(CLOSE+LOW+HIGH)/3; \nVAR2:=SUM(((VAR1-REF(LOW,1))-(HIGH-VAR1))*VOL/100000/(HIGH-LOW),0); \nVAR3:=EMA(VAR2,1); \nJCS:VAR3; \nJCM:MA(VAR3,12); \nJCL:MA(VAR3,26);"}},l.prototype.ZLMM=function(){return{Name:"ZLMM",Description:"",IsMainIndex:!1,Args:[],Script:"LC :=REF(CLOSE,1);\nRSI2:=SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100;\nRSI3:=SMA(MAX(CLOSE-LC,0),18,1)/SMA(ABS(CLOSE-LC),18,1)*100;\nMMS:MA(3*RSI2-2*SMA(MAX(CLOSE-LC,0),16,1)/SMA(ABS(CLOSE-LC),16,1)*100,3);\nMMM:EMA(MMS,8);\nMML:MA(3*RSI3-2*SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100,5);"}},l.prototype.SLZT=function(){return{Name:"SLZT",Description:"",IsMainIndex:!1,Args:[],Script:": MA(CLOSE,125);\n: +2*STD(CLOSE,170);\n: -2*STD(CLOSE,145);\n: SAR(125,1,7), LINESTICK;\nVAR2:=HHV(HIGH,70);\nVAR3:=HHV(HIGH,20);\n: VAR2*0.83;\n: VAR3*0.91;"}},l.prototype.ADVOL=function(){return{Name:"ADVOL",Description:"",IsMainIndex:!1,Args:[],Script:"A:=SUM(((CLOSE-LOW)-(HIGH-CLOSE))*VOL/10000/(HIGH-LOW),0);\nADVOL:A;\nMA1:MA(A,30);\nMA2:MA(MA1,100);"}},l.prototype.CYC=function(){return{Name:"CYC",Description:"",IsMainIndex:!0,Args:[{Name:"P1",Value:5},{Name:"P2",Value:13},{Name:"P3",Value:34}],Script:"JJJ:=IF(DYNAINFO(8)>0.01,0.01*DYNAINFO(10)/DYNAINFO(8),DYNAINFO(3));\nDDD:=(DYNAINFO(5)<0.01 || DYNAINFO(6)<0.01);\nJJJT:=IF(DDD,1,(JJJ<(DYNAINFO(5)+0.01) && JJJ>(DYNAINFO(6)-0.01)));\nCYC1:IF(JJJT,0.01*EMA(AMOUNT,P1)/EMA(VOL,P1),EMA((HIGH+LOW+CLOSE)/3,P1));\nCYC2:IF(JJJT,0.01*EMA(AMOUNT,P2)/EMA(VOL,P2),EMA((HIGH+LOW+CLOSE)/3,P2));\nCYC3:IF(JJJT,0.01*EMA(AMOUNT,P3)/EMA(VOL,P3),EMA((HIGH+LOW+CLOSE)/3,P3));\nCYC4:IF(JJJT,DMA(AMOUNT/(100*VOL),100*VOL/FINANCE(7)),EMA((HIGH+LOW+CLOSE)/3,120));"}},l.prototype.CYS=function(){return{Name:"CYS",Description:"",IsMainIndex:!1,Args:[],Script:"CYC13:EMA(AMOUNT,13)/EMA(VOL,13);\nCYS:(CLOSE-CYC13)/CYC13*100;"}},l.prototype.CYQKL=function(){return{Name:"CYQKL",Description:"K",IsMainIndex:!1,Args:[],Script:"KL:100*(WINNER(CLOSE)-WINNER(OPEN));"}},l.prototype.SCR=function(){return{Name:"SCR",Description:"",IsMainIndex:!1,Args:[{Name:"P1",Value:90}],Script:"A:=P1+(100-P1)/2;\nB:=(100-P1)/2;\nCC:=COST(A);\nDD:=COST(B);\nSCR:(CC-DD)/(CC+DD)*100/2;"}},l.prototype.ASR=function(){return{Name:"ASR",Description:"",IsMainIndex:!1,Args:[],Script:"ASR:(WINNER(C*1.1)-WINNER(C*0.9))/WINNER(HHV(H,0))*100;"}},l.prototype.SAR=function(){return{Name:"SAR",Description:"",IsMainIndex:!0,Args:[{Name:"P",Value:10},{Name:"STEP",Value:2},{Name:"MAXP",Value:20}],Script:"S:SAR(P,STEP,MAXP),CIRCLEDOT;"}},l.prototype.TJCJL=function(){return{Name:"",Description:"",IsMainIndex:!0,Args:[],Script:":VOL,NODRAW;\nZZ:=IF(REF(C,1)>REF(O,1) AND O>REF(C,1)*1.014 AND C<O*1.02,1,3);\nV5:=MA(V,5);\nV12:=MA(V,12);\nV34:=MA(V,34);\nC6:=MA(C,6);\nSTICKLINE(VOL,0,VOL,10,0),COLORLIGRAY;\nSTICKLINE(CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,0,VOL,10,0),COLORRED;\nSTICKLINE(CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,0,VOL,10,0),COLORGREEN;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05,0,VOL,10,0),COLORYELLOW;\nSTICKLINE(VOL<MA(VOL,5)/2 AND V<V12/2,0,VOL,10,0),COLORBLUE;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,VOL*0.5,0,10,0),COLORRED;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,VOL*0.5,0,10,0),COLORRED;"}},l.prototype.Dragon4_Main=function(){return{Name:"",Description:"",IsMainIndex:!0,Args:[{Name:"N1",Value:5},{Name:"N2",Value:10},{Name:"N3",Value:50},{Name:"N4",Value:60}],Script:":=EMA(CLOSE,N1),COLORGRAY;\n:=EMA(CLOSE,N2),COLORGREEN;\n:=EMA(CLOSE,N3),COLORRED;\nDRAWKLINE(HIGH,OPEN,LOW,CLOSE);\n:MA(CLOSE,N4),COLORBLUE,LINETHICK2;\nDRAWBAND(,'RGB(186,225,250)',,'RGB(253,194,124)');\nDRAWBAND(,'RGB(128,138,135)',,'RGB(0,0,255)');"}},l.prototype.Dragon4_Fig=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[],Script:":VOL>=REF(V,1)*1.90 AND C>REF(C,1),COLORYELLOW;\n:VOL<REF(LLV(VOL,13),1),COLORGREEN;\n:VOL<REF(LLV(VOL,100),1),COLORMAGENTA; \n:=ABS(VOL-HHV(REF(VOL,1),5))/HHV(REF(VOL,1),5)<=0.03 OR ABS(VOL-REF(VOL,1))/REF(VOL,1)<=0.03,NODRAW,COLORWHITE;\n:VOL<=REF(V,1)*0.5,COLORFF8000;\n:COUNT(V>REF(V,1),3)==3 AND COUNT(C>O,3)==3,COLORBROWN;\n:COUNT(C>REF(C,1),2)==2 AND COUNT(V<REF(V,1),2)==2,COLORBLUE;\nSTICKLINE(C>=REF(C,1),V,0,2,0),COLORRED;\nSTICKLINE(C<REF(C,1),V,0,2,0),COLORGREEN;\nSTICKLINE(,0,V,2,0),COLORYELLOW;\nSTICKLINE(,0,V,2,0),COLORGREEN;\nSTICKLINE(,0,V,2,0),COLORLIMAGENTA;\nSTICKLINE(,0,V,2,0),COLORGRAY;\nSTICKLINE(,0,V,2,0),COLORFF8000;\nSTICKLINE(,0,V,2,0),COLORBROWN;\nSTICKLINE(,0,V,2,0),COLORBLUE;"}},l.prototype.FundsAnalysis=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[{Name:"M",Value:55},{Name:"N",Value:34}],Script:"LC:=REF(CLOSE,1);\nRSI:=((SMA(MAX((CLOSE - LC),0),3,1) / SMA(ABS((CLOSE - LC)),3,1)) * 100);\nFF:=EMA(CLOSE,3);\nMA15:=EMA(CLOSE,21); DRAWTEXT(CROSS(85,RSI),75,''),COLORGREEN;\nVAR1:=IF(YEAR>=2038 AND MONTH>=1,0,1);\nVAR2:=REF(LOW,1)*VAR1;\nVAR3:=SMA(ABS(LOW-VAR2),3,1)/SMA(MAX(LOW-VAR2,0),3,1)*100*VAR1;\nVAR4:=EMA(IF(CLOSE*1.3,VAR3*10,VAR3/10),3)*VAR1;\nVAR5:=LLV(LOW,30)*VAR1;\nVAR6:=HHV(VAR4,30)*VAR1;\nVAR7:=IF(MA(CLOSE,58),1,0)*VAR1;\nVAR8:=EMA(IF(LOW<=VAR5,(VAR4+VAR6*2)/2,0),3)/618*VAR7*VAR1;\nA:IF(VAR8>100,100,VAR8)*VAR1,COLORFB2F3B;\n{B}STICKLINE(A>-150,0,A,8,0),COLORFB2F3B;\n\n: 100*(HHV(HIGH,M)-CLOSE)/(HHV(HIGH,M)-LLV(LOW,M)),COLORAA89BD,LINETHICK2;\nRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,3,1);\nD:=SMA(K,3,1);\nJ:=3*K-2*D;\n:EMA(J,5),COLORF39800,LINETHICK2;\nDRAWICON(CROSS(,),,1);\nDRAWICON(CROSS(,),,2);"}},l.prototype.MarginProportion=function(){return{Name:"(%)",Description:"",IsMainIndex:!1,Condition:{Period:[o.KLINE_DAY_ID]},Args:[],Script:":MARGIN(2);"}},l.prototype.FXG_BSPoint=function(){return{Name:"BS",Description:"BS",IsMainIndex:!0,Args:[],Script:"MA5:MA(CLOSE,5);\n        MA13:MA(CLOSE,13);\n        MA21:MA(CLOSE,21);\n        MA34:MA(CLOSE,34);\n        {MA55:MA(CLOSE,55),COLOR0000FF;}\n        {MA120:=MA(CLOSE,120),COLORFFFF00;}\n        :=EMA(C,2),COLOR000000;\n        :=EMA(SLOPE(C,21)*20+C,42),COLOR000000;\n        :=CROSS(,);\n        :=CROSS(,);\n        DRAWICON(,L*0.97,13);\n        DRAWICON(,H*1.03,14);\n        DRAWKLINE_IF(>=,HIGH,CLOSE,LOW,OPEN),COLORRED;\n        DRAWKLINE_IF(<,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n        DRAWKLINE_IF(CROSS(,),HIGH,CLOSE,LOW,OPEN),COLORYELLOW;\n        DRAWKLINE_IF(CROSS(,),HIGH,CLOSE,LOW,OPEN),COLORBLACK;"}},l.prototype.FXG_INDEX=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[],Script:": SMA((CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100,5,1)-8,COLORRED,LINETHICK3;\n: SMA((HHV(HIGH,36)-CLOSE)/(HHV(HIGH,36)-LLV(LOW,36))*100,2,1),COLORGREEN,LINETHICK3;\n20,POINTDOT,COLORF00FF0;\n50,POINTDOT,COLORGREEN;\n80,POINTDOT,COLORLIBLUE;"}},l.prototype.FXG_INDEX2=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[],Script:"VAR0:=EMA(HHV(HIGH,500),21); \nVAR1:=EMA(HHV(HIGH,250),21);\nVAR2:=EMA(HHV(HIGH,90),21); \nVAR3:=EMA(LLV(LOW,500),21); \nVAR4:=EMA(LLV(LOW,250),21); \nVAR5:=EMA(LLV(LOW,90),21);\n\nVAR6:=EMA((VAR3*0.96+VAR4*0.96+VAR5*0.96+VAR0*0.558+VAR1*0.558+VAR2*0.558)/6,21); \nVAR7:=EMA((VAR3*1.25+VAR4*1.23+VAR5*1.2+VAR0*0.55+VAR1*0.55+VAR2*0.65)/6,21); \nVAR8:=EMA((VAR3*1.3+VAR4*1.3+VAR5*1.3+VAR0*0.68+VAR1*0.68+VAR2*0.68)/6,21); \nVAR9:=EMA((VAR6*3+VAR7*2+VAR8)/6*1.738,21); \nVAR10:=REF(LOW,1); \nVAR11:=SMA(ABS(LOW-VAR10),3,1)/SMA(MAX(LOW-VAR10,0),3,1)*100; \nVAR12:=EMA(IFF(CLOSE*1.35<=VAR9,VAR11*10,VAR11/10),3); \nVAR13:=LLV(LOW,30); \nVAR14:=HHV(VAR12,30); \nVAR15:=IFF(MA(CLOSE,58),1,0); \nVAR16:=EMA(IFF(LOW<=VAR13,(VAR12+VAR14*2)/2,0),3)/618*VAR15;\n\n:IFF(VAR16>0,VAR16,0),LINETHICK,LINETHICK2, COLORFF0000; \n\nA1:IFF(>0,*1.2,0),STICK,LINETHICK5, COLORFF0000;\nA2:IFF(>0,*0.8,0),STICK,LINETHICK5, COLORFF6600;\nA3:IFF(>0,*0.6,0),STICK,LINETHICK5, COLORFF9900;\nA4:IFF(>0,*0.4,0) ,STICK,LINETHICK5,COLORFFCC00;\nA5:IFF(>0,*0.2,0) ,STICK,LINETHICK5,COLORFFFF00;"}},l.prototype.FXG_INDEX3=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"A:=IFF((CLOSE>126.32),VOL,VOL); \n:=MA(A,4),COLORRED;\n:=MA(A,8),COLORYELLOW;\n:=MA(A,16),COLORF0F000;\n:=MA(A,32),COLOR00FF00;\n:=ABS((()/( +  +  + ))*(100)),LINESTICK,COLORRED;\n:=ABS((()/( +  +  + ))*(100)),LINESTICK,COLORYELLOW;\n:=ABS((()/( +  +  + ))*(100)),LINESTICK,COLORF0F000;\n:=ABS((()/( +  +  + ))*(100)),LINESTICK,COLOR00FF00;\n:MA(A,180),COLORFF66FF;\nSTICKLINE(( > 0),0,,2.5,0),COLOR1020BB;\nSTICKLINE(( > 0),0,,0.7,0),COLORRED;\nSTICKLINE(( > 0),0,,2.5,0),COLOR009CFF;\nSTICKLINE(( > 0),0,,0.7,0),COLORYELLOW;\nSTICKLINE(( > 0),0,,2.5,0),COLORFF8800;\nSTICKLINE(( > 0),0,,0.7,0),COLORLIBLUE;\nSTICKLINE(( > 0),0,,2.5,0),COLOR00CA00;\nSTICKLINE(( > 0),0,,0.7,0),COLORGREEN;"}},l.prototype.NewsNegative=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"N",Value:5},{Name:"N2",Value:10}],Script:":NEWS(1);\nMA1:MA(,N);\nMA2:MA(,N2);"}},l.prototype.UpDownAnalyze=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[o.MINUTE_ID,o.MULTIDAY_MINUTE_ID,o.KLINE_DAY_ID]},Args:[],Script:":UPCOUNT('CNA.CI'),COLORRED;\n:DOWNCOUNT('CNA.CI'),COLORGREEN;"}},l.prototype.HK2SHSZ=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[o.MINUTE_ID,o.MULTIDAY_MINUTE_ID,o.KLINE_DAY_ID]},Args:[],Script:":HK2SHSZ(1),COLORSTICK;"}},l.prototype.ShareHolder=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[o.KLINE_DAY_ID,o.KLINE_MONTH_ID,o.KLINE_WEEK_ID,o.KLINE_YEAR_ID]},Args:[],Script:":FINANCE(100);"}},l.prototype.VOLRate=function(){return{Name:"",Description:"",IsMainIndex:!1,Condition:{Period:[o.MINUTE_ID,o.MULTIDAY_MINUTE_ID]},Args:[],Script:"LIANGBI:VOLR;"}},l.prototype.COLOR_KSTAR1=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH>LOW;"}},l.prototype.COLOR_KSTAR2=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:(REF(CLOSE,2)/REF(OPEN,2)<0.95) && (REF(OPEN,1) < REF(CLOSE,2)) && (ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03) && CLOSE/OPEN>1.05 && CLOSE>REF(CLOSE,2);"}},l.prototype.COLOR_KSTAR3=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05 && REF(OPEN,1)>REF(CLOSE,2) && ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03 && CLOSE/OPEN<0.95 && CLOSE<REF(CLOSE,2);"}},l.prototype.COLOR_SHI1=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH/LOW>1.03;"}},l.prototype.COLOR_K220=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1)>0.04&&\n            ABS(CLOSE-OPEN)/CLOSE<0.005&&\n            MAX(CLOSE,OPEN)<MAX(REF(CLOSE,1),REF(OPEN,1))&&\n            MIN(CLOSE,OPEN)>MIN(REF(CLOSE,1),REF(OPEN,1));"}},l.prototype.COLOR_K300=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:UPNDAY(CLOSE,3)&&NDAY(CLOSE,OPEN,3);"}},l.prototype.COLOR_K310=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:DOWNNDAY(CLOSE,3)&&NDAY(OPEN,CLOSE,3);"}},l.prototype.COLOR_K380=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:HIGH==CLOSE&&HIGH>LOW;"}},l.prototype.COLOR_K390=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:LOW==CLOSE&&HIGH>LOW;"}},l.prototype.COLOR_K134=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&CLOSE==LOW&&CLOSE<HIGH;"}},l.prototype.COLOR_K140=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)<0.95&&\nREF(OPEN,1)<REF(CLOSE,2)&&\nREF(OPEN,1)==REF(CLOSE,1)&&\nCLOSE/OPEN>1.05&&CLOSE>REF(CLOSE,2);"}},l.prototype.COLOR_K150=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05&&\nREF(OPEN,1)>REF(CLOSE,2)&&\nREF(OPEN,1)=REF(CLOSE,1)&&\nCLOSE/OPEN<0.95&&CLOSE<REF(CLOSE,2);"}},l.prototype.COLOR_K160=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE>MA(CLOSE,5);"}},l.prototype.COLOR_K165=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE<MA(CLOSE,5);"}},l.prototype.COLOR_K170=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE<MA(CLOSE,5);"}},l.prototype.COLOR_K180=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE>MA(CLOSE,5);"}},l.prototype.COLOR_K190=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"OUT:(REF(CLOSE,1)/REF(OPEN,1)>1.03&&\nCLOSE/OPEN<0.96&&\nCLOSE<REF(OPEN,1)&&OPEN>REF(CLOSE,1))||\n(REF(CLOSE,1)/REF(OPEN,1)<0.97&&\nCLOSE/OPEN>1.04&&\nCLOSE>REF(OPEN,1)&&OPEN<REF(CLOSE,1));"}},l.prototype.COLOR_SWORD=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"AA:=VOL>REF(VOL,1)||VOL>(CAPITAL*0.1);\nBB:=OPEN>=(REF(HIGH,1))&&REF(HIGH,1)>(REF(HIGH,2)*1.06);\nCC:=CLOSE>(REF(CLOSE,1))-(REF(CLOSE,1)*0.01);\nDD:=CLOSE<(HIGH*0.965) && HIGH>(OPEN*1.05);\nEE:=LOW<OPEN && LOW<CLOSE&&HIGH>(REF(CLOSE,1)*1.06);\nFF:=(HIGH-(MAX(OPEN,CLOSE)))/2>(MIN(OPEN,CLOSE))-LOW;\nGG:=(ABS(OPEN-CLOSE))/2<(MIN(OPEN,CLOSE)-LOW);\nSWORDO:AA&&BB&&CC&&DD&&EE&&FF&&GG;"}},l.prototype.COLOR_CSFR=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"A:=CLOSE>OPEN;\nB:=A&&CLOSE>MA(CLOSE,S)&&CLOSE>MA(CLOSE,M)&&CLOSE>MA(CLOSE,LL);\nCC:=B&&OPEN<MA(CLOSE,M)&&OPEN<MA(CLOSE,LL);\nCSFRO:CC&&(CLOSE-OPEN)>0.0618*CLOSE;"}},l.prototype.COLOR_WYGD=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)>1.03 AND \nCLOSE/OPEN<0.97 AND \nOPEN>REF(CLOSE,1) AND CLOSE<REF(CLOSE,1), 3);"}},l.prototype.COLOR_SGCJ=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)<0.97 AND \nCLOSE/OPEN>1.03 AND \nOPEN<REF(CLOSE,1) AND CLOSE>REF(CLOSE,1), 3);"}},l.prototype.COLOR_SZTAI=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1) > 0.04 AND \nCLOSE==OPEN AND CLOSE < MAX(REF(CLOSE,1),REF(OPEN,1)) AND \nCLOSE > MIN(REF(CLOSE,1),REF(OPEN,1)), 2);"}},l.prototype.COLOR_PINGDING=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET(ABS(HIGH-REF(HIGH,1))/HIGH<0.001,2);"}},l.prototype.COLOR_PINGDI=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET((ABS(LOW-REF(LOW,1))/LOW<0.001 AND \nABS(REF(LOW,1)-REF(LOW,2))/REF(LOW,1)<=0.001),2);"}},l.prototype.COLOR_DAYANZHU=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:CLOSE/OPEN>1.05 AND HIGH/LOW < CLOSE/OPEN+0.018;"}},l.prototype.COLOR_DAYINGZHU=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:OPEN/CLOSE > 1.05 AND HIGH/LOW < OPEN/CLOSE+0.018;"}},l.prototype.COLOR_HYFG=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( (REF(CLOSE,1)<REF(OPEN,1) AND \nCLOSE>OPEN AND ABS(CLOSE-REF(CLOSE,1))/CLOSE<0.002),2);"}},l.prototype.COLOR_TKQK=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( HIGH<REF(LOW,1) OR LOW>REF(HIGH,1),2);"}},l.prototype.COLOR_SFWY=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( REF(CLOSE,1)<REF(OPEN,1) AND CLOSE<OPEN AND CLOSE/OPEN<0.98,1);"}},l.prototype.COLOR_SSSBQ=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)>1.03 AND \nREF(CLOSE,3)<REF(OPEN,3) AND \nREF(CLOSE,2)<REF(OPEN,2) AND \nREF(CLOSE,1)<REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN>1.03 AND \nCLOSE>REF(CLOSE,4), 5);"}},l.prototype.COLOR_XDSBQ=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)<0.97 AND \nREF(CLOSE,3)>REF(OPEN,3) AND \nREF(CLOSE,2)>REF(OPEN,2) AND \nREF(CLOSE,1)>REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN<0.97 AND \nCLOSE<REF(CLOSE,4), 5);"}},l.prototype.COLOR_CHXY=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(MIN(CLOSE,OPEN)-LOW)/(HIGH-LOW)>0.667;"}},l.prototype.COLOR_CHSY=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(HIGH-MAX(CLOSE,OPEN))/(HIGH-LOW)>0.667,COLORBLUE;"}},l.prototype.COLOR_FENLI=function(){return{Name:"",Description:"",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( OPEN==REF(OPEN,1) AND (CLOSE-OPEN)*(REF(CLOSE,1)-REF(OPEN,1))<0,2);"}},l.prototype.TRADE_BIAS=function(){return{Name:"BIAS",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:6},{Name:"LH",Value:6}],Script:"BIAS:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nENTERLONG:CROSS(-LL,BIAS);\nEXITLONG:CROSS(BIAS,LH);"}},l.prototype.TRADE_CCI=function(){return{Name:"CCI",Description:"CCI",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:=(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));\nINDEX:=CCI;\nENTERLONG:CROSS(INDEX,-100);\nEXITLONG:CROSS(100,INDEX);"}},l.prototype.TRADE_DMI=function(){return{Name:"DMI",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"MTR:=SUM(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nPDM:=SUM(IF(HD>0&&HD>LD,HD,0),N);\nMDM:=SUM(IF(LD>0&&LD>HD,LD,0),N);\nPDI:=PDM*100/MTR;\nMDI:=MDM*100/MTR;\nENTERLONG:CROSS(PDI,MDI);\nEXITLONG:CROSS(MDI,PDI);"}},l.prototype.TRADE_KD=function(){return{Name:"KD",Description:"KD",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"WRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nWK:=SMA(WRSV,M1,1);\nD:=SMA(WK,M2,1);\nENTERLONG:CROSS(WK,D)&&WK<20;\nEXITLONG:CROSS(D,WK)&&WK>80;"}},l.prototype.TRADE_BOLL=function(){return{Name:"BOLL",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:20}],Script:"MID :=MA(CLOSE,N);\nUPPER:=MID+2*STD(CLOSE,N);\nLOWER:=MID-2*STD(CLOSE,N);\nENTERLONG:CROSS(CLOSE,LOWER);\nEXITLONG:CROSS(CLOSE,UPPER);"}},l.prototype.TRADE_KDJ=function(){return{Name:"KDJ",Description:"KDJ",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,M1,1);\nD:=SMA(K,M1,1);\nJ:=3*K-2*D;\nENTERLONG:CROSS(J,0);\nEXITLONG:CROSS(100,J);"}},l.prototype.TRADE_MA=function(){return{Name:"MA",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"SHORT",Value:5},{Name:"LONG",Value:20}],Script:"ENTERLONG:CROSS(MA(CLOSE,SHORT),MA(CLOSE,LONG));\nEXITLONG:CROSS(MA(CLOSE,LONG),MA(CLOSE,SHORT));"}},l.prototype.TRADE_MACD=function(){return{Name:"MACD",Description:"MACD",IsMainIndex:!0,InstructionType:1,Args:[{Name:"LONG",Value:26},{Name:"SHORT",Value:12},{Name:"M",Value:9}],Script:"DIFF:=EMA(CLOSE,SHORT) - EMA(CLOSE,LONG);\nDEA  := EMA(DIFF,M);\nMACD := 2*(DIFF-DEA);\nENTERLONG:CROSS(MACD,0);\nEXITLONG:CROSS(0,MACD);"}},l.prototype.TRADE_MTM=function(){return{Name:"MTM",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6}],Script:"WMTM:=C-REF(C,N);\nENTERLONG:CROSS(WMTM,0);\nEXITLONG:CROSS(0,WMTM);"}},l.prototype.TRADE_PSY=function(){return{Name:"PSY",Description:"PSY",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:10},{Name:"LH",Value:85}],Script:"MYPSY:=COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\nENTERLONG:CROSS(LL,MYPSY);\nEXITLONG:CROSS(MYPSY,LH);"}},l.prototype.TRADE_ROC=function(){return{Name:"ROC",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"WROC:=MA(100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),M);\nENTERLONG:CROSS(WROC,0);\nEXITLONG:CROSS(0,WROC);"}},l.prototype.TRADE_RSI=function(){return{Name:"RSI",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6},{Name:"LL",Value:20},{Name:"LH",Value:80}],Script:"LC:=REF(CLOSE,1);\nWRSI:=SMA(MAX(CLOSE-LC,0),N,1)/SMA(ABS(CLOSE-LC),N,1)*100;\nENTERLONG:CROSS(WRSI,LL);\nEXITLONG:CROSS(LH,WRSI);"}},l.prototype.TRADE_VR=function(){return{Name:"VR",Description:"VR",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:26},{Name:"LL",Value:70},{Name:"LH",Value:250}],Script:"WVR := SUM((IF(CLOSE>OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)/SUM((IF(CLOSE<OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)*100;\nENTERLONG:CROSS(LL,WVR);\nEXITLONG:CROSS(WVR,LH);"}},l.prototype.TRADE_DPSJ=function(){return{Name:"DPSJ",Description:"",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N1",Value:18},{Name:"N2",Value:12}],Script:"RSV:=(INDEXC-LLV(INDEXL,N1))/(HHV(INDEXH,N1)-LLV(INDEXL,N1))*100;\nK:=SMA(RSV,N2,1);\nHSL:VOL/100/(FINANCE(7));\nENTERLONG: CROSS(K,20);\nEXITLONG: (CROSS(HSL,5) OR CROSS(K,80));"}},l.prototype.Zealink_Index1=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[],Script:"VAR1:=REF((LOW+OPEN+CLOSE+HIGH)/4,1);  \nVAR2:= SMA(ABS(LOW - VAR1), 13, 1) / SMA(MAX(LOW - VAR1, 0), 10, 1);\nVAR3:= EMA(VAR2, 10);\nVAR4:= LLV(LOW, 33);\nVAR5:= EMA(IF(LOW <= VAR4, VAR3, 0), 3) * 0.2;\n: IF(VAR5 > REF(VAR5, 1), VAR5,0), COLORRED, NODRAW;\n: IF(VAR5 < REF(VAR5, 1),  VAR5,0), COLORYELLOW, NODRAW;\nSTICKLINE(VAR5> REF(VAR5, 1),0, VAR5, 20, 0), COLORRED;\nSTICKLINE(VAR5 < REF(VAR5, 1), 0, VAR5, 20, 0), COLORYELLOW;"}},l.prototype.Zealink_Index2=function(){return{Name:"",Description:"",IsMainIndex:!1,YSpecificMaxMin:{Max:100,Min:1,Count:4},YSplitScale:[1,50,100],Args:[],Script:"H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+ 13 * REF(H, 7) + 12 * REF(H, 8) + 11 * REF(H, 9) + 10 * REF(H, 10) + 9 * REF(H, 11) + 8 * REF(H, 12)\n+ 7 * REF(H, 13) + 6 * REF(H, 14) + 5 * REF(H, 15) + 4 * REF(H, 16) + 3 * REF(H, 17) + 2 * REF(H, 18) +\nREF(H, 20))/ 210, COLORBLUE, LINETHICK1;\nL:= (20 * L + 19 * REF(L, 1) + 18 * REF(L, 2) + 17 * REF(L, 3) + 16 * REF(L, 4) + 15 * REF(L, 5) + 14 * REF(L, 6)\n+ 13 * REF(L, 7) + 12 * REF(L, 8) + 11 * REF(L, 9) + 10 * REF(L, 10) + 9 * REF(L, 11) + 8 * REF(L, 12)\n+ 7 * REF(L, 13) + 6 * REF(L, 14) + 5 * REF(L, 15) + 4 * REF(L, 16) + 3 * REF(L, 17) + 2 * REF(L, 18) +\nREF(L, 20)) / 210, COLORBLUE, LINETHICK1;\nD90H:= EMA(H, 90), COLORRED, LINETHICK1;\nD90L:= EMA(L, 90), COLORRED, LINETHICK1;\nD90:= D90H - D90L;\nD90:= D90H + D90 * 2, COLORRED, LINETHICK1;\nD90:= D90L - D90 * 2, COLORRED, LINETHICK1;\n0:= (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1 + EMA(EMA(H, 25), 25), LINETHICK1, COLORWHITE;\n0:= EMA(EMA(L, 25), 25) - (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1, LINETHICK1, COLORWHITE;\n:= 0 >= D90 AND 0 >= D90;\n:= 0 <= D90 AND 0 <= D90;\n:= 0 >= D90 AND 0 <= D90;\n: IF( == 1, 100, 1), COLORRED, NODRAW;\n: IF( == 1, 100, 1), COLORGREEN, NODRAW;\n: IF( == 1, 100, 1), COLORGRAY, NODRAW;\nSTICKLINE( == 1, 100, 1, 100, 0), COLORRED;\nSTICKLINE( == 1, 100, 1, 100, 0), COLORGREEN;\nSTICKLINE( == 1, 100, 1, 100, 0), COLORGRAY;"}},l.prototype.Zealink_Index3=function(){return{Name:"",Description:"",IsMainIndex:!0,Args:[],Script:':=EMA(C,2);\n:=EMA(SLOPE(C,30)*5+C,20); \nBU:=CROSS(,);\nSEL:=CROSS(,);\n\nSTICKLINE(>= AND CLOSE>OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(>= AND CLOSE<OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(>= AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORRED;\nSTICKLINE(>= AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORRED;\nSTICKLINE(< AND CLOSE<OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(< AND CLOSE>OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(< AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORGREEN;\nSTICKLINE(< AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORGREEN;\n\nHHJSJDA:=(3*CLOSE+OPEN+LOW+HIGH)/6;\nHHJSJDB:(19*HHJSJDA+19*REF(HHJSJDA,1)+18*REF(HHJSJDA,2)+17*REF(HHJSJDA,3)+16*REF(HHJSJDA,4)+15*REF(HHJSJDA,5)+14*REF(HHJSJDA,6)\n+13*REF(HHJSJDA,7)+12*REF(HHJSJDA,8)+11*REF(HHJSJDA,9)+10*REF(HHJSJDA,10)+9*REF(HHJSJDA,11)+8*REF(HHJSJDA,12)+7*REF(HHJSJDA,13)+6*REF(HHJSJDA,14)+5*REF(HHJSJDA,15)+4*REF(HHJSJDA,16)+3*REF(HHJSJDA,17)+2*REF\n(HHJSJDA,20)+REF(HHJSJDA,19))/210,COLORYELLOW;\nHHJSJDC:MA(HHJSJDB,5),COLORRED;\n\nSVAR11:=HHV(HIGH,34);\nSVAR14:=CLOSE-REF(CLOSE,1);\nSVAR15:=MAX(SVAR14,0);\nSVAR16:=ABS(SVAR14);\nSVAR17:=SMA(SVAR15,7,1)/SMA(SVAR16,7,1)*100;\nSVAR18:=SMA(SVAR15,13,1)/SMA(SVAR16,13,1)*100;\nSVAR19:=BARSCOUNT(CLOSE);\nSVAR20:=SMA(MAX(SVAR14,0),6,1)/SMA(ABS(SVAR14),6,1)*100;\nSVAR21:=(-200)*(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60))+100;\nSVAR1A:=(CLOSE-LLV(LOW,15))/(HHV(HIGH,15)-LLV(LOW,15))*100;\nSVAR1B:=SMA((SMA(SVAR1A,4,1)-50)*2,3,1);\nSVAR1C:=(INDEXC-LLV(INDEXL,14))/(HHV(INDEXH,14)-LLV(INDEXL,14))*100;\nSVAR1D:=SMA(SVAR1C,4,1);\nSVAR1E:=SMA(SVAR1D,3,1);\nSVAR1F:=(HHV(HIGH,30)-CLOSE)/CLOSE*100;\nSVAR22:=SVAR20<=25 AND SVAR21<-95 AND SVAR1F>20 AND SVAR1B<-30 AND SVAR1E<30 AND SVAR11-CLOSE>=-0.25 AND SVAR17<22 AND SVAR18<28 AND SVAR19>50;\nBUY3:=CROSS(SVAR22,0.5) AND COUNT(SVAR22==1,10)==1;\n\nSVARF:=LOW*0.9;\nSVAR10X:=100-3*SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1)+2*SMA(SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1),15,1);\nSVAR11X:=SVARF<REF(SVAR10X,1) AND VOL>REF(VOL,1) AND CLOSE>REF(CLOSE,1);\nBUY2:=SVAR11X AND COUNT(SVAR11X,30)==1;\n\nVAR1:=(CLOSE+HIGH+LOW+OPEN)/4;\nVAR2:=SUMBARS(VOL,CAPITAL);\nVAR3:=HHV(VAR1,VAR2);\nVAR4:=LLV(VAR1,VAR2);\nVAR5:=(2*VAR1-VAR4-REF(VAR4,1))/(VAR3-VAR4);\nVAR6:=(VAR1-VAR4)/(VAR3-VAR4);\nVAR7:=IF(VAR1<=VAR4,VAR5*60,VAR6*60);\nVAR8:=600*(EMA(CLOSE,3)-EMA(LOW,30))/EMA(LOW,30);\nVAR9:=EMA(VAR8,7);\nVARC:=HHV(HIGH,9)-LLV(LOW,9);\nVARD:=HHV(HIGH,9)-CLOSE;\nVARE:=CLOSE-LLV(LOW,9);\nVARF:=VARD/VARC*100-70;\nVAR10:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*100;\nVAR11:=(2*CLOSE+HIGH+LOW)/4;\nVAR12:=SMA(VARE/VARC*100,3,1);\nVAR13:=LLV(LOW,34);\nVAR14:=SMA(VAR12,3,1)-SMA(VARF,9,1);\nVAR15:=IF(VAR14>100,VAR14-100,0);\nVAR16:=HHV(HIGH,34);\nVAR17:=EMA((VAR11-VAR13)/(VAR16-VAR13)*100,8);\nVAR18:=EMA(VAR17,5);\nBUY:=STICKLINE(VAR17-VAR18>0,VAR17,VAR18,8,1),COLORRED;\nSELL:=STICKLINE(VAR17-VAR18<0,VAR17,VAR18,8,1),COLORGREEN;\nBUY1:=VAR17>VAR18 AND REF(VAR17,1)<REF(VAR18,1);\nSELL1:=VAR17<VAR18 AND REF(VAR17,1)>REF(VAR18,1);\n\nH:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+13*REF(H,7)+12*REF(H,8)+11*REF(H,9)+10*REF(H,10)+9*REF(H,11)+8*REF(H,12)\n+7*REF(H,13)+6*REF(H,14)+5*REF(H,15)+4*REF(H,16)+3*REF(H,17)+2*REF(H,18)+\nREF(H,20))/210,COLORBLUE,LINETHICK1;\nL:=(20*L+19*REF(L,1)+18*REF(L,2)+17*REF(L,3)+16*REF(L,4)+15*REF(L,5)+14*REF(L,6)\n+13*REF(L,7)+12*REF(L,8)+11*REF(L,9)+10*REF(L,10)+9*REF(L,11)+8*REF(L,12)\n+7*REF(L,13)+6*REF(L,14)+5*REF(L,15)+4*REF(L,16)+3*REF(L,17)+2*REF(L,18)+\nREF(L,20))/210,COLORBLUE,LINETHICK1;\nD90H:=EMA(H,90),COLORRED,LINETHICK1;\nD90L:=EMA(L,90),COLORRED,LINETHICK1;\nD90:=D90H-D90L;\nD90:=D90H+D90*2,COLORRED,LINETHICK1;\nD90:=D90L-D90*2,COLORRED,LINETHICK1;\n0:=(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1+EMA(EMA(H,25),25),LINETHICK1,COLORWHITE;\n0:=EMA(EMA(L,25),25)-(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1,LINETHICK1,COLORWHITE;\n:=0>=D90 AND 0>=D90;\n:=0<=D90 AND 0<=D90;\n:=0>=D90 AND 0<=D90;\n\n:===1;\n:===1;\n:===1;\n\n:= OR ;\n:= OR ;\n\nBUY11:=BUY1 AND ;\nSELL11:=SELL1 AND ==0;\n\nBUY111:=BUY11 AND COUNT(BUY11,10)<2;\nBUY0:=BUY111 AND COUNT(BUY111,21)==1;\nSELL111:=SELL11 AND COUNT(SELL11,10)<2;\nSELL0:=SELL111 AND COUNT(SELL111,10)==1;\n\nXK1:=EMA(100*(CLOSE-LLV(LOW,34))/(HHV(HIGH,34)-LLV(LOW,34)),3)/4;\n:=REF(XK1,1)<5 AND XK1>=5;\nBUY4:= AND COUNT(XK1<2,12)<1;\n\nSELL2:=REF(XK1,1)<=22.5 AND XK1>22.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,5)>0;\nSELL3:=REF(XK1,1)>=21.5 AND XK1<21.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,12)>1;\nSELL4:=SELL2 OR SELL3 AND COUNT((SELL2 OR SELL3)==1,5)==1;\n\nSUPERDRAWTEXT(BUY0,L,"",2,10),COLORRED;\nSUPERDRAWTEXT(SELL0,H,"",1,10),COLORGREEN;\nSUPERDRAWTEXT(BUY2,L,"",2,10),COLORRED;\nSUPERDRAWTEXT(BUY4,L,"",2,10),COLORRED;\nSUPERDRAWTEXT(SELL4,H,"",1,10),COLORGREEN;'}},l.prototype.Zealink_Index4=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(4),NODRAW,COLORRED;\n:NEWS(5),NODRAW,COLORGREEN;\nSTICKLINE(>0,0,,1,0),COLORRED;\nSTICKLINE(<0,0,,1,0),COLORGREEN;"}},l.prototype.Zealink_Index5=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(7);"}},l.prototype.Zealink_Index6=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(6);"}},l.prototype.Zealink_Index7=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(8);"}},l.prototype.Zealink_Index8=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(9);"}},l.prototype.Zealink_Index9=function(){return{Name:"",Description:"",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:":NEWS(10);"}},l.prototype.Zealink_Index10=function(){return{Name:"BS",Description:"BS",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3; \nA:=EMA(JJ,10); \nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13); \nM4:=EMA(M2,55); \nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\nINDEXCLOSE:INDEXC,EXDATA;\nINDEXOPEN:INDEXO,EXDATA;\nDRAWICON(REF(B1,1),L*0.97,13);\nDRAWICON(REF(S1,1),H*1.03,14);"}},l.prototype.Zealink_Index11=function(){return{Name:"BS",Description:"BS",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3;\nA:=EMA(JJ,10);\nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13);\nM4:=EMA(M2,55);\n:=STICKLINE(A>B,A,B,2,0),COLORYELLOW; \n:=STICKLINE(A<B,A,B,2,0),COLORBLUE;\n\nVR1:=(C+O+REF(C,1))/3;\nVR3:=HHV(VR1,21);\nVR4:=LLV(VR1,21);\nVR5:=(2*VR1-VR4-REF(VR4,1))/(VR3-VR4);\nVR6:=(VR1-VR4)/(VR3-VR4);\nVR7:=IF(VR1<=VR4,VR5*60,VR6*60);\nVR8:=600*(EMA(C,3)-EMA(L,30))/EMA(L,30);\nVR9:=EMA(VR8,7);\nVRA:=(WINNER(120*C/100)-WINNER(100*C/100))*100;\nVRB:=(-100)*(WINNER(120*C/100)-WINNER(100*C/100))+5;\nVRC:=HHV(H,9)-LLV(L,9);\nVRD:=HHV(H,9)-C;\nVRE:=C-LLV(L,9);\nVRF:=VRD/VRC*100-70;\nVR10:=(C-LLV(L,60))/(HHV(H,60)-LLV(L,60))*100;\nVR11:=(2*C+H+L)/4;\nVR12:=SMA(VRE/VRC*100,3,1);\nVR13:=LLV(L,34);\nVR14:=SMA(VR12,3,1)-SMA(VRF,9,1);\nVR15:=IF(VR14>100,VR14-100,0);\nVR16:=HHV(H,34);\nVR17:=EMA((VR11-VR13)/(VR16-VR13)*100,8);\nVR18:=EMA(VR17,5);\n\nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\n\nB9:=BARSLAST(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)));\nS9:=BARSLAST(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)));\n\nDRAWICON(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)) AND REF(B9,2)>=S9,L*0.97,13);\nDRAWICON(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)) AND REF(S9,1)>=B9,H*1.03,14);\n\nDRAWKLINE_IF(VR17>VR18,HIGH,CLOSE,LOW,OPEN),COLORRED;\nDRAWKLINE_IF(VR17<VR18,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n\nINDEXCLOSE:INDEXC,EXDATA;\t\t// BATE "}},l.prototype.HeikinAshi=function(){return{Name:"K",Description:"Heikin-Ashi K",IsMainIndex:!0,KLineType:-1,Args:[],Script:"HCLOSE:(OPEN+HIGH+LOW+CLOSE)/4, NODRAW;\nHOPEN:(REF(OPEN,1)+REF(CLOSE,1))/2,NODRAW;\nHHIGH:MAX(HIGH,MAX(HOPEN,HCLOSE)),NODRAW;\nHLOW:MIN(LOW,MIN(HOPEN,HCLOSE)),NODRAW;\nDRAWKLINE(HHIGH,HOPEN,HLOW,HCLOSE);"}},l.prototype.EMPTY=function(){return{Name:"",Description:"",IsMainIndex:!1,Args:[],Script:"VAR2:=C;"}},l.prototype.TEST=function(){return{Name:"TEST",Description:"",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"DRAWCHANNEL(OPEN>C,H,L, 'RGB(255,94,102)', 2 ,'5,5','RGBA(58,20,62,0.3)' );"}},u.Init=function(t){var e=new u(t);return e.OnSize(),e},u.SetDomain=function(t,e){t&&(fe.Domain=t),e&&(fe.CacheDomain=e)},u.SetPyIndexDomain=function(t){t&&(fe.PyIndexDomain=t)},u.SetStyle=function(t){t&&fe.SetStyle(t)},u.SetTextResource=function(t,e){de.SetTextResource(t,e)},u.GetLocalization=function(){return de},u.GetDevicePixelRatio=function(){return d()},u.CreateGuid=function(){return m()},u.GetResource=function(){return fe},u.GetMinuteTimeStringData=function(){return Re},u.GetMinuteCoordinateData=function(){return Pe};var c={RECV_KLINE_MATCH:1,RECV_INDEX_DATA:2,RECV_HISTROY_DATA:3,RECV_TRAIN_MOVE_STEP:4,CHART_STATUS:5,BARRAGE_PLAY_END:6,RECV_OVERLAY_INDEX_DATA:7,DBCLICK_KLINE:8,RECV_START_AUTOUPDATE:9,RECV_STOP_AUTOUPDATE:10,ON_CONTEXT_MENU:11},f={OP_SCROLL_LEFT:1,OP_SCROLL_RIGHT:2,OP_ZOOM_OUT:3,OP_ZOOM_IN:4,OP_GOTO_HOME:5};function C(t){this.ClassName="JSChartContainer";this.Frame,this.ChartPaint=new Array,this.ChartPaintEx=[],this.ChartInfo=new Array,this.ChartInfoPaint,this.ExtendChartPaint=new Array,this.TitlePaint=new Array,this.OverlayChartPaint=new Array,this.ChartDrawPicture=new Array,this.ChartDrawStorage,this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.ChartCorssCursor,this.IsClickShowCorssCursor=!1,this.ChartSplashPaint=null,this.Canvas=t.getContext("2d"),this.UIElement=t,this.MouseDrag,this.DragMode=1,this.DragTimer,this.EnableScrollUpDown=!1,this.CursorIndex=0,this.LastPoint=new I,this.IsForceLandscape=!1,this.CorssCursorTouchEnd=!1,this.StepPixel=4,this.ZoomStepPixel=5,this.EnableAnimation=!1,this.Tooltip=document.createElement("div"),this.Tooltip.className="jschart-tooltip",this.Tooltip.style.background=fe.TooltipBGColor,this.Tooltip.style.opacity=fe.TooltipAlpha,this.Tooltip.id=m(),t.parentNode.appendChild(this.Tooltip),this.IsShowTooltip=!0,this.SelectRect=document.createElement("div"),this.SelectRect.className="jschart-selectrect",this.SelectRect.style.background=fe.SelectRectBGColor,this.SelectRect.id=m(),t.parentNode.appendChild(this.SelectRect),this.SelectRectRightMenu,this.FrameSplitData=new Map,this.FrameSplitData.set("double",new ce),this.FrameSplitData.set("price",new function(){this.newMethod=ce,this.newMethod(),delete this.newMethod,this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,1e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.001],[.04,.05,.04,.001],[.05,.1,.05,.001],[.1,.2,.1,.01],[.2,.4,.2,.01],[.4,.5,.2,.01],[.5,.8,.2,.01],[.8,1,.5,.01],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,2e4,2e3],[4e4,5e4,4e4,1e3],[5e4,1e5,5e4,5e3],[1e5,2e5,1e5,1e4],[2e5,4e5,2e5,2e4],[4e5,5e5,4e5,1e4],[5e5,1e6,5e5,5e4],[1e6,2e6,1e6,1e5],[2e6,4e6,2e6,2e5],[4e6,5e6,4e6,1e5],[5e6,1e7,5e6,5e5],[1e7,2e7,1e7,1e6],[2e7,4e7,2e7,2e6],[4e7,5e7,4e7,1e6],[5e7,1e8,5e7,5e6],[1e8,2e8,1e8,1e7],[2e8,4e8,2e8,2e7],[4e8,5e8,4e8,1e7],[5e8,1e9,5e8,5e7],[1e9,2e9,1e9,1e8],[2e9,4e9,2e9,2e8],[4e9,5e9,4e9,1e8],[5e9,1e10,5e9,5e8]]}),this.mapEvent=new Map,this.IsOnTouch=!1,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.PressTime=500,this.NetworkFilter,this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.GetIndexEvent=function(){return this.GetEventCallback(c.RECV_INDEX_DATA)},this.GetOverlayIndexEvent=function(){return this.GetEventCallback(c.RECV_OVERLAY_INDEX_DATA)},t.onmousemove=function(t){var e=d(),a=(t.clientX-this.getBoundingClientRect().left)*e,i=(t.clientY-this.getBoundingClientRect().top)*e;this.JSChartContainer.ChartSplashPaint&&1==this.JSChartContainer.ChartSplashPaint.IsEnableSplash||this.JSChartContainer&&this.JSChartContainer.OnMouseMove(a,i,t)},t.oncontextmenu=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;return this.JSChartContainer&&"function"==typeof this.JSChartContainer.OnRightMenu&&this.JSChartContainer.OnRightMenu(e,a,t),!1},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=d();if(this.JSChartContainer.IsOnTouch=!0,this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,n=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,n))return}this.JSChartContainer.HideSelectRect(),this.JSChartContainer.SelectRectRightMenu&&this.JSChartContainer.SelectRectRightMenu.Hide(),this.JSChartContainer.ChartPictureMenu&&this.JSChartContainer.ChartPictureMenu.Hide();var r={Click:{},LastMove:{}};if(r.Click.X=e.clientX,r.Click.Y=e.clientY,r.LastMove.X=e.clientX,r.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=r,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,this.JSChartContainer.CurrentChartDrawPicture){2==this.JSChartContainer.CurrentChartDrawPicture.Status?this.JSChartContainer.SetChartDrawPictureThirdPoint(r.Click.X,r.Click.Y):(this.JSChartContainer.SetChartDrawPictureFirstPoint(r.Click.X,r.Click.Y),this.JSChartContainer.FinishChartDrawPicturePoint()&&this.JSChartContainer.DrawDynamicInfo())}else{var s={};a=d();s.X=(e.clientX-this.getBoundingClientRect().left)*a,s.Y=(e.clientY-this.getBoundingClientRect().top)*a,this.JSChartContainer.GetChartDrawPictureByPoint(s)&&(s.ChartDrawPicture.Status=20,s.ChartDrawPicture.ValueToPoint(),s.ChartDrawPicture.MovePointIndex=s.PointIndex,this.JSChartContainer.CurrentChartDrawPicture=s.ChartDrawPicture,this.JSChartContainer.SelectChartDrawPicture=s.ChartDrawPicture,this.JSChartContainer.OnSelectChartPicture(s.ChartDrawPicture))}t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(e){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var a=this.JSChartContainer.MouseDrag;if(a){var i=Math.abs(a.LastMove.X-e.clientX);if(this.JSChartContainer.CurrentChartDrawPicture){var n=this.JSChartContainer.CurrentChartDrawPicture;if(1==n.Status||2==n.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.JSChartContainer.SetChartDrawPictureSecondPoint(e.clientX,e.clientY)&&this.JSChartContainer.DrawDynamicInfo()}else if(3==n.Status)this.JSChartContainer.SetChartDrawPictureThirdPoint(e.clientX,e.clientY)&&this.JSChartContainer.DrawDynamicInfo();else if(20==n.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.JSChartContainer.MoveChartDrawPicture(e.clientX-a.LastMove.X,e.clientY-a.LastMove.Y)&&this.JSChartContainer.DrawDynamicInfo()}a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(1==this.JSChartContainer.DragMode){if(i<5)return;var r=!0;a.LastMove.X<e.clientX&&(r=!1),this.JSChartContainer.UIElement.style.cursor="pointer",this.JSChartContainer.DataMove(i,r)?(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()):this.JSChartContainer.DragDownloadData&&this.JSChartContainer.DragDownloadData(),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(2==this.JSChartContainer.DragMode){var s=Math.abs(a.LastMove.Y-e.clientY);if(i<5&&s<5)return;var o=a.Click.X-t.getBoundingClientRect().left,h=a.Click.Y-t.getBoundingClientRect().top,l=e.clientX-t.getBoundingClientRect().left,u=e.clientY-t.getBoundingClientRect().top;this.JSChartContainer.ShowSelectRect(o,h,l,u),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}}}},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null;var a=!0;if(this.JSChartContainer&&this.JSChartContainer.CurrentChartDrawPicture){var i=this.JSChartContainer.CurrentChartDrawPicture;2==i.Status||1==i.Status||3==i.Status?(i.PointStatus=i.Status,this.JSChartContainer.FinishChartDrawPicturePoint()?this.JSChartContainer.DrawDynamicInfo():a=!1):20==i.Status&&this.JSChartContainer.FinishMoveChartDrawPicture()&&this.JSChartContainer.DrawDynamicInfo()}else if(this.JSChartContainer&&2==this.JSChartContainer.DragMode){var n=this.JSChartContainer.MouseDrag,r=new function(){this.Data,this.JSChartContainer,this.Start,this.End,this.XStart,this.XEnd};r.XStart=n.Click.X-t.getBoundingClientRect().left,r.XEnd=n.LastMove.X-t.getBoundingClientRect().left,r.JSChartContainer=this.JSChartContainer,r.Stock={Symbol:this.JSChartContainer.Symbol,Name:this.JSChartContainer.Name},this.JSChartContainer.GetSelectRectData(r)&&this.JSChartContainer.SelectRectRightMenu&&(e.data={Chart:this.JSChartContainer,X:n.LastMove.X-t.getBoundingClientRect().left,Y:n.LastMove.Y-t.getBoundingClientRect().top,SelectData:r},this.JSChartContainer.SelectRectRightMenu.DoModal(e))}console.log("[KLineChartContainer::document.onmouseup]",e),this.JSChartContainer.UIElement.style.cursor="default",this.JSChartContainer.MouseDrag=null,this.JSChartContainer.IsOnTouch=!1,!0===a&&(this.JSChartContainer.CurrentChartDrawPicture=null),this.JSChartContainer=null}}},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.IsPhonePinching=function(t){var e=t.changedTouches.length,a=t.touches.length;return(1==e||2==e)&&2==a},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.GetToucheData=function(t,e){for(var a=new Array,i=d(),n=0;n<t.touches.length;++n){var r=t.touches[n];e?a.push({clientX:r.clientY*i,clientY:r.clientX*i,pageX:r.pageY*i,pageY:r.pageX*i}):a.push({clientX:r.clientX*i,clientY:r.clientY*i,pageX:r.pageX*i,pageY:r.pageY*i})}return a},t.ontouchstart=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){this.JSChartContainer.IsOnTouch=!0,this.JSChartContainer.PhonePinch=null;var a=this.JSChartContainer;if(0==a.EnableScrollUpDown&&e.preventDefault(),a.IsPhoneDragging(e)){if(a.TryClickLock){var i=(o=a.GetToucheData(e,a.IsForceLandscape))[0].clientX,n=o[0].clientY,r=d();if(i-=t.getBoundingClientRect().left*r,n-=t.getBoundingClientRect().top*r,a.TryClickLock(i,n))return}this.DragTimer=setTimeout(function(){if(s.Click.X==s.LastMove.X&&s.Click.Y==s.LastMove.Y){a.MouseDrag;a.MouseDrag=null;var i=d(),n=s.Click.X-t.getBoundingClientRect().left*i,r=s.Click.Y-t.getBoundingClientRect().top*i;a.OnMouseMove(n,r,e)}},a.PressTime);var s={Click:{},LastMove:{}},o=a.GetToucheData(e,a.IsForceLandscape);if(s.Click.X=o[0].clientX,s.Click.Y=o[0].clientY,s.LastMove.X=o[0].clientX,s.LastMove.Y=o[0].clientY,this.JSChartContainer.MouseDrag=s,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,this.JSChartContainer.CurrentChartDrawPicture)return;if(a.IsClickShowCorssCursor){r=d(),i=s.Click.X-t.getBoundingClientRect().left*r,n=s.Click.Y-t.getBoundingClientRect().top*r;a.OnMouseMove(i,n,e)}}else if(a.IsPhonePinching(e)){var h={Start:{},Last:{}};o=a.GetToucheData(e,a.IsForceLandscape);h.Start={X:o[0].pageX,Y:o[0].pageY,X2:o[1].pageX,Y2:o[1].pageY},h.Last={X:o[0].pageX,Y:o[0].pageY,X2:o[1].pageX,Y2:o[1].pageY},this.JSChartContainer.PhonePinch=h,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null}t.ontouchmove=function(t){if(this.JSChartContainer){var e=a.GetToucheData(t,this.JSChartContainer.IsForceLandscape);if(a.IsPhoneDragging(t)){var i=this.JSChartContainer.MouseDrag;if(null==i){var n=d(),r=e[0].clientX-this.getBoundingClientRect().left*n,s=e[0].clientY-this.getBoundingClientRect().top*n;this.JSChartContainer.IsForceLandscape&&(s=this.getBoundingClientRect().width-e[0].clientY),this.JSChartContainer.OnMouseMove(r,s,t)}else{var o=Math.abs(i.LastMove.X-e[0].clientX),h=Math.abs(i.LastMove.Y-e[0].clientY);if(o=parseInt(o),1==this.JSChartContainer.DragMode){if(h>0&&o<=3&&1==this.JSChartContainer.EnableScrollUpDown)return clearTimeout(this.DragTimer),void(this.DragTimer=null);if(o<5)return void a.PreventTouchEvent(t);var l=!0;i.LastMove.X<e[0].clientX&&(l=!1),this.JSChartContainer.DataMove(o,l)?(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()):this.JSChartContainer.DragDownloadData&&this.JSChartContainer.DragDownloadData(),i.LastMove.X=e[0].clientX,i.LastMove.Y=e[0].clientY}}}else if(a.IsPhonePinching(t)){a.PreventTouchEvent(t);var u=this.JSChartContainer.PhonePinch;if(!u)return;var c=Math.abs(e[0].pageY-e[1].pageY)-Math.abs(u.Last.Y-u.Last.Y2),f=Math.abs(e[0].pageX-e[1].pageX)-Math.abs(u.Last.X-u.Last.X2),C=a.ZoomStepPixel;if(Math.abs(c)<C&&Math.abs(f)<C)return;var D=c;if(Math.abs(c)<C&&(D=f),D>0){if((p={}).Index=parseInt(Math.abs(this.JSChartContainer.CursorIndex-.5).toFixed(0)),!this.JSChartContainer.Frame.ZoomUp(p))return;this.JSChartContainer.CursorIndex=p.Index,this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.Draw(),this.JSChartContainer.ShowTooltipByKeyDown()}else{var p;if((p={}).Index=parseInt(Math.abs(this.JSChartContainer.CursorIndex-.5).toFixed(0)),!this.JSChartContainer.Frame.ZoomDown(p))return;this.JSChartContainer.CursorIndex=p.Index,this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.Draw(),this.JSChartContainer.ShowTooltipByKeyDown()}u.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}a.PreventTouchEvent(t)}},t.ontouchend=function(t){console.log("[KLineChartContainer::uielement.ontouchend]",t),this.JSChartContainer.IsOnTouch=!1,this.JSChartContainer.OnTouchFinished(),clearTimeout(this.DragTimer)}}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=d();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw(),void this.ChartSplashPaint.Draw();for(var e in this.Frame.Draw(),this.Frame.CalculateLock(),this.ChartPaint){(a=this.ChartPaint[e]).IsDrawFirst&&a.Draw()}for(var e in this.ChartPaint){(a=this.ChartPaint[e]).IsDrawFirst||a.Draw()}for(var e in this.ChartPaintEx){(a=this.ChartPaintEx[e]).Draw()}for(var e in this.OverlayChartPaint){(a=this.OverlayChartPaint[e]).Draw()}for(var e in this.Frame.DrawOveraly&&this.Frame.DrawOveraly(),this.ExtendChartPaint){(a=this.ExtendChartPaint[e]).IsDynamic||0!=a.IsAnimation||a.Draw()}for(var e in this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawCustomHorizontal&&this.Frame.DrawCustomHorizontal(),this.ChartInfoPaint&&this.ChartInfoPaint.Draw(),this.Frame.DrawLock(),this.Frame.Snapshot(),this.ExtendChartPaint){(a=this.ExtendChartPaint[e]).IsDynamic&&!1===a.DrawAfterTitle&&a.Draw()}for(var e in null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,!0===this.CorssCursorTouchEnd&&this.MouseDrag||1==this.CorssCursorTouchEnd&&0==this.IsOnTouch||this.ChartCorssCursor.Draw()),this.TitlePaint){(a=this.TitlePaint[e]).IsDynamic&&(a.CursorIndex=this.CursorIndex,a.Draw())}for(var e in this.ExtendChartPaint){(a=this.ExtendChartPaint[e]).IsDynamic&&!0===a.DrawAfterTitle&&0==a.IsAnimation&&a.Draw()}if(this.EnableAnimation)for(var e in this.ExtendChartPaint){!0===(a=this.ExtendChartPaint[e]).IsAnimation&&a.Draw()}for(var e in this.ChartDrawPicture){var a;(a=this.ChartDrawPicture[e]).Draw()}if(this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw(),this.mapEvent.has(c.CHART_STATUS)){var i=this.mapEvent.get(c.CHART_STATUS),n={};"function"==typeof this.GetChartStatus&&(n=this.GetChartStatus()),i.Callback(i,n,this)}}},this.DrawDynamicInfo=function(){if(null!=this.Frame.ScreenImageData){var t=!1;if(this.ChartCorssCursor&&(null==this.ChartCorssCursor.PointX&&null==this.ChartCorssCursor.PointY||(t=!0)),0==(t=!0))for(var e in this.ExtendChartPaint){if((a=this.ExtendChartPaint[e]).IsDynamic&&a.IsEraseBG){t=!0;break}}for(var e in t&&this.Canvas.putImageData(this.Frame.ScreenImageData,0,0),this.ExtendChartPaint){(a=this.ExtendChartPaint[e]).IsDynamic&&!1===a.DrawAfterTitle&&0==a.IsAnimation&&a.Draw()}for(var e in this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,!1===this.IsOnTouch&&!0===this.CorssCursorTouchEnd||this.ChartCorssCursor.Draw()),this.TitlePaint){(a=this.TitlePaint[e]).IsDynamic&&(a.CursorIndex=this.CursorIndex,a.Draw())}for(var e in this.ExtendChartPaint){(a=this.ExtendChartPaint[e]).IsDynamic&&!0===a.DrawAfterTitle&&a.Draw()}if(this.EnableAnimation)for(var e in this.ExtendChartPaint){!0===(a=this.ExtendChartPaint[e]).IsAnimation&&a.Draw()}for(var e in this.ChartDrawPicture){var a;(a=this.ChartDrawPicture[e]).Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw()}},this.DrawAnimation=function(){if(this.EnableAnimation){if(this.Frame.ScreenImageData&&!this.IsOnTouch){for(var t in this.ExtendChartPaint){var e=this.ExtendChartPaint[t];!0===e.IsAnimation&&(e.IsMoveStep=!0)}this.DrawDynamicInfo()}var a=this;window.requestAnimationFrame(function(){a.DrawAnimation()})}},this.StartAnimation=function(t){var e=!1,a=null;for(var i in this.ExtendChartPaint){var n=this.ExtendChartPaint[i];if("BarragePaint"===n.ClassName){e=!0,a=n.BarrageList;break}}if(!e){var r=new function(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.ClassName="BarragePaint",this.IsAnimation=!0,this.IsEraseBG=!0,this.HQChart,this.Font=fe.Barrage.Font,this.TextColor=fe.Barrage.Color,this.FontHeight=fe.Barrage.Height,this.BarrageList=new function(){this.PlayList=[],this.Cache=[],this.MinLineHeight=40*d(),this.Height,this.Step=1,this.GetPlayList=function(t){for(var e=t.Canves,a=t.Right,i=t.Left,n=a-i,r=t.IsMoveStep,s=[],o=0,h=0;h<this.PlayList.length;++h){var l=this.PlayList[h],u=this.MinLineHeight;l.Height>this.MinLineHeight&&(u=l.Height);for(var c=!0,f=!1,C=0;C<l.Data.length;++C){var d=l.Data[C],D={X:d.X,Y:o,Text:d.Text,Color:d.Color,Height:u,Font:d.Font,Info:d.Info};s.push(D),r&&(C==l.Data.length-1&&this.Cache.length>0?(c=!1,d.TextWidth||(d.Font&&d.Font.Name?e.font=d.Font.Name:e.font=t.Font,d.TextWidth=e.measureText(D.Text+"").width),d.X>=d.TextWidth&&(c=!0)):0==C&&(f=!1,d.TextWidth||(d.Font&&d.Font.Name?e.font=d.Font.Name:e.font=t.Font,d.TextWidth=e.measureText(D.Text+"").width),d.X>n+d.TextWidth&&(f=!0)),d.X+=this.Step)}if(r&&c&&this.Cache.length>0){var p=this.Cache.shift(),m={X:0,Text:p.Text,Color:p.Color,Font:p.Font,Info:p.Info};l.Data.push(m)}if(r&&f&&l.Data.length>0){var v=l.Data.shift();this.OnItemPlayEnd(t.HQChart,v)}o+=u}return s},this.CacluatePlayLine=function(t){this.Height=t;var e=parseInt(t/this.MinLineHeight);if(this.PlayList.length<e)for(var a=e-this.PlayList.length,i=0;i<a;++i)this.PlayList.push({Data:[]});else if(this.PlayList.length>e)for(var n=this.PlayList.length-e,i=0;i<n;++i)for(var r=this.PlayList.pop(),s=0;s<r.Data.length;++s){var o=r.Data[s],h={Text:o.Text,Color:o.Color,Font:o.Font,Info:o.Info};this.Cache.unshift(h)}console.log(`[BarrageList::CacluatePlayLine] LineCount=${this.PlayList.length} Height=${this.Height}`)},this.AddBarrage=function(t){for(var e in t){var a=t[e];this.Cache.push(a)}},this.OnItemPlayEnd=function(t,e){if(t.mapEvent.has(c.BARRAGE_PLAY_END)){var a=t.mapEvent.get(c.BARRAGE_PLAY_END);a.Callback&&a.Callback(a,e,this)}},this.Count=function(){return this.Cache.length}},this.IsMoveStep=!1,this.SetOption=function(t){t&&(t.Step>0&&(this.BarrageList.Step=t.Step),t.MinLineHeight&&(this.Barrage.MinLineHeight=t.MinLineHeight))},this.DrawHScreen=function(){var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx();this.ChartBorder.GetChartWidth();t!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(t),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var n=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:a,Left:e,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,n){this.Canvas.save(),this.Canvas.translate(this.ChartBorder.GetChartHeight(),0),this.Canvas.rotate(90*Math.PI/180);for(var r=0;r<n.length;++r){var s=n[r];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,a-s.X,i+h)}this.Canvas.restore()}},this.Draw=function(){if(this.ChartFrame.IsHScreen)this.DrawHScreen();else{var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeight();i!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(i),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var n=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:e,Left:t,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,n)for(var r=0;r<n.length;++r){var s=n[r];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,e-s.X,a+h)}}}};r.Canvas=this.Canvas,r.ChartBorder=this.Frame.ChartBorder,r.ChartFrame=this.Frame,r.HQChart=this,r.SetOption(t),this.ExtendChartPaint.push(r),a=r.BarrageList}this.EnableAnimation=!0;var s=this;return window.requestAnimationFrame(function(){s.DrawAnimation()}),a},this.StopAnimation=function(){this.EnableAnimation=!1,this.DrawDynamicInfo()},this.OnMouseMove=function(t,e,a){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(t);var i=!1;if(this.CurrentChartDrawPicture)this.CurrentChartDrawPicture.SetLastPoint&&this.CurrentChartDrawPicture.SetLastPoint({X:t,Y:e}),i=!0;else{var n={};n.X=t,n.Y=e,this.GetChartDrawPictureByPoint(n)?(100===n.PointIndex?this.UIElement.style.cursor="move":this.UIElement.style.cursor="pointer",i=!0):this.MouseDrag||(this.UIElement.style.cursor="default")}if(this.DrawDynamicInfo(),this.IsShowTooltip&&0==i){var r=new X;for(var s in this.ChartPaint){if(this.ChartPaint[s].GetTooltipData(t,e,r))break}if(!r.Data)for(var s in this.OverlayChartPaint){if(this.OverlayChartPaint[s].GetTooltipData(t,e,r))break}if(r.Data){var o=a.clientX-this.UIElement.getBoundingClientRect().left,h=a.clientY-this.UIElement.getBoundingClientRect().top;this.ShowTooltip(o,h,r)}else this.HideTooltip()}},this.OnKeyDown=function(t){switch(t.keyCode?t.keyCode:t.which){case 37:if(this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown();break;case 39:var e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1>=e){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown()}else{var a=null;if(!(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+a.DataOffset+1>=a.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:if((i={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(i))break;this.CursorIndex=i.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown();break;case 40:var i;if((i={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(i))break;this.CursorIndex=i.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown();break;case 46:if(!this.SelectChartDrawPicture)break;var n=this.SelectChartDrawPicture;console.log(n,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(n);break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1},this.OnDoubleClick=function(t,e,a){},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"==this.ClassName&&(t=this.CursorIndex);var e=this.Frame.Data;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t].Close;this.LastPoint.Y=this.Frame.GetYFromData(a)}},this.ShowTooltipByKeyDown=function(){var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"==this.ClassName&&(t=this.CursorIndex);var e=this.Frame.Data,a=new X;a.Data=e.Data[e.DataOffset+t],a.ChartPaint=this.ChartPaint[0];var i=d();0===i&&(i=1),this.ShowTooltip(this.LastPoint.X/i,this.LastPoint.Y/i,a)},this.ShowTooltip=function(t,e,a){if(this.IsShowTooltip){var i=15/d();if(0===a.Type){if((h=new function(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.Symbol,this.UpColor=fe.UpTextColor,this.DownColor=fe.DownTextColor,this.UnchagneColor=fe.UnchagneTextColor,this.VolColor=fe.DefaultTextColor,this.AmountColor=fe.DefaultTextColor,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.LineCount=0,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e=new Date(parseInt(t.Date/1e4),t.Date/100%100-1,t.Date%100),a=It.FormatDateString(t.Date),i=de.GetText(Rt[e.getDay()],this.LanguageID);if(V.IsMinutePeriod(this.Value.ChartPaint.Data.Period,!0)){var n=parseInt(t.Time/100),r=t.Time%100,s=n>=10?n.toString():"0"+n.toString(),o=r>=10?r.toString():"0"+r.toString();i=s+":"+o}var h=Be(this.Symbol),l=null;t.YClose>0&&(l=(t.Close-t.YClose)/t.YClose*100);var u="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+de.GetText("DivTooltip-Open",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Open,t.YClose)+";'>"+t.Open.toFixed(h)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-High",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.High,t.YClose)+";'>"+t.High.toFixed(h)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-Low",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Low,t.YClose)+";'>"+t.Low.toFixed(h)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-Close",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Close,t.YClose)+";'>"+t.Close.toFixed(h)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-Vol",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.VolColor+";'>"+It.FormatValueString(t.Vol,2,this.LanguageID)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-Amount",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.AmountColor+";'>"+It.FormatValueString(t.Amount,2,this.LanguageID)+"</span><br/><span class='tooltip-con'>"+de.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==l?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(l,0)+";'>"+l.toFixed(2)+"%</span><br/>");if(this.LineCount=8,we.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var c=t.Vol/t.FlowCapital*100;u+="<span class='tooltip-con'>"+de.GetText("DivTooltip-Exchange",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.AmountColor+";'>"+c.toFixed(2)+"%</span><br/>",++this.LineCount}if("Overlay-KLine"==this.Value.ChartPaint.Name){var f="<span style='color:rgb(0,0,0);font:;font-size:12px;text-align:center;display: block;'>"+this.Value.ChartPaint.Title+"</span>";u=f+u,++this.LineCount}return this.Text=u,!0},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor}}).Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;var n=25*h.LineCount,r=(v(),t),s=e,o=157;this.LanguageID==Ce.LANGUAGE_ENGLISH_ID&&(o=180),this.Tooltip.style.width=o+"px",this.Tooltip.style.height=n+"px",this.Tooltip.style.position="absolute",r+o>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=r-o+"px":this.Tooltip.style.left=r+"px",this.Tooltip.style.top=s+i+"px",this.Tooltip.className="jschart-tooltip",this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(1===a.Type){var h;v(),r=t,s=e,o=500;if((h=new function(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.UpColor=fe.UpTextColor,this.DownColor=fe.DownTextColor,this.UnchagneColor=fe.UnchagneTextColor,this.Operator=function(){if(!this.Value)return!1;var t=this.Value.Data.Data,e=this.Value.Data.Type,a="";for(var i in t){var n=t[i],r="";switch(e){case _.BLOCKTRADING:r=this.BlockTradingFormat(n);break;case _.TRADEDETAIL:r=this.TradeDetailFormat(n);break;case _.RESEARCH:r=this.ResearchFormat(n);break;case _.PFORECAST:r=this.PerformanceForecastFormat(n);break;default:r=this.DefaultFormat(n)}a+=r}var s="<div class='title-length'>"+a+"</div>";if(t.length>8){var o="<div class='total-list'>"+t.length+"</div>";s+=o}return this.Text=s,!0},this.DefaultFormat=function(t){var e=It.FormatDateString(t.Date),a="<span>"+e+"&nbsp;&nbsp;&nbsp;"+t.Title+"</span>";return a},this.BlockTradingFormat=function(t){var e=t.ExtendData,a=It.FormatDateString(t.Date),i="<span><i class='date-tipbox'>"+a+"</i>&nbsp;&nbsp;<i class='tipBoxTitle'>:&nbsp;"+e.Price.toFixed(2)+"</i><i class='tipBoxTitle'>:&nbsp;"+e.ClosePrice.toFixed(2)+"</i><br/><i class='rate-discount tipBoxTitle'>:&nbsp;<strong style='color:"+this.GetColor(e.Premium.toFixed(2))+"'>"+e.Premium.toFixed(2)+"%</strong></i><i class='tipBoxTitle'>():&nbsp;"+e.Vol.toFixed(2)+"</i></span>";return i},this.TradeDetailFormat=function(t){var e=t.ExtendData.Detail,a=It.FormatDateString(t.Date),i=[];for(var n in e)i+="<i>"+e[n].TypeExplain+"</i><br/>";var r="<span><i class='trade-time'>"+a+"&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;</i><i class='reason-list'>"+i+"</i><br/><i class='trade-detall'>:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</strong>&nbsp;&nbsp;&nbsp;:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+";'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</strong></i></span>";return r},this.ResearchFormat=function(t){var e=t.ExtendData.Level,a="";if(0==e.length)a="<i></i>";else{for(var i in e)0==e[i]?a+="<i style='color:#00a0e9'>&nbsp;&nbsp;&nbsp;</i>":1==e[i]?a+="<i>&nbsp;&nbsp;&nbsp;</i>":2==e[i]?a+="<i style='color:#00a0e9'>&nbsp;&nbsp;&nbsp;</i>":3==e[i]&&(a+="<i style='color:#00a0e9'>&nbsp;&nbsp;&nbsp;</i>");a=":&nbsp;&nbsp;&nbsp;"+a}var n="";t.ExtendData.Type&&""!=t.ExtendData.Type&&(n="&nbsp;&nbsp;&nbsp;<i>"+t.ExtendData.Type+"</i>",0==e.length&&(a=""));var r=It.FormatDateString(t.Date),s="<span>"+r+"&nbsp;&nbsp;&nbsp;"+n+a+"</span>";return s},this.PerformanceForecastFormat=function(t){var e,a=t.ExtendData.ReportDate,i=parseInt(a/1e4),n=a%1e4;1231==n?e="":331==n?e="":630==n?e="":930==n&&(e="");var r="";t.ExtendData.FWeek&&(null!=t.ExtendData.FWeek.Week1&&(r+=":<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</i>"),null!=t.ExtendData.FWeek.Week4&&(r+="&nbsp;:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+"'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</i>"),r.length>0&&(r="<br/>&nbsp;&nbsp;<i class='prorecast-week'>"+r+"</i>"));var s=It.FormatDateString(t.Date),o="<span>"+s+"&nbsp;&nbsp;"+i+e+t.Title+"&nbsp;"+r+"</span>";return o},this.GetColor=function(t){return t>0?this.UpColor:t<0?this.DownColor:this.UnchagneColor}}).Value=a,h.Symbol=this.Symbol,!h.Operator())return;this.Tooltip.className="jchart-klineinfo-tooltip",this.Tooltip.style.position="absolute",r+o>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=r-o+"px":this.Tooltip.style.left=r+"px",this.Tooltip.style.top=s+i+"px",this.Tooltip.style.width=o+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){this.Tooltip.style.display="none"},this.ShowSelectRect=function(t,e,a,i){var n=t,r=e,s=this.Frame.ChartBorder.GetRight(),o=this.Frame.ChartBorder.GetLeft();t>s&&(t=s),a>s&&(a=s),t<o&&(t=o),a<o&&(a=o),t>a&&(n=a),e>i&&(r=i);var h=Math.abs(t-a),l=Math.abs(e-i);this.SelectRect.style.width=h+"px",this.SelectRect.style.height=l+"px",this.SelectRect.style.position="absolute",this.SelectRect.style.left=n+"px",this.SelectRect.style.top=r+"px",this.SelectRect.style.display="block"},this.UpdateSelectRect=function(t,e){if(this.ChartPaint[0].Data){var a=this.ChartPaint[0].Data.DataOffset,i=t-a,n=e-a,r=this.Frame.GetXFromIndex(i),s=this.Frame.GetXFromIndex(n);console.log("[JSChartContainer::UpdateSelectRect]",t,e,r,s);var o=v();this.SelectRect.style.left=r+o.Left+"px",this.SelectRect.style.width=s-r+"px"}},this.HideSelectRect=function(){this.SelectRect.style.display="none"},this.ResetFrameXYSplit=function(){"function"==typeof this.Frame.ResetXYSplit&&this.Frame.ResetXYSplit()},this.UpdateFrameMaxMin=function(){var t=new Array,e=new Array;for(var a in this.ChartPaint){0!=(o=this.ChartPaint[a]).IsShow&&e.push(this.ChartPaint[a])}for(var a in this.OverlayChartPaint)e.push(this.OverlayChartPaint[a]);for(var a in e){var i=e[a],n=i.GetMaxMin();if(null!=n&&null!=n.Max&&null!=n.Min){var r=null;for(var s in t)if(t[s].Frame==i.ChartFrame){r=t[s];break}r?(r.Range.Max<n.Max&&(r.Range.Max=n.Max),r.Range.Min>n.Min&&(r.Range.Min=n.Min)):((r={}).Frame=i.ChartFrame,r.Range=n,t.push(r))}}for(var a in t){var o;(o=t[a]).Frame&&o.Range&&(null!=o.Range.Max&&null!=o.Range.Min&&(o.Frame.YSpecificMaxMin?(o.Frame.HorizontalMax=o.Frame.YSpecificMaxMin.Max,o.Frame.HorizontalMin=o.Frame.YSpecificMaxMin.Min):(o.Frame.HorizontalMax=o.Range.Max,o.Frame.HorizontalMin=o.Range.Min),o.Frame.XYSplit=!0))}for(var a in this.Frame.SubFrame){var h=this.Frame.SubFrame[a];for(var s in h.OverlayIndex){h.OverlayIndex[s].UpdateFrameMaxMin()}}},this.DataMoveLeft=function(){var t=null;return!!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)&&(!(t.DataOffset<=0)&&(--t.DataOffset,!0))},this.DataMoveRight=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var e=0;return!!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount)&&(!(e+t.DataOffset>=t.Data.length)&&(++t.DataOffset,!0))},this.UpdataDataoffset=function(){var t=null;if(t=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){for(var e in this.ChartPaint){(s=this.ChartPaint[e]).Data&&(s.Data.DataOffset=t.DataOffset)}for(var e in this.OverlayChartPaint){(s=this.OverlayChartPaint[e]).Data&&(s.Data.DataOffset=t.DataOffset)}for(var e in this.Frame.SubFrame){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var n=a.OverlayIndex[i];for(var r in n.ChartPaint){var s;(s=n.ChartPaint[r]).Data&&(s.Data.DataOffset=t.DataOffset)}}}}},this.DataMove=function(t,e){if((t=parseInt(t/this.StepPixel))<=0)return!1;var a=null;if(!(a=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var i=0;return!!(i=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount)&&(e?!(i+a.DataOffset>=a.Data.length)&&(a.DataOffset+=t,a.DataOffset+i>=a.Data.length&&(a.DataOffset=a.Data.length-i),!0):!(a.DataOffset<=0)&&(a.DataOffset-=t,a.DataOffset<0&&(a.DataOffset=0),!0))},this.GetSubFrameIndex=function(t,e){if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return-1;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame,n=i.ChartBorder.GetLeft(),r=i.ChartBorder.GetTop(),s=i.ChartBorder.GetHeight(),o=i.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(n,r,o,s),this.Canvas.isPointInPath(t,e))return parseInt(a)}return 0},this.GetDataIndexByPoint=function(t){var e=this.Frame;this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame);var a=null;if((a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)&&e){var i=parseInt(e.GetXData(t));return a.DataOffset+i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=null;if(!(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))return!1;var a=this.GetDataIndexByPoint(t.XStart),i=this.GetDataIndexByPoint(t.XEnd);return!(Math.abs(a-i)<2)&&(t.Data=e,a>i?(t.Start=i,t.End=a):(t.Start=a,t.End=i),!0)},this.GetChartDrawPictureByPoint=function(t){for(var e in this.ChartDrawPicture){var a=this.ChartDrawPicture[e],i=a.IsPointIn(t.X,t.Y);if(!1!==i&&i>=0)return t.ChartDrawPicture=a,t.PointIndex=i,!0}return!1},this.SaveToImage=function(t,e){if(this.UIElement.width<=0||this.UIElement.height<=0)return null;if(this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return null;console.log("[JSChartContainer::SaveToImage]",this.UIElement);var a="rgb(255,255,255)";e&&(a=e),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height);var i=d();for(var n in this.Canvas.lineWidth=i,this.Frame.Draw(),this.ChartPaint){(r=this.ChartPaint[n]).IsDrawFirst&&r.Draw()}for(var n in this.ChartPaint){(r=this.ChartPaint[n]).IsDrawFirst||r.Draw()}for(var n in this.ChartPaintEx){(r=this.ChartPaintEx[n]).Draw()}for(var n in this.OverlayChartPaint){(r=this.OverlayChartPaint[n]).Draw()}for(var n in this.ExtendChartPaint){(r=this.ExtendChartPaint[n]).IsDynamic||0!=r.IsAnimation||r.Draw()}for(var n in this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawLock(),this.ExtendChartPaint){(r=this.ExtendChartPaint[n]).IsDynamic&&!1===r.DrawAfterTitle&&r.Draw()}for(var n in null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex),this.TitlePaint){(r=this.TitlePaint[n]).IsDynamic&&(r.CursorIndex=this.CursorIndex,r.Draw())}for(var n in this.ExtendChartPaint){(r=this.ExtendChartPaint[n]).IsDynamic&&!0===r.DrawAfterTitle&&0==r.IsAnimation&&r.Draw()}if(this.EnableAnimation)for(var n in this.ExtendChartPaint){!0===(r=this.ExtendChartPaint[n]).IsAnimation&&r.Draw()}for(var n in this.ChartDrawPicture){var r;(r=this.ChartDrawPicture[n]).Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();var s=this.UIElement.toDataURL(t||"image/png",1);return console.log("[JSChartContainer::SaveToImage] data= ",s),s},this.SaveToImageUrl=function(t,e){t||(t={Format:"image/png",ColorGB:"rgb(255,255,255)"});var a={Base64:this.SaveToImage(t.Format,t.ColorGB),BucketName:"downloadcache",Path:"hqchart/hq_snapshot"},i=fe.Domain+"/API/FileUploadForBase64";s.HttpRequest({url:i,method:"POST",dataType:"json",data:a,success:function(t){console.log("[JSChartContainer::SaveToImageUrl] recv data",t);var a={Path:t.relativeurl,Domain:"https://opensourcedownload.zealink.com"};a.Url=`${a.Domain}/${a.Path}`,e&&e(!0,a,"")},error:function(t){console.log("[JSChartContainer::SaveToImageUrl] error ",t),e&&e(!1,null,"upload failed")}})},this.SetLanguage=function(t){var e=null;switch(t){case"EN":e=Ce.LANGUAGE_ENGLISH_ID;break;case"CN":e=Ce.LANGUAGE_CHINESE_ID;break;default:return void console.warn(`[JSChartContainer::SetLanguage] language=${t} error`)}if(this.LanguageID!=e){for(var a in this.LanguageID=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID),this.TitlePaint){var i=this.TitlePaint[a];i&&(i.LanguageID=this.LanguageID)}this.Frame&&this.Frame.SetLanguage&&this.Frame.SetLanguage(this.LanguageID),this.Frame.SetSizeChage(!0),this.Draw()}}}function d(){return"undefined"==typeof window?1:window.devicePixelRatio||1}function D(t){this.JSChartContainer&&this.JSChartContainer.OnKeyDown&&this.JSChartContainer.OnKeyDown(t)}function p(t){this.JSChartContainer&&this.JSChartContainer.OnWheel&&this.JSChartContainer.OnWheel(t)}function m(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function v(){var t={},e=0,a=0;return document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(e=document.body.scrollTop,a=document.body.scrollLeft),t.Top=e,t.Left=a,t}function S(t){return parseInt(t)+.5}function g(t){return.5+t<<0}function I(){this.X,this.Y}function A(){this.Value,this.Message=new Array,this.TextColor=fe.FrameSplitTextColor,this.Font=fe.FrameSplitTextFont,this.LineColor=fe.FrameSplitPen,this.LineType=1}function y(){this.UIElement,this.Left=50,this.Right=80,this.Top=50,this.Bottom=50,this.TitleHeight=24,this.TopSpace=0,this.BottomSpace=0,this.GetChartWidth=function(){return this.UIElement.width},this.GetChartHeight=function(){return this.UIElement.height},this.GetLeft=function(){return this.Left},this.GetRight=function(){return this.UIElement.width-this.Right},this.GetTop=function(){return this.Top},this.GetTopEx=function(){return this.Top+this.TitleHeight+this.TopSpace},this.GetTopTitle=function(){return this.Top+this.TitleHeight},this.GetBottom=function(){return this.UIElement.height-this.Bottom},this.GetBottomEx=function(){return this.UIElement.height-this.Bottom-this.BottomSpace},this.GetWidth=function(){return this.UIElement.width-this.Left-this.Right},this.GetHeight=function(){return this.UIElement.height-this.Top-this.Bottom},this.GetHeightEx=function(){return this.UIElement.height-this.Top-this.Bottom-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetRightEx=function(){return this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace},this.GetWidthEx=function(){return this.UIElement.width-this.Left-this.Right-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetLeftEx=function(){return this.Left+this.BottomSpace},this.GetRightTitle=function(){return this.UIElement.width-this.Right-this.TitleHeight},this.GetTitleHeight=function(){return this.TitleHeight}}function T(){this.HorizontalInfo=new Array,this.VerticalInfo=new Array,this.Canvas,this.Identify,this.ChartBorder,this.PenBorder=fe.FrameBorderPen,this.TitleBGColor=fe.FrameTitleBGColor,this.IsShow=!0,this.SizeChange=!0,this.XYSplit=!0,this.HorizontalMax,this.HorizontalMin,this.XPointCount=10,this.YSplitOperator,this.XSplitOperator,this.Data,this.IsLocked=!1,this.LockPaint=null,this.YSpecificMaxMin=null,this.IsShowBorder=!0,this.Draw=function(){this.DrawFrame(),this.DrawBorder(),this.SizeChange=!1,this.XYSplit=!1},this.DrawFrame=function(){},this.DrawBorder=function(){if(this.IsShowBorder){var t=S(this.ChartBorder.GetLeft()),e=S(this.ChartBorder.GetTop()),a=S(this.ChartBorder.GetRight())-t,i=S(this.ChartBorder.GetBottom())-e;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(t,e,a,i)}},this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=S(this.ChartBorder.GetLeft()),e=S(this.ChartBorder.GetTop()),a=S(this.ChartBorder.GetRight())-t,i=S(this.ChartBorder.GetTopTitle())-e;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(t,e,a,i)}},this.DrawLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new pt),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!0))},this.CalculateLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new pt),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!1))},this.SetLock=function(t){t?(this.IsLocked=!0,this.LockPaint||(this.LockPaint=new pt),t.Callback&&(this.LockPaint.Callback=t.Callback),t.IndexName&&(this.LockPaint.IndexName=t.IndexName),t.ID&&(this.LockPaint.LockID=t.ID),t.BG&&(this.LockPaint.BGColor=t.BG),t.Text&&(this.LockPaint.Title=t.Text),t.TextColor&&(this.LockPaint.TextColor=t.TextColor),t.Font&&(this.LockPaint.Font=t.Font),t.Count&&(this.LockPaint.LockCount=t.Count),t.MinWidth>0&&(this.LockPaint.MinWidth=t.MinWidth)):this.IsLocked=!1},this.GetLockRect=function(){return this.IsLocked&&this.LockPaint?this.LockPaint.LockRect:null}}function F(){this.newMethod=T,this.newMethod(),delete this.newMethod,this.Snapshot=function(){},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}}}function E(){this.newMethod=T,this.newMethod(),delete this.newMethod,this.DataWidth=50*d(),this.DistanceWidth=10*d(),this.MinXDistance=30*d(),this.MinYDistance=10*d(),this.CoordinateType=0,this.IsShowYText=[!0,!0],this.DrawFrame=function(){if(this.XPointCount>0){let t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.DrawHorizontal(),this.DrawVertical()},this.GetYFromData=function(t,e){if(!1===e){if(1==this.CoordinateType){var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a}if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetTopTitle(),n=this.ChartBorder.Right,r=this.ChartBorder.Left,s=null,o=this.HorizontalInfo.length-1;o>=0;--o){var h=this.HorizontalInfo[o],l=this.GetYFromData(h.Value);null!=l&&Math.abs(l-s)<this.MinYDistance||(this.Canvas.strokeStyle=h.LineColor,2==h.LineType?(this.Canvas.save(),this.Canvas.setLineDash([5,5]),this.Canvas.beginPath(),this.Canvas.moveTo(t,S(l)),this.Canvas.lineTo(e,S(l)),this.Canvas.stroke(),this.Canvas.restore()):(this.Canvas.beginPath(),this.Canvas.moveTo(t,S(l)),this.Canvas.lineTo(e,S(l)),this.Canvas.stroke()),this.Canvas.textBaseline=l>=a-2?"bottom":l<=i+2?"top":"middle",null!=h.Message[0]&&r>10&&!0===this.IsShowYText[0]&&(null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="right",this.Canvas.fillText(h.Message[0],t-2,l)),null!=h.Message[1]&&n>10&&!0===this.IsShowYText[1]&&(null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(h.Message[1],e+2,l)),s=l)}},this.DrawInsideHorizontal=function(){if(!0!==this.IsHScreen&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetTopTitle(),n=this.ChartBorder.Right,r=this.ChartBorder.Left;this.ChartBorder.TitleHeight;if(r<10&&!0===this.IsShowYText[0]||n<10&&!0===this.IsShowYText[1])for(var s=d(),o=null,h=this.HorizontalInfo.length-1;h>=0;--h){var l=this.HorizontalInfo[h],u=this.GetYFromData(l.Value);if(!(null!=u&&null!=o&&Math.abs(u-o)<this.MinYDistance)){if(null!=l.Message[0]&&r<10&&!0===this.IsShowYText[0]){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=u>=a-2?"bottom":u<=i+2?"top":"middle";var c={X:t,Y:u,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:l.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(c)||this.Canvas.fillText(l.Message[0],t+1*s,u)}if(null!=l.Message[1]&&n<10&&!0===this.IsShowYText[1]){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=u>=a-2?"bottom":u<=i+2?"top":"middle";c={X:e-this.Canvas.measureText(l.Message[1]).width,Y:u,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:l.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(c)||this.Canvas.fillText(l.Message[1],e-1*s,u)}o=u}}}},this.GetXFromIndex=function(t){var e=this.XPointCount;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.DrawVertical=function(){var t=this.ChartBorder.GetTopTitle(),e=this.ChartBorder.GetBottom(),a=this.ChartBorder.GetRight(),i=d(),n=null,r=null;for(var s in this.VerticalInfo){var o=this.GetXFromIndex(this.VerticalInfo[s].Value);if(o>a)break;if(!(null!=n&&Math.abs(o-n)<this.MinXDistance)){if(this.VerticalInfo[s].LineType>0&&(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(S(o),t),this.Canvas.lineTo(S(o),e),this.Canvas.stroke()),null!=this.VerticalInfo[s].Message[0]){null!=this.VerticalInfo[s].Font&&(this.Canvas.font=this.VerticalInfo[s].Font);var h=0;this.Canvas.fillStyle=this.VerticalInfo[s].TextColor;var l=this.Canvas.measureText(this.VerticalInfo[s].Message[0]).width;o<l/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",h=o):o+l/2>=this.ChartBorder.GetChartWidth()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",h=o-l):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",h=o-l/2),(null==r||h>r)&&(this.Canvas.fillText(this.VerticalInfo[s].Message[0],o,e+1*i),r=h+l)}n=o}}},this.GetYData=function(t){return 1==this.CoordinateType?t<this.ChartBorder.GetTopEx()?this.HorizontalMin:t>this.ChartBorder.GetBottomEx()?this.HorizontalMax:(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMax:t>this.ChartBorder.GetBottomEx()?this.HorizontalMin:(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())}}function L(){this.newMethod=E,this.newMethod(),delete this.newMethod,this.MinuteCount=243,this.IsBeforeData=!1,this.BeforeBGColor=fe.Minute.BeforeBGColor,this.DrawFrame=function(){this.SplitXYCoordinate(),this.IsBeforeData&&this.DrawBeforeDataBG(),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()},this.DrawBeforeDataBG=function(){var t=S(this.ChartBorder.GetLeft()),e=S(this.ChartBorder.GetTopEx()),a=this.GetXFromIndex(14)-t,i=S(this.ChartBorder.GetBottom())-e;this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(t,e,a,i)},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.GetXFromIndex=function(t){var e=this.XPointCount-1;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.GetXData=function(t){var e=this.XPointCount-1;return e<0&&(e=0),t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?e:(t-this.ChartBorder.GetLeft())*(1*e/this.ChartBorder.GetWidth())}}function x(){this.newMethod=L,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=S(this.ChartBorder.GetRightEx()),e=S(this.ChartBorder.GetTop()),a=S(this.ChartBorder.GetBottom()),i=this.ChartBorder.TitleHeight,n=a-e;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(t,e,i,n)}},this.DrawBeforeDataBG=function(){var t=S(this.ChartBorder.GetLeft()),e=S(this.ChartBorder.GetRightEx()),a=S(this.ChartBorder.GetTop()),i=e-t,n=this.GetXFromIndex(14)-a;this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(t,a,i,n)},this.GetYData=function(t){return t<this.ChartBorder.GetLeft()?this.HorizontalMin:t>this.ChartBorder.GetRightEx()?this.HorizontalMax:(t-this.ChartBorder.GetLeft())/this.ChartBorder.GetWidthEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetTop()?0:t>=this.ChartBorder.GetBottom()?this.XPointCount:(t-this.ChartBorder.GetTop())*(1*this.XPointCount/this.ChartBorder.GetHeight())},this.GetXFromIndex=function(t){var e=this.XPointCount-1;return 1==e?0==t?this.ChartBorder.GetTop():this.ChartBorder.GetBottom():e<=0?this.ChartBorder.GetTop():t>=e?this.ChartBorder.GetBottom():this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*t/e},this.GetYFromData=function(t){if(t<=this.HorizontalMin)return this.ChartBorder.GetLeft();if(t>=this.HorizontalMax)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetLeft()+e},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),n=this.ChartBorder.Top,r=this.ChartBorder.Bottom,s=null,o=this.HorizontalInfo.length-1;o>=0;--o){var h=this.HorizontalInfo[o],l=this.GetYFromData(h.Value);if(!(null!=l&&Math.abs(l-s)<this.MinYDistance)){if(this.Canvas.strokeStyle=h.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(S(l),t),this.Canvas.lineTo(S(l),e),this.Canvas.stroke(),l>=i-2)this.Canvas.textBaseline="top",l=i;else if(l<=a+2){if(this.Canvas.textBaseline="bottom",null!=(l=a)&&Math.abs(l-s)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(null!=h.Message[0]&&n>10){null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="right";var u=l,c=t;this.Canvas.save(),this.Canvas.translate(u,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Message[0],-2,0),this.Canvas.restore()}if(null!=h.Message[1]&&r>10){null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="left";u=l,c=e;this.Canvas.save(),this.Canvas.translate(u,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Message[1],2,0),this.Canvas.restore()}s=l}}},this.DrawVertical=function(){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightEx(),a=this.ChartBorder.GetBottom(),i=null;for(var n in this.VerticalInfo){var r=this.GetXFromIndex(this.VerticalInfo[n].Value);if(r>a)break;if(!(null!=i&&Math.abs(r-i)<this.MinXDistance)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,S(r)),this.Canvas.lineTo(e,S(r)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor;var s=this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width;r<s/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):r+s/2>=this.ChartBorder.GetChartHeight()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var o=t,h=r;this.Canvas.save(),this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}i=r}}}}function N(){this.newMethod=E,this.newMethod(),delete this.newMethod,this.ToolbarID=m(),this.ModifyIndex=!0,this.ChangeIndex=!0,this.CloseIndex=!0,this.OverlayIndex=!1,this.ModifyIndexEvent,this.ChangeIndexEvent,this.LastCalculateStatus={Width:0,XPointCount:0},this.CustomHorizontalInfo=[],this.DrawToolbar=function(){if(this.ChartBorder.UIElement){var t=document.getElementById(this.ToolbarID);if(t||((t=document.createElement("div")).className="klineframe-toolbar",t.id=this.ToolbarID,t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),this.ModifyIndex||this.ChangeIndex||this.OverlayIndex){var e=d(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),n=a-this.ChartBorder.Right/e-100,s=this.ChartBorder.GetTop()/e,o="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title=''></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title=''></span><span class='index_overlay icon iconfont icon-overlay_index' id='overlayindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title=''></span>";if(0!==this.Identify&&this.CloseIndex){o+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title=''></span>"}t.style.left=n+"px",t.style.top=s+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=o;this.ChartBorder.UIElement.JSChartContainer,this.Identify;this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&r()("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):r()("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&r()("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):r()("#"+t.id+" .index_change").hide(),this.OverlayIndex?r()("#"+t.id+" .index_overlay").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!0},this.ChangeIndexEvent):r()("#"+t.id+" .index_overlay").hide(),r()("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),t.style.display="block"}else t.style.display="none"}},this.ClearToolbar=function(){var t=document.getElementById(this.ToolbarID);t&&this.ChartBorder.UIElement.parentNode.removeChild(t)},this.DrawFrame=function(){this.SplitXYCoordinate(),1==this.SizeChange&&this.CalculateDataWidth(),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical(),1==this.SizeChange&&this.DrawToolbar()},this.GetXFromIndex=function(t,e){if(!1===e)if(t>=0)for(var a=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;else{a=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2;var n=Math.abs(t);for(i=0;i<n;++i)a-=this.DistanceWidth+this.DataWidth}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(a=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth}return a},this.GetXData=function(t){if(t<=this.ChartBorder.GetLeft())return 0;if(t>=this.ChartBorder.GetRight())return this.XPointCount;for(var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.DistanceWidth,n=this.DataWidth,r=0,s=e+n+i;s<a&&r<1e4&&!(s>t);)s+=n+i,++r;return r},this.CalculateDataWidth=function(){if(!(this.XPointCount<2)){var t=this.ChartBorder.GetWidth()-4;if(!(this.ZoomIndex>0&&this.LastCalculateStatus.Width==t&&this.LastCalculateStatus.XPointCount==this.XPointCount&&(this.DataWidth+this.DistanceWidth)*this.XPointCount<=t)){this.LastCalculateStatus.Width=t,this.LastCalculateStatus.XPointCount=this.XPointCount;for(var e=0;e<q.length;++e)if((q[e][0]+q[e][1])*this.XPointCount<t)return this.ZoomIndex=e,this.DataWidth=q[e][0],this.DistanceWidth=q[e][1],this.TrimKLineDataWidth(t),void console.log("[KLineFrame::CalculateDataWidth] ZOOM_SEED, DataWidth, DistanceWidth, XPointCount",q[this.ZoomIndex],this.DataWidth,this.DistanceWidth,this.XPointCount);this.ZoomIndex=q.length-1,this.DataWidth=t/this.XPointCount,this.DistanceWidth=0}}},this.TrimKLineDataWidth=function(t){var e=q[this.ZoomIndex][0],a=q[this.ZoomIndex][1];if(1!=e||0!=a)for(;;){if((this.DistanceWidth+this.DataWidth)*this.XPointCount+this.DistanceWidth>t){this.DistanceWidth-=.01;break}this.DistanceWidth+=.01}else this.DataWidth=t/this.XPointCount},this.IsOverlayMaxMin=function(t){if(!this.ChartKLine)return!1;if(!this.ChartKLine.Max||!this.ChartKLine.Min)return!1;var e=this.Canvas.measureText(t.Text.Value).width+4;"right"===t.Text.TextAlign&&(t.X-=e);var a=this.ChartKLine.Max,i=this.ChartKLine.Min,n=!1,r=!1;if(a.X>=t.X&&a.X<=t.X+e){var s=a.Y+20,o=a.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(n=!0)}if(1==n)return!0;if(i.X>=t.X&&i.X<=t.X+e){s=i.Y+20,o=i.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(r=!0)}return n||r},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.CalculateCount=function(t){var e=this.ChartBorder.GetWidth()-4;return parseInt(e/(q[t][0]+q[t][1]))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.DataOffset+this.XPointCount-1,a=this.Data.DataOffset+t.Index;e>this.Data.Data.length&&(e=this.Data.Data.length-1),--this.ZoomIndex;var i=this.CalculateCount(this.ZoomIndex);return this.XPointCount=i,this.DataWidth=q[this.ZoomIndex][0],this.DistanceWidth=q[this.ZoomIndex][1],this.TrimKLineDataWidth(this.ChartBorder.GetWidth()),this.LastCalculateStatus.XPointCount=this.XPointCount,e>=this.Data.Data.length?(this.Data.DataOffset=this.Data.Data.length-this.XPointCount-2,t.Index=this.Data.Data.length-this.Data.DataOffset-1):e<this.XPointCount?(this.Data.DataOffset=0,t.Index=a):(this.Data.DataOffset=e-this.XPointCount+1,t.Index=a-this.Data.DataOffset),!0},this.ZoomDown=function(t){if(this.ZoomIndex+1>=q.length)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.DataOffset+this.XPointCount-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);var a=this.CalculateCount(this.ZoomIndex+1),i=this.Data.DataOffset+t.Index;return++this.ZoomIndex,this.XPointCount=a,this.DataWidth=q[this.ZoomIndex][0],this.DistanceWidth=q[this.ZoomIndex][1],this.TrimKLineDataWidth(this.ChartBorder.GetWidth()),this.LastCalculateStatus.XPointCount=this.XPointCount,this.Data.DataOffset=e-a+1<0?0:e-this.XPointCount+1,t.Index=i-this.Data.DataOffset,!0},this.DrawCustomHorizontal=function(){for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:this.DrawLatestPrice(e)}}},this.DrawLatestPrice=function(t){if(!0!==this.IsHScreen&&(t.Message[1]||t.Message[0])&&!(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)){var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=(this.ChartBorder.GetBottom(),this.ChartBorder.GetTopTitle(),this.ChartBorder.Right),n=this.ChartBorder.Left,r=(this.ChartBorder.TitleHeight,d()),s=18*r,o=this.GetYFromData(t.Value);if(t.Message[0])if(n<10){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var h=this.Canvas.measureText(t.Message[0]).width+2*r,l=t.LineColor;(f=this.RGBToStruct(t.LineColor))&&(l=`rgba(${f.R}, ${f.G}, ${f.B}, ${fe.FrameLatestPrice.BGAlpha})`),this.Canvas.fillStyle=l;var u=o-s/2-1*r,c=e+1*r;this.Canvas.fillRect(c,u,h,s),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Message[0],c+1*r,o),this.DrawDotLine(c+h,a,o,t.LineColor)}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";h=this.Canvas.measureText(t.Message[0]).width+2*r;this.Canvas.fillStyle=t.LineColor;u=o-s/2-1*r;this.Canvas.fillRect(e-h,u,h,s),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Message[0],e-1*r,o),this.DrawDotLine(e,a,o,t.LineColor)}else if(t.Message[1])if(i<10){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var f;h=this.Canvas.measureText(t.Message[1]).width+2*r,l=t.LineColor;(f=this.RGBToStruct(t.LineColor))&&(l=`rgba(${f.R}, ${f.G}, ${f.B}, ${fe.FrameLatestPrice.BGAlpha})`),this.Canvas.fillStyle=l;u=o-s/2-1*r,c=a-h;this.Canvas.fillRect(c,u,h,s),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Message[1],c+1*r,o),this.DrawDotLine(e,c,o,t.LineColor)}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";h=this.Canvas.measureText(t.Message[1]).width+2*r;this.Canvas.fillStyle=t.LineColor;u=o-s/2-1*r;this.Canvas.fillRect(a,u,h,s),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Message[1],a+1*r,o),this.DrawDotLine(e,a,o,t.LineColor)}}},this.DrawDotLine=function(t,e,a,i){var n=d();this.Canvas.save(),this.Canvas.strokeStyle=i,this.Canvas.setLineDash([5*n,5*n]),this.Canvas.beginPath(),this.Canvas.moveTo(t,S(a)),this.Canvas.lineTo(e,S(a)),this.Canvas.stroke(),this.Canvas.restore()},this.RGBToStruct=function(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a={};return 3!=e.length?null:(a.R=Number(e[0]),a.G=Number(e[1]),a.B=Number(e[2]),a)}return null}}function O(){this.newMethod=N,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=S(this.ChartBorder.GetRightTitle()),e=S(this.ChartBorder.GetTop()),a=S(this.ChartBorder.GetBottom()),i=this.ChartBorder.TitleHeight,n=a-e;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(t,e,i,n)}},this.DrawToolbar=function(){},this.GetYFromData=function(t){if(t<=this.HorizontalMin)return this.ChartBorder.GetLeftEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetLeftEx()+e},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=this.ChartBorder.Top,i=this.ChartBorder.Bottom,n=null,r=d(),s=this.HorizontalInfo.length-1;s>=0;--s){var o=this.HorizontalInfo[s],h=this.GetYFromData(o.Value);if(!(null!=h&&Math.abs(h-n)<15)){if(this.Canvas.strokeStyle=o.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(S(h),t),this.Canvas.lineTo(S(h),e),this.Canvas.stroke(),null!=o.Message[0]&&a>10*r){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var l=h,u=t;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[0],-2,0),this.Canvas.restore()}if(null!=o.Message[1]&&i>10*r){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";l=h,u=e;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[1],2,0),this.Canvas.restore()}n=h}}},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetTop()+2+this.DistanceWidth/2+this.DataWidth/2,a=1;a<=t;++a)e+=this.DistanceWidth+this.DataWidth;return e},this.DrawVertical=function(){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightTitle(),a=this.ChartBorder.GetBottom(),i=null;for(var n in this.VerticalInfo){var r=this.GetXFromIndex(this.VerticalInfo[n].Value);if(r>=a)break;if(!(null!=i&&Math.abs(r-i)<80)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,S(r)),this.Canvas.lineTo(e,S(r)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor,r<this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var s=t,o=r;this.Canvas.save(),this.Canvas.translate(s,o),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}i=r}}},this.GetYData=function(t){return t<this.ChartBorder.GetLeftEx()?this.HorizontalMin:t>this.ChartBorder.GetRightEx()?this.HorizontalMax:(t-this.ChartBorder.GetLeftEx())/this.ChartBorder.GetWidthEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetTop()?0:t>=this.ChartBorder.GetBottom()?this.XPointCount:(t-this.ChartBorder.GetTop())*(1*this.XPointCount/this.ChartBorder.GetHeight())},this.CalculateDataWidth=function(){if(!(this.XPointCount<2))for(var t=this.ChartBorder.GetHeight()-4,e=0;e<q.length;++e)if((q[e][0]+q[e][1])*this.XPointCount<t){if(this.ZoomIndex=e,this.DataWidth=q[e][0],this.DistanceWidth=q[e][1],0==e)break;return void this.TrimKLineDataWidth(t)}},this.CalculateCount=function(t){var e=this.ChartBorder.GetHeight();return parseInt(e/(q[t][0]+q[t][1]))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.DataOffset+this.XPointCount-1,a=this.Data.DataOffset+t.Index;e>this.Data.Data.length&&(e=this.Data.Data.length-1),--this.ZoomIndex;var i=this.CalculateCount(this.ZoomIndex);return this.XPointCount=i,this.DataWidth=q[this.ZoomIndex][0],this.DistanceWidth=q[this.ZoomIndex][1],this.TrimKLineDataWidth(this.ChartBorder.GetHeight()),e>=this.Data.Data.length?(this.Data.DataOffset=this.Data.Data.length-this.XPointCount-2,t.Index=this.Data.Data.length-this.Data.DataOffset-1):e<this.XPointCount?(this.Data.DataOffset=0,t.Index=a):(this.Data.DataOffset=e-this.XPointCount+1,t.Index=a-this.Data.DataOffset),!0},this.ZoomDown=function(t){if(this.ZoomIndex+1>=q.length)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.DataOffset+this.XPointCount-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);var a=this.CalculateCount(this.ZoomIndex+1),i=this.Data.DataOffset+t.Index;return++this.ZoomIndex,this.XPointCount=a,this.DataWidth=q[this.ZoomIndex][0],this.DistanceWidth=q[this.ZoomIndex][1],this.TrimKLineDataWidth(this.ChartBorder.GetHeight()),this.Data.DataOffset=e-a+1<0?0:e-this.XPointCount+1,t.Index=i-this.Data.DataOffset,!0}}function M(){this.Frame,this.Height,this.OverlayIndex=[],this.Interval=60}function w(){this.SubFrame=new Array,this.SizeChange=!0,this.ChartBorder,this.Canvas,this.ScreenImageData,this.Data,this.Position,this.SizeChange=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=0;for(var i in this.SubFrame){a+=(n=this.SubFrame[i]).Height}for(var i in this.SubFrame){var n;(n=this.SubFrame[i]).Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right;var r=e*(n.Height/a)+t;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-r,t=r}}},this.CalculateChartBorder2=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Top,e=this.ChartBorder.Bottom,a=this.ChartBorder.GetHeight(),i=0;for(var n in this.SubFrame){i+=(s=this.SubFrame[n]).Height}var r=0;for(var n in this.SubFrame){var s;(s=this.SubFrame[n]).Frame.ChartBorder.Top=t,s.Frame.ChartBorder.Left=this.ChartBorder.Left,s.Frame.ChartBorder.Right=this.ChartBorder.Right,s.Frame.ChartBorder.X=this.ChartBorder.X,s.Frame.ChartBorder.Y=this.ChartBorder.Y,s.Frame.ChartBorder.Width=this.ChartBorder.Width,s.Frame.ChartBorder.Height=this.ChartBorder.Height;var o=a*(s.Height/i);r+=o,e=this.ChartBorder.Bottom+(a-r),s.Frame.ChartBorder.Bottom=e,t+=o}}},this.Draw=function(){for(var t in!0===this.SizeChange&&this.CalculateChartBorder(),this.SubFrame){var e=this.SubFrame[t];e.Frame.Draw();var a=e.Interval;for(var i in e.OverlayIndex){var n=e.OverlayIndex[i];n.Frame.DataWidth=e.Frame.DataWidth,n.Frame.DistanceWidth=e.Frame.DistanceWidth,n.Frame.XPointCount=e.Frame.XPointCount,n.ChartPaint.length>0&&n.Frame.IsShow&&(n.Frame.RightOffset=a,n.Frame.Draw(),a+=e.Interval)}}this.SizeChange=!1},this.DrawOveraly=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];for(var a in e.OverlayIndex){var i=e.OverlayIndex[a];for(var n in i.ChartPaint)i.ChartPaint[n].IsShow&&i.ChartPaint[n].Draw()}}},this.DrawLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.DrawLock()}},this.CalculateLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.CalculateLock()}},this.DrawInsideHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawInsideHorizontal&&e.Frame.DrawInsideHorizontal()}},this.DrawCustomHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawCustomHorizontal&&e.Frame.DrawCustomHorizontal()}},this.SetSizeChage=function(t){for(var e in this.SizeChange=t,this.SubFrame){var a=this.SubFrame[e];for(var i in a.Frame.SizeChange=t,a.OverlayIndex){var n=a.OverlayIndex[i];n.Frame&&(n.Frame.SizeChange=t)}}this.ChartBorder.UIElement&&(this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight})},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.GetXData=function(t){return this.SubFrame[0].Frame.GetXData(t)},this.GetYData=function(t,e){var a;for(var i in this.SubFrame){var n=this.SubFrame[i],r=n.Frame.ChartBorder.GetLeft(),s=n.Frame.ChartBorder.GetTopEx(),o=n.Frame.ChartBorder.GetWidth(),h=n.Frame.ChartBorder.GetHeightEx();if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(r,s,o,h),n.Frame.Canvas.isPointInPath(r,t)){a=n.Frame,e&&(e.FrameID=parseInt(i));break}}if(null!=a)return a.GetYData(t)},this.PtInFrame=function(t,e){for(var a in this.SubFrame){var i=this.SubFrame[a],n=i.Frame.ChartBorder.GetLeft(),r=i.Frame.ChartBorder.GetTop(),s=i.Frame.ChartBorder.GetWidth(),o=i.Frame.ChartBorder.GetHeight();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(n,r,s,o),i.Frame.Canvas.isPointInPath(t,e))return parseInt(a)}return-1},this.GetXFromIndex=function(t){return this.SubFrame[0].Frame.GetXFromIndex(t)},this.GetYFromData=function(t){return this.SubFrame[0].Frame.GetYFromData(t)},this.ZoomUp=function(t){for(var e=this.SubFrame[0].Frame.ZoomUp(t),a=this.SubFrame[0].Frame,i=0;i<this.SubFrame.length;++i){var n=this.SubFrame[i];for(var r in i>0&&(n.Frame.XPointCount=a.XPointCount,n.Frame.ZoomIndex=a.ZoomIndex,n.Frame.DataWidth=a.DataWidth,n.Frame.DistanceWidth=a.DistanceWidth,n.Frame.LastCalculateStatus.Width=a.LastCalculateStatus.Width,n.Frame.LastCalculateStatus.XPointCount=a.LastCalculateStatus.XPointCount),n.OverlayIndex){var s=this.SubFrame[i].OverlayIndex[r];s.Frame.XPointCount=a.XPointCount,s.Frame.ZoomIndex=a.ZoomIndex,s.Frame.DataWidth=a.DataWidth,s.Frame.DistanceWidth=a.DistanceWidth,s.Frame.LastCalculateStatus.Width=a.LastCalculateStatus.Width,s.Frame.LastCalculateStatus.XPointCount=a.LastCalculateStatus.XPointCount}}return e},this.ZoomDown=function(t){for(var e=this.SubFrame[0].Frame.ZoomDown(t),a=this.SubFrame[0].Frame,i=0;i<this.SubFrame.length;++i){var n=this.SubFrame[i];for(var r in i>0&&(n.Frame.XPointCount=a.XPointCount,n.Frame.ZoomIndex=a.ZoomIndex,n.Frame.DataWidth=a.DataWidth,n.Frame.DistanceWidth=a.DistanceWidth,n.Frame.LastCalculateStatus.Width=a.LastCalculateStatus.Width,n.Frame.LastCalculateStatus.XPointCount=a.LastCalculateStatus.XPointCount),n.OverlayIndex){var s=this.SubFrame[i].OverlayIndex[r];s.Frame.XPointCount=a.XPointCount,s.Frame.ZoomIndex=a.ZoomIndex,s.Frame.DataWidth=a.DataWidth,s.Frame.DistanceWidth=a.DistanceWidth,s.Frame.LastCalculateStatus.Width=a.LastCalculateStatus.Width,s.Frame.LastCalculateStatus.XPointCount=a.LastCalculateStatus.XPointCount}}return e},this.ResetXYSplit=function(){for(let t in this.SubFrame)this.SubFrame[t].Frame.XYSplit=!0},this.SetLanguage=function(t){for(let a in this.SubFrame){var e=this.SubFrame[a];e&&e.Frame&&(e.Frame.YSplitOperator&&(e.Frame.YSplitOperator.LanguageID=t),e.Frame.XSplitOperator&&(e.Frame.XSplitOperator.LanguageID=t))}}}function R(){this.newMethod=w,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Right,e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetWidth(),i=0;for(var n in this.SubFrame){i+=(r=this.SubFrame[n]).Height}for(var n in this.SubFrame){var r;(r=this.SubFrame[n]).Frame.ChartBorder.Top=this.ChartBorder.Top,r.Frame.ChartBorder.Bottom=this.ChartBorder.Bottom;var s=a*(r.Height/i);r.Frame.ChartBorder.Right=t,r.Frame.ChartBorder.Left=e-s,t+=s,e-=s}}},this.GetYData=function(t,e){var a;for(var i in this.SubFrame){var n=this.SubFrame[i],r=n.Frame.ChartBorder.GetLeftEx(),s=n.Frame.ChartBorder.GetTop(),o=n.Frame.ChartBorder.GetWidthEx(),h=n.Frame.ChartBorder.GetHeight();if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(r,s,o,h),n.Frame.Canvas.isPointInPath(t,s)){a=n.Frame,e&&(e.FrameID=i);break}}if(null!=a)return a.GetYData(t)}}function P(){this.Date,this.YClose,this.Open,this.Close,this.High,this.Low,this.Vol,this.Amount,this.Time,this.FlowCapital=0,this.Stop,this.Up,this.Down,this.Unchanged}function b(){this.Close,this.Open,this.High,this.Low,this.Vol,this.Amount,this.DateTime,this.Increase,this.Risefall,this.AvPrice,this.Lead=null,this.Time,this.Date}function B(){this.Date,this.Time,this.Value}Number.prototype.toFixed=function(t){return function(t,e){var a=1;if(isNaN(t))return t;t<0&&(a=-1);var i=Math.pow(10,e),n=(Math.round(Math.abs(t)*i)/i*a).toString(),r=n.indexOf(".");for(r<0&&e>0&&(r=n.length,n+=".");n.length<=r+e;)n+="0";return n}(this,t)},P.Copy=function(t){var e=new P;return e.Date=t.Date,e.YClose=t.YClose,e.Open=t.Open,e.Close=t.Close,e.High=t.High,e.Low=t.Low,e.Vol=t.Vol,e.Amount=t.Amount,e.Time=t.Time,e.FlowCapital=t.FlowCapital,e.Stop=t.Stop,e.Up=t.Up,e.Down=t.Down,e.Unchanged=t.Unchanged,e},P.CopyTo=function(t,e){t.Date=e.Date,t.YClose=e.YClose,t.Open=e.Open,t.Close=e.Close,t.High=e.High,t.Low=e.Low,t.Vol=e.Vol,t.Amount=e.Amount,t.Time=e.Time,t.FlowCapital=e.FlowCapital,t.Stop=e.Stop,t.Up=e.Up,t.Down=e.Down,t.Unchanged=e.Unchanged},P.CopyRight=function(t,e){var a=new P;return a.Date=t.Date,a.YClose=t.YClose*e,a.Open=t.Open*e,a.Close=t.Close*e,a.High=t.High*e,a.Low=t.Low*e,a.Vol=t.Vol,a.Amount=t.Amount,a.FlowCapital=t.FlowCapital,a};var _={INVESTOR:1,ANNOUNCEMENT:2,PFORECAST:3,ANNOUNCEMENT_QUARTER_1:4,ANNOUNCEMENT_QUARTER_2:5,ANNOUNCEMENT_QUARTER_3:6,ANNOUNCEMENT_QUARTER_4:7,RESEARCH:8,BLOCKTRADING:9,TRADEDETAIL:10};function H(){this.ID,this.Date,this.Title,this.InfoType,this.ExtendData}function k(){}function V(){this.Data=new Array,this.DataOffset=0,this.Period=0,this.Right=0,this.Symbol,this.Data2=new Array,this.GetCloseMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var n=0,r=0;r<t;r++)n+=this.Data[a-r].Close;e[a]=n/t}return e},this.GetVolMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var n=0,r=0;r<t;r++)n+=this.Data[a-r].Vol;e[a]=n/t}return e},this.GetAmountMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var n=0,r=0;r<t;r++)n+=this.Data[a-r].Amount;e[a]=n/t}return e},this.GetClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Close;return t},this.GetYClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].YClose;return t},this.GetHigh=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].High;return t},this.GetLow=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Low;return t},this.GetOpen=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Open;return t},this.GetVol=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Vol;return t},this.GetAmount=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Amount;return t},this.GetLead=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Lead;return t},this.GetDate=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Date;return t},this.GetTime=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Time;return t},this.GetUp=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Up;return t},this.GetDown=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Down;return t},this.GetYear=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date/1e4);return t},this.GetMonth=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date%1e4/100);return t},this.GetMinutePeriodData=function(t){if(k.GetMinutePeriodData)return k.GetMinutePeriodData(t,this.Data,this);var e=new Array,a=5;if(5==t)a=5;else if(6==t)a=15;else if(7==t)a=30;else if(8==t)a=60;else if(11==t)a=120;else{if(12!=t)return t>U&&t<=W?(a=t-U,this.GetMinuteCustomPeriodData(a)):this.Data;a=240}for(var i=!1,n=null,r=null,s=0;s<this.Data.length;){i=!0;for(var o=0;o<a&&s<this.Data.length;++s){i&&(n=new P,e.push(n),i=!1);var h=this.Data[s];if(null!=h){if((925!=h.Time||null!=r&&924==r)&&(930!=h.Time||null!=r&&929==r)&&(1300!=h.Time||null!=r&&1259==r)&&++o,n.Date=h.Date,n.Time=h.Time,r=n.Time,null!=h.Open&&null!=h.Close&&(null==n.Open||null==n.Close?(n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital):(n.High<h.High&&(n.High=h.High),n.Low>h.Low&&(n.Low=h.Low),n.Close=h.Close,n.Vol+=h.Vol,null!=h.Amount&&(n.Amount+=h.Amount),n.FlowCapital=h.FlowCapital),s+1<this.Data.length)){var l=this.Data[s+1];if(l&&l.Date!=h.Date){++s;break}}}else++o}}return e},this.GetMinuteCustomPeriodData=function(t){for(var e=new Array,a=t,i=!1,n=null,r=0;r<this.Data.length;){i=!0;for(var s=0;s<a&&r<this.Data.length;++r,++s){i&&(n=new P,e.push(n),i=!1);var o=this.Data[r];null!=o&&(n.Date=o.Date,n.Time=o.Time,null!=o.Open&&null!=o.Close&&(null==n.Open||null==n.Close?(n.Open=o.Open,n.High=o.High,n.Low=o.Low,n.YClose=o.YClose,n.Close=o.Close,n.Vol=o.Vol,n.Amount=o.Amount,n.FlowCapital=o.FlowCapital):(n.High<o.High&&(n.High=o.High),n.Low>o.Low&&(n.Low=o.Low),n.Close=o.Close,n.Vol+=o.Vol,null!=o.Amount&&(n.Amount+=o.Amount),n.FlowCapital=o.FlowCapital)))}}return e},this.GetDayPeriodData=function(t){if(t>G&&t<=Y)return this.GetDayCustomPeriodData(t-G);var e=we.IsBIT(this.Symbol),a=new Array,i=0,n=null;for(var r in this.Data){var s=!1,o=this.Data[r];switch(t){case 1:if(e){var h=V.GetSunday(o.Date);h!=i&&(s=!0,i=h)}else{var l=V.GetFirday(o.Date);l!=i&&(s=!0,i=l)}break;case 2:parseInt(o.Date/100)!=parseInt(i/100)&&(s=!0,i=o.Date);break;case 3:parseInt(o.Date/1e4)!=parseInt(i/1e4)&&(s=!0,i=o.Date);break;case 9:var u=V.GetQuarter(o.Date);u=10*parseInt(o.Date/1e4)+u;var c=V.GetQuarter(i);u!=(c=10*parseInt(i/1e4)+c)&&(s=!0,i=o.Date)}if(s){if((n=new P).Date=o.Date,a.push(n),null==o.Open||null==o.Close)continue;n.Open=o.Open,n.High=o.High,n.Low=o.Low,n.YClose=o.YClose,n.Close=o.Close,n.Vol=o.Vol,n.Amount=o.Amount,n.FlowCapital=o.FlowCapital}else{if(null==n)continue;if(null==o.Open||null==o.Close)continue;null==n.Open||null==n.Close?(n.Open=o.Open,n.High=o.High,n.Low=o.Low,n.YClose=o.YClose,n.Close=o.Close,n.Vol=o.Vol,n.Amount=o.Amount,n.FlowCapital=o.FlowCapital):(n.High<o.High&&(n.High=o.High),n.Low>o.Low&&(n.Low=o.Low),n.Close=o.Close,n.Vol+=o.Vol,null!=o.Amount&&(n.Amount+=o.Amount),n.FlowCapital=o.FlowCapital,n.Date=o.Date)}}return a},this.GetDayCustomPeriodData=function(t){for(var e=[],a=t,i=!1,n=null,r=0;r<this.Data.length;){i=!0;for(var s=0;s<a&&r<this.Data.length;++r,++s){i&&(n=new P,e.push(n),i=!1);var o=this.Data[r];null!=o&&(n.Date=o.Date,null!=o.Open&&null!=o.Close&&(null==n.Open||null==n.Close?(n.Open=o.Open,n.High=o.High,n.Low=o.Low,n.YClose=o.YClose,n.Close=o.Close,n.Vol=o.Vol,n.Amount=o.Amount,n.FlowCapital=o.FlowCapital):(n.High<o.High&&(n.High=o.High),n.Low>o.Low&&(n.Low=o.Low),n.Close=o.Close,n.Vol+=o.Vol,null!=o.Amount&&(n.Amount+=o.Amount),n.FlowCapital=o.FlowCapital)))}}return e},this.GetPeriodData=function(t){if(we.IsBIT(this.Symbol)&&(5==t||6==t||7==t||8==t||t>U&&t<=W)){var e=5;return 5==t?e=5:6==t?e=15:7==t?e=30:8==t?e=60:11==t?e=120:12==t?e=240:t>U&&t<=W&&(e=t-U),this.GetMinuteCustomPeriodData(e)}return 1==t||2==t||3==t||9==t||t>G&&t<=Y?this.GetDayPeriodData(t):5==t||6==t||7==t||8==t||11==t||12==t||t>U&&t<=W?this.GetMinutePeriodData(t):void 0},this.GetRightDate=function(t){var e=[];if(this.Data.length<=0)return e;if(1==t){var a=this.Data.length-1,i=1,n=this.Data[a].YClose;for(e[a]=P.Copy(this.Data[a]),--a;a>=0&&n==this.Data[a].Close;--a)e[a]=P.Copy(this.Data[a]),n=this.Data[a].YClose;for(;a>=0;--a)n!=this.Data[a].Close&&(i*=n/this.Data[a].Close),e[a]=P.CopyRight(this.Data[a],i),n=this.Data[a].YClose}else if(2==t){a=0,i=1;var r=this.Data[a].Close;for(e[a]=P.Copy(this.Data[a]),++a;a<this.Data.length&&r==this.Data[a].YClose;++a)e[a]=P.Copy(this.Data[a]),r=this.Data[a].Close;for(;a<this.Data.length;++a)r!=this.Data[a].YClose&&(i*=r/this.Data[a].YClose),e[a]=P.CopyRight(this.Data[a],i),r=this.Data[a].Close}return e},this.GetOverlayData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date;if(i>=t.length)e[a]=new P,e[a].Date=n,++a;else{var r=t[i].Date;r==n?(e[a]=new P,e[a].Date=t[i].Date,e[a].YClose=t[i].YClose,e[a].Open=t[i].Open,e[a].High=t[i].High,e[a].Low=t[i].Low,e[a].Close=t[i].Close,e[a].Vol=t[i].Vol,e[a].Amount=t[i].Amount,e[a].Stop=t[i].Stop,e[a].Up=t[i].Up,e[a].Down=t[i].Down,e[a].Unchanged=t[i].Unchanged,++i,++a):r<n?++i:(e[a]=new P,e[a].Date=n,++a)}}return e},this.GetOverlayMinuteData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date,r=this.Data[a].Time;if(i>=t.length)e[a]=new P,e[a].Date=n,e[a].Time=r,++a;else{var s=t[i].Date,o=t[i].Time;s==n&&o==r?(e[a]=new P,e[a].Date=t[i].Date,e[a].Time=t[i].Time,e[a].YClose=t[i].YClose,e[a].Open=t[i].Open,e[a].High=t[i].High,e[a].Low=t[i].Low,e[a].Close=t[i].Close,e[a].Vol=t[i].Vol,e[a].Amount=t[i].Amount,e[a].Stop=t[i].Stop,e[a].Up=t[i].Up,e[a].Down=t[i].Down,e[a].Unchanged=t[i].Unchanged,++i,++a):s<n||s==n&&o<r?++i:(e[a]=new P,e[a].Date=n,e[a].Time=r,++a)}}return e},this.GetFittingData=function(t){for(var e=new Array,a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date;if(i>=t.length)e[a]=null,++a;else{var r=t[i].Date;if(r==n){var s=new B;s.Date=t[i].Date,s.Value=t[i].Value,e[a]=s,++i,++a}else r<n?++i:(e[a]=new B,e[a].Date=n,++a)}}return e},this.GetFittingData2=function(t,e){for(var a=new Array,i=0,n=0;i<this.Data.length;){var r=this.Data[i].Date;if(n>=t.length)a[i]=new B,a[i].Date=r,a[i].Value=e,++i;else{var s=t[n].Date;if(s==r){var o=new B;o.Date=t[n].Date,o.Value=t[n].Value,a[i]=o,++n,++i}else s<r?++n:(a[i]=new B,a[i].Date=r,a[i].Value=e,++i)}}return a},this.GetDateIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date;if(a>=t.length)break;var n=t[a];n.Date==i?(n.Index=e,++a):n.Date<i?++a:++e}},this.GetDateTimeIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date,n=this.Data[e].Time;if(a>=t.length)break;var r=t[a];r.Date==i&&r.Time==n?(r.Index=e,++a):r.Date<i||r.Date==i&&r.Time<n?++a:++e}},this.GetMinuteFittingData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date,r=this.Data[a].Time;if(i>=t.length){e[a]=null,++a;continue}var s=t[i].Date,o=t[i].Time;const l=t[i];if(s==n&&o==r)(h=new B).Date=l.Date,h.Time=l.Time,h.Value=l.Value,e[a]=h,++i,++a;else if(s<n||s==n&&o<r)++i;else{var h;(h=new B).Date=n,h.Time=r,e[a]=h,++a}}return e},this.GetFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date;if(i+1<t.length&&t[i].Date<n&&t[i+1].Date<=n)++i;else{var r=new B;r.Date=n,i<t.length?(r.Value=t[i].Value,r.FinanceDate=t[i].Date):(r.Value=null,r.FinanceDate=null),e[a]=r,++a}}return e},this.GetMinuteFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date,r=this.Data[a].Time;if(i+1<t.length&&t[i].Date<n&&t[i+1].Date<=n)++i;else{var s=new B;s.Date=n,s.Time=r,i<t.length?(s.Value=t[i].Value,s.FinanceDate=t[i].Date):(s.Value=null,s.FinanceDate=null),e[a]=s,++a}}return e},this.GetFittingMarketValueData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var n=this.Data[a].Date,r=this.Data[a].Close;if(i+1<t.length&&t[i].Date<n&&t[i+1].Date<=n)++i;else{var s=new B;s.Date=n,s.Value=t[i].Value*r,s.FinanceDate=t[i].Date,e[a]=s,++a}}return e},this.GetFittingMonthData=function(t){for(var e=new Array,a=null,i=0,n=0;i<this.Data.length;){var r=this.Data[i].Date;if(n>=t.length)e[i]=null,++i;else{var s=t[n].Date;if(s==r)(o=new B).Date=t[n].Date,o.Value=t[n].Value,o.Text=t[n].Text,e[i]=o,++n,++i;else if(null!=a&&a<s&&r>s){var o;(o=new B).Date=r,o.OverlayDate=t[n].Date,o.Value=t[n].Value,o.Text=t[n].Text,e[i]=o,++n,++i}else s<r?++n:(e[i]=new B,e[i].Date=r,++i);a=r}}return e},this.GetValue=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&null!=this.Data[e].Value){var a=this.Data[e].Value;isNaN(a)?a instanceof Array?t[e]=a:t[e]=null:t[e]=a}else t[e]=null;return t},this.GetObject=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&this.Data[e].Value){var a=this.Data[e].Value;t[e]=a}else t[e]=null;return t},this.GetPeriodSingleData=function(t){var e=new Array,a=0,i=null;for(var n in this.Data){var r=!1,s=this.Data[n];if(null!=s&&null!=s.Date){switch(t){case 1:var o=V.GetFirday(s.Date);o!=a&&(r=!0,a=o);break;case 2:parseInt(s.Date/100)!=parseInt(a/100)&&(r=!0,a=s.Date);break;case 3:parseInt(s.Date/1e4)!=parseInt(a/1e4)&&(r=!0,a=s.Date);break;case 9:var h=V.GetQuarter(s.Date);h=10*parseInt(s.Date/1e4)+h;var l=V.GetQuarter(a);h!=(l=10*parseInt(a/1e4)+l)&&(r=!0,a=s.Date)}if(r)(i=new B).Date=s.Date,i.Value=s.Value,e.push(i);else{if(null==i)continue;if(null==s.Value||isNaN(s.Value))continue;(null==i.Value||isNaN(i.Value))&&(i.Value=s.Value)}}}return e},this.GetMinuteAvPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].AvPrice;return t},this.MergeMinuteData=function(t){for(var e=t[0],a=null,i=this.Data.length-1;i>=0;--i){var n=this.Data[i].Date,r=this.Data[i].Time;if(e.Date>=n&&e.Time>=r){a=i;break}}if(null==a)return!1;var s=a;for(i=0;i<t.length;){var o=t[i];if(s>=this.Data.length-1){s-1>0&&!o.YClose&&(o.YClose=this.Data[s-1].YClose);var h=P.Copy(o);this.Data[s]=h,++s,++i}else{var l=this.Data[s];l.Date==o.Date&&l.Time==o.Time?(P.CopyTo(l,o),++s,++i):++s}}return!0}}k.GetMinutePeriodData=null,V.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();a<5?i+=864e5*(5-a):i-=864e5*(a-5);e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},V.GetSunday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(0==a)return t;var i=e.getTime();a>0&&(i+=864e5*(7-a));e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},V.GetQuarter=function(t){var e=parseInt(t%1e4/100);return 1==e||2==e||3==e?1:4==e||5==e||6==e?2:7==e||8==e||9==e?3:10==e||11==e||12==e?4:0};var G=4e4,Y=5e4;V.IsDayPeriod=function(t,e){return 1==t||2==t||3==t||9==t||(t>G&&t<=Y||0==t&&1==e)};var U=2e4,W=3e4;function X(){this.ChartPaint,this.Data,this.Type=0}function J(t,e,a,i){this.X=t,this.Y=e,this.Width=a,this.Height=i}function K(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="IChartPainting",this.Data=new V,this.NotSupportMessage=null,this.MessageFont=fe.Index.NotSupport.Font,this.MessageColor=fe.Index.NotSupport.TextColor,this.IsDrawFirst=!1,this.IsShow=!0,this.Draw=function(){},this.DrawNotSupportmessage=function(){this.Canvas.font=this.MessageFont,this.Canvas.fillStyle=this.MessageColor;var t=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()/2,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,t,e)},this.GetTooltipData=function(t,e,a){return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];null==n||isNaN(n)||(null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=n),e.Max<n&&(e.Max=n),e.Min>n&&(e.Min=n))}return e},this.GetDynamicFont=function(t){var e=d();return t<5?4*e+"px Arial":t<7?6*e+"px Arial":t<9?8*e+"px Arial":t<11?10*e+"px Arial":t<13?12*e+"px Arial":t<15?14*e+"px Arial":16*e+"px Arial"},this.GetLockRect=function(){return this.ChartFrame.GetLockRect()}}V.IsMinutePeriod=function(t,e){return 5==t||6==t||7==t||8==t||11==t||12==t||(t>U&&t<=W||4==t&&1==e)},V.IsTickPeriod=function(t){return 10==t};var q=[[48,10],[44,10],[40,9],[36,9],[32,8],[28,8],[24,7],[20,7],[18,6],[16,6],[14,5],[12,5],[8,4],[3,3],[3,1],[2,1],[1,1],[1,0]];function z(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartKLine",this.Symbol,this.DrawType=0,this.CloseLineColor=fe.CloseLineColor,this.CloseLineAreaColor=fe.CloseLineAreaColor,this.UpColor=fe.UpBarColor,this.DownColor=fe.DownBarColor,this.UnchagneColor=fe.UnchagneBarColor,this.ColorData,this.TradeData,this.TradeIcon=fe.KLine.TradeIcon,this.TooltipRect=new Array,this.InfoTooltipRect=[],this.IsShowMaxMinPrice=!0,this.IsShowKTooltip=!0,this.TextFont=fe.KLine.MaxMin.Font,this.TextColor=fe.KLine.MaxMin.Color,this.InfoData,this.InfoPosition=0,this.PtMax,this.PtMin,this.TickSymbol="",this.TickFontName="arial",this.Period,this.DrawAKLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var n=this.ChartBorder.GetRight();t&&(n=this.ChartBorder.GetBottom());for(var r=this.ChartFrame.XPointCount,s=(this.UpColor,this.DownColor,this.UnchagneColor,{X:null,Y:null,Value:null,Align:"left"}),o={X:null,Y:null,Value:null,Align:"left"},h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<r;++h,++l,i+=e+a){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){var c=i,f=i+e;if(f>n)break;var C=c+(f-c)/2,d=this.ChartFrame.GetYFromData(u.Low),D=this.ChartFrame.GetYFromData(u.High),p=this.ChartFrame.GetYFromData(u.Open),m=this.ChartFrame.GetYFromData(u.Close);if((null==s.Value||s.Value<u.High)&&(s.X=C,s.Y=D,s.Value=u.High,s.Align=l<r/2?"left":"right"),(null==o.Value||o.Value>u.Low)&&(o.X=C,o.Y=d,o.Value=u.Low,o.Align=l<r/2?"left":"right"),u.Open<u.Close?this.Canvas.strokeStyle=this.UpColor:u.Open>u.Close?this.Canvas.strokeStyle=this.DownColor:this.Canvas.strokeStyle=this.UnchagneColor,this.ColorData&&(h<this.ColorData.length&&this.ColorData[h]>0?this.UpColor:this.DownColor),this.Canvas.beginPath(),t?(this.Canvas.moveTo(D,S(C)),this.Canvas.lineTo(d,S(C))):(this.Canvas.moveTo(S(C),D),this.Canvas.lineTo(S(C),d)),this.Canvas.stroke(),e>=4&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(p),c),this.Canvas.lineTo(S(p),C)):(this.Canvas.moveTo(c,S(p)),this.Canvas.lineTo(C,S(p))),this.Canvas.stroke(),this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(m),f),this.Canvas.lineTo(S(m),C)):(this.Canvas.moveTo(f,S(m)),this.Canvas.lineTo(C,S(m))),this.Canvas.stroke()),0==this.Data.DataType){var v={Xleft:c,XRight:f,YMax:D,XCenter:C,YMin:d,DayData:u,Index:l};this.DrawInfo(v)}}}this.PtMax=s,this.PtMin=o},this.DrawCloseArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var n=this.ChartBorder.GetRight();t&&(n=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,s=!0,o=null;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<r;++h,++l,i+=e+a){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){var c=i+e;if(c>n)break;var f=i+(c-i)/2,C=this.ChartFrame.GetYFromData(u.Close);s?(t?(this.Canvas.moveTo(C,f),o={X:C,Y:f}):(this.Canvas.moveTo(f,C),o={X:f,Y:C}),s=!1):t?this.Canvas.lineTo(C,f):this.Canvas.lineTo(f,C)}}if(!s){if(this.Canvas.stroke(),t?(this.Canvas.lineTo(this.ChartBorder.GetLeft(),f),this.Canvas.lineTo(this.ChartBorder.GetLeft(),o.Y)):(this.Canvas.lineTo(f,this.ChartBorder.GetBottom()),this.Canvas.lineTo(o.X,this.ChartBorder.GetBottom())),this.Canvas.closePath(),Array.isArray(this.CloseLineAreaColor))if(t){let t=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());t.addColorStop(0,this.CloseLineAreaColor[0]),t.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=t}else{let t=this.Canvas.createLinearGradient(o.X,this.ChartBorder.GetTopEx(),o.X,this.ChartBorder.GetBottom());t.addColorStop(0,this.CloseLineAreaColor[0]),t.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=t}else this.Canvas.fillStyle=this.CloseLineAreaColor;this.Canvas.fill()}},this.DrawCloseLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var n=this.ChartBorder.GetRight();t&&(n=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,s=!0;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor;for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<r;++o,++h,i+=e+a){var l=this.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=i+e;if(u>n)break;var c=i+(u-i)/2,f=this.ChartFrame.GetYFromData(l.Close);s?(t?this.Canvas.moveTo(f,c):this.Canvas.moveTo(c,f),s=!1):t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f)}}0==s&&this.Canvas.stroke()},this.DrawKBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,n=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,n=this.ChartBorder.GetBottom());for(var s={X:null,Y:null,Value:null,Align:"left"},o={X:null,Y:null,Value:null,Align:"left"},h=this.UpColor,l=this.DownColor,u=this.UnchagneColor,c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<r;++c,++f,i+=e+a){var C=this.Data.Data[c];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var d=i,D=i+e;if(D>n)break;var p=d+(D-d)/2,m=this.ChartFrame.GetYFromData(C.Low),v=this.ChartFrame.GetYFromData(C.High),I=this.ChartFrame.GetYFromData(C.Open),A=this.ChartFrame.GetYFromData(C.Close),y=v;if((null==s.Value||s.Value<C.High)&&(s.X=p,s.Y=v,s.Value=C.High,s.Align=f<r/2?"left":"right"),(null==o.Value||o.Value>C.Low)&&(o.X=p,o.Y=m,o.Value=C.Low,o.Align=f<r/2?"left":"right"),this.ColorData&&(h=l=u=c<this.ColorData.length&&this.ColorData[c]>0?this.UpColor:this.DownColor),C.Open<C.Close?e>=4?(this.Canvas.strokeStyle=h,C.High>C.Close?(this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(y),S(p)),this.Canvas.lineTo(S(3==this.DrawType?Math.max(A,I):A),S(p))):(this.Canvas.moveTo(S(p),S(y)),this.Canvas.lineTo(S(p),S(3==this.DrawType?Math.min(A,I):A))),this.Canvas.stroke(),y=A):y=A,this.Canvas.fillStyle=h,t?Math.abs(I-y)<1?this.Canvas.fillRect(g(y),g(d),1,g(e)):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(S(y),S(d),g(I-y),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(y),g(d),g(I-y),g(e)):Math.abs(I-y)<1?this.Canvas.fillRect(g(d),g(y),g(e),1):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(S(d),S(y),g(e),g(I-y)),this.Canvas.stroke()):this.Canvas.fillRect(g(d),g(Math.min(y,I)),g(e),g(Math.abs(I-y))),C.Open>C.Low&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(3==this.DrawType?Math.min(A,I):y),S(p)),this.Canvas.lineTo(S(m),S(p))):(this.Canvas.moveTo(S(p),S(3==this.DrawType?Math.max(A,I):y)),this.Canvas.lineTo(S(p),S(m))),this.Canvas.stroke())):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(v,S(p)),this.Canvas.lineTo(m,S(p))):(this.Canvas.moveTo(S(p),v),this.Canvas.lineTo(S(p),m)),this.Canvas.strokeStyle=h,this.Canvas.stroke()):C.Open>C.Close?e>=4?(this.Canvas.strokeStyle=l,C.High>C.Close?(this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(y),S(p)),this.Canvas.lineTo(S(I),S(p))):(this.Canvas.moveTo(S(p),S(y)),this.Canvas.lineTo(S(p),S(I))),this.Canvas.stroke(),y=I):y=I,this.Canvas.fillStyle=l,t?Math.abs(A-y)<1?this.Canvas.fillRect(g(y),g(d),1,g(e)):this.Canvas.fillRect(g(y),g(d),g(A-y),g(e)):Math.abs(A-y)<1?this.Canvas.fillRect(g(d),g(y),g(e),1):this.Canvas.fillRect(g(d),g(Math.min(y,A)),g(e),g(Math.abs(A-y))),C.Open>C.Low&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(S(y),S(p)),this.Canvas.lineTo(S(m),S(p))):(this.Canvas.moveTo(S(p),S(y)),this.Canvas.lineTo(S(p),S(m))),this.Canvas.stroke())):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(v,S(p)),this.Canvas.lineTo(m,S(p))):(this.Canvas.moveTo(S(p),v),this.Canvas.lineTo(S(p),m)),this.Canvas.strokeStyle=l,this.Canvas.stroke()):e>=4?(this.Canvas.strokeStyle=u,this.Canvas.beginPath(),C.High>C.Close?(t?(this.Canvas.moveTo(y,S(p)),this.Canvas.lineTo(I,S(p))):(this.Canvas.moveTo(S(p),y),this.Canvas.lineTo(S(p),I)),y=I):y=I,t?(this.Canvas.moveTo(S(y),S(d)),this.Canvas.lineTo(S(y),S(D))):(this.Canvas.moveTo(S(d),S(y)),this.Canvas.lineTo(S(D),S(y))),C.Open>C.Low&&(t?(this.Canvas.moveTo(S(y),S(p)),this.Canvas.lineTo(S(m),S(p))):(this.Canvas.moveTo(S(p),S(y)),this.Canvas.lineTo(S(p),S(m)))),this.Canvas.stroke()):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(v,S(p)),this.Canvas.lineTo(m,S(p))):(this.Canvas.moveTo(S(p),v),this.Canvas.lineTo(S(p),m)),this.Canvas.strokeStyle=u,this.Canvas.stroke()),this.IsShowKTooltip&&!t){var T=Math.min(I,A),F=Math.max(I,A);Math.abs(I-A)<5&&(T=Math.min(v,T-5),F=Math.max(m,F+5));var E=new J(d,T,e,F-T);this.TooltipRect.push([c,E])}if(0==this.Data.DataType){var L={Xleft:d,XRight:D,XCenter:p,YMax:v,YMin:m,DayData:C,Index:f};this.DrawInfo(L)}}}this.PtMax=s,this.PtMin=o},this.DrawTrade=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,n=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,n=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e;h>10&&(h=10);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<r;++l,++u,i+=e+a){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=!1,C=!1;if(s&&l<s.length&&(C=s[l]>0),o&&l<o.length&&(f=o[l]>0),C||f){var d=i+e;if(d>n)break;var D=i+(d-i)/2,p=this.ChartFrame.GetYFromData(c.Low),m=this.ChartFrame.GetYFromData(c.High);this.ChartFrame.GetYFromData(c.Open),this.ChartFrame.GetYFromData(c.Close);f&&(this.Canvas.fillStyle=this.UpColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(p-1,D),this.Canvas.lineTo(p-h-1,D-h/2),this.Canvas.lineTo(p-h-1,D+h/2)):(this.Canvas.moveTo(D,p+1),this.Canvas.lineTo(D-h/2,p+h+1),this.Canvas.lineTo(D+h/2,p+h+1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()),C&&(this.Canvas.fillStyle=this.DownColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(m+1,D),this.Canvas.lineTo(m+h+1,D-h/2),this.Canvas.lineTo(m+h+1,D+h/2)):(this.Canvas.moveTo(D,m-1),this.Canvas.lineTo(D-h/2,m-h-1),this.Canvas.lineTo(D+h/2,m-h-1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke())}}}}},this.DrawTick=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var n=this.ChartBorder.GetRight();t&&(n=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,s=parseInt(e);s<=1?s=2:s>=18&&(s=18);this.Canvas.beginPath(),this.Canvas.font=s*d()+"px "+this.TickFontName;for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<r;++o,++h,i+=e+a){var l=this.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){var u=i+e;if(u>n)break;var c=i+(u-i)/2,f=this.ChartFrame.GetYFromData(l.Close);0===l.Flag?this.Canvas.fillStyle=this.UpColor:1==l.Flag?this.Canvas.fillStyle=this.DownColor:this.Canvas.fillStyle=this.UnchagneColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",t?this.Canvas.fillText(this.TickSymbol,f,c):this.Canvas.fillText(this.TickSymbol,c,f)}}},this.Draw=function(){this.TooltipRect=[],this.InfoTooltipRect=[],this.PtMax={X:null,Y:null,Value:null,Align:"left"},this.PtMin={X:null,Y:null,Value:null,Align:"left"},this.ChartFrame.ChartKLine={Max:null,Min:null},this.IsShow&&(V.IsTickPeriod(this.Period)?this.DrawTick():1!=this.DrawType?(2==this.DrawType?this.DrawAKLine():4==this.DrawType?this.DrawCloseArea():this.DrawKBar(),this.TradeIcon?this.DrawTradeIcon():this.DrawTrade(),this.IsShowMaxMinPrice&&(!0===this.ChartFrame.IsHScreen?this.HScreenDrawMaxMinPrice(this.PtMax,this.PtMin):this.DrawMaxMinPrice(this.PtMax,this.PtMin))):this.DrawCloseLine())},this.DrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=Be(this.Symbol);this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor;var i=t;t.Y>e.Y&&(i=e),this.Canvas.textAlign=i.Align,this.Canvas.textBaseline="bottom";var n=(i.Align,i.X),r=i.Value.toFixed(a);"left"==i.Align?r=""+r:r+="",this.Canvas.fillText(r,n,i.Y),this.ChartFrame.ChartKLine.Max={X:n,Y:i.Y,Text:{BaseLine:"bottom"}};var s=e;e.Y<t.Y&&(s=t),this.Canvas.textAlign=s.Align,this.Canvas.textBaseline="top";n=(s.Align,s.X),r=e.Value.toFixed(a);"left"==s.Align?r=""+r:r+="",this.Canvas.fillText(r,n,s.Y),this.ChartFrame.ChartKLine.Min={X:n,Y:s.Y,Text:{BaseLine:"top"}}}},this.HScreenDrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=Be(this.Symbol),i=t.Y,n=t.X;this.Canvas.save(),this.Canvas.translate(i,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=t.Align,this.Canvas.textBaseline="bottom";var r=t.Value.toFixed(a);"left"==t.Align?r=""+r:r+="",this.Canvas.fillText(r,0,0),this.Canvas.restore();i=e.Y,n=e.X;this.Canvas.save(),this.Canvas.translate(i,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=e.Align,this.Canvas.textBaseline="top";r=e.Value.toFixed(a);"left"==e.Align?r=""+r:r+="",this.Canvas.fillText(r,0,0),this.Canvas.restore()}},this.DrawInfo=function(t){if(this.InfoData&&!(this.InfoData.length<=0)){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetBottom(),r=this.InfoData.get(t.DayData.Date.toString());if(r&&!(r.Data.length<=0)){var s=d(),o=a+i,h=18*s,l=!0;o<=15&&(l=!1),o<h&&(o=h);var u,c="",f=new Map,C=t.YMax+1*s,D=0;for(var p in r.Data){var m=r.Data[p],v=f.get(m.InfoType);if(v)v.Data.push(m);else{var S=Fe.GetIconFont(m.InfoType);if(this.Canvas.fillStyle=S.Color,this.Canvas.font=o+"px "+S.Family,e){this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillText(S.HScreenText,C,t.XCenter,o);var g=new J(t.XCenter-o/2,C-o,o,o);A={Data:new Array(m),Rect:g,Type:m.InfoType,TextRect:{X:C,Y:t.XCenter}},f.set(m.InfoType,A),C+=o}else if(this.Canvas.textBaseline="bottom",this.Canvas.textAlign="center",1===this.InfoPosition){var I=n+D;this.Canvas.fillText(S.Text,t.XCenter,I,o);g=new J(t.XCenter-o/2,I-o,o,o);var A={Data:new Array(m),Rect:g,Type:m.InfoType,TextRect:{X:t.XCenter,Y:I}};f.set(m.InfoType,A),D-=o}else{this.Canvas.fillText(S.Text,t.XCenter,C,o);g=new J(t.XCenter-o/2,C-o,o,o),A={Data:new Array(m),Rect:g,Type:m.InfoType,TextRect:{X:t.XCenter,Y:C}};f.set(m.InfoType,A),C-=o}}}for(var t of(fe.KLine.NumIcon&&(u=e?fe.KLine.NumIcon.HScreenText:fe.KLine.NumIcon.Text),f)){var y=t[1];if(y.Data.length>=2&&u&&l){var T=y.Data.length;T>=u.length&&(T=0),this.Canvas.fillStyle=fe.KLine.NumIcon.Color;c=u[T];this.Canvas.fillText(c,y.TextRect.X,y.TextRect.Y,o)}e||this.InfoTooltipRect.push(y)}}}},this.DrawTradeIcon=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,n=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,n=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e+a,l=d(),u=24*l,c=12*l;h<c?h=c:h>u&&(h=u),this.Canvas.font=h+"px "+this.TradeIcon.Family;for(var f=this.Data.DataOffset,C=0;f<this.Data.Data.length&&C<r;++f,++C,i+=e+a){var D=this.Data.Data[f];if(null!=D.Open&&null!=D.High&&null!=D.Low&&null!=D.Close){var p=!1,m=!1;if(s&&f<s.length&&(m=s[f]>0),o&&f<o.length&&(p=o[f]>0),m||p){var v=i+e;if(v>n)break;var S=i+(v-i)/2,g=this.ChartFrame.GetYFromData(D.Low),I=this.ChartFrame.GetYFromData(D.High);this.ChartFrame.GetYFromData(D.Open),this.ChartFrame.GetYFromData(D.Close);p&&(this.Canvas.fillStyle=this.TradeIcon.Buy.Color,t?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Buy.HScreenText,g,S)):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.Canvas.fillText(this.TradeIcon.Buy.Text,S,g))),m&&(this.Canvas.fillStyle=this.TradeIcon.Sell.Color,t?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Sell.HScreenText,I,S)):(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.TradeIcon.Sell.Text,S,I)))}}}}},this.GetTooltipData=function(t,e,a){for(var i in this.InfoTooltipRect){var n=this.InfoTooltipRect[i];if(n.Rect){var r=n.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return a.Data=n,a.ChartPaint=this,a.Type=1,!0}}for(var i in this.TooltipRect){r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var s=this.TooltipRect[i][0];return a.Data=this.Data.Data[s],a.ChartPaint=this,a.Type=0,!0}}return!1},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Max:null,Min:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(null==e.Max&&(e.Max=n.High),null==e.Min&&(e.Min=n.Low),e.Max<n.High&&(e.Max=n.High),e.Min>n.Low&&(e.Min=n.Low))}return e},this.GetAllPrice=function(){for(var t=this.ChartFrame.XPointCount,e=new Set,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close){var r=n.Close;e.add(r)}}var s=[];for(var o of e)s.push(o);return s.sort(function(t,e){return t-e}),s}}var $={STATUS_NONE_ID:0,STATUS_REQUESTDATA_ID:1,STATUS_RECVDATA_ID:2,STATUS_FINISHED_ID:3};function Z(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteVolumBar",this.UpColor=fe.UpBarColor,this.DownColor=fe.DownBarColor,this.YClose,this.Draw=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=this.ChartFrame.GetYFromData(0),n=this.YClose,r=this.Data,s=r.DataOffset,o=0;s<r.Data.length&&o<a;++s,++o){var h=r.Data[s],l=null;if(h){var u=null;if(h.Before?(l=h.Before.Vol,u=h.Before.Close):(l=h.Vol,u=h.Close),l){var c=this.ChartFrame.GetYFromData(l),f=this.ChartFrame.GetXFromIndex(s);if(f>e)break;this.Canvas.strokeStyle=u>=n?this.UpColor:this.DownColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(c,S(f)),this.Canvas.lineTo(i,S(f))):(this.Canvas.moveTo(S(f),c),this.Canvas.lineTo(S(f),i)),this.Canvas.stroke(),u&&(n=u)}}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:0,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];n&&n.Vol&&(null==e.Max&&(e.Max=n.Vol),e.Max<n.Vol&&(e.Max=n.Vol))}return e}}function Q(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.Draw=function(){if(this.IsShow)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*d());for(var i=!0,n=0,r=this.Data.DataOffset,s=0;r<this.Data.Data.length&&s<a;++r,++s){var o=this.Data.Data[r];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.ChartFrame.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++n}}n>0&&this.Canvas.stroke(),this.Canvas.restore()},this.DrawStraightLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.GetLockRect();i&&(e=t?i.Top:i.Left),this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*d()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash([3,5]);for(var n=!0,r=0,s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<a;++s,++o){var h=this.Data.Data[s];if(null!=h){var l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(h);if(l>e)break;n?(this.Canvas.beginPath(),t?this.Canvas.moveTo(u,l):this.Canvas.moveTo(l,u),n=!1):t?this.Canvas.lineTo(u,l):this.Canvas.lineTo(l,u),++r}else r>0&&this.Canvas.stroke(),n=!0,r=0}r>0&&this.Canvas.stroke(),this.Canvas.restore()}}function tt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartPartLine",this.LineWidth,this.Draw=function(){this.IsShow&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawLine())},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*d());for(var i,n=0,r={X:null,Y:null},s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<a;++s,++o){var h=this.Data.Data[s];if(null!=h){var l=h.Value;if(null!=l){var u=h.RGB,c=this.ChartFrame.GetXFromIndex(o),f=this.ChartFrame.GetYFromData(l);if(c>e)break;u!=i?(i&&n>0&&this.Canvas.stroke(),n=0,i=u,this.Canvas.strokeStyle=u,this.Canvas.beginPath(),null!=r.X&&null!=r.Y?(t?this.Canvas.moveTo(r.Y,r.X):this.Canvas.moveTo(r.X,r.Y),t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),++n):t?this.Canvas.moveTo(f,c):this.Canvas.moveTo(c,f)):(t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),++n),r.X=c,r.Y=f}}}n>0&&this.Canvas.stroke(),this.Canvas.restore()},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];n&&n.Value&&((null==e.Max||e.Max<n.Value)&&(e.Max=n.Value),(null==e.Min||e.Min>n.Value)&&(e.Min=n.Value))}return e}}function et(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartPointDot",this.Color="rgb(255,193,37)",this.Radius=1,this.Draw=function(){if(this.IsShow)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.Canvas.fillStyle=this.Color;for(var i=this.Data.DataOffset,n=0;i<this.Data.Data.length&&n<a;++i,++n){var r=this.Data.Data[i];if(null!=r){var s=this.ChartFrame.GetXFromIndex(n),o=this.ChartFrame.GetYFromData(r);if(s>e)break;this.Canvas.beginPath(),t?this.Canvas.arc(o,s,this.Radius,0,2*Math.PI,!0):this.Canvas.arc(s,o,this.Radius,0,2*Math.PI,!0),this.Canvas.closePath(),this.Canvas.fill()}}this.Canvas.restore()}}}function at(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Color="rgb(255,193,37)",this.LineWidth,this.ClassName="ChartStick",this.DrawLine=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*d());for(var i=!0,n=0,r=this.Data.DataOffset,s=0;r<this.Data.Data.length&&s<a;++r,++s){var o=this.Data.Data[r];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.ChartFrame.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++n}}n>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.DrawStick=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetBottom(),n=this.ChartBorder.GetLeft();this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineWidth&&(this.Canvas.lineWidth=this.LineWidth*d());for(var r=this.Data.DataOffset,s=0;r<this.Data.Data.length&&s<a;++r,++s){var o=this.Data.Data[r];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.ChartFrame.GetYFromData(o);if(h>e)break;if(this.Canvas.beginPath(),t)this.Canvas.moveTo(n,h),this.Canvas.lineTo(l,h),this.Canvas.stroke();else{var u=parseInt(h.toString())+.5;this.Canvas.moveTo(u,l),this.Canvas.lineTo(u,i)}this.Canvas.stroke()}}this.Canvas.restore()}},this.Draw=function(){this.IsShow&&(this.NotSupportMessage?this.DrawNotSupportmessage():this.Data&&this.Data.Data&&this.DrawStick())}}function it(){this.newMethod=at,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineStick",this.Draw=function(){this.IsShow&&(this.NotSupportMessage?this.DrawNotSupportmessage():(this.DrawStick(),this.DrawLine()))}}function nt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.UpColor=fe.UpBarColor,this.DownColor=fe.DownBarColor,this.HistoryData,this.KLineDrawType=0,this.ClassName="ChartVolStick",this.Draw=function(){if(!0!==this.ChartFrame.IsHScreen){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetLeft()+e/2+2,i=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(i=r.Left);var s=this.ChartFrame.GetYFromData(0);if(t>=4){s=g(s);for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<n;++o,++h,a+=t+e){var l=this.Data.Data[o],u=this.HistoryData.Data[o];if(null!=l&&null!=u){var c=a;if(a+t>i)break;var f=this.ChartFrame.GetYFromData(l),C=!1;u.Close>=u.Open?(this.Canvas.fillStyle=this.UpColor,C=!0):this.Canvas.fillStyle=this.DownColor;var d=g(s-f);f=s-d,!C||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(g(c),f,g(t),d):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(S(c),S(f),g(t),d),this.Canvas.stroke())}}}else for(o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<n;++o,++h,a+=t+e){l=this.Data.Data[o],u=this.HistoryData.Data[o];if(null!=l&&null!=u){f=this.ChartFrame.GetYFromData(l);if((D=this.ChartFrame.GetXFromIndex(h))>i)break;u.Close>=u.Open?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var D=this.ChartFrame.GetXFromIndex(h);this.Canvas.beginPath(),this.Canvas.moveTo(S(D),f),this.Canvas.lineTo(S(D),s),this.Canvas.stroke()}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetTop()+e/2+2,i=this.ChartBorder.GetBottom(),n=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(i=r.Top);var s=this.ChartFrame.GetYFromData(0);if(t>=4){s=g(s);for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<n;++o,++h,a+=t+e){var l=this.Data.Data[o],u=this.HistoryData.Data[o];if(null!=l&&null!=u){var c=a;if(a+t>i)break;var f=this.ChartFrame.GetYFromData(l),C=!1;u.Close>=u.Open?(C=!0,this.Canvas.fillStyle=this.UpColor):this.Canvas.fillStyle=this.DownColor;var d=g(f-s);!C||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(s,g(c),d,g(t)):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(S(s),S(c),d,g(t)),this.Canvas.stroke())}}}else for(o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<n;++o,++h,a+=t+e){l=this.Data.Data[o],u=this.HistoryData.Data[o];if(null!=l&&null!=u){f=this.ChartFrame.GetYFromData(l);if((D=this.ChartFrame.GetXFromIndex(h))>i)break;u.Close>u.Open?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var D=this.ChartFrame.GetXFromIndex(h);this.Canvas.beginPath(),this.Canvas.moveTo(f,S(D)),this.Canvas.lineTo(s,S(D)),this.Canvas.stroke()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:0,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];null==e.Max&&(e.Max=n),e.Max<n&&(e.Max=n)}return e}}function rt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineMultiData",this.Color="rgb(255,193,37)",this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=!0,n=0,r=this.Data.DataOffset,s=0;r<this.Data.Data.length&&s<a;++r,++s){var o=this.Data.Data[r];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s);if(h>e)break;for(var l in o){var u=o[l].Value,c=this.ChartFrame.GetYFromData(u);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(c,h):this.Canvas.moveTo(h,c),i=!1):t?this.Canvas.lineTo(c,h):this.Canvas.lineTo(h,c),++n}}}n>0&&this.Canvas.stroke()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];if(null!=n)for(var r in n){var s=n[r].Value;null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s)}}return e}}function st(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartStickLine",this.Color="rgb(255,193,37)",this.LineWidth=2*d(),this.BarType=0,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();t&&(i=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+a/2+2;t&&(r=this.ChartBorder.GetTop()+a/2+2),this.Canvas.save();var s=!1,o=!1;if(50==this.LineWidth)e>=4?(o=!0,this.Canvas.fillStyle=this.Color,this.Canvas.strokeStyle=this.Color):(this.Canvas.lineWidth=d(),this.Canvas.strokeStyle=this.Color);else if(this.LineWidth<100){var h=this.LineWidth;e<=4?h=d():e<h&&(h=parseInt(e)),this.Canvas.lineWidth=h,this.Canvas.strokeStyle=this.Color}else{s=!0,this.Canvas.fillStyle=this.Color;var l=2*d()}for(var u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<n;++u,++c,r+=e+a){var f=this.Data.Data[u];if(null!=f){var C=f.Value,D=f.Value2;null==D&&(D=0);var p=this.ChartFrame.GetXFromIndex(c),m=this.ChartFrame.GetYFromData(C),v=this.ChartFrame.GetYFromData(D);if(p>i)break;if(s)if(t){var I=r-l;this.Canvas.fillRect(Math.min(m,v),I,Math.abs(m-v),e+a+2*l)}else{var A=e+a+2*l;(I=r-l)+A>i&&(A=i-I),this.Canvas.fillRect(g(I),g(Math.min(m,v)),g(A),g(Math.abs(m-v)))}else if(o)1==this.BarType?t?(this.Canvas.beginPath(),this.Canvas.fillRect(g(Math.min(m,v)),g(r),g(Math.abs(m-v)),g(e)),this.Canvas.stroke()):(this.Canvas.beginPath(),this.Canvas.rect(g(r),g(Math.min(m,v)),g(e),g(Math.abs(m-v))),this.Canvas.stroke()):t?this.Canvas.fillRect(g(Math.min(m,v)),g(r),g(Math.abs(m-v)),g(e)):this.Canvas.fillRect(g(r),g(Math.min(m,v)),g(e),g(Math.abs(m-v)));else if(t)this.Canvas.beginPath(),this.Canvas.moveTo(m,S(p)),this.Canvas.lineTo(v,S(p)),this.Canvas.stroke();else{var y=parseInt(p.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(y,m),this.Canvas.lineTo(y,v),this.Canvas.stroke()}}}this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];if(null!=n){var r=n.Value2;if(null==r&&(r=0),null!=n&&!isNaN(n.Value)&&!isNaN(r)){var s=Math.max(n.Value,r),o=Math.min(n.Value,r);null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=o),e.Max<s&&(e.Max=s),e.Min>o&&(e.Min=o)}}}return e}}function ot(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartText",this.TextFont="14px ",this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth;var t=this.ChartBorder.GetRight();this.ChartFrame.XPointCount;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a){var i=a.Value;if("Left"==a.Position){var n=this.ChartFrame.GetXFromIndex(0),r=this.ChartFrame.GetYFromData(i);if(n>t)continue;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=a.Color,this.Canvas.font=this.TextFont,this.Canvas.fillText(a.Message,n,r)}}}}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};if(!this.Data||!this.Data.Data)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a&&!isNaN(a.Value)){var i=a.Value;null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=i),t.Max<i&&(t.Max=i),t.Min>i&&(t.Min=i)}}return t}}function ht(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleText",this.Color="rgb(255,193,37)",this.TextFont="14px ",this.Text,this.TextAlign="left",this.Direction=0,this.YOffset=0,this.Position,this.IconFont,this.Draw=function(){if(this.IsShow)if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Position)this.DrawPosition();else if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=(this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight()),i=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();t&&(a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx(),n=this.ChartBorder.GetLeftEx());var r=this.ChartFrame.XPointCount,s=Array.isArray(this.Text),o=d();if(1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",this.IconFont){this.Color=this.IconFont.Color,this.Text=this.IconFont.Text;var h=e,l=12*o,u=24*o;h<l?h=l:h>u&&(h=u),this.Canvas.font=h+"px "+this.IconFont.Family}else this.TextFont=this.GetDynamicFont(2*e*o),this.Canvas.font=this.TextFont;for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<r;++c,++f){var C=this.Data.Data[c];if(null!=C){var D=this.ChartFrame.GetXFromIndex(f),p=this.ChartFrame.GetYFromData(C);if(D>a)break;if(this.Canvas.textAlign=this.TextAlign,this.Canvas.fillStyle=this.Color,this.YOffset>0&&this.Direction>0){var m=p;this.Canvas.save(),this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?(1==this.Direction?(p=i-this.YOffset*o,m+=5*o):(p=n+this.YOffset*o,m-=5*o),this.Canvas.moveTo(S(m),S(D)),this.Canvas.lineTo(S(p),S(D))):(1==this.Direction?(p=i+this.YOffset*o,m+=5*o):(p=n-this.YOffset*o,m-=5*o),this.Canvas.moveTo(S(D),S(m)),this.Canvas.lineTo(S(D),S(p))),this.Canvas.stroke(),this.Canvas.restore()}if(s){var v=this.Text[c];if(!v)continue;this.DrawText(v,D,p,t)}else this.DrawText(this.Text,D,p,t)}}}},this.DrawPosition=function(){if(this.Text){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidthEx()*this.Position.Y,a=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*this.Position.X;else e=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*this.Position.X,a=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeight()*this.Position.Y;t&&(chartright=this.ChartBorder.GetBottom(),top=this.ChartBorder.GetRightEx(),bottom=this.ChartBorder.GetLeftEx()),this.Canvas.fillStyle=this.Color,0==this.Position.Type?this.Canvas.textAlign="left":2==this.Position.Type?this.Canvas.textAlign="center":this.Canvas.textAlign="right",this.DrawText(this.Text,e,a,t)}},this.DrawText=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)}}function lt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightLine",this.Color="rgb(255,193,37)",this.Draw=function(){if(this.Data&&this.Data.Data&&1==this.Data.Data.length){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();var t=this.ChartFrame.XPointCount,e=this.Data.Data[0],a=this.ChartFrame.GetYFromData(e),i=this.ChartFrame.GetXFromIndex(0),n=this.ChartFrame.GetXFromIndex(t-1),r=parseInt(a.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(i,r),this.Canvas.lineTo(n,r),this.Canvas.strokeStyle=this.Color,this.Canvas.stroke()}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};return this.Data&&this.Data.Data?1!=this.Data.Data.length?t:(t.Min=this.Data.Data[0],t.Max=this.Data.Data[0],t):t}}function ut(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightArea",this.Color="rgb(255,193,37)",this.Font="11px ",this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.Data&&this.Data.Data)if(!0!==this.ChartFrame.IsHScreen){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),this.ChartBorder.GetBottom();var t=this.ChartBorder.GetLeft(),e=this.ChartFrame.XPointCount,a=this.ChartFrame.GetXFromIndex(e-1);for(let e in this.Data.Data){let r=this.Data.Data[e];if(null==r||isNaN(r.Value)||isNaN(r.Value2))continue;if(null==r.Color)continue;let s=Math.max(r.Value,r.Value2),o=Math.min(r.Value,r.Value2);var i=this.ChartFrame.GetYFromData(s),n=this.ChartFrame.GetYFromData(o);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(g(t),g(i),g(a-t),g(n-i)),r.Title&&r.TitleColor){this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font;let t=i+(n-i)/2;this.Canvas.fillText(r.Title,a,t)}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartBorder.GetBottom(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetHeight();for(let o in this.Data.Data){let h=this.Data.Data[o];if(null==h||isNaN(h.Value)||isNaN(h.Value2))continue;if(null==h.Color)continue;let l=Math.max(h.Value,h.Value2),u=Math.min(h.Value,h.Value2);var i=this.ChartFrame.GetYFromData(l),n=this.ChartFrame.GetYFromData(u);if(this.Canvas.fillStyle=h.Color,this.Canvas.fillRect(g(n),g(e),g(i-n),g(a)),h.Title&&h.TitleColor){var r=i+(n-i)/2,s=t;this.Canvas.save(),this.Canvas.translate(r,s),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=h.TitleColor,this.Canvas.font=this.Font,this.Canvas.fillText(h.Title,0,-2),this.Canvas.restore()}}},this.GetMaxMin=function(){this.ChartFrame.XPointCount;var t={Min:null,Max:null};if(!this.Data||!this.Data.Data)return t;for(let e in this.Data.Data){let a=this.Data.Data[e];if(null==a||isNaN(a.Value)||isNaN(a.Value2))continue;let i=Math.max(a.Value,a.Value2),n=Math.min(a.Value,a.Value2);null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=n),t.Max<i&&(t.Max=i),t.Min>n&&(t.Min=n)}return t}}function ct(){this.newMethod=Q,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePriceLine",this.YClose,this.IsDrawArea=!0,this.AreaColor="rgba(0,191,255,0.1)",this.SourceData,this.IsShowLead=!1,this.LeadData,this.UpColor=fe.UpBarColor,this.DownColor=fe.DownBarColor,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(this.IsShow){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=this.ChartBorder.GetBottomEx(),n=this.ChartBorder.GetLeftEx(),r=this.Data,s=!1;this.SourceData&&(r=this.SourceData,s=!0),this.IsShowLead&&this.DrawLead();for(var o=!0,h={},l=0,u=r.DataOffset,c=0;u<r.Data.length&&c<e;++u,++c){var f=null;if(s){var C=r.Data[u];f=C.Before?C.Before.Close:C.Close}else f=r.Data[u];if(null!=f){var d=this.ChartFrame.GetXFromIndex(c),D=this.ChartFrame.GetYFromData(f);o?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(D,d):this.Canvas.moveTo(d,D),o=!1,h={X:d,Y:D}):t?this.Canvas.lineTo(D,d):this.Canvas.lineTo(d,D),++l>=a&&(o=!0,this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(n,d),this.Canvas.lineTo(n,h.X)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(h.X,i)),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()),l=0)}}l>0&&(this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(n,d),this.Canvas.lineTo(n,h.X)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(h.X,i)),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()))}},this.DrawLead=function(){if(this.LeadData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetTopEx());if(!0===t&&(i=this.ChartBorder.GetRightEx()),!(e>a)){for(var n=[],r=null,s=null,o=this.ChartFrame.GetYFromData(this.YClose),h=(o-i)/3,l=this.LeadData,u=l.DataOffset,c=0;u<l.Data.length&&c<e;++u,++c){var f=l.Data[u];if(It.IsNumber(f)&&0!=f){var C=this.ChartFrame.GetXFromIndex(c);(null==r||r<f)&&(r=f),(null==s||s>f)&&(s=f),n.push({X:C,Value:f})}}if(!(n.length<=0)){var d=Math.max(Math.abs(r),Math.abs(s));for(var u in n){var D=n[u];D.Value>0?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var p=o-D.Value*h/d;C=S(D.X);this.Canvas.beginPath(),!0===t?(this.Canvas.moveTo(o,C),this.Canvas.lineTo(p,C)):(this.Canvas.moveTo(C,o),this.Canvas.lineTo(C,p)),this.Canvas.stroke()}}}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;if(!this.IsShow)return e;e.Min=this.YClose,e.Max=this.YClose;var a=this.Data,i=!1;this.SourceData&&(a=this.SourceData,i=!0);for(var n=a.DataOffset,r=0;n<a.Data.length&&r<t;++n,++r){var s=null;if(i){var o=a.Data[n];s=o.Before?o.Before.Close:o.Close}else s=a.Data[n];null!=s&&(null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s))}if(e.Max==this.YClose&&e.Min==this.YClose)return e.Max=this.YClose+.1*this.YClose,e.Min=this.YClose-.1*this.YClose,e;var h=Math.max(Math.abs(this.YClose-e.Max),Math.abs(this.YClose-e.Min));return e.Max=this.YClose+h,e.Min=this.YClose-h,e}}function ft(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartMACD",this.UpColor=fe.UpBarColor,this.DownColor=fe.DownBarColor,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth;var t=this.ChartBorder.GetRight(),e=this.ChartFrame.XPointCount,a=this.GetLockRect();a&&(t=a.Left);for(var i=this.ChartFrame.GetYFromData(0),n=this.Data.DataOffset,r=0;n<this.Data.Data.length&&r<e;++n,++r){var s=this.Data.Data[n];if(null!=s){var o=this.ChartFrame.GetXFromIndex(r),h=this.ChartFrame.GetYFromData(s);if(o>t)break;var l=parseInt(o.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(l,i),this.Canvas.lineTo(l,h),this.Canvas.strokeStyle=s>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}}else this.HScreenDraw()},this.HScreenDraw=function(){var t=this.ChartBorder.GetBottom(),e=this.ChartFrame.XPointCount,a=this.GetLockRect();a&&(t=a.Top);for(var i=this.ChartFrame.GetYFromData(0),n=this.Data.DataOffset,r=0;n<this.Data.Data.length&&r<e;++n,++r){var s=this.Data.Data[n];if(null!=s){var o=this.ChartFrame.GetXFromIndex(r),h=this.ChartFrame.GetYFromData(s);if(o>t)break;this.Canvas.beginPath(),this.Canvas.moveTo(i,S(o)),this.Canvas.lineTo(h,S(o)),this.Canvas.strokeStyle=s>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}}}function Ct(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartBar",this.UpBarColor=fe.UpBarColor,this.DownBarColor=fe.DownBarColor,this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetRight(),i=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+e/2+2,r=this.ChartFrame.GetYFromData(0);if(t>=4){r=g(r);for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,n+=t+e){if(null!=(f=this.Data.Data[s])&&0!=f){var h=n;if(n+t>a)break;var l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(f);this.Canvas.fillStyle=f>0?this.UpBarColor:this.DownBarColor;var c=g(Math.abs(r-u));u=r-u>0?r-c:r+c,this.Canvas.fillRect(g(h),u,g(t),c)}}}else for(s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,n+=t+e){var f;if(null!=(f=this.Data.Data[s])&&0!=f){h=n;if(n+t>a)break;l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(f);this.Canvas.strokeStyle=f>0?this.UpBarColor:this.DownBarColor,this.Canvas.beginPath(),this.Canvas.moveTo(S(l),u),this.Canvas.lineTo(S(l),r),this.Canvas.stroke()}}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:0,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];null==e.Max&&(e.Max=n),e.Max<n&&(e.Max=n)}return e}}function dt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartBand",this.FirstColor=fe.Index.LineColor[0],this.SecondColor=fe.Index.LineColor[1],this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else{for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+2,n=0,r=0,s=0,o=[],h=[],l=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<a;++u,++c,i+=t+e){var f=this.Data.Data[u];null!=f&&null!=f.Value&&null!=f.Value2&&(n=this.ChartFrame.GetXFromIndex(c),r=this.ChartFrame.GetYFromData(f.Value),s=this.ChartFrame.GetYFromData(f.Value2),o[l]={x:n,y:r},h[l]={x:n,y:s},l++)}if(o.length>1){this.Canvas.save(),this.Canvas.beginPath();for(u=0;u<o.length;++u)0==u?this.Canvas.moveTo(o[u].x,o[u].y):this.Canvas.lineTo(o[u].x,o[u].y);for(c=h.length-1;c>=0;--c)this.Canvas.lineTo(h[c].x,h[c].y);this.Canvas.closePath(),this.Canvas.clip(),this.Canvas.beginPath(),this.Canvas.moveTo(o[0].x,this.ChartBorder.GetBottom());for(u=0;u<o.length;++u)this.Canvas.lineTo(o[u].x,o[u].y);this.Canvas.lineTo(o[o.length-1].x,this.ChartBorder.GetBottom()),this.Canvas.closePath(),this.Canvas.fillStyle=this.FirstColor,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(h[0].x,this.ChartBorder.GetBottom());for(u=0;u<h.length;++u)this.Canvas.lineTo(h[u].x,h[u].y);this.Canvas.lineTo(h[h.length-1].x,this.ChartBorder.GetBottom()),this.Canvas.closePath(),this.Canvas.fillStyle=this.SecondColor,this.Canvas.fill(),this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];if(null!=n&&null!=n.Value&&null!=n.Value2){var r=n.Value>n.Value2?n.Value:n.Value2,s=n.Value<n.Value2?n.Value:n.Value2;null==e.Max?e.Max=r:e.Max<r&&(e.Max=r),null==e.Min?e.Min=s:e.Min>s&&(e.Min=s)}}return e}}function Dt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartChannel",this.IsHScreen=!1,this.PointCount=0,this.DataWidth=0,this.DistanceWidth=0,this.ChartRight=0,this.LineColor="RGB(255,0,0)",this.LineDotted=[3,3],this.AreaColor="RGB(255,222,173)",this.LineWidth=1,this.CalculateData=function(){for(var t=[],e=[],a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<this.PointCount;++a,++i){var n=this.Data.Data[a];if(n&&It.IsNumber(n.Value)&&It.IsNumber(n.Value2)){var r=this.ChartFrame.GetXFromIndex(i);if(r>this.ChartRight)break;var s=this.ChartFrame.GetYFromData(n.Value),o=this.ChartFrame.GetYFromData(n.Value2);e.push({X:r,Y:s,Y2:o})}else e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},this.DrawArea=function(t){if(!(t.length<=0)){this.Canvas.beginPath();var e=t[0];this.IsHScreen?this.Canvas.moveTo(e.Y,e.X):this.Canvas.moveTo(e.X,e.Y);for(var a=1;a<t.length;++a){var i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),0}for(a=t.length-1;a>=0;--a){i=t[a];this.IsHScreen?this.Canvas.lineTo(i.Y2,i.X):this.Canvas.lineTo(i.X,i.Y2),0}this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()}},this.DrawLine=function(t){this.Canvas.strokeStyle=this.LineColor;for(var e=0;e<2;++e){for(var a=!0,i=0,n=0;n<t.length;++n){var r=t[n];a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(0===e?r.Y:r.Y2,r.X):this.Canvas.moveTo(r.X,0===e?r.Y:r.Y2),a=!1):this.IsHScreen?this.Canvas.lineTo(0===e?r.Y:r.Y2,r.X):this.Canvas.lineTo(r.X,0===e?r.Y:r.Y2),++i}i>0&&this.Canvas.stroke()}},this.Draw=function(){if(this.NotSupportMessage)this.DrawNotSupportmessage();else{this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.PointCount=this.ChartFrame.XPointCount,this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen?this.ChartRight=this.ChartBorder.GetBottom():this.ChartRight=this.ChartBorder.GetRight();var t=this.CalculateData();if(t&&!(t.length<=0)){this.Canvas.save(),this.Canvas.lineWidth=this.LineWidth*d(),this.Canvas.setLineDash(this.LineDotted);for(var e=0;e<t.length;++e){var a=t[e];this.DrawArea(a),this.DrawLine(a)}this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var n=this.Data.Data[a];if(null!=n&&null!=n.Value&&null!=n.Value2){var r=n.Value>n.Value2?n.Value:n.Value2,s=n.Value<n.Value2?n.Value:n.Value2;null==e.Max?e.Max=r:e.Max<r&&(e.Max=r),null==e.Min?e.Min=s:e.Min>s&&(e.Min=s)}}return e}}function pt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartLock",this.WidthDiv=.2,this.LockCount=20,this.BGColor=fe.LockBGColor,this.TextColor=fe.LockTextColor,this.Font=fe.DefaultTextFont,this.Title="",this.LockRect=null,this.LockID,this.Callback,this.IndexName,this.MinWidth=null,this.Draw=function(t){if(this.LockRect=null,this.NotSupportMessage)this.DrawNotSupportmessage();else if(!0!==this.ChartFrame.IsHScreen){var e=this.ChartBorder.GetRight(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetLeft()+n/2+2;for(var r=this.ChartBorder.GetRight(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+n){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>r)break}}a=(i+n)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetLeft())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft());var c=this.ChartBorder.GetBottom()-this.ChartBorder.GetTop(),f=this.ChartBorder.GetRight()-u;if(this.MinWidth>10&&f<this.MinWidth&&(f=this.MinWidth,(u=this.ChartBorder.GetRight()-f)<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft())),t){this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(u,this.ChartBorder.GetTop(),f,c);var C=u+f/2,d=this.ChartBorder.GetTop()+c/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,C,d)}this.LockRect={Left:u,Top:this.ChartBorder.GetTop(),Width:f,Heigh:c}}else this.HScreenDraw(t)},this.HScreenDraw=function(t){var e=this.ChartBorder.GetBottom(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetTop()+n/2+2;for(var r=this.ChartBorder.GetBottom(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+n){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>r)break}}a=(i+n)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetTop())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetTop()&&(u=this.ChartBorder.GetTop());var c=this.ChartBorder.GetRight()-this.ChartBorder.GetLeft(),f=this.ChartBorder.GetBottom()-u;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(this.ChartBorder.GetLeft(),u,c,f);var C=this.ChartBorder.GetLeft()+c/2,d=u+f/2;this.Canvas.save(),this.Canvas.translate(C,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore(),this.LockRect={Left:this.ChartBorder.GetLeft(),Top:u,Width:c,Heigh:f}},this.GetTooltipData=function(t,e,a){return null!=this.LockRect&&(this.Canvas.beginPath(),this.Canvas.rect(this.LockRect.Left,this.LockRect.Top,this.LockRect.Width,this.LockRect.Heigh),!!this.Canvas.isPointInPath(t,e)&&(a.Data={ID:this.LockID,Callback:this.Callback,IndexName:this.IndexName},a.ChartPaint=this,!0))}}function mt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Radius=100,this.Distance=30,this.txtLine=20,this.paddingX=20/3,this.Draw=function(){if(!(this.Data&&this.Data.Data&&this.Data.Data.length>0))return this.DrawEmptyData();this.ChartBorder.GetLeft(),this.ChartBorder.GetRight(),this.ChartBorder.GetTop(),this.ChartBorder.GetBottom();let t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetHeight();if(isNaN(this.Radius)){let a=this.Radius.replace("%","");a/=100,t>=e&&(this.Radius=a*e),t<e&&(this.Radius=a*t)}this.Canvas.save(),this.Canvas.translate(t/2,e/2);let a=0;for(let t in this.Data.Data)a+=this.Data.Data[t].Value;let i=0,n=0;for(let t in this.Data.Data){let e=this.Data.Data[t],r=(e.Value/a).toFixed(2);this.Canvas.beginPath(),this.Canvas.moveTo(0,0),n+=2*r*Math.PI,this.Canvas.strokeStyle="white",this.Canvas.fillStyle=e.Color,this.Canvas.arc(0,0,this.Radius,i,n),this.Canvas.fill(),this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.strokeStyle=e.Color,this.Canvas.moveTo(0,0);let s=(this.Radius+this.Distance)*Math.cos(n-(n-i)/2),o=(this.Radius+this.Distance)*Math.sin(n-(n-i)/2);this.Canvas.lineTo(s,o);let h=this.txtLine,l=this.paddingX;if(this.Canvas.textAlign="left",n-(n-i)/2<1.5*Math.PI&&n-(n-i)/2>.5*Math.PI&&(h=-this.txtLine,l=-this.paddingX,this.Canvas.textAlign="right"),this.Canvas.lineTo(s+h,o),this.Canvas.stroke(),e.Text)this.Canvas.fillText(e.Text,s+h+l,o);else{let t=`${e.Name}:${e.Value}`;this.Canvas.fillText(t,s+h+l,o)}i+=2*r*Math.PI}this.Canvas.restore()},this.DrawEmptyData=function(){console.log("[ChartPie::DrawEmptyData]")}}function vt(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.StartAngle=0,this.Color="rgb(198,198,198)",this.AreaColor="rgba(242,154,118,0.4)",this.AreaLineColor="rgb(242,154,118)",this.TitleFont=24*d()+"px ",this.TitleColor="rgb(102,102,102)",this.BGColor=["rgb(255,255,255)","rgb(224,224,224)"],this.DrawBorder=function(){if(this.BorderPoint.length<=0)return;this.Canvas.font=this.TitleFont,this.Canvas.strokeStyle=this.Color;const t=[1,.8,.6,.4,.2];for(let n in t){var e=t[n],a=!0;for(let t in this.BorderPoint){(i=this.BorderPoint[t]).X=this.CenterPoint.X+i.Radius*Math.cos(i.Angle*Math.PI/180)*e,i.Y=this.CenterPoint.Y+i.Radius*Math.sin(i.Angle*Math.PI/180)*e,a?(this.Canvas.beginPath(),this.Canvas.moveTo(i.X,i.Y),a=!1):this.Canvas.lineTo(i.X,i.Y)}this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.fillStyle=this.BGColor[n%2==0?0:1],this.Canvas.fill()}this.Canvas.beginPath();for(let t in this.BorderPoint){var i;(i=this.BorderPoint[t]).X=this.CenterPoint.X+i.Radius*Math.cos(i.Angle*Math.PI/180),i.Y=this.CenterPoint.Y+i.Radius*Math.sin(i.Angle*Math.PI/180),this.Canvas.moveTo(this.CenterPoint.X,this.CenterPoint.Y),this.Canvas.lineTo(i.X,i.Y),this.DrawText(i)}this.Canvas.stroke()},this.DrawArea=function(){if(this.DataPoint&&!(this.DataPoint.length<=0)){this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.AreaLineColor,this.Canvas.beginPath();var t=!0;for(let a in this.DataPoint){var e=this.DataPoint[a];t?(this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),t=!1):this.Canvas.lineTo(e.X,e.Y)}this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()}},this.DrawText=function(t){if(t.Text){this.Canvas.fillStyle=this.TitleColor;var e=t.X,a=t.Y;t.Angle>0&&t.Angle<45?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2):t.Angle>=0&&t.Angle<90?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",e+=2):t.Angle>=90&&t.Angle<135?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=135&&t.Angle<180?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=180&&t.Angle<225?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e-=2):t.Angle>=225&&t.Angle<=270?(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom"):t.Angle>270&&t.Angle<315?(this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",e+=2):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2),this.Canvas.fillText(t.Text,e,a)}},this.Draw=function(){this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.Data&&this.Data.Data&&this.Data.Data.length>0?this.CalculatePoints(this.Data.Data):this.CalculatePoints(null),this.DrawBorder(),this.DrawArea()},this.CalculatePoints=function(t){let e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()),i=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()),n=this.ChartBorder.GetHeight(),r={X:e+i/2,Y:a+n/2},s=Math.min(i/2,n/2)-2,o=Math.max(5,t?t.length:0),h=360/o;for(let e=0;e<o;++e){let a={Index:e,Radius:s,Angle:e*h+this.StartAngle},i=a.Angle;if(t&&e<t.length){var l=t[e];let n={Index:e,Text:l.Text};if(a.Text=l.Name,l.Value){var u=l.Value;u>=1&&(u=1);var c=s*u;n.X=r.X+c*Math.cos(i*Math.PI/180),n.Y=r.Y+c*Math.sin(i*Math.PI/180)}else n.X=r.X,n.Y=r.Y;this.DataPoint.push(n)}this.BorderPoint.push(a)}this.CenterPoint=r},this.DrawEmptyData=function(){console.log("[ChartPie::DrawEmptyData]")}}function St(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.Data,this.IsDynamic=!1,this.IsAnimation=!1,this.ClassName="IExtendChartPainting",this.SizeChange=!0,this.IsEraseBG=!1,this.DrawAfterTitle=!1,this.Left=5,this.Right=5,this.Top=5,this.Bottom=5,this.Draw=function(){},this.SetOption=function(t){}}function gt(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="KLineTooltipPaint",this.BorderColor=fe.TooltipPaint.BorderColor,this.BGColor=fe.TooltipPaint.BGColor,this.TitleColor=fe.TooltipPaint.TitleColor,this.Left=1*d(),this.Top=5*d(),this.Width=50,this.Height=100,this.LineHeight=15*d(),this.Font=[fe.TooltipPaint.TitleFont],this.HQChart,this.KLineTitlePaint,this.IsHScreen=!1,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.GetLeft=function(){return this.IsHScreen?this.ChartBorder.GetRightEx()-this.Height-this.Top:this.ChartBorder.GetLeft()+this.Left},this.GetTop=function(){return this.IsHScreen?this.ChartBorder.GetTop():this.ChartBorder.GetTopEx()+this.Top},this.Draw=function(){if(this.HQChart&&this.HQChart.TitlePaint&&this.HQChart.TitlePaint[0]&&this.HQChart.IsOnTouch){this.KLineTitlePaint=this.HQChart.TitlePaint[0];var t=this.KLineTitlePaint.GetCurrentKLineData();if(t){var e=8;"MinuteTooltipPaint"===this.ClassName?e=7:(null!=t.Time&&!isNaN(t.Time)&&t.Time>0&&(e=9),we.IsSHSZStockA(this.HQChart.Symbol)&&t.FlowCapital>0&&++e),this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.Canvas.font=this.Font[0],this.Width=this.Canvas.measureText(" : 9999.99 ").width,this.Height=this.LineHeight*e+2*d()*2,this.DrawBG(),this.DrawTooltipData(t),this.DrawBorder()}}},this.DrawTooltipData=function(t){var e=Be(this.HQChart.Symbol),a=this.GetLeft()+2*d(),i=this.GetTop()+3*d();if(this.IsHScreen){this.Canvas.save();var n=this.GetLeft()+this.Height,r=this.GetTop();this.Canvas.translate(n,r),this.Canvas.rotate(90*Math.PI/180),a=2*d(),i=3*d()}this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font[0];var s=this.Canvas.measureText(": ").width,o=It.FormatDateString(t.Date);this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(o,a,i),null!=t.Time&&!isNaN(t.Time)&&t.Time>0&&(i+=this.LineHeight,o=It.FormatTimeString(t.Time),this.Canvas.fillText(o,a,i)),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,o=de.GetText("Tooltip-Open",this.LanguageID),this.Canvas.fillText(o,a,i);var h=this.KLineTitlePaint.GetColor(t.Open,t.YClose);o=t.Open.toFixed(e),this.Canvas.fillStyle=h,this.Canvas.fillText(o,a+s,i),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,o=de.GetText("Tooltip-High",this.LanguageID),this.Canvas.fillText(o,a,i);h=this.KLineTitlePaint.GetColor(t.High,t.YClose),o=t.High.toFixed(e);this.Canvas.fillStyle=h,this.Canvas.fillText(o,a+s,i),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,o=de.GetText("Tooltip-Low",this.LanguageID),this.Canvas.fillText(o,a,i);h=this.KLineTitlePaint.GetColor(t.Low,t.YClose),o=t.Low.toFixed(e);this.Canvas.fillStyle=h,this.Canvas.fillText(o,a+s,i),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,o=de.GetText("Tooltip-Close",this.LanguageID),this.Canvas.fillText(o,a,i);h=this.KLineTitlePaint.GetColor(t.Close,t.YClose),o=t.Close.toFixed(e);this.Canvas.fillStyle=h,this.Canvas.fillText(o,a+s,i),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,o=de.GetText("Tooltip-Increase",this.LanguageID),this.Canvas.fillText(o,a,i);var l=(t.Close-t.YClose)/t.YClose*100;h=this.KLineTitlePaint.GetColor(l,0),o=l.toFixed(2)+"%";this.Canvas.fillStyle=h,this.Canvas.fillText(o,a+s,i),this.Canvas.fillStyle=this.TitleColor,i+=this.LineHeight,o=de.GetText("Tooltip-Vol",this.LanguageID),this.Canvas.fillText(o,a,i);o=It.FromatIntegerString(t.Vol,2,this.LanguageID);if(this.Canvas.fillText(o,a+s,i),It.IsNumber(t.Amount)){i+=this.LineHeight,o=de.GetText("Tooltip-Amount",this.LanguageID),this.Canvas.fillText(o,a,i);o=It.FormatValueString(t.Amount,2,this.LanguageID);this.Canvas.fillText(o,a+s,i)}if(we.IsSHSZStockA(this.HQChart.Symbol)&&t.FlowCapital>0){i+=this.LineHeight,o=de.GetText("Tooltip-Exchange",this.LanguageID),this.Canvas.fillText(o,a,i);o=(l=t.Vol/t.FlowCapital*100).toFixed(2)+"%";this.Canvas.fillText(o,a+s,i)}this.IsHScreen&&this.Canvas.restore()},this.DrawBorder=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.strokeStyle=this.BorderColor,t?this.Canvas.strokeRect(S(e),S(a),this.Height,this.Width):this.Canvas.strokeRect(S(e),S(a),this.Width,this.Height)},this.DrawBG=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.fillStyle=this.BGColor,t?this.Canvas.fillRect(e,a,this.Height,this.Width):this.Canvas.fillRect(e,a,this.Width,this.Height)},this.SetOption=function(t){t.LineHeight>0&&(this.LineHeight=t.LineHeight*d()),t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID)}}function It(){this.ChartBorder,this.Frame,this.FrameSplitData,this.SplitCount=5,this.StringFormat=0,this.IsShowLeftText=!0,this.IsShowRightText=!0,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.IntegerCoordinateSplit=function(t){var e=this.FrameSplitData.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var n=0,r=i;r-a<1e-8;r+=e.FixInterval)++n;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=n,!0},this.Filter=function(t,e){if(this.SplitCount<=0||t.length<=0||t.length<this.SplitCount)return t;var a=parseInt(t.length/this.SplitCount);a<=1&&(a=2);for(var i=[],n=0;n<t.length;n+=a)n+a>=t.length&&n!=t.length-1?i.push(t[t.length-1]):i.push(t[n]);if(2==this.SplitCount&&i.length>2)for(n=1;n<i.length-1;++n){(s=i[n]).Message[0]=null,s.Message[1]=null}if(e){var r=!1;for(n=0;n<i;++n){var s=i[n];if(Math.abs(s.Value)<1e-8){r=!0;break}}if(0==r){var o=new A;o.Value=0,o.Message[0]=null,o.Message[1]=null,i.push(o)}}return i},this.RemoveZero=function(t){var e=[!0,!0];for(var a in t){var i=(n=t[a]).Message[0];this.IsDecimalZeroEnd(i)||(e[0]=!1);i=n.Message[1];this.IsDecimalZeroEnd(i)||(e[1]=!1)}if(0!=e[0]||0!=e[1])for(var a in t){var n=t[a];if(e[0])null!=(i=n.Message[0])&&("number"==typeof i&&(i=i.toString()),n.Message[0]=i.replace(/[.][0]+/g,""));if(e[1])null!=(i=n.Message[1])&&("number"==typeof i&&(i=i.toString()),n.Message[1]=i.replace(/[.][0]+/g,""))}},this.IsDecimalZeroEnd=function(t){if(null==t)return!0;if("number"==typeof t&&(t=t.toString()),"0"==t)return!0;var e=t.search(/[.]/);if(e<0)return!1;for(var a=e+1;a<t.length;++a){var i=t.charAt(a);if(i>="1"&&i<="9")return!1}return!0}}function At(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.CoordinateType=0,this.Symbol,this.Data,this.FrameSplitData2,this.FloatPrecision=null,this.Period,this.KLineChart,this.Custom=[],this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1);var e=d(),a=this.Frame.ChartBorder.GetChartWidth()<450*e,i=Be(this.Symbol);if(a&&we.IsSHSZIndex(this.Symbol)&&(i=0),null!=this.FloatPrecision&&(i=this.FloatPrecision),console.log(`[FrameSplitKLinePriceY] Max=${t.Max} Min=${t.Min} Count=${t.Count} isPhoneModel=${a} defaultfloatPrecision=${i} `),V.IsTickPeriod(this.Period))this.SplitTickData(t,i);else switch(this.CoordinateType){case 1:this.SplitPercentage(t,i);break;default:this.SplitDefault(t,i)}this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,!1),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,console.log(`[FrameSplitKLinePriceY] fixed . Max=${t.Max} Min=${t.Min} Count=${t.Count}`)},this.SplitTickData=function(t,e){var a=this.KLineChart.GetAllPrice();for(var i in this.Frame.HorizontalInfo=[],a){var n=a[i];this.Frame.HorizontalInfo[i]=new A,this.Frame.HorizontalInfo[i].Value=n,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=n.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=n.toFixed(e))}},this.SplitPercentage=function(t,e){var a=this.GetFirstOpenPrice();t.Max=(t.Max-a)/a,t.Min=(t.Min-a)/a,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit2(t),this.Frame.HorizontalInfo=[];for(var i=0,n=t.Min;i<t.Count;++i,n+=t.Interval){var r=(n+1)*a;this.Frame.HorizontalInfo[i]=new A,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=(100*n).toFixed(2)+"%")}t.Min=(1+t.Min)*a,t.Max=(1+t.Max)*a},this.SplitDefault=function(t,e){this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new A,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e));for(var a in this.Frame.CustomHorizontalInfo=[],this.Custom){var n=this.Custom[a];if(0==n.Type){var r=this.GetLatestPrice(e,n);r&&this.Frame.CustomHorizontalInfo.push(r)}}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1],i=new A;return i.Type=0,i.Value=a.Close,i.TextColor=fe.FrameLatestPrice.TextColor,"left"==e.Position?i.Message[0]=a.Close.toFixed(t):i.Message[1]=a.Close.toFixed(t),a.Close>a.Open?i.LineColor=fe.FrameLatestPrice.UpBarColor:a.Close<a.Open?i.LineColor=fe.FrameLatestPrice.DownBarColor:i.LineColor=fe.FrameLatestPrice.UnchagneBarColor,i},this.GetFirstOpenPrice=function(){if(!this.Data)return null;for(var t=this.Frame.XPointCount,e=this.Data.DataOffset,a=0;e<this.Data.Data.length&&a<t;++e,++a){var i=this.Data.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return i.Open}return null},this.IntegerCoordinateSplit2=function(t){var e=this.FrameSplitData2.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var n=0,r=i;r-a<1e-8;r+=e.FixInterval)++n;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=n,!0}}function yt(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.SplitCount=3,this.FloatPrecision=2,this.FLOATPRECISION_RANGE=[1,.1,.01,.001,1e-4],this.GetFloatPrecision=function(t,e){if(t>this.FLOATPRECISION_RANGE[0])return e;if(e<0)return 2;for(;e<this.FLOATPRECISION_RANGE.length&&!(t>this.FLOATPRECISION_RANGE[e]);++e);return e},this.Operator=function(){var t={};if(t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,this.Frame.YSpecificMaxMin?(t.Count=this.Frame.YSpecificMaxMin.Count,t.Interval=(t.Max-t.Min)/(t.Count-1)):(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit(t)),this.Frame.HorizontalInfo=[],this.Frame.YSplitScale)for(var e in this.Frame.YSplitScale){var a=this.Frame.YSplitScale[e],i=new A;if(i.Value=a,(r=Math.abs(a))<1e-10)i.Message[1]=0;else if(r<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])i.Message[1]=a.toExponential(2).toString();else{var n=this.GetFloatPrecision(r,this.FloatPrecision);i.Message[1]=It.FormatValueString(a,n,this.LanguageID)}i.Message[0]=i.Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[e].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[e].Message[1]=null),this.Frame.HorizontalInfo.push(i)}else for(e=0,a=t.Min;e<t.Count;++e,a+=t.Interval){if(this.Frame.HorizontalInfo[e]=new A,this.Frame.HorizontalInfo[e].Value=a,1==this.StringFormat){n=this.FloatPrecision;!isNaN(a)&&Math.abs(a)>1e3&&(n=0),this.Frame.HorizontalInfo[e].Message[1]=It.FormatValueString(a,n,this.LanguageID)}else{var r;if((r=Math.abs(a))<1e-10)this.Frame.HorizontalInfo[e].Message[1]=0;else if(r<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])this.Frame.HorizontalInfo[e].Message[1]=a.toExponential(2).toString();else{n=this.GetFloatPrecision(r,this.FloatPrecision);this.Frame.HorizontalInfo[e].Message[1]=It.FormatValueString(a,n,this.LanguageID)}}this.Frame.HorizontalInfo[e].Message[0]=this.Frame.HorizontalInfo[e].Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[e].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[e].Message[1]=null)}this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,t.Max>0&&t.Min<0),this.RemoveZero(this.Frame.HorizontalInfo),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min}}function Tt(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Period,this.Symbol,this.MinTextDistance=50*d(),this.SplitDateTime=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,n=0,r=e;n<a&&r<this.Frame.Data.Data.length;++n,++r){i+=t;var s=null;if(0==n)s={Value:r-e,Text:It.FormatDateString(this.Frame.Data.Data[r].Date,"MM-DD")};else if(i>this.MinTextDistance){s={Value:r-e,Text:It.FormatTimeString(this.Frame.Data.Data[r].Time)}}if(s){var o=new A;o.Value=s.Value,this.ShowText&&(o.Message[0]=s.Text),this.Frame.VerticalInfo.push(o),i=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=null,i=null,n=0,r=t,s=12;n<e&&r<this.Frame.Data.Data.length;++n,++r){var o=parseInt(this.Frame.Data.Data[r].Date/1e4),h=parseInt(this.Frame.Data.Data[r].Date/100)%100;if(s<12||null!=a&&a==o&&null!=i&&i==h)i=h,++s;else{var l,u=new A;u.Value=r-t,null==a||a!=o?l=o.toString():null!=i&&i==h||(l=h.toString()+"",l=de.GetText(l,this.LanguageID)),a=o,i=h,this.ShowText&&(u.Message[0]=l),this.Frame.VerticalInfo.push(u),s=0}}},this.Operator=function(){null!=this.Frame.Data&&(Tt.SplitCustom?Tt.SplitCustom(this):V.IsMinutePeriod(this.Period,!0)?this.SplitDateTime():this.SplitDate())},this.CreateCoordinateInfo=function(){return new A}}function Ft(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.YClose,this.Data,this.AverageData,this.SourceData,this.OverlayChartPaint,this.SplitCount=7,this.Symbol,this.SplitType=0,this.LimitPrice,this.Operator=function(){if(this.Frame.HorizontalInfo=[],this.Data){var t=this.GetMaxMin();this.Symbol&&we.IsUSA(this.Symbol.toUpperCase())?this.USASplit(t):this.DefaultSplit(t)}},this.GetMaxMin=function(){var t=this.YClose,e=this.YClose,a=this.Data,i=!1;for(var n in this.SourceData&&(a=this.SourceData,i=!0),a.Data){var r=null;if(i)r=(s=a.Data[n]).Before?s.Before.Close:s.Close;else r=a.Data[n];null!=r&&(t<r&&(t=r),e>r&&(e=r))}if(this.AverageData)for(var n in this.AverageData.Data)null!=this.AverageData.Data[n]&&(t<this.AverageData.Data[n]&&(t=this.AverageData.Data[n]),e>this.AverageData.Data[n]&&(e=this.AverageData.Data[n]));for(var n in this.OverlayChartPaint){var s,o=(s=this.OverlayChartPaint[n]).GetMaxMin();o.Max&&o.Max>t&&(t=o.Max),o.Min&&o.Min<e&&(e=o.Min)}return 1==this.SplitType&&this.LimitPrice&&(t<this.LimitPrice.Max&&(t=this.LimitPrice.Max),e>this.LimitPrice.Min&&(e=this.LimitPrice.Min)),{Max:t,Min:e}},this.USASplit=function(t){var e=t.Max,a=t.Min;if(e==a)e+=.1*e,a-=.1*a;else{var i=5*d()*(e-a)/this.Frame.ChartBorder.GetHeight();e+=i,a-=i}var n=this.SplitCount,r=(e-a)/(n-1);const s=[1,.1,.01,.001,1e-4];var o=Be(this.Symbol);r<s[o]&&(e=a+(r=s[o])*n);for(var h=0;h<n;++h){var l,u=a+r*h;if((l=new A).Value=u,this.IsShowLeftText&&(l.Message[0]=u.toFixed(o)),this.YClose){var c=100*(u/this.YClose-1);c>0?l.TextColor=fe.UpTextColor:c<0&&(l.TextColor=fe.DownTextColor),this.IsShowRightText&&(l.Message[1]=It.FormatValueString(c,2)+"%")}this.Frame.HorizontalInfo.push(l)}this.YClose>a&&this.YClose<e&&((l=new A).Value=this.YClose,this.Frame.HorizontalInfo.push(l));this.Frame.HorizontalInfo.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a},this.DefaultSplit=function(t){var e=t.Max,a=t.Min;if(this.YClose==e&&this.YClose==a)e=this.YClose+.1*this.YClose,a=this.YClose-.1*this.YClose;else{var i=Math.max(Math.abs(this.YClose-e),Math.abs(this.YClose-a));e=this.YClose+i,a=this.YClose-i}var n=d(),r=this.Frame.ChartBorder.GetChartWidth()<450*n;console.log("[FrameSplitMinutePriceY]max="+e+" min="+a+" isPhoneModel="+r);var s=this.SplitCount,o=(e-a)/(s-1);const h=[1,.1,.01,.001,1e-4];var l=Be(this.Symbol);r&&we.IsSHSZIndex(this.Symbol)&&(l=0),o<h[l]&&(o=h[l],e=this.YClose+o*(s-1)/2,a=this.YClose-o*(s-1)/2);for(var u=0;u<s;++u){var c=a+o*u;if(this.Frame.HorizontalInfo[u]=new A,this.Frame.HorizontalInfo[u].Value=c,this.IsShowLeftText&&(this.Frame.HorizontalInfo[u].Message[0]=c.toFixed(l)),c==this.YClose&&(this.Frame.HorizontalInfo[u].LineType=2,fe.FrameDotSplitPen&&(this.Frame.HorizontalInfo[u].LineColor=fe.FrameDotSplitPen)),this.YClose){var f=100*(c/this.YClose-1);f>0?this.Frame.HorizontalInfo[u].TextColor=fe.UpTextColor:f<0&&(this.Frame.HorizontalInfo[u].TextColor=fe.DownTextColor),this.IsShowRightText&&(this.Frame.HorizontalInfo[u].Message[1]=It.FormatValueString(f,2)+"%")}}this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a}}function Et(){this.newMethod=It,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol=null,this.DayCount=1,this.ShowDateFormate=1,this.IsBeforeData=!1,this.Operator=function(){this.Frame.VerticalInfo=[];this.Frame.XPointCount;var t=this.Frame.ChartBorder.GetWidth();!0===this.Frame.IsHScreen&&(t=this.Frame.ChartBorder.GetHeight()),t/=d();var e=Pe.GetCoordinateData(this.Symbol,t),a=e.Count,i=e.MiddleCount>0?e.MiddleCount:parseInt(a/2),n=e.Data;if(this.Frame.XPointCount=a*this.DayCount,this.Frame.MinuteCount=a,this.Frame.VerticalInfo=[],this.DayCount<=1){for(var r in this.IsBeforeData&&(this.Frame.XPointCount=a+14,this.Frame.MinuteCount=a+14),n){(o=new A).Value=n[r][0],this.IsBeforeData&&(o.Value+=14),this.ShowText&&(o.Message[0]=n[r][3]),this.Frame.VerticalInfo[r]=o}}else{r=this.DayData.length-1;for(var s=0;r>=0;--r,++s){var o;(o=new A).Value=s*a+i,o.LineType=-1,this.ShowText&&(o.Message[0]=It.FormatDateString(this.DayData[r].Date,0==this.ShowFormate?"YYYY-MM-DD":"MM-DD")),this.Frame.VerticalInfo.push(o),(o=new A).Value=(s+1)*a,this.Frame.VerticalInfo.push(o)}}}}function Lt(){this.Frame,this.Canvas,this.PenColor=fe.CorssCursorPenColor,this.Font=fe.CorssCursorTextFont,this.TextColor=fe.CorssCursorTextColor,this.TextBGColor=fe.CorssCursorBGColor,this.TextHeight=20,this.LastPoint,this.CursorIndex,this.IsOnlyDrawKLine=!1,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.ShowTextMode={Left:1,Right:1,Bottom:1},this.IsShowCorss=!0,this.IsShow=!0,this.IsShowClose=!1,this.Close=null,this.GetCloseYPoint=function(t){if(!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return i?(this.Close=i.Close,this.Frame.GetYFromData(this.Close)):null},this.Draw=function(){if(this.LastPoint){this.Close=null;var t,e=this.LastPoint.X,a=this.LastPoint.Y;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),t=this.Canvas.isPointInPath(e,a),this.PointY=null,this.PointY,t)if(!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetLeft(),n=this.Frame.ChartBorder.GetRight(),r=this.Frame.ChartBorder.GetTopTitle(),s=this.Frame.ChartBorder.GetBottom(),o=this.Frame.ChartBorder.Right,h=this.Frame.ChartBorder.GetChartWidth();if(this.IsOnlyDrawKLine&&(e=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose)){var l=this.GetCloseYPoint(this.CursorIndex);null!=l&&(a=l)}if(this.PointY=[[i,a],[n,a]],this.PointX=[[e,r],[e,s]],this.IsShowCorss){if(this.Canvas.save(),this.Canvas.strokeStyle=this.PenColor,this.Canvas.setLineDash([3,2]),this.Canvas.beginPath(),this.Canvas.moveTo(i,S(a)),this.Canvas.lineTo(n,S(a)),this.Frame.SubFrame.length>0)for(var u in this.Frame.SubFrame){r=(A=this.Frame.SubFrame[u].Frame).ChartBorder.GetTopTitle(),s=A.ChartBorder.GetBottom(),this.Canvas.moveTo(S(e),r),this.Canvas.lineTo(S(e),s)}else this.Canvas.moveTo(S(e),r),this.Canvas.lineTo(S(e),s);this.Canvas.stroke(),this.Canvas.restore()}var c=this.Frame.GetXData(e),f={},C=this.Frame.GetYData(a,f);if(this.IsShowClose&&null!=this.Close&&(C=this.Close),this.StringFormatX.Value=c,this.StringFormatY.Value=C,this.StringFormatY.FrameID=f.FrameID,(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Left>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Right>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var d=this.StringFormatY.Text;this.Canvas.font=this.Font;var D=this.Canvas.measureText(d).width+4;if(this.Frame.ChartBorder.Left>=30&&1==this.ShowTextMode.Left?(this.Canvas.fillStyle=this.TextBGColor,i<D?(this.Canvas.fillRect(2,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,4,a,D)):(this.Canvas.fillRect(i-2,a-this.TextHeight/2,-D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,i-4,a,D))):2==this.ShowTextMode.Left&&(this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(i,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,i+2,a,D)),this.StringFormatY.PercentageText&&(d=this.StringFormatY.PercentageText+"%",D=this.Canvas.measureText(d).width+4),this.Frame.ChartBorder.Right>=30&&1==this.ShowTextMode.Right){var p=!1,m=null;if(f.FrameID>=0)p=(A=this.Frame.SubFrame[f.FrameID]).OverlayIndex.length>0,m=A.Interval;if(this.Canvas.fillStyle=this.TextBGColor,p&&D>m){var v=n+m;v>h&&(v=h),this.Canvas.fillRect(v-2-D,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,v-4,a,D)}else o<D?(this.Canvas.fillRect(h-2-D,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,h-4,a,D)):(this.Canvas.fillRect(n+2,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,n+4,a,D))}else if(2==this.ShowTextMode.Right){this.Canvas.fillStyle=this.TextBGColor;var g=n-D;this.Canvas.fillRect(g,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,g+2,a,D)}}if(1==this.ShowTextMode.Bottom&&this.StringFormatX.Operator()){d=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;D=this.Canvas.measureText(d).width+4;var I=s+2+this.TextHeight/2;e-D/2<3?(this.Canvas.fillRect(e-1,s+2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,e+1,I,D)):e+D/2>=n?(this.Canvas.fillRect(n-D,s+2,D,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,n-2,I,D)):(this.Canvas.fillRect(e-D/2,s+2,D,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,e,I,D))}if(f.FrameID>=0){var A=this.Frame.SubFrame[f.FrameID],y=n;for(var u in this.Canvas.font=this.Font,A.OverlayIndex){var T=A.OverlayIndex[u];if(!1!==T.Frame.IsShow){if((y+=A.Interval)+30>h)break;for(C=T.Frame.GetYData(a),u=2;u>=0;--u){d=It.FormatValueString(C,u);if((D=this.Canvas.measureText(d).width+4)<A.Interval)break}this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(y+2,a-this.TextHeight/2,D,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(d,y+4,a,D)}}}}else this.HScreenDraw()}},this.HScreenDraw=function(){var t=this.LastPoint.X,e=this.LastPoint.Y;this.IsOnlyDrawKLine&&(e=this.Frame.GetXFromIndex(this.CursorIndex));var a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetRightEx(),n=this.Frame.ChartBorder.GetTop(),r=this.Frame.ChartBorder.GetBottom(),s=this.Frame.ChartBorder.Bottom;if(this.PointY=[[a,e],[i,e]],this.PointX=[[t,n],[t,r]],this.IsShowCorss){if(this.Canvas.save(),this.Canvas.strokeStyle=this.PenColor,this.Canvas.setLineDash([3,2]),this.Canvas.beginPath(),this.Canvas.moveTo(S(t),n),this.Canvas.lineTo(S(t),r),this.Frame.SubFrame.length>0)for(var o in this.Frame.SubFrame){var h=this.Frame.SubFrame[o].Frame;this.Canvas.moveTo(h.ChartBorder.GetLeft(),S(e)),this.Canvas.lineTo(h.ChartBorder.GetRightTitle(),S(e))}else this.Canvas.moveTo(a,S(e)),this.Canvas.lineTo(i,S(e));this.Canvas.stroke(),this.Canvas.restore()}var l=this.Frame.GetXData(e),u={},c=this.Frame.GetYData(t,u);if(this.StringFormatX.Value=l,this.StringFormatY.Value=c,this.StringFormatY.FrameID=u.FrameID,(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Top>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Bottom>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var f=this.StringFormatY.Text;this.Canvas.font=this.Font;var C=this.Canvas.measureText(f).width+4;if(this.Frame.ChartBorder.Top>=30&&1==this.ShowTextMode.Left){var d=t,D=n;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,n>=C?(this.Canvas.fillRect(0,-this.TextHeight/2,-C,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,-2,0,C)):(this.Canvas.fillRect(C-n,-this.TextHeight/2,-C,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,C-n-2,0,C)),this.Canvas.restore()}else if(2==this.ShowTextMode.Left){d=t,D=n;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,C,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,2,0,C),this.Canvas.restore()}if(this.Frame.ChartBorder.Bottom>=30&&1==this.ShowTextMode.Right){d=t,D=r;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,s>C?(this.Canvas.fillRect(0,-this.TextHeight/2,C,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,2,0,C)):(this.Canvas.fillRect(s-C,-this.TextHeight/2,C,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,s-C+2,0,C)),this.Canvas.restore()}else if(2==this.ShowTextMode.Right){d=t,D=r;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,-C,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,-2,0,C),this.Canvas.restore()}}if(1===this.ShowTextMode.Bottom&&this.StringFormatX.Operator()){f=this.StringFormatX.Text;if(this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor,e-(C=this.Canvas.measureText(f).width+4)/2<3){d=a,D=e;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(0,0,C,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,0,this.TextHeight/2,C),this.Canvas.restore()}else{d=a,D=e;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-C/2,0,C,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(f,0,this.TextHeight/2,C),this.Canvas.restore()}}}}function xt(){this.Frame,this.Canvas,this.Font=fe.DefaultTextFont,this.TextColor=fe.DefaultTextColor,this.IsEnableSplash=!1,this.SplashTitle="",this.Draw=function(){if(this.IsEnableSplash)if(!0!==this.Frame.IsHScreen){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,t,e)}else this.HScreenDraw()},this.HScreenDraw=function(){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.save(),this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,0,0),this.Canvas.restore()}}function Nt(){this.Data,this.Value,this.Text,this.Operator=function(){return!1}}function Ot(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.Symbol,this.FrameID,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.YClose,this.PercentageText,this.Operator=function(){if(!this.Value)return!1;this.PercentageText=null;var t=2;if(0==this.FrameID){t=Be(this.Symbol);this.Text=this.Value.toFixed(t),this.YClose>0&&(this.PercentageText=(100*(this.Value-this.YClose)/this.YClose).toFixed(2))}else this.Text=It.FormatValueString(this.Value,t,this.LanguageID);return!0}}function Mt(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.Operator=function(){if(!It.IsNumber(this.Value))return!1;if(!this.Data)return!1;var t=this.Value;if(t=parseInt(t.toFixed(0)),this.Data.DataOffset+t>=this.Data.Data.length)return!1;var e=this.Data.Data[this.Data.DataOffset+t];if(this.Text=It.FormatDateString(e.Date),V.IsMinutePeriod(this.Data.Period,!0)){var a=It.FormatTimeString(e.Time);this.Text=this.Text+"  "+a}else if(V.IsTickPeriod(this.Data.Period)){a=It.FormatTimeString(e.Time);this.Text=this.Text+"  "+a}return!0}}function wt(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.Frame,this.Symbol,this.IsBeforeData=!1,this.Operator=function(){if(null==this.Value||isNaN(this.Value))return!1;var t=Math.abs(this.Value),e=t=parseInt(t.toFixed(0));this.Frame&&this.Frame.MinuteCount&&(e=t%this.Frame.MinuteCount);var a=Re.GetTimeData(this.Symbol);if(!a)return!1;if(this.IsBeforeData){var i=[915,916,917,918,919,920,921,922,923,924,925,926,927,928,929];for(var n in a)925!=a[n]&&i.push(a[n]);a=i}e<0?e=0:e>a.length&&(e=a.length-1),this.Frame&&t>=this.Frame.XPointCount&&(e=a.length-1);var r=a[e];return this.Text=It.FormatTimeString(r),!0}}It.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var n="",r=t.toFixed(e);if(e>0){for(var s=r.split(".")[1],o=r.split(".")[0];o.length>3;)n=","+o.slice(-3)+n,o=o.slice(0,o.length-3);o&&(n=o+n+"."+s)}else{for(;r.length>3;)n=","+r.slice(-3)+n,r=r.slice(0,r.length-3);r&&(n=r+n)}return n},It.FormatValueString=function(t,e,a){if(null==t||isNaN(t)){if(e>0){for(var i="-.",n=0;n<e;++n)i+="-";return i}return"--"}if(t<1e-11&&t>-1e-11)return"0";var r=Math.abs(t);return a===Ce.LANGUAGE_ENGLISH_ID?r<1e4?t.toFixed(e):r<1e6?(t/1e3).toFixed(e)+"K":r<1e9?(t/1e6).toFixed(e)+"M":r<1e12?(t/1e9).toFixed(e)+"B":(t/1e12).toFixed(e)+"T":r<1e4?t.toFixed(e):r<1e8?(t/1e4).toFixed(e)+"":r<1e12?(t/1e8).toFixed(e)+"":(t/1e12).toFixed(e)+""},It.FromatIntegerString=function(t,e,a){return t<1e4&&It.IsInteger(t)&&(e=0),It.FormatValueString(t,e,a)},It.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},It.FormatDateString=function(t,e){var a=parseInt(t/1e4),i=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return It.NumberToString(i)+"-"+It.NumberToString(n);default:return a.toString()+"-"+It.NumberToString(i)+"-"+It.NumberToString(n)}},It.FormatTimeString=function(t){if(t<1e4){var e=parseInt(t/100),a=t%100;return It.NumberToString(e)+":"+It.NumberToString(a)}e=parseInt(t/1e4),a=parseInt(t%1e4/100);var i=t%100;return It.NumberToString(e)+":"+It.NumberToString(a)+":"+It.NumberToString(i)},It.FormatReportDateString=function(t){var e,a=parseInt(t/1e4);switch(parseInt(t/100)%100){case 3:e="";break;case 6:e="";break;case 9:e="";break;case 12:e=""}return a.toString()+e},It.FormatDateTimeString=function(t,e){var a=t.split(" ");if(a.length<2)return"";var i=parseInt(a[1]),n=i%100,r=parseInt(i/100),s=(r<10?"0"+r.toString():r.toString())+":"+(n<10?"0"+n.toString():n.toString());if(1==e){var o=parseInt(a[0]),h=parseInt(o/1e4),l=parseInt(o%1e4/100),u=o%100;s=h.toString()+"-"+(l<10?"0"+l.toString():l.toString())+"-"+(u<10?"0"+u.toString():u.toString())+" "+s}return s},It.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e?"PriceNull":t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},It.IsNumber=function(t){return null!=t&&!isNaN(t)},It.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},It.IsInteger=function(t){return"number"==typeof t&&t%1==0},It.IsObjectExist=function(t){return void 0!==t&&null!=t};var Rt=["","","","","","",""];function Pt(){this.Frame,this.Data=new Array,this.Canvas,this.IsDynamic=!1,this.Position=0,this.CursorIndex,this.Font=fe.TitleFont,this.Title,this.TitleColor=fe.DefaultTextColor}var bt=["","","","","1","5","15","30","60","","","2","4","","",""],Bt=["","",""];function _t(){this.newMethod=Pt,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsShow=!0,this.UpColor=fe.UpTextColor,this.DownColor=fe.DownTextColor,this.UnchagneColor=fe.UnchagneTextColor,this.VolColor=fe.DefaultTextColor,this.AmountColor=fe.DefaultTextColor,this.Symbol,this.Name,this.SpaceWidth=2*d(),this.OverlayChartPaint,this.IsShowName=!0,this.IsShowSettingInfo=!0,this.IsShowDateTime=!0,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.GetCurrentKLineData=function(){if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,n=(this.Frame.ChartBorder.GetRight(),Be(this.Symbol));if(e){if(this.Frame.ChartBorder.Right<5)return;a=2,i=this.Frame.ChartBorder.Right/2,this.Frame.ChartBorder.GetHeight();var r=this.Frame.ChartBorder.GetChartWidth(),s=this.Frame.ChartBorder.GetTop();this.Canvas.translate(r,s),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*d())return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o={Left:a,Bottom:i,IsHScreen:e};if(!this.IsShowName||this.DrawText(this.Name,this.UnchagneColor,o)){if(this.IsShowSettingInfo){this.Canvas.fillStyle=this.UnchagneColor;var h="",l="("+(h=this.Data.Period>U&&this.Data.Period<=W?this.Data.Period-U+de.GetText("",this.LanguageID):this.Data.Period>G&&this.Data.Period<=Y?this.Data.Period-G+de.GetText("",this.LanguageID):de.GetText(bt[this.Data.Period],this.LanguageID))+" "+de.GetText(Bt[this.Data.Right],this.LanguageID)+")",u=we.IsSHSZStockA(this.Symbol);if(null==t.Time&&u||(l="("+h+")"),!this.DrawText(l,this.UnchagneColor,o))return}if(this.IsShowDateTime){this.Canvas.fillStyle=this.UnchagneColor;l=It.FormatDateString(t.Date);if(!this.DrawText(l,this.UnchagneColor,o))return}if(null!=t.Time&&!isNaN(t.Time)&&t.Time>0){l=It.FormatTimeString(t.Time);if(!this.DrawText(l,this.UnchagneColor,o))return}var c=this.GetColor(t.Open,t.YClose);l=de.GetText("KTitle-Open",this.LanguageID)+t.Open.toFixed(n);if(this.DrawText(l,c,o)){c=this.GetColor(t.High,t.YClose),l=de.GetText("KTitle-High",this.LanguageID)+t.High.toFixed(n);if(this.DrawText(l,c,o)){c=this.GetColor(t.Low,t.YClose),l=de.GetText("KTitle-Low",this.LanguageID)+t.Low.toFixed(n);if(this.DrawText(l,c,o)){c=this.GetColor(t.Close,t.YClose),l=de.GetText("KTitle-Close",this.LanguageID)+t.Close.toFixed(n);if(this.DrawText(l,c,o)){var f=(t.Close-t.YClose)/t.YClose*100;c=this.GetColor(f,0),l=de.GetText("KTitle-Increase",this.LanguageID)+f.toFixed(2)+"%";if(this.DrawText(l,c,o)){l=de.GetText("KTitle-Vol",this.LanguageID)+It.FromatIntegerString(t.Vol,2,this.LanguageID);if(this.DrawText(l,this.VolColor,o)){if(It.IsNumber(t.Amount)){l=de.GetText("KTitle-Amount",this.LanguageID)+It.FormatValueString(t.Amount,2,this.LanguageID);if(!this.DrawText(l,this.AmountColor,o))return}if(we.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){f=t.Vol/t.FlowCapital*100,l=de.GetText("KTitle-Exchange",this.LanguageID)+It.FormatValueString(f,2,this.LanguageID)+"%";if(!this.DrawText(l,this.AmountColor,o))return}for(var C in this.OverlayChartPaint){if((t=this.OverlayChartPaint[C]).Symbol&&t.Title){var D=t.Title,p=t.Color;l="["+D+"]";if(!this.DrawText(l,p,o))return}}}}}}}}}},this.Draw=function(){if(this.IsShow&&null!=this.CursorIndex&&this.Data&&!(this.Data.length<=0)){this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),!(e<0)){var a=this.Data.Data[e];this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.DrawText=function(t,e,a){if(!t)return!0;var i=!0===this.Frame.IsHScreen,n=this.Frame.ChartBorder.GetRight();i&&(n=this.Frame.ChartBorder.GetHeight()),this.Canvas.fillStyle=e;var r=this.Canvas.measureText(t).width;return!(a.Left+r>n)&&(this.Canvas.fillText(t,a.Left,a.Bottom,r),a.Left+=r+this.SpaceWidth,!0)}}function Ht(){this.newMethod=_t,this.newMethod(),delete this.newMethod,this.SpaceWidth=1*d(),this.YClose,this.IsShowDate=!1,this.IsShowName=!0,this.OverlayChartPaint,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.LastShowData,this.GetCurrentKLineData=function(){if(this.LastShowData)return this.LastShowData;if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,n=(this.Frame.ChartBorder.GetRight(),Be(this.Symbol));if(e){if(this.Frame.ChartBorder.Right<5)return;a=2,i=this.Frame.ChartBorder.Right/2,this.Frame.ChartBorder.GetHeight();var r=this.Frame.ChartBorder.GetChartWidth(),s=this.Frame.ChartBorder.GetTop();this.Canvas.translate(r,s),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5)return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o={Left:a,Bottom:i,IsHScreen:e};if(!this.IsShowName||this.DrawText(this.Name,this.UnchagneColor,o)){var h=It.FormatDateTimeString(t.DateTime,this.IsShowDate);if(this.DrawText(h,this.UnchagneColor,o)){var l=t.Close,u=t.Increase,c=t.Vol,f=t.Amount;if(t.Before&&(l=t.Before.Close,u=t.Before.Increase,c=t.Before.Vol,f=t.Before.Amount),l){var C=this.GetColor(l,this.YClose);h=de.GetText("MTitle-Close",this.LanguageID)+l.toFixed(n);if(!this.DrawText(h,C,o))return}if(null!=u){C=this.GetColor(u,0),h=de.GetText("MTitle-Increase",this.LanguageID)+u.toFixed(2)+"%";if(!this.DrawText(h,C,o))return}if(t.AvPrice){C=this.GetColor(t.AvPrice,this.YClose),h=de.GetText("MTitle-AvPrice",this.LanguageID)+t.AvPrice.toFixed(n);if(!this.DrawText(h,C,o))return}h=de.GetText("MTitle-Vol",this.LanguageID)+It.FromatIntegerString(c,2);if(this.DrawText(h,this.VolColor,o)){if(It.IsNumber(f)){h=de.GetText("MTitle-Amount",this.LanguageID)+It.FormatValueString(f,2);if(!this.DrawText(h,this.AmountColor,o))return}for(var d in this.OverlayChartPaint){if((t=this.OverlayChartPaint[d]).Symbol&&t.Title){var D=t.Title,p=t.Color;h="["+D+"]";if(!this.DrawText(h,p,o))return}}}}}},this.Draw=function(){if(this.LastShowData=null,this.IsShow&&null!=this.CursorIndex&&this.Data&&this.Data.Data&&!(this.Data.Data.length<=0)){this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex,e=(t=parseInt(t.toFixed(0)))+this.Data.DataOffset;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);var a=this.Data.Data[e];this.LastShowData=a,this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}}}var kt={DEFAULT:1,ORIGINAL:2,INTEGER:3,THOUSANDS:21};function Vt(t,e,a){this.Data=t,this.Name=e,this.Color=a,this.DataType,this.StringFormat=kt.DEFAULT,this.FloatPrecision=2}function Gt(){this.newMethod=Pt,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.Data=new Array,this.Explain,this.ColorIndex,this.TradeIndex,this.OverlayIndex=new Map,this.LanguageID=Ce.LANGUAGE_CHINESE_ID,this.FormatValue=function(t,e){return e.StringFormat==kt.DEFAULT?It.FormatValueString(t,e.FloatPrecision,this.LanguageID):e.StringFormat==kt.THOUSANDS?It.FormatValueThousandsString(t,e.FloatPrecision):e.StringFormat==kt.ORIGINAL?t.toFixed(e.FloatPrecision).toString():e.StringFormat==kt.INTEGER?It.FromatIntegerString(t,e.FloatPrecision,this.LanguageID):void 0},this.FormatMultiReport=function(t,e){var a="";for(var i in t){var n=t[i];let r=n.Quarter,s=n.Year,o=n.Value;switch(a.length>0&&(a+=","),a+=s.toString(),r){case 1:a+=" ";break;case 2:a+=" ";break;case 3:a+=" ";break;case 4:a+=" "}a+=this.FormatValue(o,e)}return a},this.Draw=function(){if(null!=this.CursorIndex&&this.Data&&!(this.Frame.ChartBorder.TitleHeight<5)){if(!0===this.Frame.IsHScreen)return this.Canvas.save(),this.HScreenDraw(),void this.Canvas.restore();var t=this.Frame.ChartBorder.GetLeft()+1,e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font,this.Title){this.Canvas.fillStyle=this.TitleColor;var i=this.Canvas.measureText(this.Title).width+2;this.Canvas.fillText(this.Title,t,e,i),t+=i}var n=this.Frame.GetLockRect();if(n){var r=Math.abs(this.CursorIndex-.5);if(this.Frame.GetXFromIndex(r.toFixed(0))>=n.Left)return}for(var s in this.Data){var o=this.Data[s];if(o&&o.Data&&o.Data.Data&&o.Name&&!(o.Data.Data.length<=0)){var h=null,l=null;if("StraightLine"==o.DataType)h=o.Data.Data[0],l=this.FormatValue(h,o);else{r=Math.abs(this.CursorIndex-.5);r=parseInt(r.toFixed(0));var u=o.Data.DataOffset+r;if(u>=o.Data.Data.length&&(u=o.Data.Data.length-1),u<0)continue;if(null==(h=o.Data.Data[u]))continue;"HistoryData-Vol"==o.DataType?(h=h.Vol,l=this.FormatValue(h,o)):l="MultiReport"==o.DataType?this.FormatMultiReport(h,o):this.FormatValue(h,o)}this.Canvas.fillStyle=o.Color;var c=o.Name+":"+l;i=this.Canvas.measureText(c).width+2;this.Canvas.fillText(c,t,e,i),t+=i}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;c=":"+this.Explain;t+(i=this.Canvas.measureText(c).width+2)<a&&(this.Canvas.fillText(c,t,e,i),t+=i)}if(this.ColorIndex){this.Canvas.fillStyle="rgb(105,105,105)";i=this.Canvas.measureText(this.ColorIndex.Name).width+2;this.Canvas.fillText(this.ColorIndex.Name,t,e,i),t+=i}if(this.TradeIndex){this.Canvas.fillStyle="rgb(105,105,105)";i=this.Canvas.measureText(this.TradeIndex.Name).width+2;this.Canvas.fillText(this.TradeIndex.Name,t,e,i),t+=i}this.DrawOverlayIndex(t+10*d())}},this.DrawOverlayIndex=function(t){var e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(!0===this.Frame.IsHScreen&&(e=-this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetHeight()),!(t>a)){var i=5*d(),n=t;for(o of this.OverlayIndex){t+=i;var r=o[1];if(r.Title){if(this.Canvas.fillStyle=this.TitleColor,n=t,(t+=f=this.Canvas.measureText(r.Title).width+2)>a)break;this.Canvas.fillText(r.Title,n,e,f)}for(var s in r.Data){var o=r.Data[s];if(o&&o.Data&&o.Data.Data&&o.Name&&!(o.Data.Data.length<=0)){var h=null,l=null;if("StraightLine"==o.DataType)h=o.Data.Data[0],l=this.FormatValue(h,o);else{var u=Math.abs(this.CursorIndex-.5);u=parseInt(u.toFixed(0));var c=o.Data.DataOffset+u;if(c>=o.Data.Data.length&&(c=o.Data.Data.length-1),c<0)continue;if(null==(h=o.Data.Data[c]))continue;"HistoryData-Vol"==o.DataType?(h=h.Vol,l=this.FormatValue(h,o)):l="MultiReport"==o.DataType?this.FormatMultiReport(h,o):this.FormatValue(h,o)}this.Canvas.fillStyle=o.Color;var f,C=o.Name+":"+l;if(n=t,(t+=f=this.Canvas.measureText(C).width+2)>a)break;this.Canvas.fillText(C,n,e,f)}}if(t>a)break}}},this.HScreenDraw=function(){var t=this.Frame.ChartBorder.GetRightTitle(),e=this.Frame.ChartBorder.GetTop();this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180);var a=1,i=-this.Frame.ChartBorder.TitleHeight/2,n=this.Frame.ChartBorder.GetHeight();if(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font,this.Title){this.Canvas.fillStyle=this.TitleColor;var r=this.Canvas.measureText(this.Title).width+2;this.Canvas.fillText(this.Title,a,i,r),a+=r}var s=this.Frame.GetLockRect();if(s){var o=Math.abs(this.CursorIndex-.5);if(this.Frame.GetXFromIndex(o.toFixed(0))>=s.Top)return}for(var h in this.Data){var l=this.Data[h];if(l&&l.Data&&l.Data.Data&&l.Name&&!(l.Data.Data.length<=0)){var u=null,c=null;if("StraightLine"==l.DataType)u=l.Data.Data[0],c=this.FormatValue(u,l);else{o=Math.abs(this.CursorIndex-.5);o=parseInt(o.toFixed(0));var f=l.Data.DataOffset+o;if(f>=l.Data.Data.length&&(f=l.Data.Data.length-1),f<0)continue;if(null==(u=l.Data.Data[f]))continue;"HistoryData-Vol"==l.DataType?(u=u.Vol,c=this.FormatValue(u,l)):c="MultiReport"==l.DataType?this.FormatMultiReport(u,l):this.FormatValue(u,l)}this.Canvas.fillStyle=l.Color;var C=l.Name+":"+c;r=this.Canvas.measureText(C).width+2;this.Canvas.fillText(C,a,i,r),a+=r}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;C=":"+this.Explain;a+(r=this.Canvas.measureText(C).width+2)<n&&(this.Canvas.fillText(C,a,i,r),a+=r)}this.DrawOverlayIndex(a+5*d())}}function Yt(){this.Frame,this.Canvas,this.Point=new Array,this.Value=new Array,this.LinePoint=[],this.PointCount=2,this.Status=0,this.PointStatus=0,this.MovePointIndex=null,this.ClassName="IChartDrawPicture",this.FinishedCallback,this.Guid=m(),this.Symbol,this.Period,this.LineColor="#1e90ff",this.AreaColor="rgba(25,25,25,0.4)",this.PointColor=fe.DrawPicture.PointColor[0],this.SetLastPoint=null,this.Update=null,this.Draw=function(){},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;for(var e in this.Point){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.X))+t.DataOffset,n=this.Frame.GetYData(a.Y);this.Value[e]={},this.Value[e].XValue=i,this.Value[e].YValue=n}return!0},this.IsPointIn=function(t,e){return!1},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;for(var e in this.Point=[],this.Value){var a=this.Value[e],i=new I;i.X=this.Frame.GetXFromIndex(a.XValue-t.DataOffset),i.Y=this.Frame.GetYFromData(a.YValue),this.Point[e]=i}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(null==this.MovePointIndex)return!1;var a=parseInt(this.MovePointIndex);if(100===a)for(var i in this.Point)this.Point[i].X+=t,this.Point[i].Y+=e;else{if(0!==a&&1!==a&&2!==a&&3!==a&&4!==a&&5!==a)return!1;a<this.Point.length&&(this.Point[a].X+=t,this.Point[a].Y+=e)}},this.ClipFrame=function(){var t=this.Frame.ChartBorder.GetLeft(),e=this.Frame.ChartBorder.GetTopEx(),a=this.Frame.ChartBorder.GetWidth(),i=this.Frame.ChartBorder.GetHeightEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(t,e,a,i),this.Canvas.clip()},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=new Array;if(10==this.Status){var a=this.Frame.Data;if(!a)return null;var i=this.Frame.XPointCount,n=0;for(var r in this.Value){var s=this.Value[r],o=s.XValue-a.DataOffset;(o<0||o>=i)&&++n;var h=new I;h.X=this.Frame.GetXFromIndex(s.XValue-a.DataOffset,!1),h.Y=this.Frame.GetYFromData(s.YValue,!1),e.push(h)}if(t&&!0===t.IsCheckX&&n==this.Value.length)return null}else e=this.Point;return e},this.IsYValueInFrame=function(t){return!!this.Frame&&!(t>this.Frame.HorizontalMax||t<this.Frame.HorizontalMin)},this.DrawPoint=function(t){if(t&&!(t.length<=0)){for(var e in this.ClipFrame(),t){var a=t[e];this.Canvas.beginPath(),this.Canvas.arc(a.X,a.Y,5,0,360,!1),this.Canvas.fillStyle=this.PointColor,this.Canvas.fill(),this.Canvas.closePath()}this.Canvas.restore()}},this.CalculateExtendLinePoint=function(t,e){var a={},i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetTopEx()),n=this.Frame.ChartBorder.GetBottom(),r=e.X-t.X,s=e.Y-t.Y;if(r>0){var o=r*(l=n-t.Y)/s;(h=new I).X=t.X+o,h.Y=n,a.End=h;o=r*(l=e.Y-i)/s;(u=new I).Y=i,u.X=e.X-o,a.Start=u}else{var h,l=n-t.Y;o=Math.abs(r)*l/s;(h=new I).X=t.X-o,h.Y=n,a.End=h;var u;l=e.Y-i,o=Math.abs(r)*l/s;(u=new I).Y=i,u.X=e.X+o,a.Start=u}return a},this.IsPointInXYValue=function(t,e){if(!this.Frame)return-1;var a=this.Frame.Data;if(!a)return-1;if(!this.Value)return-1;for(var i=0;i<this.Value.length;++i){var n=this.Value[i],r=new I;if(r.X=this.Frame.GetXFromIndex(n.XValue-a.DataOffset),r.Y=this.Frame.GetYFromData(n.YValue),this.Canvas.beginPath(),this.Canvas.arc(r.X,r.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}return-1},this.IsPointInLine=function(t,e){if(!this.LinePoint)return-1;for(var a in this.LinePoint){var i=this.LinePoint[a],n=i.Start,r=i.End;if(this.Canvas.beginPath(),n.X==r.X?(this.Canvas.moveTo(n.X-5,n.Y),this.Canvas.lineTo(n.X+5,n.Y),this.Canvas.lineTo(r.X+5,r.Y),this.Canvas.lineTo(r.X-5,r.Y)):(this.Canvas.moveTo(n.X,n.Y+5),this.Canvas.lineTo(n.X,n.Y-5),this.Canvas.lineTo(r.X,r.Y-5),this.Canvas.lineTo(r.X,r.Y+5)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a}return-1},this.IsPointIn_XYValue_Line=function(t,e){if(10!=this.Status)return-1;var a=this.IsPointInXYValue(t,e);return a>=0?a:(a=this.IsPointInLine(t,e))>=0?100:-1},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.CreateLineData=function(t,e){var a={Start:new I,End:new I};return a.Start.Y=t.Y,a.Start.X=t.X,a.End.Y=e.Y,a.End.X=e.X,a},this.ExportStorageData=function(){var t={ClassName:this.ClassName,Symbol:this.Symbol,Guid:this.Guid,Period:this.Period,Value:[],FrameID:this.Frame.Identify,LineColor:this.LineColor,AreaColor:this.AreaColor};for(var e in this.Value){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption=this.FontOption),t}}function Ut(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}function Wt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHaflLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){var e=t[0],a=t[1];this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y);var i=this.CalculateEndPoint(t);this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke();var n={Start:e,End:a};this.LinePoint.push(n),this.DrawPoint(t),this.Canvas.restore()}},this.CalculateEndPoint=function(t){var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=t[1].X-t[0].X,n=t[1].Y-t[0].Y;if(i>0){var r=(a-t[0].X)*n/i+t[0].Y;return(s=new I).X=a,s.Y=r,s}var s;r=(t[0].X-e)*n/Math.abs(i)+t[0].Y;return(s=new I).X=e,s.Y=r,s}}function Xt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.PointCount=1,this.ClassName="ChartDrawPictureHorizontalLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=16*d()+"px ",this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight();this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,t[0].Y),this.Canvas.lineTo(a,t[0].Y),this.Canvas.stroke();var i={Start:new I,End:new I};i.Start.X=e,i.Start.Y=t[0].Y,i.End.X=a,i.End.Y=t[0].Y,this.LinePoint.push(i);var n=this.Frame.GetYData(t[0].Y);this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="let",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(n.toFixed(2),e,t[0].Y),this.DrawPoint(t),this.Canvas.restore()}}}function Jt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTrendLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){var e=t[0],a=t[1],i=this.CalculateExtendLinePoint(e,a);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(i.Start.X,i.Start.Y),this.Canvas.lineTo(i.End.X,i.End.Y),this.Canvas.stroke();var n={Start:e,End:a};this.LinePoint.push(n),this.DrawPoint(t),this.Canvas.restore()}}}function Kt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureRect",this.Draw=function(){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});t&&2==t.length&&(this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.fillRect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.restore(),this.DrawPoint(t))},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;var i=new Array;for(var n in this.Value){var r=this.Value[n],s=new I;if(s.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),s.Y=this.Frame.GetYFromData(r.YValue),this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,5,0,360),this.Canvas.isPointInPath(t,e))return n;i.push(s)}var o=[{X:i[0].X,Y:i[0].Y},{X:i[1].X,Y:i[0].Y}];return this.IsPointInLine(o,t,e)?100:(o=[{X:i[1].X,Y:i[0].Y},{X:i[1].X,Y:i[1].Y}],this.IsPointInLine2(o,t,e)?100:(o=[{X:i[1].X,Y:i[1].Y},{X:i[0].X,Y:i[1].Y}],this.IsPointInLine(o,t,e)?100:(o=[{X:i[0].X,Y:i[1].Y},{X:i[0].X,Y:i[0].Y}],this.IsPointInLine2(o,t,e)?100:-1)))},this.IsPointInLine=function(t,e,a){if(this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y+5),this.Canvas.lineTo(t[0].X,t[0].Y-5),this.Canvas.lineTo(t[1].X,t[1].Y-5),this.Canvas.lineTo(t[1].X,t[1].Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0},this.IsPointInLine2=function(t,e,a){if(this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X-5,t[0].Y),this.Canvas.lineTo(t[0].X+5,t[0].Y),this.Canvas.lineTo(t[1].X+5,t[1].Y),this.Canvas.lineTo(t[1].X-5,t[1].Y),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0}}function qt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureArc",this.Draw=function(){var t=this.CalculateDrawPoint();if(t&&2==t.length){if(this.ClipFrame(),t[0].X<t[1].X&&t[0].Y>t[1].Y){var e=(s=t[1].X-t[0].X)>(o=t[0].Y-t[1].Y)?1/s:1/o,a=t[0].X,i=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var n=1.5*Math.PI;n<2*Math.PI;n+=e)this.Canvas.lineTo(a+s*Math.cos(n),i+o*Math.sin(n)*-1);for(var r=0;r<=.5*Math.PI;r+=e)this.Canvas.lineTo(a+s*Math.cos(r),i+o*Math.sin(r)*-1)}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){e=(s=t[0].X-t[1].X)>(o=t[0].Y-t[1].Y)?1/s:1/o,a=t[1].X,i=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(n=0;n<=Math.PI;n+=e)this.Canvas.lineTo(a+s*Math.cos(n),i+o*Math.sin(n)*-1)}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){e=(s=t[0].X-t[1].X)>(o=t[1].Y-t[0].Y)?1/s:1/o,a=t[0].X,i=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(n=.5*Math.PI;n<=1.5*Math.PI;n+=e)this.Canvas.lineTo(a+s*Math.cos(n),i+o*Math.sin(n)*-1)}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var s,o;e=(s=t[1].X-t[0].X)>(o=t[1].Y-t[0].Y)?1/s:1/o,a=t[1].X,i=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(n=Math.PI;n<=2*Math.PI;n+=e)this.Canvas.lineTo(a+s*Math.cos(n),i+o*Math.sin(n)*-1)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.Canvas.restore(),this.DrawPoint(t)}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;var i=new Array;for(var n in this.Value){var r=this.Value[n],s=new I;if(s.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),s.Y=this.Frame.GetYFromData(r.YValue),this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,5,0,360),this.Canvas.isPointInPath(t,e))return n;i.push(s)}var o=[{X:i[0].X,Y:i[0].Y},{X:i[1].X,Y:i[1].Y}];return this.IsPointInArc(o,t,e)?100:-1},this.IsPointInArc=function(t,e,a){if(2!=t.length)return!1;if(t[0].X<t[1].X&&t[0].Y>t[1].Y){var i=(c=t[1].X-t[0].X)>(f=t[0].Y-t[1].Y)?1/c:1/f,n=(C=.8*c)>(d=.8*f)?1/C:1/d,r=t[0].X,s=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=1.5*Math.PI;o<2*Math.PI;o+=i)this.Canvas.lineTo(r+c*Math.cos(o),s+f*Math.sin(o)*-1);for(var h=0;h<=.5*Math.PI;h+=i)this.Canvas.lineTo(r+c*Math.cos(h),s+f*Math.sin(h)*-1);for(var l=.5*Math.PI;l>=0;l-=n)this.Canvas.lineTo(r+C*Math.cos(l),s+d*Math.sin(h)*-1);for(var u=2*Math.PI;u>=1.5*Math.PI;u-=n)this.Canvas.lineTo(r+C*Math.cos(u),s+d*Math.sin(u)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){i=(c=t[0].X-t[1].X)>(f=t[0].Y-t[1].Y)?1/c:1/f,n=(C=.8*c)>(d=.8*f)?1/C:1/d,r=t[1].X,s=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(o=0;o<=Math.PI;o+=i)this.Canvas.lineTo(r+c*Math.cos(o),s+f*Math.sin(o)*-1);for(h=Math.PI;h>=0;h-=n)this.Canvas.lineTo(r+C*Math.cos(h),s+d*Math.sin(h)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){i=(c=t[0].X-t[1].X)>(f=t[1].Y-t[0].Y)?1/c:1/f,n=(C=.8*c)>(d=.8*f)?1/C:1/d,r=t[0].X,s=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(o=.5*Math.PI;o<=1.5*Math.PI;o+=i)this.Canvas.lineTo(r+c*Math.cos(o),s+f*Math.sin(o)*-1);for(h=1.5*Math.PI;h>=.5*Math.PI;h-=n)this.Canvas.lineTo(r+C*Math.cos(h),s+d*Math.sin(h)*-1);this.Canvas.closePath()}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var c,f,C,d;i=(c=t[1].X-t[0].X)>(f=t[1].Y-t[0].Y)?1/c:1/f,n=(C=.8*c)>(d=.8*f)?1/C:1/d,r=t[1].X,s=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(o=Math.PI;o<=2*Math.PI;o+=i)this.Canvas.lineTo(r+c*Math.cos(o),s+f*Math.sin(o)*-1);for(h=2*Math.PI;h>=Math.PI;h-=n)this.Canvas.lineTo(r+C*Math.cos(h),s+d*Math.sin(h)*-1);this.Canvas.closePath()}return!!this.Canvas.isPointInPath(e,a)}}function zt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveMW",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawPoint(t),this.Canvas.restore()}},this.CalculateLines=function(t){if(this.Frame&&!(t.length<2))if(2==this.Status){(n={Start:new I,End:new I}).Start.Y=t[0].Y,n.Start.X=t[0].X,n.End.Y=t[1].Y,n.End.X=t[1].X,this.LinePoint.push(n);var e=t[1].X-t[0].X;(n={Start:new I,End:new I}).Start.Y=t[1].Y,n.Start.X=t[1].X,n.End.Y=t[0].Y,n.End.X=t[1].X+e,this.LinePoint.push(n);var a=n.End;(i=new I).X=a.X,i.Y=a.Y,this.Point[2]=i,(n={Start:new I,End:new I}).Start.Y=a.Y,n.Start.X=a.X,n.End.Y=t[1].Y,n.End.X=a.X+e,this.LinePoint.push(n);a=n.End;(i=new I).X=a.X,i.Y=a.Y,this.Point[3]=i,(n={Start:new I,End:new I}).Start.Y=a.Y,n.Start.X=a.X,n.End.Y=t[0].Y,n.End.X=a.X+e,this.LinePoint.push(n);var i;a=n.End;(i=new I).X=a.X,i.Y=a.Y,this.Point[4]=i,this.PointCount=this.Point.length}else if(5==t.length){var n;(n={Start:new I,End:new I}).Start.Y=t[0].Y,n.Start.X=t[0].X,n.End.Y=t[1].Y,n.End.X=t[1].X,this.LinePoint.push(n),(n={Start:new I,End:new I}).Start.Y=t[1].Y,n.Start.X=t[1].X,n.End.Y=t[2].Y,n.End.X=t[2].X,this.LinePoint.push(n),(n={Start:new I,End:new I}).Start.Y=t[2].Y,n.Start.X=t[2].X,n.End.Y=t[3].Y,n.End.X=t[3].X,this.LinePoint.push(n),(n={Start:new I,End:new I}).Start.Y=t[3].Y,n.Start.X=t[3].X,n.End.Y=t[4].Y,n.End.X=t[4].X,this.LinePoint.push(n)}}}function jt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelLines",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new I;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,n=t[2].Y-t[1].Y,r=new I,s=new I;r.X=t[0].X+i,r.Y=t[0].Y+n,s.X=t[1].X+i,s.Y=t[1].Y+n,a=this.CalculateExtendLinePoint(r,s),this.LinePoint.push(a)}}}function $t(){this.newMethod=jt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePriceChannel",this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new I;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,n=t[2].Y-t[1].Y,r=new I,s=new I;r.X=t[0].X+i,r.Y=t[0].Y+n,s.X=t[1].X+i,s.Y=t[1].Y+n,a=this.CalculateExtendLinePoint(r,s),this.LinePoint.push(a);r=new I,s=new I;r.X=t[0].X-i,r.Y=t[0].Y-n,s.X=t[1].X-i,s.Y=t[1].Y-n,a=this.CalculateExtendLinePoint(r,s),this.LinePoint.push(a)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.lineTo(this.LinePoint[2].Start.X,this.LinePoint[2].Start.Y),this.Canvas.closePath(),this.Canvas.fill())}}function Zt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelChannel",this.ChannelWidth=50,this.AreaColor="rgba(25,25,25,0.4)",this.LinePoint=[],this.CalculateDrawPoint=function(){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=[];if(10==this.Status)for(var a=0;a<2;++a){var i=this.Value[a];(n=new I).X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset),n.Y=this.Frame.GetYFromData(i.YValue),e.push(n)}else for(a=0;a<this.Point.length;++a){var n;i=this.Point[a];(n=new I).X=i.X,n.Y=i.Y,e.push(n)}if(e.length>=2){var r={Start:new I,End:new I};if(r.Start.X=e[0].X,r.Start.Y=e[0].Y,r.End.X=e[1].X,r.End.Y=e[1].Y,this.LinePoint.push(r),3==e.length||10==this.Status){var s=r.End.X-r.Start.X,o=r.End.Y-r.Start.Y,h=Math.atan(Math.abs(s/o)),l=this.ChannelWidth/Math.sin(h);(r={Start:new I,End:new I}).Start.X=e[0].X,r.Start.Y=e[0].Y-l,r.End.X=e[1].X,r.End.Y=e[1].Y-l,this.LinePoint.push(r);var u=new I;u.X=r.Start.X+(r.End.X-r.Start.X)/2,u.Y=r.Start.Y+(r.End.Y-r.Start.Y)/2,e[3]=u,this.Point[2]=u;var c=parseInt(this.Frame.GetXData(u.X))+t.DataOffset,f=this.Frame.GetYData(u.Y);this.Value[2]={XValue:c,YValue:f},this.PointCount=this.Point.length}}return e},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawArea=function(t,e,a,i){this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.closePath(),this.Canvas.fill()},this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint();if(t){for(var e in this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}2==this.LinePoint.length&&this.DrawArea(this.LinePoint[0].Start,this.LinePoint[0].End,this.LinePoint[1].End,this.LinePoint[1].Start),this.Canvas.restore(),this.DrawPoint(t)}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(100==this.MovePointIndex)for(var a in this.Point)this.Point[a].X+=t,this.Point[a].Y+=e;else if(0==this.MovePointIndex||1==this.MovePointIndex)this.MovePointIndex<this.Point.length&&(this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e);else if(2==this.MovePointIndex){this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e;var i=this.Point[1].X-this.Point[0].X,n=this.Point[1].Y-this.Point[0].Y,r=Math.atan(Math.abs(i/n)),s=this.ChannelWidth/Math.sin(r)-e;this.ChannelWidth=Math.sin(r)*s}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;for(var i=0;i<this.Value.length;++i){var n=this.Value[i],r=new I;if(i<2)r.X=this.Frame.GetXFromIndex(n.XValue-a.DataOffset),r.Y=this.Frame.GetYFromData(n.YValue);else{if(i>=this.Point.length)continue;r.X=this.Point[i].X,r.Y=this.Point[i].Y}if(this.Canvas.beginPath(),this.Canvas.arc(r.X,r.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}for(var i in this.LinePoint){var s=(n=this.LinePoint[i]).Start,o=n.End;if(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y+5),this.Canvas.lineTo(s.X,s.Y-5),this.Canvas.lineTo(o.X,o.Y-5),this.Canvas.lineTo(o.X,o.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return 100}return-1}}function Qt(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureText",this.Text="",this.PointCount=1,this.FontOption={Family:"",Size:20,Weight:null,Style:null},this.TextRect=null,this.IsInitialized=!1,this.SettingMenu,this.HQChart,this.Draw=function(t){this.TextRect=null;var e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=this.GetTextFont(),this.Canvas.fillText(this.Text,e[0].X,e[0].Y);var a=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=e[0].X-a/2,this.TextRect.Top=e[0].Y-this.FontOption.Size,this.TextRect.Width=a,this.TextRect.Height=this.FontOption.Size,this.Canvas.restore(),!1===this.IsInitialized&&(this.SetTextOption(),this.IsInitialized=!0)}},this.GetTextFont=function(){const t=16*d()+"px ";if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return t;var e="";return this.FontOption.Color&&(e+=this.FontOption.Color+" "),this.FontOption.Style&&(e+=this.FontOption.Style+" "),this.FontOption.Weight&&(e+=this.FontOption.Weight+" "),this.FontOption.Size>=0&&(e+=this.FontOption.Size*d()+"px "),e+=this.FontOption.Family},this.SetTextOption=function(){console.log("[ChartDrawPictureText::SetTextOption]"),this.SettingMenu||(this.SettingMenu=new Me(this.Frame.ChartBorder.UIElement.parentNode)),this.SettingMenu.ChartPicture=this,this.SettingMenu.HQChart=this.HQChart,this.SettingMenu.Position={Left:this.TextRect.Left+this.TextRect.Width,Top:this.TextRect.Top},this.SettingMenu.DoModal()},this.IsPointIn=function(t,e){return this.Frame&&10==this.Status&&this.Frame.Data&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}function te(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureIconFont",this.PointCount=1,this.Text="",this.FontOption={Family:"iconfont",Size:24},this.TextRect=null,this.SettingMenu,this.Draw=function(){this.TextRect=null;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=e,this.Canvas.fillText(this.Text,t[0].X,t[0].Y);var a=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-a/2,this.TextRect.Top=t[0].Y-this.FontOption.Size,this.TextRect.Width=a,this.TextRect.Height=this.FontOption.Size,this.Canvas.restore()}}},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*d()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){return this.Frame&&10==this.Status&&this.Frame.Data&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}function ee(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFan",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LinePoint=[],this.Font=16*d()+"px ",this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=this.GetQuadrant(t[0],t[1]);if(1===e||4===e){for(var a in this.CalculateLines(t[0],t[1],e),this.DrawArea(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End,i.IsDottedLine)}for(var a in this.LinePoint){(i=this.LinePoint[a]).Text&&i.PtEnd&&this.DrawTitle(i.PtEnd,i.Text)}}else this.DrawLine(t[0],t[1],!1);this.Canvas.restore(),this.DrawPoint(t)}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X<e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:8"==i.Text?t=this.LinePoint[a]:"8:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();const i=[.5,1/3,.25,.125,2/3],n=["1:2","1:3","1:4","1:8","2:3"],r=["2:1","3:1","4:1","8:1","3:2"];var s=new I,o=new I;s.X=t.X,s.Y=t.Y,o.X=e.X,o.Y=e.Y;var h=Math.abs(t.X-e.X),l=Math.abs(t.Y-e.Y);if(1===a){var u={Start:s,End:(f=this.CalculateExtendLinePoint(t,e)).Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var c in this.LinePoint.push(u),i){if(h>5){(u={Start:s,End:null,IsDottedLine:!1,PtEnd:new I,Text:n[c]}).PtEnd.Y=e.Y,u.PtEnd.X=t.X+h*i[c];var f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.Start,this.LinePoint.push(u)}if(l>5){(u={Start:s,End:null,IsDottedLine:!1,PtEnd:new I,Text:r[c]}).PtEnd.Y=t.Y-l*i[c],u.PtEnd.X=e.X;f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.Start,this.LinePoint.push(u)}}}else{if(4!=a)return!1;u={Start:s,End:(f=this.CalculateExtendLinePoint(t,e)).End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};for(var c in this.LinePoint.push(u),i){if(h>5){(u={Start:s,End:null,IsDottedLine:!1,PtEnd:new I,Text:n[c]}).PtEnd.Y=e.Y,u.PtEnd.X=t.X+h*i[c];f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.End,this.LinePoint.push(u)}if(l>5){(u={Start:s,End:null,IsDottedLine:!1,PtEnd:new I,Text:r[c]}).PtEnd.Y=t.Y+l*i[c],u.PtEnd.X=e.X;f=this.CalculateExtendLinePoint(u.Start,u.PtEnd);u.End=f.End,this.LinePoint.push(u)}}}return!0}}function ae(){this.newMethod=ee,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLine",this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom();const i=[1/3,2/3],n=["3:1","3:2"];var r=new I,s=new I;r.X=t.X,r.Y=t.Y,s.X=e.X,s.Y=e.Y;Math.abs(t.X-e.X);var o=Math.abs(t.Y-e.Y);if(1===a){var h={Start:r,End:(u=this.CalculateExtendLinePoint(t,e)).Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var l in this.LinePoint.push(h),i)if(o>5){(h={Start:r,End:null,IsDottedLine:!1,PtEnd:new I,Text:n[l]}).PtEnd.Y=t.Y-o*i[l],h.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=u.Start,this.LinePoint.push(h)}}else{if(4!=a)return!1;h={Start:r,End:(u=this.CalculateExtendLinePoint(t,e)).End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};for(var l in this.LinePoint.push(h),i)if(o>5){(h={Start:r,End:null,IsDottedLine:!1,PtEnd:new I,Text:n[l]}).PtEnd.Y=t.Y+o*i[l],h.PtEnd.X=e.X;u=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=u.End,this.LinePoint.push(h)}}return!0},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:1"==i.Text?t=this.LinePoint[a]:"3:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())}}function ie(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGoldenSectionLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=14*d()+"px ",this.GetSectionData=function(){return[0,.236,.382,.5,.618,.8,1,1.236,1.382,1.5,1.618,1.8,2]},this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint();if(t&&2==t.length){for(var e in this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.CalculateLines(t[0],t[1]),this.ClipFrame(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End,a.IsDottedLine)}for(var e in this.LinePoint){(a=this.LinePoint[e]).Text&&this.DrawTitle(a.Start,a.Text)}this.DrawPoint(t),this.Canvas.restore()}},this.CalculateLines=function(t,e){for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetLeft(),n=this.Frame.ChartBorder.GetRight(),r=t.Y-e.Y,s=0;s<a.length;++s){var o=r*a[s],h={Start:new I,End:new I};h.Start.Y=t.Y-o,h.Start.X=i,h.End.Y=t.Y-o,h.End.X=n;var l="";l=0==s?"Base ":(100*a[s]).toFixed(2)+"% ",l+=this.Frame.GetYData(h.Start.Y).toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)}}function ne(){this.newMethod=ie,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePercentage",this.GetSectionData=function(){return[0,.25,.333,.5,1]}}function re(){this.newMethod=ie,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveBand",this.GetSectionData=function(){return[0,.125,.25,.375,.5,.625,.75,.875,1]}}function se(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTriangle",this.PointCount=3,this.Font=16*d()+"px ",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LastPoint,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){var e=t.slice(0);for(var a in this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(e),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(e),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}},this.DrawArea=function(t){3==t.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y),this.Canvas.lineTo(t[2].X,t[2].Y),this.Canvas.lineTo(t[0].X,t[0].Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new I;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2===t.length)(a={Start:new I,End:new I}).Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a);else if(3===t.length){var a;(a={Start:new I,End:new I}).Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a),(a={Start:new I,End:new I}).Start.Y=t[1].Y,a.Start.X=t[1].X,a.End.Y=t[2].Y,a.End.X=t[2].X,this.LinePoint.push(a),(a={Start:new I,End:new I}).Start.Y=t[2].Y,a.Start.X=t[2].X,a.End.Y=t[0].Y,a.End.X=t[0].X,this.LinePoint.push(a)}}}function oe(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureSymmetryAngle",this.PointCount=2,this.Font=16*d()+"px ",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){for(var e in this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawArea(),this.DrawPoint(t),this.DrawTitle(t),this.Canvas.restore()}},this.CalculateLines=function(t){if(2==t.length&&this.Frame){var e={Start:new I,End:new I};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),(e={Start:new I,End:new I}).Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X,this.LinePoint.push(e);var a=t[0].X-t[1].X;(e={Start:new I,End:new I}).Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X+a,this.LinePoint.push(e)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status}}function he(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureCircle",this.PointCount=2,this.CircleData,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=Math.sqrt(e*e+a*a);this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.LineColor,this.DrawLine(t[0],t[1]),this.Canvas.beginPath(),this.Canvas.arc(t[0].X,t[0].Y,i,0,2*Math.PI),this.Canvas.stroke(),this.Canvas.fill(),this.CircleData={X:t[0].X,Y:t[0].Y,R:i},this.DrawPoint(t),this.Canvas.restore()}},this.IsPointIn=function(t,e){if(10!=this.Status)return-1;var a=this.IsPointInXYValue(t,e);if(a>=0)return a;if(this.CircleData&&this.CircleData.R>8){var i=this.CircleData.X-t,n=this.CircleData.Y-e,r=Math.sqrt(i*i+n*n);if(r<this.CircleData.R&&r>this.CircleData.R-8)return 100}return-1}}function le(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureQuadrangle",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Yt.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);for(var a in this.CalculateLines(e),this.ClipFrame(),this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){4==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new I;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a);a=this.CreateLineData(t[1],t[2]);this.LinePoint.push(a);var i=t[2].X-t[1].X,n=t[2].Y-t[1].Y,r=new I;r.X=t[0].X+i,r.Y=t[0].Y+n;a=this.CreateLineData(t[2],r);this.LinePoint.push(a);a=this.CreateLineData(r,t[0]);this.LinePoint.push(a)}}}function ue(){this.newMethod=Yt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureFibonacci",this.PointCount=1,this.Font=14*d()+"px ",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint();if(t&&(this.CalculateLines(),!(this.LinePoint.length<=0))){for(var e in this.ClipFrame(),this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End),this.DrawTitle(a.Start,a.Title)}this.DrawPoint(t),this.Canvas.restore()}},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X+2,t.Y+10)},this.CalculateLines=function(){if(this.Status<2)return;if(!this.Frame)return;var t=this.Frame.Data;if(!t)return;var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].X))+t.DataOffset}var a=this.Frame.ChartBorder.GetTopEx(),i=this.Frame.ChartBorder.GetBottom(),n=this.Frame.XPointCount;const r=[1,2,3,5,8,13,21,34,55,89,144,233];for(var s=0;s<r.length;++s){var o=e+r[s],h=o-t.DataOffset;if(!(h<0||h>=n)){var l=this.Frame.GetXFromIndex(o-t.DataOffset,!1),u={Start:new I,End:new I,Title:r[s]};u.Start.Y=a,u.Start.X=l,u.End.Y=i,u.End.X=l,this.LinePoint.push(u)}}}}function ce(){this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,2e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.002],[.04,.05,.04,.001],[.05,.1,.05,.005],[.1,.2,.1,.01],[.2,.4,.2,.02],[.4,.5,.4,.01],[.5,1,.5,.05],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,1e4,1e3],[4e4,5e4,1e4,1e3],[5e4,1e5,1e4,1e3],[1e5,2e5,1e5,1e4],[2e5,4e5,1e5,1e4],[4e5,5e5,1e5,1e4],[5e5,1e6,1e5,1e4],[1e6,2e6,1e6,1e5],[2e6,4e6,1e6,1e5],[4e6,5e6,1e6,1e5],[5e6,1e7,1e6,1e5],[1e7,2e7,1e7,1e6],[2e7,4e7,1e7,1e6],[4e7,5e7,1e7,1e6],[5e7,1e8,1e7,1e6],[1e8,2e8,1e8,1e7],[2e8,4e8,1e8,1e7],[4e8,5e8,1e8,1e7],[5e8,1e9,1e8,1e7],[1e9,2e9,1e9,1e8],[2e9,4e9,1e9,1e8],[4e9,5e9,1e9,1e8],[5e9,1e10,1e9,1e8]],this.Find=function(t){for(var e in this.Data){var a=this.Data[e];if(t>a[0]&&t<=a[1]){var i={};return i.FixInterval=a[2],i.Increase=a[3],i}}return null}}Yt.ColorToRGBA=function(t,e){return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},Yt.CreateChartDrawPrictrue=function(t){const e=new Map([["ChartDrawPictureLine",{Create:function(){return new Ut}}],["ChartDrawPictureHaflLine",{Create:function(){return new Wt}}],["ChartDrawPictureHorizontalLine",{Create:function(){return new Xt}}],["ChartDrawPictureTrendLine",{Create:function(){return new Jt}}],["ChartDrawPictureRect",{Create:function(){return new Kt}}],["ChartDrawPictureArc",{Create:function(){return new qt}}],["ChartDrawPictureWaveMW",{Create:function(){return new zt}}],["ChartDrawPictureParallelLines",{Create:function(){return new jt}}],["ChartDrawPictureParallelChannel",{Create:function(){return new Zt}}],["ChartDrawPicturePriceChannel",{Create:function(){return new $t}}],["ChartDrawPictureText",{Create:function(){return new Qt}}],["ChartDrawPictureGannFan",{Create:function(){return new ee}}],["ChartDrawPictureResistanceLine",{Create:function(){return new ae}}],["ChartDrawPictureGoldenSection",{Create:function(){return new ie}}],["ChartDrawPicturePercentage",{Create:function(){return new ne}}],["ChartDrawPictureWaveBand",{Create:function(){return new re}}],["ChartDrawPictureTriangle",{Create:function(){return new se}}],["ChartDrawPictureSymmetryAngle",{Create:function(){return new oe}}],["ChartDrawPictureCircle",{Create:function(){return new he}}],["ChartDrawPictureQuadrangle",{Create:function(){return new le}}],["ChartDrawPictureFibonacci",{Create:function(){return new ue}}],["ChartDrawPictureIconFont",{Create:function(){return new te}}]]);if(!e.has(t.ClassName))return null;var a=e.get(t.ClassName).Create();return t.Period>=0&&(a.Period=t.Period),t.Guid&&(a.Guid=t.Guid),t.Symbol&&(a.Symbol=t.Symbol),t.Value&&(a.Value=t.Value),t.Text&&(a.Text=t.Text),t.LineColor&&(a.LineColor=t.LineColor),t.AreaColor&&(a.AreaColor=t.AreaColor),t.FontOption&&(a.FontOption=t.FontOption),a};var fe=new function(){this.TooltipBGColor="rgb(255, 255, 255)",this.TooltipAlpha=.92,this.SelectRectBGColor="rgba(1,130,212,0.06)",this.UpBarColor="rgb(238,21,21)",this.DownBarColor="rgb(25,158,0)",this.UnchagneBarColor="rgb(0,0,0)",this.Minute={},this.Minute.VolBarColor="rgb(238,127,9)",this.Minute.PriceColor="rgb(50,171,205)",this.Minute.AreaPriceColor="rgba(50,171,205,0.1)",this.Minute.AvPriceColor="rgb(238,127,9)",this.Minute.BeforeBGColor="rgba(240,240,240,0.7)",this.DefaultTextColor="rgb(43,54,69)",this.DefaultTextFont=14*d()+"px ",this.TitleFont=13*d()+"px ",this.UpTextColor="rgb(238,21,21)",this.DownTextColor="rgb(25,158,0)",this.UnchagneTextColor="rgb(0,0,0)",this.CloseLineColor="rgb(0,191,255)",this.CloseLineAreaColor=["rgba(0,191,255,0.8)","rgba(0,191,255,0.2)"],this.FrameBorderPen="rgb(225,236,242)",this.FrameSplitPen="rgb(225,236,242)",this.FrameDotSplitPen="rgb(105,105,105)",this.FrameSplitTextColor="rgb(117,125,129)",this.FrameSplitTextFont=14*d()+"px ",this.FrameTitleBGColor="rgb(246,251,253)",this.FrameLatestPrice={TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(0,0,0)",BGAlpha:.6},this.OverlayFrame={BolderPen:"rgb(190,190,190)",TitleColor:"rgb(105,105,105)",TitleFont:11*d()+"px arial"},this.CorssCursorBGColor="rgb(43,54,69)",this.CorssCursorTextColor="rgb(255,255,255)",this.CorssCursorTextFont=14*d()+"px ",this.CorssCursorPenColor="rgb(130,130,130)",this.LockBGColor="rgb(220, 220, 220)",this.LockTextColor="rgb(210, 34, 34)",this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com",this.PyIndexDomain="https://py.zealink.com",this.KLine={MaxMin:{Font:12*d()+"px ",Color:"rgb(43,54,69)"},Info:{Investor:{ApiUrl:"https://opensource.zealink.com/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"https://opensource.zealink.com/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"https://opensource.zealink.com/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},this.Index={},this.Index.LineColor=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],this.OverlaySymbol={Random:0},this.OverlaySymbol.Color=["rgb(38,198,218)","rgb(103,58,183)","rgb(0,191,165)","rgb(130,177,255)"],this.Index.StockHistoryDayApiUrl="https://opensource.zealink.com/API/StockHistoryDay",this.Index.MarketLongShortApiUrl="https://opensource.zealink.com/API/FactorTiming",this.Index.MarketAttentionApiUrl="https://opensource.zealink.com/API/MarketAttention",this.Index.MarketHeatApiUrl="https://opensource.zealink.com/API/MarketHeat",this.Index.CustomIndexHeatApiUrl="https://opensource.zealink.com/API/QuadrantCalculate",this.Index.NotSupport={Font:"14px ",TextColor:"rgb(52,52,52)"},this.DrawPicture={},this.DrawPicture.LineColor=["rgb(30,144,255)"],this.DrawPicture.PointColor=["rgb(105,105,105)"],this.KLineTrain={Font:"bold 14px arial",LastDataIcon:{Color:"rgb(0,0,205)",Text:""},BuyIcon:{Color:"rgb(0,205,102 )",Text:"B"},SellIcon:{Color:"rgb(255,127,36 )",Text:"S"},IconFont:{Family:"iconfont",Buy:{Text:"",HScreenText:"",Color:"rgb(255,140,0)"},Sell:{Text:"",HScreenText:"",Color:"rgb(6,79,18)"},Last:{Text:"",HScreenText:"",Color:"rgb(55,0,255)"}}},this.TooltipPaint={BGColor:"rgba(250,250,250,0.8)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(120,120,120)",TitleFont:13*d()+"px "},this.Barrage={Font:16*d()+"px ",Height:20,Color:"RGB(109,109,109)"},this.MinuteInfo={TextColor:"rgb(84,143,255)",Font:14*d()+"px ",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,0.8)"},this.SetStyle=function(t){t.TooltipBGColor&&(this.TooltipBGColor=t.TooltipBGColor),t.TooltipAlpha&&(this.TooltipAlpha=t.TooltipAlpha),t.SelectRectBGColor&&(this.SelectRectBGColor=t.SelectRectBGColor),t.UpBarColor&&(this.UpBarColor=t.UpBarColor),t.DownBarColor&&(this.DownBarColor=t.DownBarColor),t.UnchagneBarColor&&(this.UnchagneBarColor=t.UnchagneBarColor),t.Minute&&(t.Minute.VolBarColor&&(this.Minute.VolBarColor=t.Minute.VolBarColor),t.Minute.PriceColor&&(this.Minute.PriceColor=t.Minute.PriceColor),t.Minute.AvPriceColor&&(this.Minute.AvPriceColor=t.Minute.AvPriceColor),t.Minute.AreaPriceColor&&(this.Minute.AreaPriceColor=t.Minute.AreaPriceColor)),t.DefaultTextColor&&(this.DefaultTextColor=t.DefaultTextColor),t.DefaultTextFont&&(this.DefaultTextFont=t.DefaultTextFont),t.TitleFont&&(this.TitleFont=t.TitleFont),t.UpTextColor&&(this.UpTextColor=t.UpTextColor),t.DownTextColor&&(this.DownTextColor=t.DownTextColor),t.UnchagneTextColor&&(this.UnchagneTextColor=t.UnchagneTextColor),t.CloseLineColor&&(this.CloseLineColor=t.CloseLineColor),t.CloseLineAreaColor&&(this.CloseLineAreaColor=t.CloseLineAreaColor),t.FrameBorderPen&&(this.FrameBorderPen=t.FrameBorderPen),t.FrameSplitPen&&(this.FrameSplitPen=t.FrameSplitPen),t.FrameDotSplitPen&&(this.FrameDotSplitPen=t.FrameDotSplitPen),t.FrameSplitTextColor&&(this.FrameSplitTextColor=t.FrameSplitTextColor),t.FrameSplitTextFont&&(this.FrameSplitTextFont=t.FrameSplitTextFont),t.FrameTitleBGColor&&(this.FrameTitleBGColor=t.FrameTitleBGColor),t.FrameLatestPrice&&(t.FrameLatestPrice.TextColor&&(this.FrameLatestPrice.TextColor=t.FrameLatestPrice.TextColor),t.FrameLatestPrice.UpBarColor&&(this.FrameLatestPrice.UpBarColor=t.FrameLatestPrice.UpBarColor),t.FrameLatestPrice.DownBarColor&&(this.FrameLatestPrice.DownBarColor=t.FrameLatestPrice.DownBarColor),t.FrameLatestPrice.UnchagneBarColor&&(this.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UnchagneBarColor),t.FrameLatestPrice.BGAlpha&&(this.FrameLatestPrice.BGAlpha=t.FrameLatestPrice.BGAlpha)),t.CorssCursorBGColor&&(this.CorssCursorBGColor=t.CorssCursorBGColor),t.CorssCursorTextColor&&(this.CorssCursorTextColor=t.CorssCursorTextColor),t.CorssCursorTextFont&&(this.CorssCursorTextFont=t.CorssCursorTextFont),t.CorssCursorPenColor&&(this.CorssCursorPenColor=t.CorssCursorPenColor),t.KLine&&(this.KLine=t.KLine),t.Index&&(t.Index.LineColor&&(this.Index.LineColor=t.Index.LineColor),t.Index.NotSupport&&(this.Index.NotSupport=t.Index.NotSupport)),t.ColorArray&&(this.ColorArray=t.ColorArray),t.DrawPicture&&(this.DrawPicture.LineColor=t.DrawPicture.LineColor,this.DrawPicture.PointColor=t.DrawPicture.PointColor),t.TooltipPaint&&(t.TooltipPaint.BGColor&&(this.TooltipPaint.BGColor=t.TooltipPaint.BGColor),t.TooltipPaint.BorderColor&&(this.TooltipPaint.BorderColor=t.TooltipPaint.BorderColor),t.TooltipPaint.TitleColor&&(this.TooltipPaint.TitleColor=t.TooltipPaint.TitleColor),t.TooltipPaint.TitleFont&&(this.TooltipPaint.TitleFont=t.TooltipPaint.TitleFont)),t.MinuteInfo&&(t.MinuteInfo.TextColor&&(this.MinuteInfo.TextColor=t.MinuteInfo.TextColor),t.MinuteInfo.Font&&(this.MinuteInfo.Font=t.MinuteInfo.Font),t.MinuteInfo.PointColor&&(this.MinuteInfo.PointColor=t.MinuteInfo.PointColor),t.MinuteInfo.LineColor&&(this.MinuteInfo.LineColor=t.MinuteInfo.LineColor),t.MinuteInfo.TextBGColor&&(this.MinuteInfo.TextBGColor=t.MinuteInfo.TextBGColor))}},Ce={LANGUAGE_CHINESE_ID:0,LANGUAGE_ENGLISH_ID:1};var de=new function(){this.TextResource=new Map([["Tooltip-Open",{CN:":",EN:"O:"}],["Tooltip-High",{CN:":",EN:"H:"}],["Tooltip-Low",{CN:":",EN:"L:"}],["Tooltip-Close",{CN:":",EN:"C:"}],["Tooltip-Increase",{CN:":",EN:"I:"}],["Tooltip-Vol",{CN:":",EN:"V:"}],["Tooltip-Amount",{CN:":",EN:"A:"}],["Tooltip-AvPrice",{CN:":",EN:"AP:"}],["Tooltip-Price",{CN:":",EN:"P:"}],["Tooltip-Exchange",{CN:":",EN:"E:"}],["DivTooltip-Open",{CN:":",EN:"Open:"}],["DivTooltip-High",{CN:":",EN:"High:"}],["DivTooltip-Low",{CN:":",EN:"Low:"}],["DivTooltip-Close",{CN:":",EN:"Close:"}],["DivTooltip-Increase",{CN:":",EN:"Increase:"}],["DivTooltip-Vol",{CN:":",EN:"Volume:"}],["DivTooltip-Amount",{CN:":",EN:"Amount:"}],["DivTooltip-Exchange",{CN:":",EN:"Exchange:"}],["KTitle-Open",{CN:":",EN:"O:"}],["KTitle-High",{CN:":",EN:"H:"}],["KTitle-Low",{CN:":",EN:"L:"}],["KTitle-Close",{CN:":",EN:"C:"}],["KTitle-Increase",{CN:":",EN:"I:"}],["KTitle-Vol",{CN:":",EN:"V:"}],["KTitle-Amount",{CN:":",EN:"A:"}],["KTitle-Exchange",{CN:":",EN:"E:"}],["MTitle-Close",{CN:":",EN:"C:"}],["MTitle-AvPrice",{CN:":",EN:"AC:"}],["MTitle-Increase",{CN:":",EN:"I:"}],["MTitle-Vol",{CN:":",EN:"V:"}],["MTitle-Amount",{CN:":",EN:"A:"}],["",{CN:"",EN:"1D"}],["",{CN:"",EN:"1W"}],["",{CN:"",EN:"1M"}],["",{CN:"",EN:"1Y"}],["1",{CN:"1",EN:"1Min"}],["5",{CN:"5",EN:"5Min"}],["15",{CN:"15",EN:"15Min"}],["30",{CN:"30",EN:"30Min"}],["60",{CN:"60",EN:"60Min"}],["",{CN:"",EN:"1Q"}],["",{CN:"",EN:"Tick"}],["2",{CN:"2",EN:"2H"}],["4",{CN:"4",EN:"4H"}],["",{CN:"",EN:"No Right"}],["",{CN:"",EN:"Pro Right"}],["",{CN:"",EN:"Post Right"}],["",{CN:"",EN:"Sun."}],["",{CN:"",EN:"Mon."}],["",{CN:"",EN:"Tues."}],["",{CN:"",EN:"Wed."}],["",{CN:"",EN:"Thur."}],["",{CN:"",EN:"Fri."}],["",{CN:"",EN:"Sat."}],["1",{CN:"1",EN:"Jan"}],["2",{CN:"2",EN:"Feb"}],["3",{CN:"3",EN:"Mar"}],["4",{CN:"4",EN:"Apr"}],["5",{CN:"5",EN:"May"}],["6",{CN:"6",EN:"Jun"}],["7",{CN:"7",EN:"Jul"}],["8",{CN:"8",EN:"Aug"}],["9",{CN:"9",EN:"Sept"}],["10",{CN:"10",EN:"Oct"}],["11",{CN:"11",EN:"Nov"}],["12",{CN:"12",EN:"Dec"}],["",{CN:"",EN:"Min"}],["",{CN:"",EN:"D"}]]),this.GetText=function(t,e){var a=this.TextResource.get(t);if(!a)return"";switch(e){case Ce.LANGUAGE_CHINESE_ID:return a.CN;case Ce.LANGUAGE_ENGLISH_ID:return a.EN;default:return a.CN}},this.SetTextResource=function(t,e){this.TextResource.set(t,e)}};function De(){}function pe(){}function me(t){this.newMethod=C,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartContainer",this.WindowIndex=new Array,this.ColorIndex,this.TradeIndex,this.Symbol,this.Name,this.Period=0,this.IsApiPeriod=!1,this.Right=0,this.SourceData,this.MaxReqeustDataCount=3e3,this.MaxRequestMinuteDayCount=5,this.PageSize=200,this.KLineDrawType=0,this.ScriptErrorCallback,this.FlowCapitalReady=!1,this.ChartDrawStorage=new function(){this.DrawData=new Map,this.StorageKey,this.Load=function(t){if(t){this.StorageKey=t;var e=localStorage[this.StorageKey];if(console.log(`[ChartDrawStorage::Save] Load to localStorage, key=${this.StorageKey}, cache=${e}`),e&&"string"==typeof e){var a=JSON.parse(e);for(var i in a){var n=a[i],r=new Map;for(var s in n.Value){var o=n.Value[s];r.set(o.Key,o.Value)}this.DrawData.set(n.Key,r)}}}},this.Save=function(){if(this.StorageKey){var t=[];for(var e of this.DrawData){var a=e[0],i=e[1],n={Key:a,Value:[]};for(var r of i)n.Value.push({Key:r[0],Value:r[1]});t.push(n)}console.log(`[ChartDrawStorage::Save] save to localStorage, key=${this.StorageKey}`);var s=JSON.stringify(t);localStorage[this.StorageKey]=s}},this.SaveDrawData=function(t){var e=t.Symbol+"-"+t.Period,a=t.ExportStorageData();if(a){if(this.DrawData.has(e))console.log("[ChartDrawStorage::SaveDrawData] Upate: key, drawPicture, data",e,t,a),this.DrawData.get(e).set(a.Guid,a);else{console.log("[ChartDrawStorage::SaveDrawData] Insert: key, drawPicture, data",e,t,a);var i=new Map;i.set(a.Guid,a),this.DrawData.set(e,i)}console.log("[ChartDrawStorage::SaveDrawData] All draw data ",this.DrawData),this.Save()}},this.DeleteDrawData=function(t){var e=t.Symbol+"-"+t.Period;this.DrawData.has(e)&&(this.DrawData.delete(e),this.Save())},this.Clear=function(){this.DrawData=new Map,this.Save()},this.GetDrawData=function(t){var e=[],a=t.Symbol+"-"+t.Period;if(!this.DrawData.has(a))return e;var i=this.DrawData.get(a);for(var n of i)e.push(n[1]);return e}},this.ChartDrawStorageCache=null,this.CustomShow=null,this.OverlayIndexFrameWidth=60,this.Page={Day:{Enable:!1,Index:0,Finish:!1},Minute:{Enable:!1,Index:0,Finish:!1}},this.DragDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,status:0}},this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.KLineApiUrl=fe.Domain+"/API/KLine2",this.MinuteKLineApiUrl=fe.Domain+"/API/KLine3",this.DragMinuteKLineApiUrl=fe.Domain+"/API/KLine4",this.DragKLineApiUrl=fe.Domain+"/API/KLine5",this.RealtimeApiUrl=fe.Domain+"/API/Stock",this.KLineMatchUrl=fe.Domain+"/API/KLineMatch",this.StockHistoryDayApiUrl=fe.Domain+"/API/StockHistoryDay",this.TickApiUrl=fe.Domain+"/API/StockDetail",this.MinuteDialog,this.RightMenu,this.ChartPictureMenu,this.ResetDragDownload=function(){this.DragDownload.Day.Status=0,this.DragDownload.Day.IsEnd=!1,this.DragDownload.Minute.Status=0,this.DragDownload.Minute.IsEnd=!1},this.ResetPage=function(){this.Page.Day.Finish=!1,this.Page.Day.Index=0,this.Page.Minute.Finish=!1,this.Page.Minute.Index=0},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.ChartOperator=function(t){var e=t.ID;if(e===f.OP_SCROLL_LEFT||e===f.OP_SCROLL_RIGHT){var a=e===f.OP_SCROLL_LEFT,i=1;t.Step>0&&(i=t.Step),this.DataMove(i*this.StepPixel,a)&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw())}else if(e===f.OP_ZOOM_IN||e===f.OP_ZOOM_OUT){var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),e===f.OP_ZOOM_IN){if(!this.Frame.ZoomUp(n))return}else if(!this.Frame.ZoomDown(n))return;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else if(e===f.OP_GOTO_HOME){var r=null;if(!(r=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return;var s=this.PageSize,o=this.GetMaxMinPageSize();for(var h in o.Max<s?s=o.Max:o.Min>s&&(s=o.Min),this.Frame.SubFrame){this.Frame.SubFrame[h].Frame.XPointCount=s}var l=r.Data.length-s;r.DataOffset=l,this.CursorIndex=.6,this.LastPoint.X=null,this.LastPoint.Y=null,console.log(`[KLineChartContainer::ChartOperator] OP_GOTO_HOME, dataOffset=${r.DataOffset} CursorIndex=${this.CursorIndex} PageSize=${s}`),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()}},this.OnWheel=function(t){console.log("[KLineChartContainer::OnWheel]",t);var e,a=t.clientX-this.UIElement.getBoundingClientRect().left,i=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),(e=this.Canvas.isPointInPath(a,i))&&t.wheelDelta<0)(n={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomDown(n)&&(this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw());else if(e&&t.wheelDelta>0){var n;(n={}).Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomUp(n)&&(this.CursorIndex=n.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw())}t.preventDefault?t.preventDefault():t.returnValue=!1},this.Create=function(t){for(var e in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Lt,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new Mt,this.ChartCorssCursor.StringFormatY=new Ot,this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new w,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var a=new Gt;a.Frame=this.Frame.SubFrame[e].Frame,a.Canvas=this.Canvas,a.LanguageID=this.LanguageID,this.TitlePaint.push(a)}this.UIElement.addEventListener("keydown",D,!0),this.UIElement.addEventListener("wheel",p,!0)},this.CreateChildWindow=function(t){for(var e=0;e<t;++e){var a=new y;a.UIElement=this.UIElement;var i=new N;if(i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=e,this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),i.HorizontalMax=20,i.HorizontalMin=10,0==e){i.YSplitOperator=new At,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),i.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double");var n=d();a.BottomSpace=12*n,a.TopSpace=12*n}else i.YSplitOperator=new yt,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.LanguageID=this.LanguageID;i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new Tt,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,i.XSplitOperator.LanguageID=this.LanguageID,e!=t-1&&(i.XSplitOperator.ShowText=!1);for(var r=i.HorizontalMin;r<=i.HorizontalMax;r+=1)i.HorizontalInfo[r]=new A,i.HorizontalInfo[r].Value=r,0==e&&r==i.HorizontalMin||(i.HorizontalInfo[r].Message[1]=r.toString(),i.HorizontalInfo[r].Font="14px ");var s=new M;s.Frame=i,s.Height=0==e?20:10,this.Frame.SubFrame[e]=s}},this.CreateSubFrameItem=function(t){var e=new y;e.UIElement=this.UIElement;var a=new N;a.Canvas=this.Canvas,a.ChartBorder=e,a.Identify=t,this.ModifyIndexDialog&&(a.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(a.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),a.HorizontalMax=20,a.HorizontalMin=10,a.YSplitOperator=new yt,a.YSplitOperator.LanguageID=this.LanguageID,a.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),a.YSplitOperator.Frame=a,a.YSplitOperator.ChartBorder=e,a.XSplitOperator=new Tt,a.XSplitOperator.Frame=a,a.XSplitOperator.ChartBorder=e,a.XSplitOperator.ShowText=!1;var i=this.Frame.SubFrame[0].Frame.XPointCount;a.XPointCount=i,a.Data=this.ChartPaint[0].Data;for(var n=a.HorizontalMin;n<=a.HorizontalMax;n+=1)a.HorizontalInfo[n]=new A,a.HorizontalInfo[n].Value=n,a.HorizontalInfo[n].Message[1]=n.toString(),a.HorizontalInfo[n].Font="14px ";var r=new M;return r.Frame=a,r.Height=10,r},this.CreateMainKLine=function(){var t=new z;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Main-KLine",t.DrawType=this.KLineDrawType,this.ChartPaint[0]=t,this.TitlePaint[0]=new _t,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID},this.BindMainData=function(t,e){for(var a in this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.Frame.SubFrame){(i=this.Frame.SubFrame[a].Frame).XPointCount=e,i.Data=this.ChartPaint[0].Data,i.XSplitOperator.Symbol=this.Symbol,i.XSplitOperator.Period=this.Period}for(var a in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){var i;(i=this.OverlayChartPaint[a]).MainData=this.ChartPaint[0].Data}var n=t.Data.length-e;n<0&&(n=0),this.ChartPaint[0].Data.DataOffset=n,this.ChartPaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.CursorIndex=e,this.CursorIndex+n>=t.Data.length&&(this.CursorIndex=t.Data.length-1-n),this.CursorIndex<0&&(this.CursorIndex=0),this.CustomShow&&(this.SetCustomShow(this.CustomShow,t),this.CustomShow=null)},this.UpdateMainData=function(t,e){var a=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(a=this.Frame.SubFrame[0].Frame.Data):a=this.Frame.Data,a){var i=0;for(var n in e>0&&t.Data.length>e&&(i=t.Data.length-e,console.log(`[KLineChartContainer::UpdateMainData]  [count=${e}->${t.Data.length}], [newDataCount=${i}]`)),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.ChartPaint[0].Data.DataOffset=a.DataOffset+i,this.Frame.SubFrame){this.Frame.SubFrame[n].Frame.Data=this.ChartPaint[0].Data}for(var n in this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data,this.OverlayChartPaint){this.OverlayChartPaint[n].MainData=this.ChartPaint[0].Data}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol}},this.SetCustomShow=function(t,e){if(t&&t.Date&&!(t.Date<20000101)){for(var a=t.Date,i=null,n=0;n<e.Data.length;++n){if(e.Data[n].Date>=a){i=n;break}}if(null!==i){var r=e.Data.length-i;t.PageSize>0&&(r=t.PageSize);var s=r,o=this.GetMaxMinPageSize();for(var n in r>o.Max?s=o.Max:r<o.Min&&(s=o.Min),this.Frame.SubFrame){this.Frame.SubFrame[n].Frame.XPointCount=s}this.ChartPaint[0].Data.DataOffset=i,this.CursorIndex=.6}else console.log(`[KLineChartContainer::SetCustomShow] Can't find first date=${a}`)}},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.BindIndexData=function(t,e){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e))},this.BindOverlayIndexData=function(t,e,a){t.Script&&("function"!=typeof t.Script.RequestData?"function"!=typeof t.Script.ExecuteScript?t.Script.BindData(this,e,a):t.Script.ExecuteScript(this,e,a):t.Script.RequestData(this,e,a))},this.BindInstructionIndexData=function(t){this.ColorIndex&&"function"==typeof this.ColorIndex.ExecuteScript&&this.ColorIndex.ExecuteScript(this,0,t),this.TradeIndex&&"function"==typeof this.TradeIndex.ExecuteScript&&this.TradeIndex.ExecuteScript(this,0,t)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(0!=a){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.AutoUpdateEvent=function(t,e){var a=t?c.RECV_START_AUTOUPDATE:c.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,n=this.mapEvent.get(a),r={Stock:{Symbol:this.Symbol,Name:this.Name,Right:this.Right,Period:this.Period},Explain:e};t&&(r.Callback=function(t){V.IsDayPeriod(i.Period,!0)?i.RecvRealtimeData(t):V.IsMinutePeriod(i.Period,!0)&&i.RecvMinuteRealtimeData(t)}),n.Callback(n,r,this)}},this.RequestHistoryData=function(){var t=this;if(this.ChartSplashPaint.IsEnableSplash=!0,this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e={Name:"KLineChartContainer::RequestHistoryData",Explain:"K",Request:{Url:t.KLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxReqeustDataCount,field:["name","symbol","yclose","open","price","high","low","vol"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}),1==e.PreventDefault)return}s.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}})},this.RecvHistoryData=function(t){var e=me.JsonDataToHistoryData(t),a=new V;a.Data=e,a.DataType=0,a.Symbol=t.symbol;var i,n=new V;if(n.Data=e,n.Right=this.Right,n.Period=this.Period,n.DataType=0,n.Symbol=t.symbol,n.Right>0&&!this.IsApiPeriod){var r=n.GetRightDate(n.Right);n.Data=r}if(V.IsDayPeriod(n.Period,!1)&&!this.IsApiPeriod){var s=n.GetPeriodData(n.Period);n.Data=s}this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(n,this.PageSize),this.Frame.SetSizeChage(!0),this.BindInstructionIndexData(n);for(var o=0;o<this.Frame.SubFrame.length;++o)0==o&&(i=this.Frame.SubFrame[o].Frame),this.BindIndexData(o,n);i&&i.YSplitOperator&&(i.YSplitOperator.Symbol=this.Symbol,i.YSplitOperator.Data=this.ChartPaint[0].Data,i.YSplitOperator.Period=this.Period);var h=this.Page.Day;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),h.Enable&&(h.Index=1),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex();for(o=0;o<this.Frame.SubFrame.length;++o){var l=this.Frame.SubFrame[o];for(var u in l.OverlayIndex){var f=l.OverlayIndex[u];this.BindOverlayIndexData(f,o,n)}}if(this.mapEvent.has(c.RECV_HISTROY_DATA)){var C=this.mapEvent.get(c.RECV_HISTROY_DATA);t={HistoryData:n,Stock:{Symbol:this.Symbol,Name:this.Name}};C.Callback(C,t,this)}},this.RequestHistoryPageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RequestHistoryPageData",Explain:"K",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Day.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date}}},Page:t.Page.Day,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryPageData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Day;e.Finish=!0;var a={data:[[20150218,12.54,12.5,12.74,11.95,12.27,117632441,1459671045],[20150219,12.27,12.1,12.23,11.9,12.23,95889423,1157078548],[20150220,12.23,12.17,12.17,11.9,12.05,67763439,815652761]],symbol:t.Symbol,name:t.Name};t.RecvHistoryPageData(a),1==e.Enable&&0==e.Finish?t.RequestHistoryPageData():t.AutoUpdate()},500)},this.RecvHistoryPageData=function(t){var e=me.JsonDataToHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var n=e[i];this.SourceData.Data.splice(i,0,n)}var r=new V;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Right>0&&r.Period<=3){var s=r.GetRightDate(r.Right);r.Data=s}if(V.IsDayPeriod(r.Period,!1)||V.IsMinutePeriod(r.Period,!1)){var o=r.GetPeriodData(r.Period);r.Data=o}this.UpdateMainData(r,a),this.BindInstructionIndexData(r);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,r);var h=this.Page.Day;++h.Index,1==h.Enable&&1==h.Finish&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.ReqeustHistoryMinuteData=function(){var t=this;if(this.ChartSplashPaint.IsEnableSplash=!0,this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e={Name:"KLineChartContainer::ReqeustHistoryMinuteData",Explain:"1K",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestMinuteDayCount,field:["name","symbol","yclose","open","price","high","low","vol"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}),1==e.PreventDefault)return}s.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}})},this.RecvMinuteHistoryData=function(t){var e=me.JsonDataToMinuteHistoryData(t),a=new V;a.Data=e,a.DataType=1,a.Symbol=t.symbol;var i,n=new V;if(n.Data=e,n.Right=this.Right,n.Period=this.Period,n.DataType=1,n.Symbol=t.symbol,V.IsMinutePeriod(n.Period,!1)&&!this.IsApiPeriod){var r=a.GetPeriodData(n.Period);n.Data=r}this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(n,this.PageSize),this.Frame.SetSizeChage(!0),this.BindInstructionIndexData(n);for(var s=0;s<this.Frame.SubFrame.length;++s)0==s&&(i=this.Frame.SubFrame[s].Frame),this.BindIndexData(s,n);for(var s in i&&i.YSplitOperator&&(i.YSplitOperator.Symbol=this.Symbol,i.YSplitOperator.Data=this.ChartPaint[0].Data,i.YSplitOperator.Period=this.Period),this.OverlayChartPaint){(h=this.OverlayChartPaint[s]).Data=null}var o=this.Page.Minute;(0==o.Enable||1==o.Enable&&1==o.Finish)&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryMinuteData(),this.CreateChartDrawPictureByStorage()),o.Enable&&++o.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(s=0;s<this.Frame.SubFrame.length;++s){var h=this.Frame.SubFrame[s];for(var l in h.OverlayIndex){var u=h.OverlayIndex[l];this.BindOverlayIndexData(u,s,n)}}if(this.mapEvent.has(c.RECV_HISTROY_DATA)){var f=this.mapEvent.get(c.RECV_HISTROY_DATA);t={HistoryData:n,Stock:{Symbol:this.Symbol,Name:this.Name}};f.Callback(f,t,this)}},this.ReqeustHistoryMinutePageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RecvHistoryMinutePageData",Explain:"1K",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Minute.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date,time:e.Time}}},Page:t.Page.Minute,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryMinutePageData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Minute;e.Finish=!0;t.RecvHistoryMinutePageData({data:[[20190906,14.58,14.71,14.71,14.71,14.71,1096425,16128411,925],[20190906,14.71,14.73,14.74,14.71,14.71,2154859,31731820,930],[20190906,14.71,14.71,14.71,14.68,14.69,1427516,20989208,931],[20190906,14.69,14.69,14.71,14.68,14.7,1680503,24694143,932],[20190906,14.7,14.69,14.7,14.65,14.65,1315900,19310964,933],[20190906,14.65,14.66,14.69,14.65,14.68,702955,10313842,934],[20190906,14.68,14.7,14.71,14.67,14.67,1735266,25495875,935],[20190906,14.67,14.68,14.7,14.67,14.67,739e3,10845398,936],[20190906,14.67,14.67,14.68,14.67,14.68,389800,5721266,937],[20190906,14.68,14.68,14.7,14.68,14.69,648477,9527859,938],[20190906,14.69,14.7,14.71,14.69,14.7,1128400,16589794,939],[20190906,14.7,14.7,14.71,14.69,14.71,714858,10509708,940],[20190906,14.71,14.71,14.71,14.69,14.69,401500,5900477,941],[20190906,14.69,14.69,14.71,14.69,14.69,1165684,17131034,942],[20190906,14.69,14.69,14.7,14.67,14.67,498516,7321024,943],[20190906,14.67,14.68,14.68,14.67,14.67,350126,5139012,944],[20190906,14.67,14.67,14.69,14.67,14.69,561600,8246789,945]]}),1==e.Enable&&0==e.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()},500)},this.RecvHistoryMinutePageData=function(t){var e=me.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var n=e[i];this.SourceData.Data.splice(i,0,n)}var r=new V;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Right>0&&V.IsDayPeriod(r.Period,!1)){var s=r.GetRightDate(r.Right);r.Data=s}if(V.IsDayPeriod(r.Period,!1)||V.IsMinutePeriod(r.Period,!1)){var o=r.GetPeriodData(r.Period);r.Data=o}this.UpdateMainData(r,a),this.BindInstructionIndexData(r);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,r);var h=this.Page.Minute;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.RequestFlowCapitalData(),this.CreateChartDrawPictureByStorage()),h.Enable&&++h.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.RequestRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==$.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var n={Name:"KLineChartContainer::RequestRealtimeData",Explain:"",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){t.RecvRealtimeData(e),t.AutoUpdate()}),1==n.PreventDefault)return}s.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvRealtimeData(e),t.AutoUpdate()}})},this.RecvRealtimeData=function(t){if(1!=this.IsOnTouch){var e=me.JsonDataToRealtimeData(t,this.Symbol);if(e){var a=this.SourceData.Data[this.SourceData.Data.length-1],i=this.GetHistoryDataCount();if(a.Date==e.Date)console.log("[KLineChartContainer::RecvRealtimeData] update kline by minute data",e),a.Close=e.Close,a.High=e.High,a.Low=e.Low,a.Vol=e.Vol,a.Amount=e.Amount;else{if(!(a.Date<e.Date))return;console.log("[KLineChartContainer::RecvRealtimeData] insert kline by minute data",e);var n=new P;n.YClose=e.YClose,n.Open=e.Open,n.Close=e.Close,n.High=e.High,n.Low=e.Low,n.Vol=e.Vol,n.Amount=e.Amount,n.Date=e.Date,this.SourceData.Data.push(n)}var r=new V;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,r.Right>0&&V.IsDayPeriod(r.Period,!0)){var s=r.GetRightDate(r.Right);r.Data=s}if(V.IsDayPeriod(r.Period,!1)||V.IsMinutePeriod(r.Period,!1)){var o=r.GetPeriodData(r.Period);r.Data=o}this.UpdateMainData(r,i),this.UpdateOverlayRealtimeData(t),this.BindInstructionIndexData(r);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.UpdateOverlayRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==$.STATUS_FINISHED_ID)){var i=me.JsonDataToRealtimeData(t,a.Symbol);if(i){var n=a.SourceData,r=n.Data[n.Data.length-1];if(r.Date==i.Date)console.log("[KLineChartContainer::UpdateOverlayRealtimeData] update kline by minute data",i),r.Close=i.Close,r.High=i.High,r.Low=i.Low,r.Vol=i.Vol,r.Amount=i.Amount;else{if(!(a.Date<i.Date))continue;console.log("[KLineChartContainer::UpdateOverlayRealtimeData] insert kline by minute data",i);var s=new P;s.YClose=i.YClose,s.Open=i.Open,s.Close=i.Close,s.High=i.High,s.Low=i.Low,s.Vol=i.Vol,s.Amount=i.Amount,s.Date=i.Date,n.Data.push(s)}var o=new V;if(o.Data=n.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=0,o.Right>0&&we.IsSHSZStockA(t.symbol)){var h=o.GetRightDate(o.Right);o.Data=h}var l=this.SourceData.GetOverlayData(o.Data);if(o.Data=l,V.IsDayPeriod(o.Period,!1)){var u=o.GetPeriodData(o.Period);o.Data=u}a.Data=o}}}},this.RequestMinuteRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==$.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var n={Name:"KLineChartContainer::RequestMinuteRealtimeData",Explain:"1K",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","price","yclose","minutecount","minute","date","time"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}),1==n.PreventDefault)return}s.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","price","yclose","minutecount","minute","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}})},this.RecvMinuteRealtimeDataV2=function(t){if(1!=this.IsOnTouch){var e=me.JsonDataToMinuteHistoryData(t);if(e&&!(e.length<=0)){var a=this.GetHistoryDataCount();if(this.SourceData.MergeMinuteData(e)){console.log(`[KLineChartContainer::RecvMinuteRealtimeDataV2] update kline by 1 minute data [${a}->${this.SourceData.Data.length}]`);var i=new V;if(i.Data=this.SourceData.Data,i.Period=this.Period,i.Right=this.Right,i.DataType=this.SourceData.DataType,i.Symbol=this.Symbol,i.Right>0&&V.IsDayPeriod(i.Period,!0)&&!this.IsApiPeriod){var n=i.GetRightDate(i.Right);i.Data=n}if((V.IsDayPeriod(i.Period,!1)||V.IsMinutePeriod(i.Period,!1))&&!this.IsApiPeriod){var r=i.GetPeriodData(i.Period);i.Data=r}this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}}},this.RecvMinuteRealtimeData=function(t){if(1!=this.IsOnTouch)if(2!=t.ver){var e=me.JsonDataToMinuteRealtimeData(t,this.Symbol);if(e){var a=this.GetHistoryDataCount(),i=this.SourceData.Data.length;if(this.SourceData.MergeMinuteData(e)){console.log(`[KLineChartContainer::RecvMinuteRealtimeData] update kline by 1 minute data [${i}->${this.SourceData.Data.length}]`);var n=new V;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Symbol=this.Symbol,n.Right>0&&V.IsDayPeriod(n.Period,!0)){var r=n.GetRightDate(n.Right);n.Data=r}if(V.IsDayPeriod(n.Period,!1)||V.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}this.UpdateMainData(n,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(n);for(var o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,n);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}}else this.RecvMinuteRealtimeDataV2(t)},this.UpdateOverlayMinuteRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==$.STATUS_FINISHED_ID)){var i=me.JsonDataToMinuteRealtimeData(t,a.Symbol);if(i){var n=a.SourceData;if(!n.MergeMinuteData(i))return;var r=new V;r.Data=n.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=0;var s=this.SourceData.GetOverlayMinuteData(r.Data);if(r.Data=s,V.IsMinutePeriod(r.Period,!1)){var o=r.GetPeriodData(r.Period);r.Data=o}a.Data=r}}}},this.GetHistoryDataCount=function(){var t=null;return this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(t=this.Frame.SubFrame[0].Frame.Data):t=this.Frame.Data,t?t.Data.length:-1},this.GetRequestDataCount=function(){var t={MaxRequestDataCount:this.MaxReqeustDataCount,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount};if(!this.SourceData||!this.SourceData.Data||this.SourceData.Data.length<=0)return t;if(V.IsDayPeriod(this.Period,!0))(a=this.SourceData.Data.length)>t.MaxRequestDataCount&&(t.MaxRequestDataCount=a);else if(V.IsMinutePeriod(this.Period,!0)){var e,a=0;for(var i in this.SourceData.Data){var n=this.SourceData.Data[i];n.Date!=e&&++a,e=n.Date}a>t.MaxRequestMinuteDayCount&&(t.MaxRequestMinuteDayCount=a)}return t},this.RequestTickData=function(){var t=this;t.ChartSplashPaint.IsEnableSplash=!0,t.Draw();var e=fe.CacheDomain+"/cache/dealday/today/"+t.Symbol+".json";if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickData",Explain:"",Request:{Url:e,Data:{symbol:t.Symbol},Type:"GET"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvTickData(e),t.AutoUpdate()}),1==a.PreventDefault)return}s.HttpRequest({url:e,data:{symbol:t.Symbol},type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvTickData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.IsEnableSplash=!1,t.AutoUpdate()}})},this.RecvTickData=function(t){var e=me.JsonDataToTickData(t),a=new V;a.Data=e,a.DataType=2;var i,n=new V;n.Data=e,n.Right=this.Right,n.Period=this.Period,n.DataType=2,this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(n,this.PageSize),this.BindInstructionIndexData(n);for(var r=0;r<this.Frame.SubFrame.length;++r)0==r&&(i=this.Frame.SubFrame[r].Frame),this.BindIndexData(r,n);if(i&&i.YSplitOperator&&(i.YSplitOperator.Symbol=this.Symbol,i.YSplitOperator.Data=this.ChartPaint[0].Data,i.YSplitOperator.Period=this.Period,i.YSplitOperator.KLineChart=this.ChartPaint[0]),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.mapEvent.has(c.RECV_HISTROY_DATA)){var s=this.mapEvent.get(c.RECV_HISTROY_DATA);t={HistoryData:n,Stock:{Symbol:this.Symbol,Name:this.Name}};s.Callback(s,t,this)}},this.RequestTickRealtimeData=function(){var t=this,e=0;if(this.SourceData&&this.SourceData.Data&&(e=this.SourceData.Data.length),this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickRealtimeData",Explain:"",Request:{Url:t.TickApiUrl,Data:{symbol:t.Symbol,start:e,end:e+1e3},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvTickData(e),t.AutoUpdate()}),1==a.PreventDefault)return}s.HttpRequest({url:t.TickApiUrl,data:{symbol:t.Symbol,start:e-10,end:e+1e3},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvTickRealtimeData(e),t.AutoUpdate()}})},this.RecvTickRealtimeData=function(t){var e=me.JsonDataToTickData(t);if(e&&!(e.length<=0)){var a=this.SourceData.Data,i=this.SourceData.Data.length,n=0;a.length>0&&(n=a[a.length-1].Time);var r=0;for(var s in e){var o=e[s];o.Time<=n||(a.push(o),++r)}if(!(r<=0)){var h=new V;h.Data=a,h.Right=this.Right,h.Period=this.Period,h.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.UpdateMainData(h,i),this.BindInstructionIndexData(h);for(s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,h);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()}}},this.ChangePeriod=function(t){if(this.Period!=t){var e=!1;if(t>G&&t<=G)0!=this.SourceData.DataType&&(e=!0);else if(t>U&&t<=W)1!=this.SourceData.DataType&&(e=!0);else switch(t){case 0:case 1:case 2:case 3:case 9:0!=this.SourceData.DataType&&(e=!0);break;case 4:case 5:case 6:case 7:case 8:case 11:case 12:1!=this.SourceData.DataType&&(e=!0);break;case 10:2!=this.SourceData.DataType&&(e=!0)}this.Period=t,this.ReloadChartDrawPicture(),0!=e||this.IsApiPeriod?V.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetOverlaySymbolStatus(),this.RequestHistoryData(),this.ReqeustKLineInfoData()):V.IsMinutePeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()):V.IsTickPeriod(this.Period)&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.RequestTickData()):this.Update()}},this.ChangeRight=function(t){if(we.IsSHSZStockA(this.Symbol)&&!V.IsTickPeriod(this.Period)){var e=this.Symbol.toUpperCase();we.IsBIT(e)||t<0||t>2||this.Right!=t&&(this.Right=t,this.Update())}},this.SetFirstShowDate=function(t){if(t&&t.Date){console.log("[KLineChartContainer::SetFirstShowDate] obj=",t);var e=null;if(e=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data){for(var a=null,i=0;i<e.Data.length;++i){if(e.Data[i].Date>=t.Date){a=i;break}}if(null!==a){var n=e.Data.length-a;t.PageSize>0&&(n=t.PageSize);var r=this.GetMaxMinPageSize();for(var i in r.Max<n?n=r.Max:r.Min>n&&(n=r.Min),this.Frame.SubFrame){this.Frame.SubFrame[i].Frame.XPointCount=n}e.DataOffset=a,this.CursorIndex=.6,this.LastPoint.X=null,this.LastPoint.Y=null,console.log(`[KLineChartContainer::SetFirstShowDate] dataOffset=${e.DataOffset} CursorIndex=${this.CursorIndex} PageSize=${n}`),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()}else console.log(`[KLineChartContainer::SetFirstShowDate] an't find first date=${t.Date}`,t)}}},this.DeleteIndexPaint=function(t){let e=new Array;for(let a in this.ChartPaint){let i=this.ChartPaint[a];0!=a&&i.ChartFrame==this.Frame.SubFrame[t].Frame||e.push(i)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=e;var a=t+1;this.TitlePaint[a].Data=[],this.TitlePaint[a].Title=null},this.ShowKLine=function(t){this.ChartPaint.length<=0||!this.ChartPaint[0]||(this.ChartPaint[0].IsShow=t)},this.SetInstructionData=function(t,e){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){var a=this.TitlePaint[1];2==t?(this.ChartPaint[0].ColorData=e.Data,a&&(a.ColorIndex={Name:e.Name})):1==t&&(this.ChartPaint[0].TradeData={Sell:e.Sell,Buy:e.Buy},a&&(a.TradeIndex={Name:e.Name}))}},this.ChangeInstructionIndex=function(t){let e=(new l).Get(t);e&&(1!=e.InstructionType&&2!=e.InstructionType||(e.ID=t,this.ChangeInstructionScriptIndex(e)))},this.ChangeInstructionScriptIndex=function(t){if(1==t.InstructionType)this.TradeIndex=new ea(t.Name,t.Script,t.Args,t);else{if(2!=t.InstructionType)return;this.ColorIndex=new ea(t.Name,t.Script,t.Args,t)}var e=this.ChartPaint[0].Data;this.BindInstructionIndexData(e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.CancelInstructionIndex=function(){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){this.ColorIndex=null,this.TradeIndex=null,this.ChartPaint[0].ColorData=null,this.ChartPaint[0].TradeData=null;var t=this.TitlePaint[1];t&&(t.TradeIndex=null,t.ColorIndex=null),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new ea(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){var i=De.Get(e);if(!i){let i=(new l).Get(e);if(!i)return;i.IsMainIndex?t=0:0==t&&(t=1);let n={Name:i.Name,Script:i.Script,Args:i.Args,ID:e,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition,StringFormat:i.StringFormat};return a&&(a.FloatPrecision>=0&&(n.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(n.StringFormat=a.StringFormat),a.Args&&(n.Args=a.Args)),this.ChangeScriptIndex(t,n)}i.IsMainIndex?t>0&&(t=0):0==t&&(t=1);var n=new Array;for(var r in this.ChartPaint){var s=this.ChartPaint[r];0!=r&&s.ChartFrame==this.Frame.SubFrame[t].Frame||n.push(s)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=n;var o=t+1;this.TitlePaint[o].Data=[],this.TitlePaint[o].Title=null,this.WindowIndex[t]=i.Create(),this.CreateWindowIndex(t);var h=this.ChartPaint[0].Data;this.BindIndexData(t,h),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangePyScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new ye(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.ChartPaint[0].Data;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){let e=t.IndexName,a=t.WindowIndex,i=(new l).Get(e);if(!i){var n=De.Get(e);if(!n)return console.warn(`[KLineChartContainer::CreateOverlayIndex] can not find index[${e}]`),null}var r=this.Frame.SubFrame[a];r.Interval=this.OverlayIndexFrameWidth;var s=new function(){this.Frame,this.ChartPaint=[],this.Identify=m(),this.Scprit,this.UpdateFrameMaxMin=function(){var t={Max:null,Min:null};if(this.Frame.YSpecificMaxMin)t.Max=this.Frame.YSpecificMaxMin.Max,t.Min=this.Frame.YSpecificMaxMin.Min;else for(var e in this.ChartPaint){var a=this.ChartPaint[e].GetMaxMin();(null==t.Max||t.Max<a.Max)&&(t.Max=a.Max),(null==t.Min||t.Min>a.Min)&&(t.Min=a.Min)}null!=t.Max&&null!=t.Min&&(this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.XYSplit=!0)}};t.Identify&&(s.Identify=t.Identify);var o="KLineChartHScreenContainer"===this.ClassName?new function(){this.newMethod=O,this.newMethod(),delete this.newMethod,this.MainFrame=null,this.RightOffset=50,this.PenBorder=fe.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=fe.OverlayFrame.TitleColor,this.TitleFont=fe.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){},this.SplitXYCoordinate=function(){0!=this.XYSplit&&null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){},this.DrawVertical=function(){}}:new function(){this.newMethod=N,this.newMethod(),delete this.newMethod,this.MainFrame=null,this.RightOffset=50,this.PenBorder=fe.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=fe.OverlayFrame.TitleColor,this.TitleFont=fe.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){if(this.Title){var t=this.ChartBorder.GetTopTitle(),e=this.ChartBorder.GetBottom(),a=this.ChartBorder.GetRight();a+=this.RightOffset,this.Canvas.fillStyle=this.TitleColor,this.Canvas.font=this.TitleFont,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var i=a-2,n=t+(e-t)/2;this.Canvas.save(),this.Canvas.translate(i,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){this.ChartBorder.GetLeft();var t=this.ChartBorder.GetRight(),e=this.ChartBorder.GetBottom(),a=this.ChartBorder.GetTopTitle(),i=this.ChartBorder.Right;t+=this.RightOffset;for(var n=null,r=this.HorizontalInfo.length-1;r>=0;--r){var s=this.HorizontalInfo[r],o=this.GetYFromData(s.Value);null!=o&&Math.abs(o-n)<this.MinYDistance||(this.Canvas.textBaseline=o>=e-2?"bottom":o<=a+2?"top":"middle",this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(t-2,S(o)),this.Canvas.lineTo(t,S(o)),this.Canvas.stroke(),null!=s.Message[1]&&i>10&&(null!=s.Font&&(this.Canvas.font=s.Font),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(s.Message[1],t+2,o)),n=o)}},this.DrawVertical=function(){var t=this.ChartBorder.GetTopEx(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx();e+=this.RightOffset,this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(S(e),S(t)),this.Canvas.lineTo(S(e),S(a)),this.Canvas.stroke()}};if(o.Canvas=this.Canvas,o.MainFrame=r.Frame,o.ChartBorder=r.Frame.ChartBorder,!0===t.ShowRightText?o.IsShow=!0:!1===t.ShowRightText&&(o.IsShow=!1),o.YSplitOperator=new yt,o.YSplitOperator.LanguageID=this.LanguageID,o.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),o.YSplitOperator.Frame=o,o.YSplitOperator.ChartBorder=o.ChartBorder,o.YSplitOperator.SplitCount=r.Frame.YSplitOperator.SplitCount,s.Frame=o,i){let t={Name:i.Name,Script:i.Script,Args:i.Args,ID:e,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition};(h=new function(t,e,a,i){this.newMethod=ea,this.newMethod(t,e,a,i),delete this.newMethod,this.OverlayIndex=null,this.BindData=function(t,e,a){if(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)return;if(this.OverlayIndex.Frame.ChartPaint=[],null==this.OutVar||this.OutVar.length<0)return;var i={Data:[],Title:this.Name};let n="";for(var r in this.Arguments){let t=this.Arguments[r];n.length>0&&(n+=","),n+=t.Value.toString()}n.length>0&&(i.Title=this.Name+"("+n+")");var s=e+1,o=t.TitlePaint[s];for(var r in o.OverlayIndex.set(this.OverlayIndex.Identify,i),this.OverlayIndex.Frame.Frame.Title=i.Title,this.OutVar){let i=this.OutVar[r];if(!0!==i.IsExData)if(0==i.Type)this.CreateLine(t,e,i,r);else if(1==i.Type)switch(i.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,i,r);break;case"DRAWTEXT":case"SUPERDRAWTEXT":case"DRAWTEXT_FIX":this.CreateText(t,e,i,r);break;case"DRAWLINE":this.CreateStraightLine(t,e,i,r);break;case"DRAWBAND":this.CreateBand(t,e,i,r);break;case"DRAWKLINE":case"DRAWKLINE_IF":this.CreateKLine(t,e,i,r);break;case"POLYLINE":this.CreatePolyLine(t,e,i,r);break;case"DRAWNUMBER":this.CreateNumberText(t,e,i,r);break;case"DRAWICON":this.CreateIcon(t,e,i,r);break;case"DRAWCHANNEL":this.CreateChannel(t,e,i,r)}else 2==i.Type?this.CreateMACD(t,e,i,r):3==i.Type?this.CreatePointDot(t,e,i,r):4==i.Type?this.CreateLineStick(t,e,i,r):5==i.Type?this.CreateStick(t,e,i,r):6==i.Type&&this.CreateVolStick(t,e,i,r,a)}return!0},this.RecvResultData=function(t,e){let a=e.HQChart,i=e.WindowIndex,n=e.HistoryData;e.Self.OutVar=t,e.Self.BindData(a,i,n),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw();var r=a.GetOverlayIndexEvent();if(r){var s=e.Self,o={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:n,Identify:s.OverlayIndex.Identify,Stock:{Symbol:a.Symbol,Name:a.Name}};r.Callback(r,o,s)}},this.CreateLine=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new Q;if(s.Canvas=t.Canvas,s.DrawType=1,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(line.LineWidth=t)}0==a.IsShow&&(line.IsShow=!1);let o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(s.Data,a.Name,s.Color),r.ChartPaint.push(s)},this.CreateBar=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new st;s.Canvas=t.Canvas,a.Draw.Width>0?s.LineWidth=a.Draw.Width:s.LineWidth=1,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);s.Data.Data=a.Draw.DrawData,r.ChartPaint.push(s)},this.CreateText=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new ht;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);a.Draw.Position&&(s.Position=a.Draw.Position),a.Draw.DrawData&&(s.Data.Data=a.Draw.DrawData),s.Text=a.Draw.Text,a.Draw.Direction>0&&(s.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(s.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(s.TextAlign=a.Draw.TextAlign),r.ChartPaint.push(s)},this.CreateMACD=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new ft;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify;let o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(s.Data,a.Name,this.GetDefaultColor(i)),r.ChartPaint.push(s)},this.CreatePointDot=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new et;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.Radius&&(s.Radius=a.Radius),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(s.Radius=t)}let o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(s.Data,a.Name,s.Color),r.ChartPaint.push(s)},this.CreateStick=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new at;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(s.LineWidth=t)}let o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(s.Data,a.Name,s.Color),r.ChartPaint.push(s)},this.CreateLineStick=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new it;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(s.LineWidth=t)}let o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(s.Data,a.Name,s.Color),r.ChartPaint.push(s)},this.CreateStraightLine=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new Q;if(s.DrawType=1,s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(s.LineWidth=t)}s.Data.Data=a.Draw.DrawData,r.ChartPaint.push(s)},this.CreateVolStick=function(t,e,a,i,n){var r=this.OverlayIndex,s=r.Frame;let o=new nt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=r.Identify,o.KLineDrawType=t.KLineDrawType,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);let h=e+1;o.Data.Data=a.Data,o.HistoryData=n;var l=t.TitlePaint[h];l.OverlayIndex.get(r.Identify).Data[i]=new Vt(o.Data,a.Name,o.Color),s.ChartPaint.push(o)},this.CreateBand=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new dt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,s.FirstColor=a.Draw.Color[0],s.SecondColor=a.Draw.Color[1],s.Data.Data=a.Draw.DrawData,r.ChartPaint.push(s)},this.CreateKLine=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new z;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,s.Data.Data=a.Draw.DrawData,s.IsShowMaxMinPrice=!1,s.IsShowKTooltip=!1,a.Color&&(s.UnchagneColor=s.DownColor=s.UpColor=this.GetColor(a.Color)),r.ChartPaint.push(s)},this.CreatePolyLine=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new Q;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(s.LineWidth=t)}let o=e+1;s.Data.Data=a.Draw.DrawData;var h=t.TitlePaint[o];h.OverlayIndex.get(n.Identify).Data[i]=new Vt(line.Data," ",line.Color),r.ChartPaint.push(s)},this.CreateNumberText=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new ht;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);s.Data.Data=a.Draw.DrawData.Value,s.Text=a.Draw.DrawData.Text,r.ChartPaint.push(s)},this.CreateIcon=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new ht;s.Canvas=t.Canvas,s.TextAlign="center",s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify;s.Data.Data=a.Draw.DrawData;var o=a.Draw.Icon;1==o.IconFont?s.IconFont={Family:o.Family,Text:o.Symbol,Color:o.Color}:(s.Text=o.Symbol,a.Color?s.Color=this.GetColor(a.Color):o.Color?s.Color=o.Color:s.Color="rgb(0,0,0)"),r.ChartPaint.push(s)},this.CreateChannel=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new Dt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,a.Draw.AreaColor?s.AreaColor=a.Draw.AreaColor:a.Color?s.AreaColor=this.GetColor(a.Color):s.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?s.LineColor=a.Draw.Border.Color:s.LineColor=null,a.Draw.Border.Dotted&&(s.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(s.LineWidth=a.Draw.Border.Width),s.Data.Data=a.Draw.DrawData,r.ChartPaint.push(s)},this.CreatePartLine=function(t,e,a,i){var n=this.OverlayIndex,r=n.Frame;let s=new tt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=r.Frame.ChartBorder,s.ChartFrame=r.Frame,s.Identify=n.Identify,s.Data.Data=a.Draw.DrawData,r.ChartPaint.push(s)},this.CreateSelfKLine=function(t,e,a){var i=this.OverlayIndex,n=i.Frame;let r=new z;r.Canvas=t.Canvas,r.Name="Self Kline",r.ChartBorder=n.Frame.ChartBorder,r.ChartFrame=n.Frame,r.Identify=i.Identify,r.Data=a,r.IsShowMaxMinPrice=!1,r.IsShowKTooltip=!1,r.DrawType=this.KLineType,n.ChartPaint.push(r)},this.GetDefaultColor=function(t){let e=["rgb(24,71,178)","rgb(42,230,215)","rgb(252,96,154)","rgb(0,128,255)","rgb(229,0,79)","rgb(68,114,196)","rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)"],a=parseInt(t);return e[a%(e.length-1)]}}(t.Name,t.Script,t.Args,t)).OverlayIndex={IsOverlay:!0,Identify:s.Identify,WindowIndex:a,Frame:s},s.Script=h}else{var h;(h=n.Create()).OverlayIndex={IsOverlay:!0,Identify:s.Identify,WindowIndex:a,Frame:s},h.Create(this,a),s.Script=h}return r.OverlayIndex.push(s),s},this.DeleteOverlayWindowsIndex=function(t){var e=null;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a];for(var n in i.OverlayIndex){if(i.OverlayIndex[n].Identify===t){i.OverlayIndex.splice(n,1),e=parseInt(a);break}}}if(null!=e){var r=e+1,s=this.TitlePaint[r];s.OverlayIndex.has(t)&&s.OverlayIndex.delete(t),this.Draw()}else console.warn(`[KLineChartContainer::DeleteOverlayWindowsIndex] can't find overlay index. [identify=${t}]`)},this.ChangeKLineDrawType=function(t){if(this.KLineDrawType!=t){for(var e in this.KLineDrawType=t,this.ChartPaint){var a=this.ChartPaint[e];0==e?a.DrawType=this.KLineDrawType:"ChartVolStick"==a.ClassName&&(a.KLineDrawType=this.KLineDrawType)}for(var e in this.OverlayChartPaint){(a=this.OverlayChartPaint[e]).DrawType=this.KLineDrawType}this.Draw()}},this.ChangeCoordinateType=function(t){if((this.Frame||this.Frame.SubFrame)&&this.Frame.SubFrame.length){if(2==t)this.Frame.SubFrame[0].Frame.CoordinateType=1;else if(1==t)this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=t;else{if(0!=t)return;this.Frame.SubFrame[0].Frame.CoordinateType=0,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0}this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ChangeIndexWindowCount=function(t){if(!(t<=0)&&this.Frame.SubFrame.length!=t){var e=this.Frame.SubFrame.length;if(e>t){for(var a=e-1;a>=t;--a)this.DeleteIndexPaint(a),this.Frame.SubFrame[a].Frame.ClearToolbar();this.Frame.SubFrame.splice(t,e-t),this.WindowIndex.splice(t,e-t);for(a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1}}else{for(a=e;a<t;++a){var n=this.CreateSubFrameItem(a);this.Frame.SubFrame[a]=n;var r=new Gt;r.Frame=this.Frame.SubFrame[a].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,this.TitlePaint[a+1]=r}const h=["RSI","MACD","VOL","UOS","CHO","BRAR"];let u=new l;for(a=e;a<t;++a){var s=h[a%h.length];let t=u.Get(s);this.WindowIndex[a]=new ea(t.Name,t.Script,t.Args,t);var o=this.ChartPaint[0].Data;this.BindIndexData(a,o)}for(a=0;a<this.Frame.SubFrame.length;++a){i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeIndexTemplate=function(t){if(t.Windows){var e=t.Windows.length;if(!(e<=0)){for(var a=this.Frame.SubFrame.length,i=0;i<a;++i){this.DeleteIndexPaint(i);var n=this.Frame.SubFrame[i];n.YSpecificMaxMin=null,n.IsLocked=!1,n.YSplitScale=null}if(a>e){for(i=a-1;i>=e;--i)this.Frame.SubFrame[i].Frame.ClearToolbar();this.Frame.SubFrame.splice(e,a-e),this.WindowIndex.splice(e,a-e)}else for(i=a;i<e;++i){var r=this.CreateSubFrameItem(i);this.Frame.SubFrame[i]=r;var s=new Gt;s.Frame=this.Frame.SubFrame[i].Frame,s.Canvas=this.Canvas,s.LanguageID=this.LanguageID,this.TitlePaint[i+1]=s}var o=new l,h=this.ChartPaint[0].Data;for(i=0;i<e;++i){var u=i,c=t.Windows[i].Index,f=De.Get(c),C=u+1;if(this.TitlePaint[C].Data=[],this.TitlePaint[C].Title=null,f)this.WindowIndex[i]=f.Create(),this.CreateWindowIndex(u),this.BindIndexData(u,h);else{var d=o.Get(c);if(d){var D=d.Args;t.Windows[i].Args&&(D=t.Windows[i].Args);let e={Name:d.Name,Script:d.Script,Args:D,ID:c,KLineType:d.KLineType,YSpecificMaxMin:d.YSpecificMaxMin,YSplitScale:d.YSplitScale,FloatPrecision:d.FloatPrecision,Condition:d.Condition};this.WindowIndex[i]=new ea(e.Name,e.Script,e.Args,e),this.BindIndexData(u,h)}}}for(i=0;i<this.Frame.SubFrame.length;++i){var p=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?p.XSplitOperator.ShowText=!0:p.XSplitOperator.ShowText=!1}this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}},this.RemoveIndexWindow=function(t){if(console.log("[KLineChartContainer::RemoveIndexWindow] remove id",t),0!=t&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){var e=this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar(),this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1,i.Identify=a}if(this.ChartDrawPicture.length>0){var n=[];for(var a in this.ChartDrawPicture){(i=this.ChartDrawPicture[a]).Frame!=e&&n.push(i)}this.ChartDrawPicture=n}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};a.ID&&(i.ID=a.ID),t.push(i)}return t},this.CreateExtendChart=function(t,e){var a;switch(t){case"":return(a=new function(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.Name="",this.ClassName="StockChip",this.HQChart,this.PenBorder=fe.FrameBorderPen,this.ColorProfit="rgb(255,0,0)",this.ColorNoProfit="rgb(90,141,248)",this.ColorAveragePrice="rgb(0,139,0)",this.ColorBG="rgb(190,190,190)",this.PixelRatio=d(),this.ShowType=0,this.IsDynamic=!0,this.ClientRect={},this.Font=fe.TitleFont,this.InfoColor="rgb(0,0,0)",this.DayInfoColor="rgb(255,255,255)",this.LineHeight=16,this.Left=50*this.PixelRatio,this.IsShowX=!1,this.ShowXCount=3,this.Width=150*this.PixelRatio,this.ButtonID=m(),this.DAY_COLOR=[["rgb(255,0,0)","rgb(255,128,128)","rgb(255,0,128)","rgb(255,100,0)","rgb(192,128,0)","rgb(255,192,0)"],["rgb(120,80,225)","rgb(160,160,225)","rgb(80,80,255)","rgb(120,120,255)","rgb(32,64,192)","rgb(0,64,128)"]],this.SetOption=function(t){t&&(t.ShowType>0&&(this.ShowType=t.ShowType),t.IsShowX&&(this.IsShowX=t.IsShowX),t.ShowXCount>0&&(this.ShowXCount=t.ShowXCount),t.Width>100&&(this.Width=t.Width*d()))},this.Draw=function(){this.PixelRatio=d();var t=S(this.ChartBorder.GetRight()+this.Left),e=S(this.ChartBorder.GetTop()),a=S(t+this.Width-1*this.PixelRatio)-t,i=S(this.ChartBorder.GetBottom())-e;this.ClientRect={Left:t,Top:e,Width:a,Height:i},this.CalculateChip()?(this.DrawFrame(),this.DrawAllChip(),1!=this.ShowType&&2!=this.ShowType||this.DrawDayChip(),this.CalculateCast(),this.DrawChipInfo()):console.log("[StockChip::Draw] no data"),this.DrawBorder(),1==this.SizeChange&&this.DrawButton(),this.SizeChange=!1},this.DrawChipInfo=function(){var t=this.ClientRect.Top+this.ClientRect.Height-1,e=this.ClientRect.Left+2,a=this.ClientRect.Left+this.ClientRect.Width;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var i=this.LineHeight*d(),n="70%"+this.Data.Cast[1].MinPrice.toFixed(2)+"-"+this.Data.Cast[1].MaxPrice.toFixed(2)+""+this.Data.Cast[1].Rate.toFixed(2)+"%";this.Canvas.fillText(n,e,t),t-=i,n="90%"+this.Data.Cast[0].MinPrice.toFixed(2)+"-"+this.Data.Cast[0].MaxPrice.toFixed(2)+""+this.Data.Cast[0].Rate.toFixed(2)+"%",this.Canvas.fillText(n,e,t),t-=i,n=""+this.Data.ChipInfo.AveragePrice.toFixed(2)+"",this.Canvas.fillText(n,e,t),t-=i,n=+this.Data.YPrice.toFixed(2)+""+this.Data.ChipInfo.YProfitRate.toFixed(2)+"%",this.Canvas.fillText(n,e,t),t-=i,n="",this.Canvas.fillText(n,e,t);var r=e+(o=this.Canvas.measureText(n).width+2),s=a-5-r;if(this.Canvas.strokeStyle=this.ColorNoProfit,this.Canvas.strokeRect(r,t-i,s,i),this.Canvas.strokeStyle=this.ColorProfit,this.Canvas.strokeRect(r,t-i,s*(this.Data.ChipInfo.ProfitRate/100),i),n=this.Data.ChipInfo.ProfitRate.toFixed(2)+"%",this.Canvas.textAlign="center",this.Canvas.fillText(n,r+s/2,t),t-=i,this.Canvas.textAlign="left",n=","+It.FormatDateString(this.Data.SelectData.Date),this.Data.SelectData.Time&&(n+=" "+It.FormatTimeString(this.Data.SelectData.Time)),this.Canvas.fillText(n,e,t),t-=i,1==this.ShowType||2==this.ShowType){a=this.ClientRect.Left+this.ClientRect.Width-1,this.Canvas.textAlign="right";var o=50;for(var h in this.Data.DayChip.sort(function(t,e){return e.Day-t.Day}),this.Data.DayChip){var l=this.Data.DayChip[h],u=0;this.Data.ChipInfo&&this.Data.ChipInfo.Vol>0&&(u=l.Vol/this.Data.ChipInfo.Vol*100),n=l.Day+""+(1==this.ShowType?"":"")+""+u.toFixed(2)+"%",0==h&&(o=this.Canvas.measureText(n).width+8),this.Canvas.fillStyle=l.Color,this.Canvas.fillRect(a-o,t-i,o,i),this.Canvas.fillStyle=this.DayInfoColor,this.Canvas.fillText(n,a,t),t-=i}}},this.DrawDayChip=function(){var t=this.HQChart.Frame.SubFrame[0].Frame;for(var e in this.Data.DayChip){var a=[],i=this.Data.DayChip[e].Chip;if(i){for(var n=0,r=0;r<i.length;++r){var s=i[r];if(s){n+=s;var o=(r+this.Data.MinPrice)/100,h=t.GetYFromData(o),l=s/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;a.push({X:l,Y:h})}}this.Data.DayChip[e].Vol=n,this.DrawArea(a,this.Data.DayChip[e].Color)}}},this.Clear=function(){var t=document.getElementById(this.ButtonID);t&&this.ChartBorder.UIElement.parentNode.removeChild(t)},this.DrawButton=function(){var t=document.getElementById(this.ButtonID);t||((t=document.createElement("div")).className="klineframe-button",t.id=this.ButtonID,this.ChartBorder.UIElement.parentNode.appendChild(t));var e=this.PixelRatio,a=(this.ClientRect.Left,this.ClientRect.Left+this.ClientRect.Width),i=this.ChartBorder.GetChartWidth(),n=this.ChartBorder.GetTitleHeight(),s=this.ChartBorder.GetTop()/e;const o=[{Class:"chip_default icon iconfont icon-chip_default",ID:"chip_default",Color:["#808080","#FF0000"],Title:""},{Class:"chip_long icon iconfont icon-chip_date",ID:"chip_long",Color:["#808080","#FF8000"],Title:""},{Class:"chip_recent icon iconfont icon-chip_date",ID:"chip_recent",Color:["#808080","#0000CC"],Title:""}];var h="";for(var l in o){var u=o[l],c="<span class='{iconclass}' id='{iconid}' title='{icontitle}' style='cursor:pointer;display:inline-block;color:{iconcolor};font-size:{iconsize}px'></span>";c=(c=(c=(c=(c=c.replace("{iconclass}",u.Class)).replace("{iconid}",u.ID)).replace("{iconcolor}",u.Color[l==this.ShowType?1:0])).replace("{iconsize}",n)).replace("{icontitle}",u.Title),h.length>0&&(h+="&nbsp;&nbsp;"),h+=c}t.style.right=Math.floor((i-a+2)/e)+"px",t.style.top=s+"px",t.style.height=n+"px",t.innerHTML=h;var f=this;for(var l in o)u=o[l],r()("#"+this.ButtonID+" ."+u.ID).click({IconID:u.ID,ShowType:l},function(t){t.data.IconID;var e=t.data.ShowType;for(var a in f.ShowType=e,f.HQChart&&f.HQChart.Draw(),o){var i=o[a];r()("#"+f.ButtonID+" ."+i.ID)[0].style.color=i.Color[a==e?1:0]}})},this.DrawAllChip=function(){for(var t=this.HQChart.Frame.SubFrame[0].Frame,e=this.Data.SelectData.Close,a=[],i=[],n=0,r=0,s=0,o=0,h=this.Data.YPrice,l=t.HorizontalMax,u=t.HorizontalMin,c=1,f=0;f<this.Data.AllChip.length;++f)(C=this.Data.AllChip[f])&&(n+=C,r+=(d=(f+this.Data.MinPrice)/100)*C,d<h&&(o+=C),d<e&&(s+=C),d<=l&&d>=u&&c<C&&(c=C));for(this.Data.MaxVol=c,f=0;f<this.Data.AllChip.length;++f){var C,d;if((C=this.Data.AllChip[f])&&!((d=(f+this.Data.MinPrice)/100)>l||d<u)){var D=t.GetYFromData(d),p=C/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;d<e?a.push({X:p,Y:D}):i.push({X:p,Y:D})}}if(this.Data.ChipInfo={Vol:n,AveragePrice:r/n,ProfitVol:s,ProfitRate:n>0?s/n*100:0,YProfitRate:n>0?o/n*100:0},0==this.ShowType){this.DrawLines(a,this.ColorProfit),this.DrawLines(i,this.ColorNoProfit);var m=this.Data.ChipInfo.AveragePrice;m>0&&m<=l&&m>=u&&(m=m.toFixed(2),this.DrawAveragePriceLine(a,i,t.GetYFromData(m),this.ColorAveragePrice))}else this.DrawLines(a,this.ColorBG),this.DrawLines(i,this.ColorBG)},this.CalculateCast=function(){if(this.Data.ChipInfo&&this.Data.ChipInfo.Vol){for(var t=[{Start:.05,End:.95,MaxPrice:0,MinPrice:0,Rate:0},{Start:.15,End:.85,MaxPrice:0,MinPrice:0,Rate:0}],e=(this.Data.ChipInfo.AveragePrice,this.Data.ChipInfo.ProfitVol),a=0,i=0,n=0;i<this.Data.AllChip.length&&4!=n;++i){var r=this.Data.AllChip[i];if(!(r<=0)){var s=(i+this.Data.MinPrice)/100,o=(a+=r)/e;for(var h in t){var l=t[h];l.MinPrice<=0&&o>l.Start&&(l.MinPrice=s,++n),l.MaxPrice<=0&&o>l.End&&(l.MaxPrice=s,++n)}}}for(var i in t){var u=t[i],c=u.MaxPrice+u.MinPrice;c&&(u.Rate=Math.abs(u.MaxPrice-u.MinPrice)/c*100)}this.Data.Cast=t}},this.DrawArea=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.fillStyle=e,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,t[0].Y),t){var i=t[a];this.Canvas.lineTo(i.X,i.Y)}this.Canvas.lineTo(this.ClientRect.Left,t[t.length-1].Y),this.Canvas.fill()}},this.DrawLines=function(t,e){if(!(t.length<=0)){for(var a in this.Canvas.strokeStyle=e,this.Canvas.beginPath(),t){var i=t[a];this.Canvas.moveTo(this.ClientRect.Left,i.Y),this.Canvas.lineTo(i.X,i.Y)}this.Canvas.stroke()}},this.DrawAveragePriceLine=function(t,e,a,i){for(var n in t)if((r=t[n]).Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,r.Y),this.Canvas.lineTo(r.X,r.Y),void this.Canvas.stroke();for(var n in e){var r;if((r=e[n]).Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,r.Y),this.Canvas.lineTo(r.X,r.Y),void this.Canvas.stroke()}},this.DrawBorder=function(){this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(this.ClientRect.Left,this.ClientRect.Top,this.ClientRect.Width,this.ClientRect.Height)},this.CalculateChip=function(){if(!this.HQChart)return!1;if(!this.HQChart.FlowCapitalReady)return!1;var t=this.HQChart.Symbol;if(!t)return!1;if(we.IsSHSZIndex(t))return!1;var e=this.HQChart.ChartPaint[0].Data,a=e.DataOffset+parseInt(this.HQChart.CursorIndex);a>=e.Data.length&&(a=e.Data.length-1);var i=e.Data[a],n=i.Close,r=this.HQChart.LastPoint.Y;r&&(n=this.HQChart.Frame.SubFrame[0].Frame.GetYData(r));var s,o,h=[],l=1;for(let t=a;t>=0;--t){var u=1;(p=e.Data[t]).FlowCapital>0&&(u=p.Vol/p.FlowCapital);var c={Vol:t==a?p.Vol*u:p.Vol*l,High:p.High,Low:p.Low};h.push(c),l*=1-1*u,(!s||s<p.High)&&(s=p.High),(!o||o>p.Low)&&(o=p.Low)}if(!s||!o)return!0;var f=(s=parseInt(100*s))-(o=parseInt(100*o)),C=new Array;for(let t=0;t<=f;++t)C.push(0);var d=1,D=[];if(2==this.ShowType){D=[{Day:100,Color:this.DAY_COLOR[1][5]},{Day:60,Color:this.DAY_COLOR[1][4]},{Day:30,Color:this.DAY_COLOR[1][3]},{Day:20,Color:this.DAY_COLOR[1][2]},{Day:10,Color:this.DAY_COLOR[1][1]},{Day:5,Color:this.DAY_COLOR[1][0]}];for(let t in h){var p=h[t],m=parseInt(100*p.High),v=parseInt(100*p.Low),S=p.Vol;if(m-v>0&&(S=p.Vol/(m-v)),!(S<=1e-9)){for(var g=0;g<D.length;++g)if(t==D[g].Day){D[g].Chip=C.slice(0);break}for(var I=v;I<=m&&I<=s;++I)C[A=I-o]+=S,d<C[A]&&(d=C[A])}}}else if(1==this.ShowType){D=[{Day:5,Color:this.DAY_COLOR[0][0]},{Day:10,Color:this.DAY_COLOR[0][1]},{Day:20,Color:this.DAY_COLOR[0][2]},{Day:30,Color:this.DAY_COLOR[0][3]},{Day:60,Color:this.DAY_COLOR[0][4]},{Day:100,Color:this.DAY_COLOR[0][5]}];for(let t=h.length-1;t>=0;--t)if(p=h[t],m=parseInt(100*p.High),v=parseInt(100*p.Low),S=p.Vol,m-v>0&&(S=p.Vol/(m-v)),!(S<=1e-9)){for(g=0;g<D.length;++g)if(t==D[g].Day){D[g].Chip=C.slice(0);break}for(I=v;I<=m&&I<=s;++I)C[A=I-o]+=S,d<C[A]&&(d=C[A])}}else for(let t in h)if(p=h[t],m=parseInt(100*p.High),v=parseInt(100*p.Low),S=p.Vol,m-v>0&&(S=p.Vol/(m-v)),!(S<=1e-9))for(I=v;I<=m&&I<=s;++I){var A;C[A=I-o]+=S,d<C[A]&&(d=C[A])}return this.Data={AllChip:C,MaxVol:d,MaxPrice:s,MinPrice:o,SelectData:i,DayChip:D,YPrice:n},!0},this.DrawFrame=function(){if(0!=this.IsShowX&&!(this.Data.MaxVol<=0)){var t=1!==this.HQChart.Frame.SubFrame.length,e=S(this.HQChart.Frame.SubFrame[0].Frame.ChartBorder.GetBottomEx()+1);t||(e=this.ClientRect.Top+this.ClientRect.Height);var a=this.ClientRect.Left,n=a+this.ClientRect.Width;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),t&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(n,e));var r=this.ShowXCount,s=this.Data.MaxVol,o=Math.floor(s/r);for(this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.InfoColor,d(),i=1;i<=r;++i){var h=o*i,l=h/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;if(l=S(l),i==r){this.Canvas.textAlign="right";var u=It.FormatValueString(s,1);this.Canvas.fillText(u,l,e+2)}else{this.Canvas.moveTo(l,this.ClientRect.Top),this.Canvas.lineTo(l,e),this.Canvas.textAlign="center",u=It.FormatValueString(h,1);var c=this.Canvas.measureText(u).width;this.Canvas.fillText(u,Math.floor(l-.25*c),e+2)}}this.Canvas.stroke()}}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"":return(a=new function(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.ClassName="DrawToolsButton",this.HQChart,this.ID=m(),this.ToolsDiv,this.Color="#696969",this.Top=5*d(),this.Width=45*d(),this.SetOption=function(t){var e=d();t&&t.Width>10&&(this.Width=t.Width*e)},this.Clear=function(){this.ToolsDiv&&this.ChartBorder.UIElement.parentNode.removeChild(this.ToolsDiv)},this.Draw=function(){if(0==this.SizeChange)return;const t=[[{HTML:{Title:"",IClass:"iconfont icon-draw_line",ID:"icon-segment"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_rays",ID:"icon-beam"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_trendline",ID:"icon-trendline"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_hline",ID:"icon-hline"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_parallel_lines",ID:"icon-parallellines"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_parallelchannel",ID:"icon-parallelchannel"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_pricechannel",ID:"icon-pricechannel"},Name:""},{HTML:{Title:"MW",IClass:"iconfont icon-draw_wavemw",ID:"icon-wavemw"},Name:"MW"}],[{HTML:{Title:"",IClass:"iconfont icon-draw_arc",ID:"icon-arc"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-rectangle",ID:"icon-rect"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_quadrangle",ID:"icon-quad"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_triangle",ID:"icon-triangle"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_circle",ID:"icon-circle"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_symangle",ID:"icon-symangle"},Name:""}],[{HTML:{Title:"",IClass:"iconfont icon-draw_text",ID:"icon-text"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-arrow_up",ID:"icon-arrowup"},Name:"icon-arrow_up"},{HTML:{Title:"",IClass:"iconfont icon-arrow_down",ID:"icon-arrowdown"},Name:"icon-arrow_down"},{HTML:{Title:"",IClass:"iconfont icon-arrow_left",ID:"icon-arrowleft"},Name:"icon-arrow_left"},{HTML:{Title:"",IClass:"iconfont icon-arrow_right",ID:"icon-arrowright"},Name:"icon-arrow_right"}],[{HTML:{Title:"",IClass:"iconfont icon-draw_gannfan",ID:"icon-gannfan"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_fibonacci",ID:"icon-fibonacci"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_resline",ID:"icon-resline"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_goldensection",ID:"icon-goldensection"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_percentage",ID:"icon-percentage"},Name:""},{HTML:{Title:"",IClass:"iconfont icon-draw_waveband",ID:"icon-waveband"},Name:""}],[{HTML:{Title:"",IClass:"iconfont icon-recycle_bin",ID:"icon-delete"},Name:""}]];var e=this.HQChart;if(!this.ToolsDiv){var a=document.createElement("div");a.className="drawtools",a.id=this.ID;var i="",n="",s=new Array;t.forEach(function(t,e){s.push(t[0])});for(var o=0;o<t.length;o++){for(var h=s[o],l=t[o],u="",c="",f=0;f<l.length;f++){var C=l[f],D=C.Name;D.indexOf("up")>-1?D="":D.indexOf("down")>-1?D="":D.indexOf("left")>-1?D="":D.indexOf("right")>-1&&(D=""),u+='<p class="menuTwoItem '+C.HTML.ID+'">'+D+'<i class="'+C.HTML.IClass+'" title="'+C.HTML.Title+'"></i></p>'}o!==t.length-1?(n='<div class="menuTwo">'+u+"</div>",c='<i class="contentArrow iconfont icon-menu_arraw_left"></i>'):(n="",c=""),i+='<div class="icon-image first-'+h.HTML.ID+'"><i class="'+h.HTML.IClass+'" title="'+h.HTML.Title+'"></i>'+n+c+"</div>"}for(var o in this.ChartBorder.UIElement.parentNode.appendChild(a),a.innerHTML=i,this.ToolsDiv=a,t){var p=t[o][0];if(r()("#"+this.ID+" .first-"+p.HTML.ID).hover(function(){r()(".drawtools").find(".contentArrow").hide(),r()(this).find(".contentArrow").removeClass("trans").show()}),r()("#"+this.ID+" .first-"+p.HTML.ID+" .contentArrow").click(function(t){t.stopPropagation(),r()(".drawtools").find(".menuTwo").hide(),r()(this).siblings(".menuTwo").show()}),r()("#"+this.ID+" .first-"+p.HTML.ID+" .trans").click(function(){event.stopPropagation(),r()(this).siblings(".menuTwo").hide()}),""==p.Name)r()("#"+this.ID+" .first-icon-delete").click(function(){r()(".drawtools").find(".menuTwo").hide(),r()(this).siblings().removeClass("active"),r()(this).addClass("active"),e.ClearChartDrawPicture(),r()(".subTolls").css("display","none")});else for(var f in r()("#"+this.ID+" .first-"+s[o].HTML.ID).click({CurrentIndex:o},function(t){r()(".drawtools").find(".menuTwo").hide(),r()(this).siblings().removeClass("active"),r()(this).addClass("active"),e.CreateChartDrawPicture(s[t.data.CurrentIndex].Name)}),t[o]){var m=t[o][f];let a=m.HTML.IClass;r()("#"+this.ID+" ."+m.HTML.ID).hover(function(t){t.stopPropagation(),r()(this).closest(".icon-image").find(".contentArrow").addClass("trans")}),r()("#"+this.ID+" ."+m.HTML.ID).click({DrawName:m.Name,CurrentIndex:o,CurrentData:m},function(t){t.stopPropagation(),r()(this).closest(".icon-image").find(".contentArrow").hide(),r()(this).siblings().removeClass("current"),r()(this).addClass("current"),r()(this).closest(".icon-image").children("i").eq(0).removeClass().addClass(a,"active").attr("title",t.data.CurrentData.HTML.Title),s.splice(t.data.CurrentIndex,1,t.data.CurrentData),r()(this).parent().hide(),e.CreateChartDrawPicture(t.data.DrawName)})}}}var g=this.ID;r()(document).click(function(t){r()("#"+g).is(t.target)||0!==r()("#"+g).has(t.target).length||(r()("#"+g+" .menuTwo").hide(),r()("#"+g+" .contentArrow").hide())}),v();var I=d(),A=S(this.ChartBorder.GetRight()+this.Left),y=this.ChartBorder.GetTop();this.ToolsDiv.style.left=A/I+"px",this.ToolsDiv.style.top=y/I+"px",this.ToolsDiv.style.width=(this.Width-5)/I+"px",this.ToolsDiv.style.height="auto",this.ToolsDiv.style.position="absolute",this.ToolsDiv.style.display="block",this.SizeChange}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"KLineTooltip":return(a=new gt).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return null}},this.OnTouchFinished=function(){if(!0!==this.CorssCursorTouchEnd)for(var t in this.ExtendChartPaint){"KLineTooltipPaint"===this.ExtendChartPaint[t].ClassName&&this.DrawDynamicInfo()}else this.DrawDynamicInfo()},this.GetExtendChartByClassName=function(t){for(var e in this.ExtendChartPaint){var a=this.ExtendChartPaint[e];if(a.ClassName==t)return{Index:e,Chart:a}}return null},this.DeleteExtendChart=function(t){t.Index>=this.ExtendChartPaint.length||this.ExtendChartPaint[t.Index]==t.Chart&&("function"==typeof t.Chart.Clear&&t.Chart.Clear(),this.ExtendChartPaint.splice(t.Index,1))},this.LockIndex=function(t){if(t&&t.IndexName)for(let e in this.WindowIndex){let a=this.WindowIndex[e];if(a||conintue,a.Name==t.IndexName){a.SetLock(t),this.Update();break}}},this.TryClickLock=function(t,e){for(let n in this.Frame.SubFrame){var a=this.Frame.SubFrame[n];if(a.Frame.IsLocked&&a.Frame.LockPaint){var i=new X;if(a.Frame.LockPaint.GetTooltipData(t,e,i))return i.HQChart=this,i.Data.Callback&&i.Data.Callback(i),!0}}return!1},this.SetSizeChage=function(t){for(var e in this.Frame.SetSizeChage(t),this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.Update=function(){if(this.SourceData){if((n=new V).Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Symbol=this.Symbol,n.Right>0&&V.IsDayPeriod(n.Period,!0)){var t=n.GetRightDate(n.Right);n.Data=t}if(V.IsDayPeriod(n.Period,!1)||V.IsMinutePeriod(n.Period,!1)){var e=n.GetPeriodData(n.Period);n.Data=e}this.BindMainData(n,this.PageSize);for(var a=0;a<this.Frame.SubFrame.length;++a)this.BindIndexData(a,n);for(var a in this.OverlayChartPaint){if((r=this.OverlayChartPaint[a]).SourceData)if(V.IsMinutePeriod(this.Period,!0)){(n=new V).Data=r.SourceData.Data,n.Period=this.Period,n.Right=this.Right;var i=this.SourceData.GetOverlayMinuteData(n.Data);if(n.Data=i,V.IsMinutePeriod(n.Period,!1)){e=n.GetPeriodData(n.Period);n.Data=e}r.Data=n}else{var n;if((n=new V).Data=r.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.Right>0&&we.IsSHSZStockA(r.Symbol)){t=n.GetRightDate(n.Right);n.Data=t}i=this.SourceData.GetOverlayData(n.Data);if(n.Data=i,V.IsDayPeriod(n.Period,!1)){e=n.GetPeriodData(n.Period);n.Data=e}r.Data=n}}this.ReqeustKLineInfoData(),this.CreateChartDrawPictureByStorage(),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(a=0;a<this.Frame.SubFrame.length;++a){var r=this.Frame.SubFrame[a];for(var s in r.OverlayIndex){var o=r.OverlayIndex[s];this.BindOverlayIndexData(o,a,n)}}}},this.ChangeSymbol=function(t){if(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeSymbol"),this.Symbol=t,we.IsSHSZIndex(t)&&(this.Right=0),this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e)this.DeleteIndexPaint(e);this.ReloadChartDrawPicture(),V.IsDayPeriod(this.Period,!0)?(this.RequestHistoryData(),this.ReqeustKLineInfoData()):V.IsMinutePeriod(this.Period,!0)?this.ReqeustHistoryMinuteData():V.IsTickPeriod(this.Period)&&this.RequestTickData()},this.ReqeustKLineInfoData=function(){this.ChartPaint.length>0&&(this.ChartPaint[0].InfoData=new Map);for(var t in this.ChartInfo)this.ChartInfo[t].RequestData(this)},this.SetKLineInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=Fe.Get(t[a]);if(i){var n=i.Create();n.MaxReqeustDataCount=this.MaxReqeustDataCount,this.ChartInfo.push(n)}}1==e&&this.ReqeustKLineInfoData()},this.AddKLineInfo=function(t,e){var a=Fe.GetClassInfo(t);if(a){for(var i in this.ChartInfo){if((n=this.ChartInfo[i]).ClassName==a.ClassName)return}var n,r=Fe.Get(t);if(r)(n=r.Create()).MaxReqeustDataCount=this.MaxReqeustDataCount,this.ChartInfo.push(n),1==e&&n.RequestData(this)}else console.warn("[KLineChartContainer::AddKLineInfo] can't find infoname=",t)},this.DeleteKLineInfo=function(t){var e=Fe.GetClassInfo(t);if(e)for(var a in this.ChartInfo){if(this.ChartInfo[a].ClassName==e.ClassName){this.ChartInfo.splice(a,1),this.UpdataChartInfo(),this.Draw();break}}else console.warn("[KLineChartContainer::DeleteKLineInfo] can't find infoname=",t)},this.ClearKLineInfo=function(){!this.ChartInfo||this.ChartInfo.length<=0||(this.ChartInfo=[],this.ChartPaint[0].InfoData=null,this.Draw())},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol===t)return console.warn(`[KLineChartContainer::OverlaySymbol] overlay symbol=${t} exist.`),!1}var i=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartOverlayKLine",this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.Title,this.DrawType=0,this.CustomDrawType=null,this.Status=$.STATUS_NONE_ID,this.IsDelete=!1,this.SetOption=function(t){t&&It.IsNumber(t.DrawType)&&(this.CustomDrawType=t.DrawType)},this.DrawKBar=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetLeft()+i/2+2;e&&(n=this.ChartBorder.GetTop()+i/2+2);var r=this.ChartBorder.GetRight();e&&(r=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=this.DrawType;null!=this.CustomDrawType&&(o=this.CustomDrawType);for(var h=!0,l=null,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<s;++u,++c,n+=a+i){var f=this.Data.Data[u];if(f&&null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){null==l&&(l=f.Open),h&&(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color,this.Canvas.beginPath(),h=!1);var C=n,d=n+a;if(d>r)break;var D=C+(d-C)/2,p=this.ChartFrame.GetYFromData(f.Low/l*t),m=this.ChartFrame.GetYFromData(f.High/l*t),v=this.ChartFrame.GetYFromData(f.Open/l*t),I=this.ChartFrame.GetYFromData(f.Close/l*t),A=m;f.Open<f.Close?a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(S(A),S(D)),this.Canvas.lineTo(S(3==this.DrawType?Math.max(I,v):I),S(D))):(this.Canvas.moveTo(S(D),S(A)),this.Canvas.lineTo(S(D),S(3==this.DrawType?Math.min(I,v):I))),A=I):A=I,e?Math.abs(v-A)<1?this.Canvas.fillRect(g(A),g(C),1,g(a)):3==o?this.Canvas.rect(S(A),S(C),g(v-A),g(a)):this.Canvas.fillRect(g(A),g(C),g(v-A),g(a)):Math.abs(v-A)<1?this.Canvas.fillRect(g(C),g(A),g(a),1):3==o?this.Canvas.rect(S(C),S(A),g(a),g(v-A)):this.Canvas.fillRect(g(C),g(A),g(a),g(v-A)),f.Open>f.Low&&(e?(this.Canvas.moveTo(S(3==this.DrawType?Math.min(I,v):A),S(D)),this.Canvas.lineTo(S(p),S(D))):(this.Canvas.moveTo(S(D),S(3==this.DrawType?Math.max(I,v):A)),this.Canvas.lineTo(S(D),S(p))))):e?(this.Canvas.moveTo(m,S(D)),this.Canvas.lineTo(p,S(D))):(this.Canvas.moveTo(S(D),m),this.Canvas.lineTo(S(D),p)):f.Open>f.Close?a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(S(A),S(D)),this.Canvas.lineTo(S(v),S(D))):(this.Canvas.moveTo(S(D),S(A)),this.Canvas.lineTo(S(D),S(v))),A=v):A=v,e?Math.abs(I-A)<1?this.Canvas.fillRect(g(A),g(C),1,g(a)):this.Canvas.fillRect(g(A),g(C),g(I-A),g(a)):Math.abs(I-A)<1?this.Canvas.fillRect(g(C),g(A),g(a),1):this.Canvas.fillRect(g(C),g(A),g(a),g(I-A)),f.Open>f.Low&&(e?(this.Canvas.moveTo(S(A),S(D)),this.Canvas.lineTo(S(p),S(D))):(this.Canvas.moveTo(S(D),S(A)),this.Canvas.lineTo(S(D),S(p))))):e?(this.Canvas.moveTo(m,S(D)),this.Canvas.lineTo(p,S(D))):(this.Canvas.moveTo(S(D),m),this.Canvas.lineTo(S(D),p)):a>=4?(f.High>f.Close?(e?(this.Canvas.moveTo(A,S(D)),this.Canvas.lineTo(v,S(D))):(this.Canvas.moveTo(S(D),A),this.Canvas.lineTo(S(D),v)),A=v):A=v,e?(this.Canvas.moveTo(S(A),S(C)),this.Canvas.lineTo(S(A),S(d))):(this.Canvas.moveTo(S(C),S(A)),this.Canvas.lineTo(S(d),S(A))),f.Open>f.Low&&(e?(this.Canvas.moveTo(S(A),S(D)),this.Canvas.lineTo(S(p),S(D))):(this.Canvas.moveTo(S(D),S(A)),this.Canvas.lineTo(S(D),S(p))))):e?(this.Canvas.moveTo(m,S(D)),this.Canvas.lineTo(p,S(D))):(this.Canvas.moveTo(S(D),m),this.Canvas.lineTo(S(D),p));var y=Math.min(p,m,v,I),T=new J(C,y,a,Math.max(p,m,v,I)-y);this.TooltipRect.push([u,T])}}0==h&&this.Canvas.stroke()},this.DrawAKLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetLeft()+i/2+2;e&&(n=this.ChartBorder.GetTop()+i/2+2);var r=this.ChartBorder.GetRight();e&&(r=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null;this.Canvas.strokeStyle=this.Color;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<s;++h,++l,n+=a+i){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){null==o&&(o=u.Open);var c=n,f=n+a;if(f>r)break;var C=c+(f-c)/2,d=this.ChartFrame.GetYFromData(u.Low/o*t),D=this.ChartFrame.GetYFromData(u.High/o*t),p=this.ChartFrame.GetYFromData(u.Open/o*t),m=this.ChartFrame.GetYFromData(u.Close/o*t);this.Canvas.beginPath(),e?(this.Canvas.moveTo(D,S(C)),this.Canvas.lineTo(d,S(C))):(this.Canvas.moveTo(S(C),D),this.Canvas.lineTo(S(C),d)),this.Canvas.stroke(),a>=4&&(this.Canvas.beginPath(),e?(this.Canvas.moveTo(S(p),c),this.Canvas.lineTo(S(p),C)):(this.Canvas.moveTo(c,S(p)),this.Canvas.lineTo(C,S(p))),this.Canvas.stroke(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(S(m),f),this.Canvas.lineTo(S(m),C)):(this.Canvas.moveTo(f,S(m)),this.Canvas.lineTo(C,S(m))),this.Canvas.stroke())}}},this.DrawCloseLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetLeft()+i/2+2;e&&(n=this.ChartBorder.GetTop()+i/2+2);var r=this.ChartBorder.GetRight();e&&(r=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null,h=!0;this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath();for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<s;++l,++u,n+=a+i){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){null==o&&(o=c.Open);var f=n+a;if(f>r)break;var C=n+(f-n)/2,d=this.ChartFrame.GetYFromData(c.Close/o*t);h?(e?this.Canvas.moveTo(d,C):this.Canvas.moveTo(C,d),h=!1):e?this.Canvas.lineTo(d,C):this.Canvas.lineTo(C,d)}}0==h&&this.Canvas.stroke()},this.Draw=function(){if(this.TooltipRect=[],this.InfoTooltipRect=[],this.MainData&&this.Data){for(var t=this.ChartFrame.XPointCount,e=null,a=this.Data.DataOffset,i=0;a<this.MainData.Data.length&&i<t;++a,++i){var n=this.MainData.Data[a];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close){e=n.Open;break}}if(null!=e){var r=this.DrawType;null!=this.CustomDrawType&&(r=this.CustomDrawType),1==r?this.DrawCloseLine(e):2==r?this.DrawAKLine(e):this.DrawKBar(e)}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Max:null,Min:null};if(!this.MainData||!this.Data)return e;for(var a=null,i=this.Data.DataOffset,n=0;i<this.MainData.Data.length&&n<t;++i,++n)if(null!=(h=this.MainData.Data[i]).Open&&null!=h.High&&null!=h.Low&&null!=h.Close){a=h.Close;break}if(null==a)return e;var r,s,o=null;for(i=this.Data.DataOffset,n=0;i<this.Data.Data.length&&n<t;++i,++n){var h;(h=this.Data.Data[i])&&null!=h.Open&&null!=h.High&&null!=h.Low&&null!=h.Close&&(null==o&&(o=h.Open),r=h.High/o*a,s=h.Low/o*a,null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=s),e.Max<r&&(e.Max=r),e.Min>s&&(e.Min=s))}return e},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var n=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var r=this.TooltipRect[i][0];return a.Data=this.Data.Data[r],a.ChartPaint=this,!0}}return!1}};return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-KLine",i.DrawType=this.KLineDrawType,i.Symbol=t,i.Color=fe.OverlaySymbol.Color[fe.OverlaySymbol.Random%fe.OverlaySymbol.Color.length],i.SetOption(e),++fe.OverlaySymbol.Random,this.ChartPaint[0]&&this.ChartPaint[0].Data&&this.SourceData&&(i.MainData=this.ChartPaint[0].Data),this.OverlayChartPaint.push(i),V.IsDayPeriod(this.Period,!0)?this.RequestOverlayHistoryData():V.IsMinutePeriod(this.Period,!0)&&this.RequestOverlayHistoryMinuteData(),!0},this.RequestOverlayHistoryData=function(){if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data){var t=this,e=this.GetRequestDataCount(),a=this.SourceData.Data[0].Date;for(var i in this.OverlayChartPaint){let r=this.OverlayChartPaint[i];if(!r.MainData)continue;if(r.Status!=$.STATUS_NONE_ID)continue;let o=r.Symbol;if(o){if(r.Status=$.STATUS_REQUESTDATA_ID,this.NetworkFilter){var n={Name:"KLineChartContainer::RequestOverlayHistoryData",Explain:"K",Request:{Url:t.KLineApiUrl,Data:{symbol:o,count:e.MaxRequestDataCount,first:{date:a},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){r.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayHistoryData(e,r)}),1==n.PreventDefault)return}s.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high"],symbol:o,start:-1,count:e.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){r.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayHistoryData(e,r)}})}}}},this.RecvOverlayHistoryData=function(t,e){if(!e.IsDelete){var a=me.JsonDataToHistoryData(t),i=new V;i.Data=a,i.DataType=0;var n=new V;if(n.Data=a,n.Period=this.Period,n.Right=this.Right,n.DataType=0,n.Right>0&&we.IsSHSZStockA(t.symbol)){var r=n.GetRightDate(n.Right);n.Data=r}var s=this.SourceData.GetOverlayData(n.Data);if(n.Data=s,V.IsDayPeriod(n.Period,!1)){var o=n.GetPeriodData(n.Period);n.Data=o}e.Data=n,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=$.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data){var t=this,e=this.GetRequestDataCount(),a=this.SourceData.Data[0].Date,i=this.SourceData.Data[0].Time;for(var n in this.OverlayChartPaint){let o=this.OverlayChartPaint[n];if(!o.MainData)continue;if(o.Status!=$.STATUS_NONE_ID)continue;let h=o.Symbol;if(h){if(o.Status=$.STATUS_REQUESTDATA_ID,this.NetworkFilter){var r={Name:"KLineChartContainer::RequestOverlayHistoryMinuteData",Explain:"K",Request:{Url:t.MinuteKLineApiUrl,Data:{symbol:h,count:e.MaxRequestMinuteDayCount,first:{date:a,time:i},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(e){o.Status=$.STATUS_RECVDATA_ID,t.RecvOveralyHistoryMinuteData(e,o)}),1==r.PreventDefault)return}s.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","vol","amount"],symbol:h,start:-1,count:e.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){o.Status=$.STATUS_RECVDATA_ID,t.RecvOveralyHistoryMinuteData(e,o)}})}}}},this.RecvOveralyHistoryMinuteData=function(t,e){var a=me.JsonDataToMinuteHistoryData(t);if(a){var i=new V;i.Data=a,i.DataType=1;var n=new V;n.Data=a,n.Period=this.Period,n.Right=this.Right,n.DataType=1;var r=this.SourceData.GetOverlayMinuteData(n.Data);if(n.Data=r,V.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}e.Data=n,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=$.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=$.STATUS_NONE_ID}},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0,this.UpdateFrameMaxMin(),this.Draw()},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.OverlayChartPaint.length<=0&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn(`[KLineChartContainer::DeleteOverlaySymbol] overlay symbol=${t} not exist.`),!1},this.RequestFlowCapitalData=function(){if(!this.Symbol)return;if(1==this.FlowCapitalReady)return;if(we.IsBIT(this.Symbol))return console.log(`[KLineChartContainer::RequestFlowCapitalData] symbol=${this.Symbol} not need download data.`),void(this.FlowCapitalReady=!0);var t=this;let e=["name","date","symbol","capital.a"];if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestFlowCapitalData",Explain:"",Request:{Url:t.StockHistoryDayApiUrl,Data:{symbol:[this.Symbol],orderfield:"date",field:e},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvFlowCapitalData(e)}),1==a.PreventDefault)return}s.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:e,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(e){t.RecvFlowCapitalData(e)}})},this.RecvFlowCapitalData=function(t){if(!t.stock||1!=t.stock.length)return;let e=t.stock[0];var a=new Array;for(let t in e.stockday){var i=e.stockday[t];let r=new B;r.Date=i.date;var n=i.capital;n&&(n.a>0&&(r.Value=n.a,a.push(r)))}if(V.IsMinutePeriod(this.Period,!0)){var r=this.SourceData.GetMinuteFittingFinanceData(a);for(let t in this.SourceData.Data){(i=this.SourceData.Data[t]).FlowCapital=r[t].Value}var s=this.ChartPaint[0].Data;if((h=new V).Data=this.SourceData.Data,V.IsMinutePeriod(s.Period,!1)){var o=h.GetPeriodData(s.Period);h.Data=o}s.Data=h.Data}else{r=this.SourceData.GetFittingFinanceData(a);for(let t in this.SourceData.Data){(i=this.SourceData.Data[t]).FlowCapital=r[t].Value}var h;s=this.ChartPaint[0].Data;if((h=new V).Data=this.SourceData.Data,s.Right>0){var l=h.GetRightDate(s.Right);h.Data=l}if(V.IsDayPeriod(s.Period,!1)){o=h.GetPeriodData(s.Period);h.Data=o}s.Data=h.Data}this.FlowCapitalReady=!0;var u=!1;for(var c in this.ExtendChartPaint){if("StockChip"==(i=this.ExtendChartPaint[c]).ClassName){u=!0;break}}u&&this.Draw()},this.CreateChartDrawPicture=function(t,e){var a=null;switch(t){case"":a=new Ut;break;case"":a=new Wt;break;case"":a=new Xt;break;case"":a=new Jt;break;case"":a=new Kt;break;case"":a=new qt;break;case"MW":a=new zt;break;case"":a=new jt;break;case"":a=new Zt;break;case"":a=new $t;break;case"":(a=new Qt).HQChart=this;break;case"":a=new ee;break;case"":a=new ae;break;case"":a=new ie;break;case"":a=new ne;break;case"":a=new re;break;case"":a=new se;break;case"":a=new oe;break;case"":a=new he;break;case"":a=new le;break;case"":a=new ue;break;default:{const e=new Map([["icon-arrow_up",{Text:"",Color:"#318757"}],["icon-arrow_down",{Text:"",Color:"#db563e"}],["icon-arrow_right",{Text:"",Color:"#318757"}],["icon-arrow_left",{Text:"",Color:"#318757"}]]);if(e.has(t)){var i=e.get(t);(a=new te).FontOption.Family="iconfont",a.Text=i.Text,i.Color&&(a.LineColor=i.Color);break}}return!1}return a.Canvas=this.Canvas,a.Status=0,a.Symbol=this.Symbol,a.Period=this.Period,e&&(a.FinishedCallback=e),self=this,a.Update=function(){self.DrawDynamicInfo()},this.CurrentChartDrawPicture=a,!0},this.SetChartDrawPictureFirstPoint=function(t,e){var a=this.CurrentChartDrawPicture;if(!a)return!1;if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return!1;var i=t-this.UIElement.getBoundingClientRect().left,n=e-this.UIElement.getBoundingClientRect().top;for(var r in this.Frame.SubFrame){var s=this.Frame.SubFrame[r].Frame,o=s.ChartBorder.GetLeft(),h=s.ChartBorder.GetTopEx(),l=s.ChartBorder.GetHeight(),u=s.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(o,h,u,l),this.Canvas.isPointInPath(i,n)){a.Frame=s;break}}if(!a.Frame)return!1;a.Point[0]=new I,a.Point[0].X=t-this.UIElement.getBoundingClientRect().left,a.Point[0].Y=e-this.UIElement.getBoundingClientRect().top,a.Status=1},this.SetChartDrawPictureSecondPoint=function(t,e){var a=this.CurrentChartDrawPicture;if(!a)return!1;a.Point[1]=new I,a.Point[1].X=t-this.UIElement.getBoundingClientRect().left,a.Point[1].Y=e-this.UIElement.getBoundingClientRect().top,a.Status=2},this.SetChartDrawPictureThirdPoint=function(t,e){var a=this.CurrentChartDrawPicture;if(!a)return!1;a.Point[2]=new I,a.Point[2].X=t-this.UIElement.getBoundingClientRect().left,a.Point[2].Y=e-this.UIElement.getBoundingClientRect().top,a.Status=3},this.MoveChartDrawPicture=function(t,e){var a=this.CurrentChartDrawPicture;return!!a&&(a.Move(t,e),!0)},this.FinishChartDrawPicturePoint=function(){var t=this.CurrentChartDrawPicture;return!!t&&(t.PointCount==t.Point.length&&(t.Status=10,t.PointToValue(),this.ChartDrawPicture.push(t),this.CurrentChartDrawPicture=null,t.FinishedCallback&&t.FinishedCallback(t),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),!0))},this.OnRightMenu=function(t,e,a){if(this.RightMenu){var i=this.Frame.PtInFrame(t,e);a.data={Chart:this,FrameID:i},this.RightMenu.DoModal(a)}var n=this.GetEventCallback(c.ON_CONTEXT_MENU);if(n){var r={X:t,Y:e,Event:a,FrameID:i=this.Frame.PtInFrame(t,e)};n.Callback(n,r,this)}},this.FinishMoveChartDrawPicture=function(){var t=this.CurrentChartDrawPicture;return!!t&&(t.PointCount==t.Point.length&&(t.Status=10,t.PointToValue(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),this.CurrentChartDrawPicture=null,!0))},this.ClearChartDrawPicture=function(t){if(t)for(var e in this.ChartDrawPicture)this.ChartDrawPicture[e]==t&&(this.ChartDrawStorage&&this.ChartDrawStorage.DeleteDrawData(t),this.ChartDrawPicture.splice(e,1),this.Draw());else this.ChartDrawPicture=[],this.ChartDrawStorage&&this.ChartDrawStorage.Clear(),this.Draw()},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:this.Period}))},this.CreateChartDrawPictureByStorage=function(){if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var t in this.ChartDrawStorageCache){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=Yt.CreateChartDrawPrictrue(e);a&&(a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.ValueToPoint(),"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a))}}this.ChartDrawStorageCache=null}},this.OnSelectChartPicture=function(t){},this.RequestKLineMatch=function(t,e){var a=this,i=e.Scope,n=e.WaitDialog;console.log("[KLineChartContainer::RequestKLineMatch",t,i);for(var s=new Array,o=new Array,h=t.Start;h<t.End&&h<t.Data.Data.length;++h){var l=t.Data.Data[h];s.push(l.Date),o.push(l.Close)}var u={Stock:t.Stock,Index:{Start:t.Start,End:t.End},Date:{Start:s[0],End:s[s.length-1]},Minsimilar:i.Minsimilar,Plate:i.Plate,DayRegion:300};r.a.ajax({url:this.KLineMatchUrl,data:{userid:"guest",plate:i.Plate,period:this.Period,right:this.Right,dayregion:u.DayRegion,minsimilar:i.Minsimilar,sampledate:s,samplevalue:o},type:"post",dataType:"json",async:!0,success:function(t){n&&n.Close(),a.RecvKLineMatchData(t,u)},error:function(t,e,a){console.warn("[KLineChartContainer::RequestKLineMatch] failed",t,e,a),n&&n.Close()}})},this.RecvKLineMatchData=function(t,e){console.log("[KLineChartContainer::RecvKLineMatchData] recv",t,e);var a=[];for(var i in t.match){if((h=t.match[i]).symbol!=e.Stock.Symbol)for(var n in h.data){var s=h.data[n],o={Symbol:h.symbol,Name:h.name,Similar:s.similar,Start:s.start,End:s.end};a.push(o)}}if(a.sort(function(t,e){return e.Similar-t.Similar}),console.log("[KLineChartContainer::RecvKLineMatchData] filterData",a),this.mapEvent.has(c.RECV_KLINE_MATCH)){var h;t={Sample:e,Match:a,Source:t};(h=this.mapEvent.get(c.RECV_KLINE_MATCH)).Callback(h,t,this)}else{var l=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.MatchData,this.Sample,this.Dialog,this.HQChart,this.PageData,this.Close=function(){this.DivElement.removeChild(this.Dialog)},this.Create=function(){this.ID=m();var t=document.createElement("div");t.className="jchart-kline-match-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span></span>\n                <strong id='close' class='icon iconfont icon-close'></strong>\n            </div>\n            <div class='parameter-content'>\n                <p class='dataCount'></p>\n                <table class='matchTable'>\n                    <thead>\n                        <tr>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n                <div class='pagination' data-current='1'></div>\n            </div>\n            <div class='parameter-footer'>\n                <button id='close' class='submit' ></button>\n            </div>\n        </div>".trim(),this.DivElement.appendChild(t),this.Dialog=t,r()("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()})},this.BindData=function(){console.log(`[KLineMatchDialog::BindData] : ${this.Sample.Stock.Name} :${this.Sample.Date.Start} - ${this.Sample.Date.End}`);var t=this.MatchData.length+1,e={NewData:{},MetaData:[],PageCount:0,Count:t},a=0;r()("#"+this.ID+" .dataCount").html(""+t);for(let a=0;a<t;a++){var i={};if(0==a)i={Symbol:this.Sample.Stock.Symbol,Name:this.Sample.Stock.Name,Rate:"",Color:"red",Date:`${this.Sample.Date.Start}-${this.Sample.Date.End}`};else{let t=this.MatchData[a-1];i={Symbol:t.Symbol,Name:t.Name,Rate:Number(100*t.Similar).toFixed(2),Color:"",Date:`${t.Start}-${t.End}`}}e.MetaData.push(i)}a=e.Count%10==0?e.Count/10:Math.floor(e.Count/10)+1,e.PageCount=a,this.PaginationMetaData(e),this.PageData=e,console.log("[KLineMatchDialog::DoModal pageData]",e),this.RenderDom(1),this.PaginationInit("#"+this.ID,e.PageCount,this.paginationCallback)},this.RenderDom=function(t){let e=this.PageData.NewData[t];console.log("[KLineMatchDialog::RenderDom currentPageData]",e);let a="";for(let t=0;t<e.length;t++)a+=`<tr>\n                        <td class=${e[t].Color}>${e[t].Name}</td>\n                        <td class=${e[t].Color}>${e[t].Rate}</td>\n                        <td class=${e[t].Color}>${e[t].Date}</td>\n                    </tr>`.trim();r()("#"+this.ID+" .matchTable tbody").html(a)};var e=this;this.paginationCallback=function(t){e.RenderDom(t),e.PaginationInit("#"+e.ID,e.PageData.PageCount,e.paginationCallback)},this.PaginationInit=function(t,e,a){var i="",n=r()(t+" .pagination").data("current"),s=0;if(n<5)if(e>=5)for(var o=0;o<5;o++)i+=o+1!=n?"<span>"+(o+1)+"</span>":"<span class='active'>"+(o+1)+"</span>";else for(var o=0;o<e;o++)i+=o+1!=n?"<span>"+(o+1)+"</span>":"<span class='active'>"+(o+1)+"</span>";else{s=n+1>e?n:n+1;for(var h=n-3;h<=s;h++)i+=h!=n?"<span>"+h+"</span>":"<span class='active'>"+h+"</span>"}i="<span class='beforePage'></span>"+i+"<span class='nextPage'></span>",r()(t+" .pagination").html(i),r()(t+" .pagination span").bind("click",{maxpage:e,Callback:a},this.PaginationCurrentIndex)},this.PaginationCurrentIndex=function(t){var e=r()(this).text();console.log("[::PaginationCurrentIndex text]",e);var a=Number(r()(this).parent().data("current")),i=t.data.maxpage,n=t.data.Callback,s=1;s=""===e?1===a?a:a-1:""===e?a===i?a:a+1:Number(e),r()(this).parent().data("current",s),n(s)},this.PaginationMetaData=function(t){var e={},a=t.MetaData,i=t.PageCount;for(let t=0;t<i;t++){var n=[];for(let e=0;e<10;e++){var r=10*t+e;if(!(r<=a.length-1))break;var s=a[r];n.push(s)}e[t+1]=n}t.NewData=e},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.MatchData=t.data.MatchData,this.Sample=t.data.Sample,this.HQChart=e,this.BindData();var a=e.Frame.ChartBorder,i=(v(),a.GetWidth()/2),n=a.GetHeight()/2;this.Show(i,n,200,200)}}(this.Frame.ChartBorder.UIElement.parentNode),u={data:{Chart:this,MatchData:a,Sample:e,Source:t}};l.DoModal(u)}},this.UpdataChartInfo=function(){var t=null;if(0==this.Period)for(var e in t=new Map,this.ChartInfo){var a=this.ChartInfo[e].Data;for(var i in a){var n=a[i];t.has(n.Date.toString())?t.get(n.Date.toString()).Data.push(n):t.set(n.Date.toString(),{Data:new Array(n)})}}else if(V.IsDayPeriod(this.Period,!1)){t=new Map;var r=this.ChartPaint[0].Data;for(var e in this.ChartInfo)this.ChartInfo[e].TempID=this.ChartInfo[e].Data.length-1;for(e=0;e<r.Data.length;++e){var s=r.Data[e];for(var i in this.ChartInfo){var o=this.ChartInfo[i];for(a=o.Data;o.TempID>=0;--o.TempID){var h=a[o.TempID];if(h.Date>s.Date)break;t.has(s.Date.toString())?t.get(s.Date.toString()).Data.push(h):t.set(s.Date.toString(),{Data:new Array(h)})}}}for(var e in this.ChartInfo)delete this.ChartInfo[e].TempID}this.ChartPaint[0].InfoData=t},this.UpdateWindowIndex=function(t){var e=new V;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,e.Right>0){var a=e.GetRightDate(e.Right);e.Data=a}if(V.IsDayPeriod(e.Period,!1)||V.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}if("function"==typeof this.WindowIndex[t].ExecuteScript){var n=this.ChartPaint[0].Data;this.WindowIndex[t].ExecuteScript(this,t,n)}else this.WindowIndex[t].BindData(this,t,e);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeWindowIndexParam=function(t){this.WindowIndex[t].Index[0].Param+=1,this.WindowIndex[t].Index[1].Param+=1,this.UpdateWindowIndex(t)},this.OnDoubleClick=function(t,e,a){var i=null;if(this.mapEvent.has(c.DBCLICK_KLINE)&&(i=this.mapEvent.get(c.DBCLICK_KLINE)),this.MinuteDialog||i){var n=new X;for(var r in this.ChartPaint){if(this.ChartPaint[r].GetTooltipData(t,e,n))break}if(n.Data){if(i){var s={Tooltip:n,Stock:{Symbol:this.Symbol,Name:this.Name}};i.Callback(i,s,this)}this.MinuteDialog&&(a.data={Chart:this,Tooltip:n},this.MinuteDialog.DoModal(a))}}},this.OnSelectChartPicture=function(t){console.log("[KLineChartContainer::OnSelectChartPicture",t),this.ChartPictureMenu||(this.ChartPictureMenu=new function(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.HQChart,this.ChartPicture,this.SubToolsDiv,this.SettingMenu,this.DoModal=function(t){if(!this.SubToolsDiv){this.ID=m();var e=document.createElement("div");e.className="subTolls",e.id=this.ID,this.DivElement.appendChild(e),this.SubToolsDiv=e}this.HQChart=t.data.HQChart,this.ChartPicture=t.data.ChartPicture;var a=this.HQChart.Frame.SubFrame[0].Frame,i=a.ChartBorder.Top+40,n=a.ChartBorder.Right,s=a.ChartBorder.GetLeft(),o=this.ChartPicture.ClassName,h="";h="ChartDrawPictureText"===o?'<span class="changes-color" title=""><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+this.ChartPicture.LineColor+'"></span>\n<span class="subtool-set" title=""><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':'<p class="changes-color" title=""><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+this.ChartPicture.LineColor+'"></p>\n        <p class="subtool-del"><i class="iconfont icon-recycle_bin"></i></p>',this.SubToolsDiv.style.right=n+"px",this.SubToolsDiv.style.top=i+"px",this.SubToolsDiv.innerHTML=h,this.SubToolsDiv.style.position="absolute",this.SubToolsDiv.style.display="block";var l=this.HQChart,u=this.ChartPicture;this.SubToolsDiv;r()(".subtool-del").click(function(){l.ClearChartDrawPicture(u),r()(".subTolls").css("display","none")});var c=this;r()(".subtool-set").click(function(){r()(c.SubToolsDiv).hide(),this.SettingMenu||(c.SettingMenu=new Me(a.ChartBorder.UIElement.parentNode)),c.SettingMenu.ChartPicture=u,c.SettingMenu.HQChart=l,c.SettingMenu.Position={Left:n+80,Top:i+20},c.SettingMenu.DoModal()}),r()(".changes-color").click(function(){document.getElementById("color").click(),r()(".change-color").change(function(){var t=r()(".change-color").val();u.LineColor=t,u.PointColor=t,l.ChartDrawStorage&&l.ChartDrawStorage.SaveDrawData(u)})}),console.log("[ChartPictureSettingMenu::DoModal]",{Top:i,Left:s,Right:n})}}(this.UIElement.parentNode));var e={data:{ChartPicture:t,HQChart:this}};this.ChartPictureMenu.DoModal(e)},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=we.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?setTimeout(function(){e.AutoUpdate()},i):2==a&&setTimeout(function(){V.IsDayPeriod(e.Period,!0)?e.RequestRealtimeData():V.IsMinutePeriod(e.Period,!0)?e.RequestMinuteRealtimeData():V.IsTickPeriod(e.Period)&&e.RequestTickRealtimeData()},i)}}},this.GetMaxMinPageSize=function(){let t={},e=this.Frame.ChartBorder.GetWidth(),a=q[q.length-1][0]+q[q.length-1][1];return t.Max=parseInt(e/a)-2,a=q[0][0]+q[0][1],t.Min=parseInt(e/a)-2,console.log(`[KLineChartContainer::GetMaxMinPageSize] Max=${t.Max} Min=${t.Min}`),t},this.GetChartStatus=function(){var t=this.Frame.SubFrame[0].Frame;if(!t)return null;var e=t.Data;if(!e)return null;var a={KLine:{},Zoom:{}};return a.KLine.Count=e.Data.length,a.KLine.Offset=e.DataOffset,a.KLine.PageSize=t.XPointCount,a.Zoom.Index=t.ZoomIndex,a.Zoom.Max=q.length,a},this.DragDownloadData=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;if(!(t.DataOffset>0))if(V.IsMinutePeriod(this.Period,!0)){if(console.log(`[KLineChartContainer.DragDownloadData] Minute:[Enable=${this.DragDownload.Minute.Enable}, IsEnd=${this.DragDownload.Minute.IsEnd}, Status=${this.DragDownload.Minute.Status}]`),!this.DragDownload.Minute.Enable)return;if(this.DragDownload.Minute.IsEnd)return;if(0!=this.DragDownload.Minute.Status)return;this.RequestDragMinuteData()}else if(V.IsDayPeriod(this.Period,!0)){if(console.log(`[KLineChartContainer.DragDownloadData] Day:[Enable=${this.DragDownload.Minute.Enable}, IsEnd=${this.DragDownload.Minute.IsEnd}, Status=${this.DragDownload.Minute.Status}]`),!this.DragDownload.Day.Enable)return;if(this.DragDownload.Day.IsEnd)return;if(0!=this.DragDownload.Day.Status)return;this.RequestDragDayData()}},this.RequestDragMinuteData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragMinuteData"),this.CancelAutoUpdate();var e=this.DragDownload.Minute;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,endtime:a.Time,count:t.MaxRequestMinuteDayCount,first:{date:a.Date,time:a.Time}};if(this.NetworkFilter){var n={Name:"KLineChartContainer::RequestDragMinuteData",Explain:"1K",Request:{Url:this.DragMinuteKLineApiUrl,Type:"POST",Data:i},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}),1==n.PreventDefault)return}s.HttpRequest({url:this.DragMinuteKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}})},this.RecvDragMinuteData=function(t){var e=me.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var n=e[i];this.SourceData.Data.splice(i,0,n)}var r=new V;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,V.IsDayPeriod(r.Period,!1)||V.IsMinutePeriod(r.Period,!1)){var s=r.GetPeriodData(r.Period);r.Data=s}this.UpdateMainData(r,a),this.BindInstructionIndexData(r);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.RequestDragDayData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragDayData"),this.CancelAutoUpdate();var e=this.DragDownload.Day;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,count:t.MaxReqeustDataCount,first:{date:a.Date}};if(this.NetworkFilter){var n={Name:"KLineChartContainer::RequestDragDayData",Explain:"K",Request:{Url:this.DragKLineApiUrl,Type:"POST",Data:i},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}),1==n.PreventDefault)return}s.HttpRequest({url:this.DragKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}})},this.RecvDragDayData=function(t){var e=me.JsonDataToHistoryData(t);if(e.length<=0)this.DragDownload.Day.IsEnd=!0;else{var a=this.GetHistoryDataCount();for(var i in e){var n=e[i];this.SourceData.Data.splice(i,0,n)}var r=new V;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,V.IsDayPeriod(r.Period,!1)||V.IsMinutePeriod(r.Period,!1)){var s=r.GetPeriodData(r.Period);r.Data=s}this.UpdateMainData(r,a),this.BindInstructionIndexData(r);for(i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}}function ve(t){this.newMethod=C,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartContainer",this.WindowIndex=new Array,this.Symbol,this.Name,this.SourceData,this.IsAutoUpdate=!0,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.TradeDate=0,this.DayCount=1,this.DayData,this.LimitPrice,this.IsShowBeforeData=!1,this.BeforeData=null,this.IsBeforeData=!1,this.IsShowLead=!0,this.MinuteApiUrl=fe.Domain+"/API/Stock",this.HistoryMinuteApiUrl=fe.Domain+"/API/StockMinuteData",this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},t.ontouchstart=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){this.JSChartContainer.IsOnTouch=!0,this.JSChartContainer.PhonePinch=null;var a=this.JSChartContainer;if(0==a.EnableScrollUpDown&&e.preventDefault(),a.IsPhoneDragging(e)){var i={Click:{},LastMove:{}},n=a.GetToucheData(e,a.IsForceLandscape);i.Click.X=n[0].clientX,i.Click.Y=n[0].clientY,i.LastMove.X=n[0].clientX,i.LastMove.Y=n[0].clientY;var r=this,s=function(){if(!0===a.ChartCorssCursor.IsShow){var t=d(),n=i.Click.X-r.getBoundingClientRect().left*t,s=i.Click.Y-r.getBoundingClientRect().top*t;a.OnMouseMove(n,s,e)}};1==a.EnableScrollUpDown&&(this.DragTimer=setTimeout(function(){if(i.Click.X==i.LastMove.X&&i.Click.Y==i.LastMove.Y){a.MouseDrag;a.MouseDrag=null,s(),a.PreventTouchEvent(e)}},800)),this.JSChartContainer.MouseDrag=i,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,0==a.EnableScrollUpDown&&s()}t.ontouchmove=function(t){if(this.JSChartContainer){var e=a.GetToucheData(t,this.JSChartContainer.IsForceLandscape);if(a.IsPhoneDragging(t)){var i=this.JSChartContainer.MouseDrag;if(null==i&&1==a.EnableScrollUpDown||i&&0==a.EnableScrollUpDown){var n=d(),r=e[0].clientX-this.getBoundingClientRect().left*n,s=e[0].clientY-this.getBoundingClientRect().top*n;this.JSChartContainer.OnMouseMove(r,s,t)}}0==a.EnableScrollUpDown?t.preventDefault():null==i?a.PreventTouchEvent(t):(clearTimeout(this.DragTimer),this.DragTimer=null)}},t.ontouchend=function(t){console.log("[MinuteChartContainer::uielement.ontouchend]",t),this.JSChartContainer.IsOnTouch=!1,this.JSChartContainer.OnTouchFinished(),clearTimeout(this.DragTimer)}}},this.OnKeyDown=function(t){switch(t.keyCode?t.keyCode:t.which){case 37:if(this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo();break;case 39:var e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex+1>=e){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else{var a=null;if(!(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+a.DataOffset+1>=a.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1},this.OnRightMenu=function(t,e,a){if(this.RightMenu){var i=this.Frame.PtInFrame(t,e);a.data={Chart:this,FrameID:i},this.RightMenu.DoModal(a)}},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Frame.SourceData;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t],i=null;i=a.Before?a.Before.Close:a.Close,this.LastPoint.Y=this.Frame.GetYFromData(i)}},this.Create=function(t){for(var e in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Lt,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new wt,this.ChartCorssCursor.StringFormatY=new Ot,this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new w,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var a=new Gt;a.Frame=this.Frame.SubFrame[e].Frame,a.Canvas=this.Canvas,a.LanguageID=this.LanguageID,this.TitlePaint.push(a)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",D,!0)},this.CreateChildWindow=function(t){for(var e=0;e<t;++e){var a=new y;a.UIElement=this.UIElement;var i=new L;i.Canvas=this.Canvas,i.ChartBorder=a,e<2&&(i.ChartBorder.TitleHeight=0),i.XPointCount=243;var n=[9,8,7,6,5,4,3,2,1];for(var r in i.HorizontalMax=n[0],i.HorizontalMin=n[n.length-1],0==e?(i.YSplitOperator=new Ft,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price")):(i.YSplitOperator=new yt,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double")),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new Et,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,e!=t-1&&(i.XSplitOperator.ShowText=!1),i.XSplitOperator.Operator(),n)i.HorizontalInfo[r]=new A,i.HorizontalInfo[r].Value=n[r],0==e&&r==i.HorizontalMin||(i.HorizontalInfo[r].Message[1]=n[r].toString(),i.HorizontalInfo[r].Font="14px ");var s=new M;s.Frame=i,s.Height=0==e?20:10,this.Frame.SubFrame[e]=s}},this.CreateSubFrameItem=function(t){var e=new y;e.UIElement=this.UIElement;var a=new L;a.Canvas=this.Canvas,a.ChartBorder=e,a.Identify=t,a.XPointCount=243;var i=[9,8,7,6,5,4,3,2,1];a.HorizontalMax=i[0],a.HorizontalMin=i[i.length-1],a.YSplitOperator=new yt,a.YSplitOperator.LanguageID=this.LanguageID,a.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),a.YSplitOperator.Frame=a,a.YSplitOperator.ChartBorder=e,a.XSplitOperator=new Et,a.XSplitOperator.Frame=a,a.XSplitOperator.ChartBorder=e,a.XSplitOperator.ShowText=!1;var n=this.Frame.SubFrame[0].Frame.XPointCount;for(var r in a.XPointCount=n,a.Data=this.ChartPaint[0].Data,i)a.HorizontalInfo[r]=new A,a.HorizontalInfo[r].Value=i[r],a.HorizontalInfo[r].Message[1]=i[r].toString(),a.HorizontalInfo[r].Font="14px ";var s=new M;return s.Frame=a,s.Height=10,s},this.DeleteIndexPaint=function(t){let e=new Array;for(let a in this.ChartPaint){let i=this.ChartPaint[a];0!=a&&i.ChartFrame==this.Frame.SubFrame[t].Frame||e.push(i)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.ChartPaint=e;var a=t+1;this.TitlePaint[a].Data=[],this.TitlePaint[a].Title=null},this.CreateStockInfo=function(){this.ExtendChartPaint[0]=new function(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.Left=80,this.Right=1,this.Top=1,this.Bottom=1,this.BorderColor=fe.FrameBorderPen,this.Symbol,this.Name,this.TitleFont=["14px "],this.Draw=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top+18,i=t+(e-t)/2;this.Symbol&&this.Name&&(this.Canvas.font=this.TitleFont[0],this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.Symbol,i-2,a),this.Canvas.textAlign="left",this.Canvas.fillText(this.Name,i+2,a)),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.moveTo(t,a),this.Canvas.lineTo(e,a),this.Canvas.stroke(),a+=30,this.DrawBorder()},this.DrawBorder=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top,i=this.ChartBorder.GetChartHeight()-this.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,a,e-t,i-a)}},this.ExtendChartPaint[0].Canvas=this.Canvas,this.ExtendChartPaint[0].ChartBorder=this.Frame.ChartBorder,this.ExtendChartPaint[0].ChartFrame=this.Frame,this.Frame.ChartBorder.Right=300},this.CreateMainKLine=function(){var t,e=new ct;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Color=fe.Minute.PriceColor,e.AreaColor=fe.Minute.AreaPriceColor,this.ChartPaint[0]=e,(t=new ct).Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Minute-Average-Line",t.Color=fe.Minute.AvPriceColor,t.IsDrawArea=!1,this.ChartPaint[1]=t,(t=new Z).Color=fe.Minute.VolBarColor,t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[1].Frame,t.Name="Minute-Vol-Bar",this.ChartPaint[2]=t,this.TitlePaint[0]=new Ht,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID},this.ChangeScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new ea(e.Name,e.Script,e.Args,e);var a=this.SourceData;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(this.Frame.SubFrame.length<3)return;let i=(new l).Get(e);if(!i)return;t<2&&(t=2),t>=this.Frame.SubFrame.length&&(t=2);let n={Name:i.Name,Script:i.Script,Args:i.Args,ID:e,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition,StringFormat:i.StringFormat};return a&&(a.FloatPrecision>=0&&(n.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(n.StringFormat=a.StringFormat),a.Args&&(n.Args=a.Args)),this.ChangeScriptIndex(t,n)},this.ChangeIndexWindowCount=function(t){if(!(t<2)&&this.Frame.SubFrame.length!=t){var e=this.Frame.SubFrame.length;if(e>t){for(var a=e-1;a>=t;--a){this.DeleteIndexPaint(a),(o=this.Frame.SubFrame[a].Frame).ClearToolbar&&o.ClearToolbar()}this.Frame.SubFrame.splice(t,e-t),this.WindowIndex.splice(t,e-t)}else{for(a=e;a<t;++a){var i=this.CreateSubFrameItem(a);this.Frame.SubFrame[a]=i;var n=new Gt;n.Frame=this.Frame.SubFrame[a].Frame,n.Canvas=this.Canvas,n.LanguageID=this.LanguageID,this.TitlePaint[a+1]=n}const h=["RSI","MACD","DMA","DMI","KDJ","WR"];let u=new l;for(a=e;a<t;++a){var r=h[a%h.length];let t=u.Get(r);this.WindowIndex[a]=new ea(t.Name,t.Script,t.Args,t);var s=this.SourceData;this.BindIndexData(a,s)}for(a=0;a<this.Frame.SubFrame.length;++a){var o=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.Symbol=t,this.ResetOverlaySymbolStatus(),this.ChartSplashPaint.IsEnableSplash=!0,this.Draw(),this.RequestData()},this.ChangeDayCount=function(t){t<0||t>10||(this.DayCount=t,this.ResetOverlaySymbolStatus(),this.RequestData())},this.OverlaySymbol=function(t){for(var e in this.OverlayChartPaint){if(this.OverlayChartPaint[e].Symbol==t)return console.warn(`[MinuteChartContainer::OverlaySymbol] overlay symbol=${t} exist.`),!1}var a=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Color="rgb(65,105,225)",this.MainData,this.MainYClose,this.SourceData,this.BeforeDataCount=0,this.IsBeforeData=!1,this.ClassName="ChartOverlayMinutePriceLine",this.Title,this.Symbol,this.YClose,this.Status=$.STATUS_NONE_ID,this.Draw=function(){if(this.Data)if(this.NotSupportMessage)this.DrawNotSupportmessage();else{var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=!0,n=0,r=0;this.IsBeforeData&&(r=1);for(var s=this.Data.DataOffset+r,o=0;s<this.Data.Data.length&&o<e;++s,++o){var h=this.Data.Data[s].Close;if(null!=h){var l=h/this.YClose*this.MainYClose,u=this.ChartFrame.GetXFromIndex(o+this.BeforeDataCount),c=this.ChartFrame.GetYFromData(l);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(c,u):this.Canvas.moveTo(u,c),i=!1):t?this.Canvas.lineTo(c,u):this.Canvas.lineTo(u,c),++n>=a&&(i=!0,this.Canvas.stroke(),n=0)}}n>0&&this.Canvas.stroke()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;e.Min=this.MainYClose,e.Max=this.MainYClose;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i)if(null!=(n=this.Data.Data[a].Close)){var n=n/this.YClose*this.MainYClose;null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=n),e.Max<n&&(e.Max=n),e.Min>n&&(e.Min=n)}if(e.Max==this.MainYClose&&e.Min==this.MainYClose)return e.Max=this.MainYClose+.1*this.MainYClose,e.Min=this.MainYClose-.1*this.MainYClose,e;var r=Math.max(Math.abs(this.MainYClose-e.Max),Math.abs(this.MainYClose-e.Min));return e.Max=this.MainYClose+r,e.Min=this.MainYClose-r,e}};return a.Canvas=this.Canvas,a.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,a.ChartFrame=this.Frame.SubFrame[0].Frame,a.Name="Overlay-Minute",a.Symbol=t,a.Color=fe.OverlaySymbol.Color[fe.OverlaySymbol.Random%fe.OverlaySymbol.Color.length],++fe.OverlaySymbol.Random,this.ChartPaint[0].YClose>0&&this.ChartPaint[0].Data&&(a.MainData=this.ChartPaint[0].Data,a.MainYClose=this.ChartPaint[0].YClose),this.OverlayChartPaint.push(a),this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=$.STATUS_NONE_ID}},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn(`[MinuteChartContainer::DeleteOverlaySymbol] overlay symbol=${t} not exist.`),!1},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.UpdateFrameMaxMin(),this.Draw()},this.ShowBeforeData=function(t){this.IsShowBeforeData!=t&&(this.IsShowBeforeData=t,this.RequestData())},this.RequestData=function(){this.DayCount<=1?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.ChangeDrawType=function(t){if(!(this.ChartPaint.length<=0)){if(0==t)this.ChartPaint[0].IsDrawArea=!0;else{if(1!=t)return;this.ChartPaint[0].IsDrawArea=!1}this.Draw()}},this.RequestHistoryMinuteData=function(){var t=this;if(this.IsBeforeData=!1,this.ChartSplashPaint.IsEnableSplash=!0,this.Draw(),this.NetworkFilter){var e={Name:"MinuteChartContainer::RequestHistoryMinuteData",Explain:"",Request:{Url:t.HistoryMinuteApiUrl,Data:{daycount:t.DayCount,symbol:t.Symbol},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryMinuteData(e)}),1==e.PreventDefault)return}s.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryMinuteData(e)}})},this.RecvHistoryMinuteData=function(t){this.DayData=ve.JsonDataToMinuteDataArray(t),this.Symbol=t.symbol,this.Name=t.name,this.CaclutateLimitPrice(this.DayData[0].YClose,t.data[0].limitprice),this.UpdateHistoryMinuteUI(),this.RequestOverlayHistoryMinuteData(),this.AutoUpdate()},this.UpdateHistoryMinuteUI=function(){var t=this.HistoryMinuteDataToArray(this.DayData),e=new V;if(e.Data=t,this.SourceData=e,this.TradeDate=this.DayData[0].Date,this.BindMainData(e,this.DayData[0].YClose),we.IsChinaFutures(this.Symbol)&&(this.ChartPaint[1].Data=null),this.Frame.SubFrame.length>2){var a=new V;a.Data=t;for(var i=2;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,a)}for(let t in this.Frame.SubFrame){var n=this.Frame.SubFrame[t];n.Frame.XSplitOperator.Symbol=this.Symbol,n.Frame.XSplitOperator.DayCount=this.DayData.length,n.Frame.XSplitOperator.DayData=this.DayData,n.Frame.XSplitOperator.Operator(),n.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,n.Frame.YSplitOperator.Symbol=this.Symbol,n.Frame.IsBeforeData=this.IsBeforeData}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,this.TitlePaint[0].IsShowDate=!0,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.HistoryMinuteDataToArray=function(t){for(var e=[],a=t.length-1;a>=0;--a){var i=t[a];for(var n in i.Data)e.push(i.Data[n])}return e},this.UpdateLatestMinuteData=function(t,e){for(var a in this.DayData){var i=this.DayData[a];if(i.Date===e){i.Data=t;break}}},this.RequestMinuteData=function(){var t=this,e=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","minute","minutecount"],a=this.Symbol.toUpperCase();if(we.IsChinaFutures(a)&&(e.push("clearing"),e.push("yclearing")),this.IsBeforeData=!1,this.IsShowBeforeData&&1===this.DayCount&&we.IsSHSZStockA(t.Symbol)&&(this.IsBeforeData=!0,e.push("before")),this.NetworkFilter){var i={Name:"MinuteChartContainer::RequestMinuteData",Explain:"",Request:{Url:t.MinuteApiUrl,Data:{field:e,symbol:[t.Symbol]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvMinuteData(e)}),1==i.PreventDefault)return}s.HttpRequest({url:t.MinuteApiUrl,data:{field:e,symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvMinuteData(e)}})},this.RecvMinuteData=function(t){if(this.IsBeforeData)var e=ve.JsonDataToMinuteData2(t);else e=ve.JsonDataToMinuteData(t);if(this.DayCount>1)return this.UpdateLatestMinuteData(e,t.stock[0].date),this.UpdateHistoryMinuteUI(),this.RequestOverlayMinuteData(),void this.AutoUpdate();var a=new V;a.Data=e,this.TradeDate=t.stock[0].date,this.SourceData=a,this.Symbol=t.stock[0].symbol,this.Name=t.stock[0].name;var i=t.stock[0].yclose,n=this.Symbol.toUpperCase();if(t.stock[0].yclearing&&we.IsChinaFutures(n)&&(i=t.stock[0].yclearing),this.CaclutateLimitPrice(i,t.stock[0].limitprice),this.BindMainData(a,i),this.Frame.SubFrame.length>2){var r=new V;r.Data=e;for(var s=2;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,r)}for(let t in this.Frame.SubFrame){var o=this.Frame.SubFrame[t];o.Frame.XSplitOperator.Symbol=this.Symbol,o.Frame.XSplitOperator.DayCount=1,o.Frame.XSplitOperator.Operator(),o.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,o.Frame.YSplitOperator.Symbol=this.Symbol,o.Frame.IsBeforeData=this.IsBeforeData}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,we.IsSHSZ(n)&&(this.TitlePaint[0].IsShowDate=!1);var h=this.GetChartMinuteInfo();h&&(h.SourceData=this.SourceData),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.AutoUpdate()},this.CaclutateLimitPrice=function(t,e){if(this.LimitPrice=null,e&&e.max>0&&e.min>0)this.LimitPrice={Max:e.max,Min:e.min};else{var a=we.GetLimitPriceRange(this.Symbol,this.Name);a?t<=0||(this.LimitPrice={Max:t*(1+a.Max),Min:t*(1+a.Min)},console.log(`[MinuteChartContainer::CaclutateLimitPrice] ${this.Symbol} yClose:${t} max:${this.LimitPrice.Max} min:${this.LimitPrice.Min}`),this.LimitPrice.Max=parseFloat(this.LimitPrice.Max.toFixed(2)),this.LimitPrice.Min=parseFloat(this.LimitPrice.Min.toFixed(2)),console.log(`[MinuteChartContainer::CaclutateLimitPrice] ${this.Symbol} tofixed(2) max:${this.LimitPrice.Max} min:${this.LimitPrice.Min}`)):console.log(`[MinuteChartContainer::CaclutateLimitPrice] ${this.Symbol} no limit price.`)}},this.RequestOverlayMinuteData=function(){var t=this,e=this.TradeDate;for(var a in this.OverlayChartPaint){let r=this.OverlayChartPaint[a];if(r.MainData&&r.MainYClose>0&&r.Status==$.STATUS_NONE_ID){var i=r.Symbol;if(!i)return;if(r.Status=$.STATUS_REQUESTDATA_ID,this.NetworkFilter){var n={Name:"MinuteChartContainer::RequestOverlayMinuteData",Explain:"",Request:{Url:t.HistoryMinuteApiUrl,Data:{days:[e],symbol:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){r.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayMinuteData(e,r)}),1==n.PreventDefault)return}s.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:i,days:[e]},type:"post",dataType:"json",async:!0,success:function(e){r.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayMinuteData(e,r)}})}}},this.RecvOverlayMinuteData=function(t,e){if(!e.IsDelete){var a,i=ve.JsonDataToMinuteDataArray(t),n=null;if(this.DayCount>1){if(i.length<=0)return;var r=i[0];for(var s in e.SourceData){if(e.SourceData[s].Date==r.Date){e.SourceData[s]=r;var o=this.HistoryMinuteDataToArray(e.SourceData);(n=new V).Data=o,a=r.YClose;break}}if(null==n)return}else a=(n=i.length>0?i[0]:new V).YClose;e.Data=n,e.Title=t.name,e.Symbol=t.symbol,e.YClose=a,e.Status=$.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){var t=this,e=[];for(var a in this.DayData){var i=this.DayData[a];e.push(i.Date)}if(!(e.length<=0))for(var a in this.OverlayChartPaint){let i=this.OverlayChartPaint[a];var n=i.Symbol;if(!n)return;if(i.Status==$.STATUS_NONE_ID){if(i.Status=$.STATUS_REQUESTDATA_ID,this.NetworkFilter){var r={Name:"MinuteChartContainer::RequestOverlayHistoryMinuteData",Explain:"",Request:{Url:t.HistoryMinuteApiUrl,Data:{days:e,symbol:n},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(e){i.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayHistoryMinuteData(e,i)}),1==r.PreventDefault)return}s.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:n,days:e},type:"post",dataType:"json",async:!0,success:function(e){i.Status=$.STATUS_RECVDATA_ID,t.RecvOverlayHistoryMinuteData(e,i)}})}}},this.RecvOverlayHistoryMinuteData=function(t,e){var a=ve.JsonDataToMinuteDataArray(t),i=[];for(var n in this.DayData){var r=this.DayData[n],s=!1;for(var o in a)if(r.Date==a[o].Date){i.push(a[n]),s=!0;break}if(!s)(new V).Date=r.Date}e.SourceData=i;var h=this.HistoryMinuteDataToArray(i),l=i[0].YClose,u=new V;u.Data=h,e.Data=u,e.Title=t.name,e.Symbol=t.symbol,e.YClose=l,e.Status=$.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=we.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.ResetOverlaySymbolStatus(),t.RequestMinuteData()},a))}}},this.BindIndexData=function(t,e){this.WindowIndex[t]&&("function"!=typeof this.WindowIndex[t].RequestData?"function"!=typeof this.WindowIndex[t].ExecuteScript?this.WindowIndex[t].BindData(this,t,e):this.WindowIndex[t].ExecuteScript(this,t,e):this.WindowIndex[t].RequestData(this,t,e))},this.BindMainData=function(t,e){var a=new V;if(a.Data=t.GetClose(),this.ChartPaint[0].Data=a,this.ChartPaint[0].YClose=e,this.ChartPaint[0].NotSupportMessage=null,this.ChartPaint[0].SourceData=this.IsBeforeData?t:null,this.ChartPaint[0].IsShowLead=!1,this.ChartPaint[0].LeadData=null,we.IsSHSZIndex(this.Symbol)&&1==this.DayCount&&this.IsShowLead){var i=new V;i.Data=t.GetLead(),this.ChartPaint[0].LeadData=i,this.ChartPaint[0].IsShowLead=!0}this.Frame.SubFrame[0].Frame.YSplitOperator.YClose=e,this.Frame.SubFrame[0].Frame.YSplitOperator.Data=a,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.SourceData=t,(a=new V).Data=t.GetMinuteAvPrice(),this.ChartPaint[1].Data=a,this.Frame.SubFrame[0].Frame.YSplitOperator.AverageData=a,this.Frame.SubFrame[0].Frame.YSplitOperator.SourceData=this.IsBeforeData?t:null,this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.LimitPrice=this.LimitPrice,this.ChartPaint[2].Data=t,this.ChartPaint[2].YClose=e,this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].YClose=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.YClose=e),this.ExtendChartPaint[0]&&(this.ExtendChartPaint[0].Symbol=this.Symbol,this.ExtendChartPaint[0].Name=this.Name);var n=0,r=this.IsBeforeData;for(var s in this.DayCount>1&&(r=!1),r&&(n=15),this.OverlayChartPaint){var o=this.OverlayChartPaint[s];o.MainData=this.ChartPaint[0].Data,o.MainYClose=e,o.BeforeDataCount=n,o.IsBeforeData=r}},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(!(a<3)){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};a.ID&&(i.ID=a.ID),t.push(i)}return t},this.OnTouchFinished=function(){!0!==this.CorssCursorTouchEnd||this.DrawDynamicInfo()},this.CreateExtendChart=function(t,e){var a;switch(t){case"MinuteTooltip":return(a=new function(){this.newMethod=gt,this.newMethod(),delete this.newMethod,this.ClassName="MinuteTooltipPaint",this.Left=1*d(),this.Top=1*d(),this.YClose,this.GetTop=function(){return this.IsHScreen?this.ChartBorder.GetTop():this.ChartBorder.GetTop()+this.Top},this.DrawTooltipData=function(t){var e=Be(this.HQChart.Symbol),a=this.GetLeft()+2*d(),i=this.GetTop()+3*d();if(this.YClose=this.KLineTitlePaint.YClose,this.IsHScreen){this.Canvas.save();var n=this.GetLeft()+this.Height,r=this.GetTop();this.Canvas.translate(n,r),this.Canvas.rotate(90*Math.PI/180),a=2*d(),i=3*d()}this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font[0];var s=this.Canvas.measureText(": ").width,o=t.DateTime.split(" ");if(o&&2==o.length){var h=It.FormatDateString(o[0]);this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,a,i),i+=this.LineHeight,h=It.FormatTimeString(o[1]),this.Canvas.fillText(h,a,i)}var l=t.Close,u=(t.Increase,t.Vol),c=t.Amount;t.Before&&(l=t.Before.Close,t.Before.Increase,u=t.Before.Vol,c=t.Before.Amount),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=de.GetText("Tooltip-Price",this.LanguageID),this.Canvas.fillText(h,a,i);var f=this.KLineTitlePaint.GetColor(l,this.YClose);h=l.toFixed(e),this.Canvas.fillStyle=f,this.Canvas.fillText(h,a+s,i),t.Before||(i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=de.GetText("Tooltip-AvPrice",this.LanguageID),this.Canvas.fillText(h,a,i),f=this.KLineTitlePaint.GetColor(t.AvPrice,this.YClose),h=t.AvPrice.toFixed(e),this.Canvas.fillStyle=f,this.Canvas.fillText(h,a+s,i)),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=de.GetText("Tooltip-Increase",this.LanguageID),this.Canvas.fillText(h,a,i);var C=(l-this.YClose)/this.YClose*100;f=this.KLineTitlePaint.GetColor(C,0),h=C.toFixed(2)+"%",this.Canvas.fillStyle=f,this.Canvas.fillText(h,a+s,i),this.Canvas.fillStyle=this.TitleColor,i+=this.LineHeight,h=de.GetText("Tooltip-Vol",this.LanguageID),this.Canvas.fillText(h,a,i),h=It.FromatIntegerString(u,2,this.LanguageID),this.Canvas.fillText(h,a+s,i),It.IsNumber(c)&&(i+=this.LineHeight,h=de.GetText("Tooltip-Amount",this.LanguageID),this.Canvas.fillText(h,a,i),h=It.FormatValueString(c,2,this.LanguageID),this.Canvas.fillText(h,a+s,i)),this.IsHScreen&&this.Canvas.restore()}}).Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return null}},this.SetMinuteInfo=function(t,e){for(var a in this.ChartInfo=[],t){var i=Le.Get(t[a]);if(i){var n=i.Create();this.ChartInfo.push(n)}}1==e&&this.RequestMinuteInfoData()},this.GetChartMinuteInfo=function(){return this.ChartInfoPaint},this.CreateMinuteInfo=function(t){var e=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteInfo",this.Data=new Map,this.SourceData,this.ChartMinutePrice,this.YClose,this.HQChartBorder,this.TextColor=fe.MinuteInfo.TextColor,this.Font=fe.MinuteInfo.Font,this.PointColor=fe.MinuteInfo.PointColor,this.LineColor=fe.MinuteInfo.LineColor,this.TextBGColor=fe.MinuteInfo.TextBGColor,this.PixelTatio=d(),this.TextHeight=20,this.TextRectCache=[],this.InfoDrawCache=[],this.FrameBottom,this.FrameTop,this.FrameLeft,this.FrameRight,this.YOffset=5,this.IsHScreen=!1,this.IsDrawFull=!1,this.SetOption=function(t){t.TextColor&&(this.TextColor=t.TextColor),t.TextBGColor&&(this.TextBGColor=t.TextBGColor),t.Font&&(this.Font=t.Font),t.PointColor&&(this.PointColor=t.PointColor),t.LineColor&&(this.LineColor=t.LineColor),t.TextHeight>0&&(this.TextHeight=t.TextHeight),1==t.IsDrawFull&&(this.IsDrawFull=!0)},this.Draw=function(){if(this.ChartMinutePrice&&this.Data&&!(this.Data.size<=0)){this.TextRectCache=[],this.InfoDrawCache=[],this.PixelTatio=d(),this.YOffset=5*this.PixelTatio,this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount;this.ChartFrame.MinuteCount,this.FrameBottom=this.ChartBorder.GetBottom(),this.IsDrawFull&&this.HQChartBorder&&(this.FrameBottom=this.HQChartBorder.GetBottom()),this.FrameTop=this.ChartBorder.GetTop(),this.FrameLeft=this.ChartBorder.GetLeft(),this.FrameRight=this.ChartBorder.GetRight(),this.IsHScreen&&(this.FrameRight=this.ChartBorder.GetBottom(),this.FrameLeft=this.ChartBorder.GetTop(),this.FrameBottom=this.ChartBorder.GetLeft(),this.FrameTop=this.ChartBorder.GetRight()),this.YClose=this.ChartMinutePrice.YClose;var e=this.ChartMinutePrice.Data,a=!1;this.ChartMinutePrice.SourceData&&(e=this.ChartMinutePrice.SourceData,a=!0);for(var i=e.DataOffset,n=0;i<e.Data.length&&n<t;++i,++n){var r=this.SourceData.Data[i];if((!a||!r.Before)&&r){var s=r.DateTime;this.Data.has(s)&&(this.IsHScreen?this.CalcuateInfoHScreenPosition(this.Data.get(s),n,r):this.CalcuateInfoPosition(this.Data.get(s),n,r))}}for(var i in this.InfoDrawCache)r=this.InfoDrawCache[i],this.DrawInfoLines(r);for(var i in this.InfoDrawCache)r=this.InfoDrawCache[i],this.DrawInfoText(r);this.TextRectCache=[],this.InfoDrawCache=[]}},this.CalcuateInfoPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,r=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e),o=this.ChartFrame.GetYFromData(a.Close),h=(s=S(s))<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=r+l[e%l.length]*this.PixelTatio,c={Y:[{Value:o+(r+this.YOffset),Offset:u},{Value:o-(2*r+this.YOffset),Offset:-u}]};a.Close<this.YClose&&(c.Y=c.Y.reverse());var f={X:s,Y:null,Width:n,Height:r};h||(f.X-=f.Width),this.FixTextRect(f,c);var C={Border:f,Start:{X:s,Y:o},IsLeft:h,Title:i.Title};this.InfoDrawCache.push(C),this.TextRectCache.push(f)}},this.CalcuateInfoHScreenPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,r=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e),o=this.ChartFrame.GetYFromData(a.Close),h=(s=S(s))<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=r+l[e%l.length]*this.PixelTatio,c={X:[{Value:o+(r+this.YOffset),Offset:u},{Value:o-(2*r+this.YOffset),Offset:-u}]};a.Close>this.YClose&&(c.X=c.X.reverse());var f={X:null,Y:s,Width:r,Height:n};h||(f.Y-=f.Height),this.FixHScreenTextRect(f,c);var C={Border:f,Start:{X:o,Y:s},IsLeft:h,Title:i.Title};this.InfoDrawCache.push(C),this.TextRectCache.push(f)}},this.DrawInfoLines=function(t){var e=t.Border,a=t.IsLeft;this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(S(t.Start.X),t.Start.Y),a?this.Canvas.lineTo(S(t.Start.X),e.Y):this.IsHScreen?this.Canvas.lineTo(e.X,e.Y+e.Height):this.Canvas.lineTo(S(t.Start.X),e.Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.PointColor,this.Canvas.beginPath(),this.Canvas.arc(t.Start.X,t.Start.Y,5,0,2*Math.PI),this.Canvas.closePath(),this.Canvas.fill()},this.DrawInfoText=function(t){var e=t.Border,a=e.X,i=e.Y;this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(a,i,e.Width,e.Height),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(a,i,e.Width,e.Height),this.Canvas.stroke(),this.IsHScreen&&(this.Canvas.save(),this.Canvas.translate(e.X,e.Y),this.Canvas.rotate(90*Math.PI/180),a=0,i=0),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.IsHScreen?this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i-e.Width/2):this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i+e.Height/2),this.IsHScreen&&this.Canvas.restore()},this.FixTextRect=function(t,e){for(var a in e.Y){var i,n=e.Y[a];t.Y=n.Value;for(var r=0;r<10;++r){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(i=t.Y,(i+=n.Offset)+t.Height>this.FrameBottom||i<this.FrameTop)break;t.Y=i}}},this.FixHScreenTextRect=function(t,e){for(var a in e.X){var i,n=e.X[a];t.X=n.Value;for(var r=0;r<10;++r){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(i=t.X,(i+=n.Offset)+t.Width<this.FrameBottom||i>this.FrameTop)break;t.X=i}}},this.IsOverlap=function(t,e){return t.X+t.Width>e.X&&e.X+e.Width>t.X&&t.Y+t.Height>e.Y&&e.Y+e.Height>t.Y},this.GetMaxMin=function(){return{Min:null,Max:null}}};return e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.HQChartBorder=this.Frame.ChartBorder,e.ChartMinutePrice=this.ChartPaint[0],t&&e.SetOption&&e.SetOption(t),this.ChartInfoPaint=e,e},this.RequestMinuteInfoData=function(){if(!(this.ChartInfo.length<=0)){var t=this.GetChartMinuteInfo();for(var e in t||(t=this.CreateMinuteInfo(null)),t.SourceData=this.SourceData,this.ChartInfo)this.ChartInfo[e].RequestData(this)}},this.UpdataChartInfo=function(){var t=this.GetChartMinuteInfo();if(t){var e=new Map;for(var a in this.ChartInfo){var i=this.ChartInfo[a].Data;for(var n in i){var r=i[n],s=`${r.Date} ${r.Time}`;e.has(s)?e.get(s).Data.push(r):e.set(s,{Data:new Array(r)})}}t.Data=e}}}function Se(t){this.newMethod=ve,this.newMethod(t),delete this.newMethod,this.HistoryMinuteApiUrl="https://opensourcecache.zealink.com/cache/minuteday/day/",this.ClassName="HistoryMinuteChartContainer",this.CreateMainKLine=function(){var t,e=new ct;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Color=fe.Minute.PriceColor,this.ChartPaint[0]=e,(t=new Q).Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Minute-Average-Line",t.Color=fe.Minute.AvPriceColor,this.ChartPaint[1]=t,(t=new Z).Color=fe.Minute.VolBarColor,t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[1].Frame,t.Name="Minute-Vol-Bar",this.ChartPaint[2]=t,this.TitlePaint[0]=new Ht,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].IsShowDate=!0},this.ChangeTradeDate=function(t){t&&(this.TradeDate=t,this.RequestData())},this.RequestData=function(){var t=new Date;1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()==this.TradeDate?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.RequestHistoryMinuteData=function(){var t=this,e=this.HistoryMinuteApiUrl+this.TradeDate.toString()+"/"+this.Symbol+".json";s.HttpRequest({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryMinuteData(e)},error:function(e){t.ChartSplashPaint.IsEnableSplash=!1,t.RecvHistoryMinuteError(e)}})},this.RecvHistoryMinuteError=function(t){if(404==t.status){var e=new V;for(var a in this.SourceData=e,this.ChartPaint)this.ChartPaint[a].Data=e,0==a&&(this.ChartPaint[a].NotSupportMessage="!");this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=null,this.Draw()}},this.RecvHistoryMinuteData=function(t){var e=Se.JsonDataToMinuteData(t),a=new V;if(a.Data=e,this.TradeDate=t.date,this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(a,t.day.yclose),this.Frame.SubFrame.length>2){var i=new V;i.Data=e;for(var n=2;n<this.Frame.SubFrame.length;++n)this.BindIndexData(n,i)}this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function ge(t){this.newMethod=me,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartHScreenContainer",this.OnMouseMove=function(t,e,a){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e),this.DrawDynamicInfo()},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=d();if(this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,n=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,n))return}var r={Click:{},LastMove:{}};r.Click.X=e.clientX,r.Click.Y=e.clientY,r.LastMove.X=e.clientX,r.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=r,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(t){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var e=this.JSChartContainer.MouseDrag;if(e){var a=Math.abs(e.LastMove.Y-t.clientY);if(1==this.JSChartContainer.DragMode){if(a<5)return;var i=!0;e.LastMove.Y<t.clientY&&(i=!1),this.JSChartContainer.DataMove(a,i)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,this.JSChartContainer.MouseDrag=null,this.JSChartContainer.CurrentChartDrawPicture=null,this.JSChartContainer=null}}},t.ontouchstart=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){this.JSChartContainer.PhonePinch=null,this.JSChartContainer.IsOnTouch=!0,e.preventDefault();var a=this.JSChartContainer;if(a.IsPhoneDragging(e)){if(a.TryClickLock){var i=(h=a.GetToucheData(e,a.IsForceLandscape))[0].clientX,n=h[0].clientY,r=d();if(i-=t.getBoundingClientRect().left*r,n-=t.getBoundingClientRect().top*r,a.TryClickLock(i,n))return}var s=setTimeout(function(){if(o.Click.X==o.LastMove.X&&o.Click.Y==o.LastMove.Y){a.MouseDrag;a.MouseDrag=null;var i=d(),n=o.Click.X-t.getBoundingClientRect().left*i,r=o.Click.Y-t.getBoundingClientRect().top*i;a.OnMouseMove(n,r,e)}},a.PressTime),o={Click:{},LastMove:{}},h=a.GetToucheData(e,!1);o.Click.X=h[0].clientX,o.Click.Y=h[0].clientY,o.LastMove.X=h[0].clientX,o.LastMove.Y=h[0].clientY,this.JSChartContainer.MouseDrag=o,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null}else if(a.IsPhonePinching(e)){var l={Start:{},Last:{}};h=a.GetToucheData(e,!1);l.Start={X:h[0].pageX,Y:h[0].pageY,X2:h[1].pageX,Y2:h[1].pageY},l.Last={X:h[0].pageX,Y:h[0].pageY,X2:h[1].pageX,Y2:h[1].pageY},this.JSChartContainer.PhonePinch=l,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null}t.ontouchmove=function(t){if(this.JSChartContainer){t.preventDefault();var e=a.GetToucheData(t,!1);if(a.IsPhoneDragging(t)){var i=this.JSChartContainer.MouseDrag;if(null==i){var n=d(),r=e[0].clientX-this.getBoundingClientRect().left*n,s=e[0].clientY-this.getBoundingClientRect().top*n;this.JSChartContainer.OnMouseMove(r,s,t)}else{var o=Math.abs(i.LastMove.Y-e[0].clientY);if(o=parseInt(o),1==this.JSChartContainer.DragMode){if(o<5)return;var h=!0;i.LastMove.Y<e[0].clientY&&(h=!1),this.JSChartContainer.DataMove(o,h)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),i.LastMove.X=e[0].clientX,i.LastMove.Y=e[0].clientY}}}else if(a.IsPhonePinching(t)){var l=this.JSChartContainer.PhonePinch;if(!l)return;var u=Math.abs(e[0].pageX-e[1].pageX)-Math.abs(l.Last.X-l.Last.X2);if(Math.abs(u)<5)return;if(u>0){if((c={}).Index=parseInt(Math.abs(this.JSChartContainer.CursorIndex-.5).toFixed(0)),!this.JSChartContainer.Frame.ZoomUp(c))return;this.JSChartContainer.CursorIndex=c.Index,this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.Draw(),this.JSChartContainer.ShowTooltipByKeyDown()}else{var c;if((c={}).Index=parseInt(Math.abs(this.JSChartContainer.CursorIndex-.5).toFixed(0)),!this.JSChartContainer.Frame.ZoomDown(c))return;this.JSChartContainer.CursorIndex=c.Index,this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.Draw(),this.JSChartContainer.ShowTooltipByKeyDown()}l.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}}},t.ontouchend=function(t){this.JSChartContainer.IsOnTouch=!1,this.JSChartContainer.OnTouchFinished(),clearTimeout(s)}}},this.Create=function(t){for(var e in this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Lt,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new Mt,this.ChartCorssCursor.StringFormatY=new Ot,this.ChartSplashPaint=new xt,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new R,this.Frame.ChartBorder=new y,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.Frame.SubFrame){var a=new Gt;a.Frame=this.Frame.SubFrame[e].Frame,a.Canvas=this.Canvas,a.LanguageID=this.LanguageID,this.TitlePaint.push(a)}this.UIElement.addEventListener("keydown",D,!0)},this.CreateChildWindow=function(t){for(var e=0;e<t;++e){var a=new y;a.UIElement=this.UIElement;var i=new O;if(i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=e,this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),i.HorizontalMax=20,i.HorizontalMin=10,0==e){i.YSplitOperator=new At,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price");var n=d();a.TopSpace=12*n,a.BottomSpace=12*n}else i.YSplitOperator=new yt,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double");i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new Tt,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,e!=t-1&&(i.XSplitOperator.ShowText=!1);for(var r=i.HorizontalMin;r<=i.HorizontalMax;r+=1)i.HorizontalInfo[r]=new A,i.HorizontalInfo[r].Value=r,0==e&&r==i.HorizontalMin||(i.HorizontalInfo[r].Message[1]=r.toString(),i.HorizontalInfo[r].Font="14px ");var s=new M;s.Frame=i,s.Height=0==e?20:10,this.Frame.SubFrame[e]=s}}}function Ie(t,e){this.Name=t,this.Param=e,this.LineColor,this.ReqeustData=null}function Ae(t){this.Index,this.Name=t,this.Script=null,this.OverlayIndex=null,this.Create=function(t,e){for(var a in this.Index)if(this.Index[a].Name){var i=new Q;i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Color=this.Index[a].LineColor,t.ChartPaint.push(i)}},this.NotSupport=function(t,e,a){var i=t.GetChartPaint(e);for(var n in i)i[n].Data.Data=[],0==n&&(i[n].NotSupportMessage=a)},this.FormatIndexTitle=function(){var t=this.Name,e=null;for(var a in this.Index){var i=this.Index[a];null!=i.Param&&(e?e+=","+i.Param.toString():e=i.Param.toString())}return e&&(t+="("+e+")"),t},this.IsOverlay=function(){return!(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)}}function ye(t,e,a,i){this.newMethod=Ae,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ApiUrl=fe.PyIndexDomain+"/hq/code",a&&(this.Arguments=a),this.RequestData=function(t,e,a){this.OutVar=[];var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a},r="";for(let t in this.Arguments){r.length>0&&(r+=",");var o=this.Arguments[t];r+='"'+o.Name+'":'+o.Value}r="{"+r+"}";var h=JSON.parse(r),l=JSON.stringify({code:this.Script,symbol:n.HQChart.Symbol,period:n.HQChart.Period,right:n.HQChart.Right,params:h,numcount:t.MaxReqeustDataCount});return s.HttpRequest({url:this.ApiUrl,data:l,type:"post",dataType:"json",contentType:" application/json; charset=utf-8",async:!0,success:function(t){i.RecvData(t,n)},complete:function(t){},error:function(t,e){i.RecvError(t,e,n)}}),!0},this.RecvError=function(t,e,a){console.log("[PyScriptIndex::RecvError] error",e),a.HQChart.ScriptErrorCallback&&a.HQChart.ScriptErrorCallback(e)},this.RecvData=function(t,e){if(0!=t.code)return console.log("[PyScriptIndex::RecvData] failed.",t),void(e.HQChart.ScriptErrorCallback&&e.HQChart.ScriptErrorCallback(t.msg));console.log("[PyScriptIndex::RecvData] recv data.",t);var a=t.date;for(var i in t.data){for(var n=t.data[i],r=[],s=0;s<a.length&&s<a.length;++s)if(!(s>=n.data.length)){var o=new B;o.Date=a[s],o.Value=n.data[s],r.push(o)}var h=e.HistoryData.GetFittingData(r),l=new V;l.Data=h,l.Period=e.HQChart.Period,l.Right=e.HQChart.Right;var u={Name:n.name,Type:n.graph,LineWidth:n.width,Data:l.GetValue(),Color:n.color};this.OutVar.push(u)}this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()},this.BindData=function(t,e,a){t.DeleteIndexPaint(e);for(let a in this.OutVar){let i=this.OutVar[a];switch(i.Type){case"line":this.CreateLine(t,e,i,a);break;case"colorstick":this.CreateColorStock(t,e,i,a)}}var i=e+1;t.TitlePaint[i].Title=this.Name;let n="";for(let t in this.Arguments){let e=this.Arguments[t];n.length>0&&(n+=","),n+=e.Value.toString()}return n.length>0&&(t.TitlePaint[i].Title=this.Name+"("+n+")"),!0},this.CreateLine=function(t,e,a,i){let n=new Q;n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=a.Color:n.Color=this.GetDefaultColor(i),a.LineWidth>0&&(n.LineWidth=a.LineWidth),0==a.IsShow&&(n.IsShow=!1);let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateColorStock=function(t,e,a,i){let n=new ft;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame;let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(n)},this.GetDefaultColor=function(t){let e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]}}function Te(t,e,a,i){this.newMethod=ye,this.newMethod(t),delete this.newMethod,this.JsonData,i.JsonData&&(this.JsonData=i.JsonData),this.RequestData=function(t,e,a){if(this.JsonData){var i={HQChart:t,WindowIndex:e,HistoryData:a};this.JsonData.code=0;var n=this.JsonData;this.RecvData(n,i)}else console.warn("[PyScriptIndex::RequestData] JsonData is null"),i.HQChart.ScriptErrorCallback&&i.HQChart.ScriptErrorCallback("json ")}}function Fe(){}function Ee(){this.MaxReqeustDataCount=1e3,this.StartDate=20160101,this.Data,this.ClassName="IKLineInfo",this.GetToday=function(){var t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}}function Le(){}function xe(){this.Data,this.ClassName="IMinuteInfo"}function Ne(t){this.DivElement=t,this.ID=null,this.TimeOut=null,this.Hide=function(){r()("#"+this.ID).hide()},this.Show=function(t,e,a,i){r()("#"+this.ID).css({display:"block",top:e+"px",left:t+"px",width:a+"px",height:i+"px"})}}function Oe(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.option={},this.Create=function(){this.ID=m(),this.BindData(),this.BindEvent()},this.BindData=function(){var t=this.DivElement.id,e=r()("#"+t);e.find("div[id^='topMenu_']").remove(),e.find("div[id^='childMenu_']").remove();var a=r()("<div />");a.attr("id","topMenu_"+this.ID).addClass("context-menu-wrapper topmenu").hide(),e.append(a);var i=r()("<table />");i.attr({id:"topTable_"+this.ID,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),a.append(i),i.append(this.childrenList(this.option.data));for(var n=0;n<this.option.data.length;n++){if(void 0!==this.option.data[n].children){var s=r()("<div />");s.attr({id:"childMenu_"+this.ID+n,"data-index":n}).addClass("context-menu-wrapper").hide(),e.append(s);var o=r()("<table />");o.attr({id:"childTable_"+this.ID+n,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),s.append(o),o.append(this.childrenList(this.option.data[n].children))}}},this.Update=function(){this.BindData(),this.BindEvent()},this.childrenList=function(t){for(var e=[],a=0;a<t.length;a++){var i=void 0!==t[a].isBorder&&t[a].isBorder,n=r()("<tr />");n.addClass("font_Arial context-menu"),i&&n.addClass("border");var s=r()("<td />");t[a].selected?s.addClass("spacer context-menu").html(""):s.addClass("spacer context-menu");var o=r()("<td />");o.addClass("text").html(t[a].text);var h=r()("<td />");h.addClass("right shortcut");var l=r()("<td />");l.addClass(void 0!==t[a].children?"submenu-arrow":"context-menu spacer"),n.append(s).append(o).append(h).append(l),e.push(n)}return e},this.Show=function(t){r.a.extend(this.option,t),this.ID?this.Update():this.Create();var e=r()("#topMenu_"+this.ID),a=e.outerWidth(),i=e.outerHeight(),n=this.option.x,s=this.option.y;a>this.option.position.X+this.option.position.W-n&&(n-=a),i>this.option.position.Y+this.option.position.H-s&&(s-=i),e.hide(),e.css({position:"absolute",left:n+"px",top:s+"px"}).show(),this.isInit=!0},this.Hide=function(){r()("#topMenu_"+this.ID).hide(),r()("[id^='childMenu_"+this.ID+"']").hide()},this.BindEvent=function(){var t=this,e=r()("[id^='childMenu_"+t.ID+"']");r()("#topTable_"+t.ID).find("tr").mouseenter(function(){var a=r()(this),i=a.index(),n=r()("#topMenu_"+t.ID),s=r()("#childMenu_"+t.ID+i),o=a.outerWidth(),h=a.outerHeight(),l=n.position().left+o+1,u=n.position().top+h*i;o>t.option.position.X+t.option.position.W-l&&(l=l-o-n.outerWidth()-2),s.outerHeight()>t.option.position.Y+t.option.position.H-u&&(u=n.position().top+n.outerHeight()-s.outerHeight()),e.hide(),s.css({left:l+"px",top:u+"px"}).show()}).mouseleave(function(){var e=r()(this).index();setTimeout(function(){1!=r()("#childMenu_"+t.ID+e).attr("data-isShow")&&r()("#childMenu_"+t.ID+e).hide()},10)}).click(function(){var e=r()(this),a=e.index();"function"==r.a.type(t.option.data[a].click)&&(t.option.data[a].click(t.option.returnData),e.hide())}),e.mouseenter(function(){r()(this).attr("data-isShow","1")}).mouseleave(function(){r()(this).attr("data-isShow","0")}),e.find("tr").click(function(){var a=r()(this),i=parseInt(a.closest("div").attr("data-index")),n=a.index();"function"==r.a.type(t.option.data[i].children[n].click)&&(t.option.data[i].children[n].click(t.option.windowIndex||1),e.hide())})},this.GetPeriod=function(t){var e=[{text:"",Value:0,click:function(){t.ChangePeriod(0)}},{text:"",Value:1,click:function(){t.ChangePeriod(1)}},{text:"",Value:2,click:function(){t.ChangePeriod(2)}},{text:"",Value:9,click:function(){t.ChangePeriod(9)}},{text:"",Value:3,click:function(){t.ChangePeriod(3)}},{text:"1",Value:4,click:function(){t.ChangePeriod(4)}},{text:"5",Value:5,click:function(){t.ChangePeriod(5)}},{text:"15",Value:6,click:function(){t.ChangePeriod(6)}},{text:"30",Value:7,click:function(){t.ChangePeriod(7)}},{text:"60",Value:8,click:function(){t.ChangePeriod(8)}},{text:"2",Value:11,click:function(){t.ChangePeriod(11)}},{text:"4",Value:12,click:function(){t.ChangePeriod(12)}},{text:"",Value:10,click:function(){t.ChangePeriod(10)}},{text:":3",Value:20003,click:function(){t.ChangePeriod(20003)}},{text:":35",Value:20035,click:function(){t.ChangePeriod(20035)}},{text:":8",Value:40008,click:function(){t.ChangePeriod(40008)}}];for(var a in e){var i=e[a];if(i.Value==t.Period){i.selected=!0;break}}return e},this.GetRight=function(t){var e=[{text:"",click:function(){t.ChangeRight(0)}},{text:"",click:function(){t.ChangeRight(1)}},{text:"",click:function(){t.ChangeRight(2)}}];return t.Right>=0&&t.Right<e.length&&(e[t.Right].selected=!0),e},this.GetIndex=function(t){return[{text:"",click:function(e){t.ChangeIndex(e,"")}},{text:"BOLL",click:function(e){t.ChangeIndex(e,"BOLL")},isBorder:!0},{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"VOL",click:function(e){t.ChangeIndex(e,"VOL")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"BIAS",click:function(e){t.ChangeIndex(e,"BIAS")}},{text:"OBV",click:function(e){t.ChangeIndex(e,"OBV")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"CR",click:function(e){t.ChangeIndex(e,"CR")}},{text:"PSY",click:function(e){t.ChangeIndex(e,"PSY")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}},{text:"VR",click:function(e){t.ChangeIndex(e,"VR")}},{text:"EMV",click:function(e){t.ChangeIndex(e,"EMV")}},{text:"ROC",click:function(e){t.ChangeIndex(e,"ROC")}},{text:"MIM",click:function(e){t.ChangeIndex(e,"MIM")}},{text:"FSL",click:function(e){t.ChangeIndex(e,"FSL")}}]},this.GetColorIndex=function(t){var e=[{text:"",click:function(e){t.ChangeInstructionIndex("K-")}},{text:"",click:function(e){t.ChangeInstructionIndex("K-")}},{text:"",click:function(e){t.ChangeInstructionIndex("K-")}},{text:"",click:function(e){t.ChangeInstructionIndex("K-")}},{text:"",click:function(e){t.ChangeInstructionIndex("K-")}},{text:"",click:function(e){t.ChangeInstructionIndex("K-")}}];return t.ColorIndex&&(e[e.length-1].isBorder=!0,e.push({text:"K",click:function(e){t.CancelInstructionIndex()}})),e},this.GetTradeIndex=function(t){var e=[{text:"BIAS",click:function(e){t.ChangeInstructionIndex("-BIAS")}},{text:"CCI",click:function(e){t.ChangeInstructionIndex("-CCI")}},{text:"DMI",click:function(e){t.ChangeInstructionIndex("-DMI")}},{text:"KD",click:function(e){t.ChangeInstructionIndex("-KD")}},{text:"BOLL",click:function(e){t.ChangeInstructionIndex("-BOLL")}},{text:"KDJ",click:function(e){t.ChangeInstructionIndex("-KDJ")}}];return t.TradeIndex&&(e[e.length-1].isBorder=!0,e.push({text:"",click:function(e){t.CancelInstructionIndex()}})),e},this.GetOverlay=function(t){var e=[{text:"",click:function(){t.OverlaySymbol("000001.sh")}},{text:"",click:function(){t.OverlaySymbol("399001.sz")}},{text:"",click:function(){t.OverlaySymbol("399005.sz")}},{text:"",click:function(){t.OverlaySymbol("399006.sz")}},{text:"300",click:function(){t.OverlaySymbol("000300.sh")}}];for(var a in t.OverlayChartPaint){var i=t.OverlayChartPaint[a].Symbol;const r=new Map([["000001.sh",0],["399001.sz",1],["399005.sz",2],["399006.sz",3],["000300.sh",4]]);if(r.has(i)){var n=e[r.get(i)];let a=i;n.selected=!0,n.click=function(){t.DeleteOverlaySymbol(a)}}}return t.OverlayChartPaint&&t.OverlayChartPaint.length>0&&(e[e.length-1].isBorder=!0,e.push({text:"",click:function(){t.ClearOverlaySymbol()}})),e},this.GetKLineType=function(t){var e=[{text:"K()",click:function(){t.ChangeKLineDrawType(3)}},{text:"K()",click:function(){t.ChangeKLineDrawType(0)}},{text:"",click:function(){t.ChangeKLineDrawType(2)}},{text:"",click:function(){t.ChangeKLineDrawType(1)}},{text:"",click:function(){t.ChangeKLineDrawType(4)}}];switch(t.KLineDrawType){case 0:e[1].selected=!0;break;case 1:e[3].selected=!0;break;case 2:e[2].selected=!0;break;case 3:e[0].selected=!0;break;case 4:e[4].selected=!0}return e},this.GetIndexWindowCount=function(t){var e=[{text:"1",click:function(){t.ChangeIndexWindowCount(1)}},{text:"2",click:function(){t.ChangeIndexWindowCount(2)}},{text:"3",click:function(){t.ChangeIndexWindowCount(3)}},{text:"4",click:function(){t.ChangeIndexWindowCount(4)}},{text:"5",click:function(){t.ChangeIndexWindowCount(5)}}],a=t.Frame.SubFrame.length;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetCoordinateType=function(t){var e=[{text:"",click:function(){t.ChangeCoordinateType(0)}},{text:"",click:function(){t.ChangeCoordinateType(1)}},{text:"",click:function(){t.ChangeCoordinateType(2)}}];return t.Frame&&t.Frame.SubFrame&&t.Frame.SubFrame.length>0&&(1==t.Frame.SubFrame[0].Frame.CoordinateType?e[2].selected=!0:e[0].selected=!0,1==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType&&(e[1].selected=!0)),e},this.GetDragModeType=function(t){var e=[{text:"",click:function(){t.DragMode=0}},{text:"",click:function(){t.DragMode=1}},{text:"",click:function(){t.DragMode=2}}];return t.DragMode>=0&&t.DragMode<e.length&&(e[t.DragMode].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");a?e.push({text:"",click:function(){for(var e=a.Chart.Width,i=parseInt(a.Index)+1;i<t.ExtendChartPaint.length;++i){var n=t.ExtendChartPaint[i];"StockChip"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChage(!0),t.Draw()}}):e.push({text:"",click:function(){var e={Name:"",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChage(!0),t.Draw()}});var i=t.GetExtendChartByClassName("StockChip");return i?e.push({text:"",click:function(){for(var e=i.Chart.Width,a=parseInt(i.Index)+1;a<t.ExtendChartPaint.length;++a){var n=t.ExtendChartPaint[a];"DrawToolsButton"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(i),t.Frame.ChartBorder.Right-=e,t.SetSizeChage(!0),t.Draw()}}):e.push({text:"",click:function(){var e={Name:"",ShowType:1,Width:230};t.CreateExtendChart(e.Name,e);t.SetSizeChage(!0),t.Draw()}}),e},this.GetKLineInfo=function(t){var e=new Set;for(var a in t.ChartInfo){var i=t.ChartInfo[a];e.add(i.ClassName)}var n=["","","","","",""],r=[];for(var a in n){var s=n[a],o=Fe.GetClassInfo(s);if(o){i=this.CreateKlineInfoItem(s,e.has(o.ClassName),t);r.push(i)}}if(t.ChartInfo.length>0){r[r.length-1].isBorder=!0;i={text:"",click:function(){t.ClearKLineInfo()}};r.push(i)}return r},this.CreateKlineInfoItem=function(t,e,a){var i={text:t,selected:e};return i.click=e?function(){a.DeleteKLineInfo(t)}:function(){a.AddKLineInfo(t,!0)},i},this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,n=t.offsetY,s=[{text:"",children:this.GetPeriod(e)},{text:"",children:this.GetRight(e)},{text:"",children:this.GetIndex(e)},{text:"K",children:this.GetColorIndex(e)},{text:"",children:this.GetTradeIndex(e)},{text:"",children:this.GetKLineInfo(e)},{text:"",children:this.GetOverlay(e)},{text:"",children:this.GetKLineType(e)},{text:"",children:this.GetCoordinateType(e)},{text:"",children:this.GetIndexWindowCount(e)},{text:"",children:this.GetDragModeType(e)},{text:"",children:this.GetTools(e)}],o=e.Symbol.toUpperCase();(we.IsSHSZIndex(e.Symbol)||we.IsBIT(o))&&s.splice(1,1);var h=t.data.FrameID,l=this.GetOverlayIndex(e,h);if(l&&l.length>0){var u={text:"",children:this.GetDeleteOverlayIndex(e,l)};s.splice(3,0,u)}console.log("[KLineRightMenu::DoModal]",h),a.Show({windowIndex:h,x:i+e.UIElement.offsetLeft,y:n+e.UIElement.offsetTop,position:e.Frame.Position,data:s}),r()(document).click(function(){a.Hide()})},this.GetOverlayIndex=function(t,e){if(e>=t.Frame.SubFrame.length)return[];var a=[],i=t.Frame.SubFrame[e];for(var n in i.OverlayIndex){var r=i.OverlayIndex[n];a.push({Name:r.Script.Name,Identify:r.Identify})}return a},this.GetDeleteOverlayIndex=function(t,e){var a=[];for(var i in e){let n=e[i].Identify;a.push({text:e[i].Name,click:function(){t.DeleteOverlayWindowsIndex(n)}})}return a}}function Me(t){this.newMethod=Ne,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.BackupData,this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.Text,e=this.ChartPicture.FontOption,a=this.ChartPicture.LineColor;this.BackupData={Text:t,LineColor:a,FontOption:{Family:e.Family,Size:e.Size,Weight:e.Weight,Style:e.Style}},console.log("[ChartPictureTextSettingMenu::DoModal] picture info",this.BackupData);var i=this,n=this.DivElement.getElementsByClassName("chartpicture-text-setting")[0];n?this.SettingDiv=n:((n=document.createElement("div")).className="chartpicture-text-setting",this.DivElement.appendChild(n),this.SettingDiv=n);var s=[10,11,12,14,16,20,24,28,32,40],o=["","","Arial",""],h="",l="";o.forEach(function(t,e){l+=0!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"}),s.forEach(function(t,e){h+=5!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"});var u='<div class="titleWrap"><span class="titleName"></span><i class="closeBtn iconfont icon-close"></i></div>'+('<div class="contentWrap"><div class="styleOptions"><span class="colorPicker"><input type="color" id="fontColor" value="#1e90ff"></span><div class="likeSelect fontSelect"><span class="choicedText"></span><div class="selectList">'+l+'</div><i class="iconfont icon-xia"></i></div><div class="likeSelect fontSizeSelect"><span class="choicedText">20</span><div class="selectList">'+h+'</div><i class="iconfont icon-xia"></i></div><span class="strongFont likeBtn"><i class="iconfont icon-jiacu"></i></span><span class="italicsFont likeBtn"><i class="iconfont icon-qingxieL"></i></span></div><textarea class="tArea" id="tArea" placeholder="Text"></textarea></div>')+'<div class="btnsContainer"><span class="okBtn btn"></span><span class="cancelBtn btn"></span></div>';this.SettingDiv.style.left=this.Position.Left+"px",this.SettingDiv.style.top=this.Position.Top+"px",this.SettingDiv.innerHTML=u,this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",r()(".chartpicture-text-setting .colorPicker").css({borderColor:i.ChartPicture.LineColor,"background-color":i.ChartPicture.LineColor});var c=this.ChartPicture.FontOption.Family;r()(".chartpicture-text-setting .fontSelect .choicedText").html(c),o.forEach(function(t,e){t==c&&(r()(".chartpicture-text-setting .fontSelect p").removeClass("active"),r()(".chartpicture-text-setting .fontSelect p").eq(e).addClass("active"))});var f=this.ChartPicture.FontOption.Size;r()(".chartpicture-text-setting .fontSizeSelect .choicedText").html(f),s.forEach(function(t,e){t==f&&(r()(".chartpicture-text-setting .fontSizeSelect p").removeClass("active"),r()(".chartpicture-text-setting .fontSizeSelect p").eq(e).addClass("active"))});var C=this.ChartPicture.FontOption.Weight;null!=C&&"bold"==C&&r()(".chartpicture-text-setting .strongFont").addClass("hot");var d=this.ChartPicture.FontOption.Style;null!=d&&"italic"==d&&r()(".chartpicture-text-setting .italicsFont").addClass("hot");t=this.ChartPicture.Text;r()(".chartpicture-text-setting .tArea").val(t);r()(".chartpicture-text-setting #fontColor").change({Picture:this.ChartPicture},function(t){var e=r()(this).val();r()(this).parent().css({borderColor:e,"background-color":e});var a=t.data.Picture;a.LineColor=e,a.Update&&a.Update()}),r()(".chartpicture-text-setting .fontSelect,.chartpicture-text-setting .fontSizeSelect").click(function(){r()(this).find(".selectList").toggle(),r()(this).toggleClass("hot")}),r()(".chartpicture-text-setting .fontSelect p").click({Picture:this.ChartPicture},function(t){var e=r()(this).closest(".fontSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){r()(this).closest(".fontSelect").find(".choicedText").html(a),r()(this).siblings().removeClass("active"),r()(this).addClass("active");var i=t.data.Picture;i.FontOption.Family=a,i.Update&&i.Update()}}),r()(".chartpicture-text-setting .fontSizeSelect p").click({Picture:this.ChartPicture},function(t){var e=r()(this).closest(".fontSizeSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){r()(this).closest(".fontSizeSelect").find(".choicedText").html(a),r()(this).siblings().removeClass("active"),r()(this).addClass("active");var i=t.data.Picture;i.FontOption.Size=Number(a),i.Update&&i.Update()}}),r()(".chartpicture-text-setting .strongFont").click({Picture:this.ChartPicture},function(t){if(r()(this).toggleClass("hot"),r()(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Weight="bold",e.Update&&e.Update()}}),r()(".chartpicture-text-setting .italicsFont").click({Picture:this.ChartPicture},function(t){if(r()(this).toggleClass("hot"),r()(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Style="italic",e.Update&&e.Update()}}),r()(".chartpicture-text-setting .titleWrap .closeBtn,.chartpicture-text-setting .btnsContainer .cancelBtn").click({Picture:this.ChartPicture},function(t){var e=t.data.Picture;e.Text=i.BackupData.Text,e.LineColor=i.BackupData.LineColor,e.FontOption=i.BackupData.FontOption,e.Update&&e.Update(),i.Close()}),r()(".chartpicture-text-setting .tArea").keyup({Picture:this.ChartPicture},function(t){console.log('[ChartPictureTextSettingMenu::DoModal] $(".chartpicture-text-setting .tArea").keyup()');var e=r()(this).val(),a=t.data.Picture;a.Text=e,a.Update&&a.Update()}),r()(".chartpicture-text-setting .btnsContainer .okBtn").click(function(){i.Close(),i.HQChart&&i.HQChart.ChartDrawStorage&&i.HQChart.ChartDrawStorage.SaveDrawData(i.ChartPicture)})}}De.Get=function(t){return new Map([["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Long-Short"),delete this.newMethod,this.Index=new Array(new Ie("",null),new Ie("",null),new Ie("",null)),this.Index[0].LineColor=fe.Index.LineColor[0],this.Index[1].LineColor=fe.UpBarColor,this.Index[2].LineColor=fe.DownBarColor,this.LongShortData,this.Create=function(t,e){var a=null,i=this.IsOverlay();for(var n in a=i?this.OverlayIndex.Frame.Frame:t.Frame.SubFrame[e].Frame,this.Index){var r=null;(r=0==n?new Q:new lt).Color=this.Index[n].LineColor,r.Canvas=t.Canvas,r.Name=this.Name+"-"+n.toString(),r.ChartBorder=a.ChartBorder,r.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(r):t.ChartPaint.push(r)}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],n.HQChart.Period>0?(this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1):(s.HttpRequest({url:fe.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var n=t.data[i],r=new B;r.Date=n[0],r.Value=n[1],a.push(r)}var s=e.HistoryData.GetFittingData(a),o=new V;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.LongShortData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=null,n=this.IsOverlay();if((i=n?this.OverlayIndex.Frame.ChartPaint:t.GetChartPaint(e)).length!=this.Index.length)return!1;i[0].Data.Data=this.LongShortData,i[0].NotSupportMessage=null,i[1].Data.Data[0]=8,i[2].Data.Data[0]=1;var r=e+1;if(n){this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:9,Min:0,Count:3};var s=t.TitlePaint[r];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Vt(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);o>0&&(h.DataType="StraightLine"),s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:9,Min:0,Count:3},i)t.TitlePaint[r].Data[o]=new Vt(i[o].Data,this.Index[o].Name,this.Index[o].LineColor),o>0&&(t.TitlePaint[r].Data[o].DataType="StraightLine");return!0}}}}],["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Market-Timing"),delete this.newMethod,this.Index=new Array(new Ie("",null)),this.TimingData,this.TitleColor=fe.FrameSplitTextColor,this.Create=function(t,e){var a=null,i=this.IsOverlay();for(var n in a=i?this.OverlayIndex.Frame.Frame:t.Frame.SubFrame[e].Frame,this.Index){var r=new ft;r.Canvas=t.Canvas,r.Name=this.Name+"-"+n.toString(),r.ChartBorder=a.ChartBorder,r.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(r):t.ChartPaint.push(r)}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],n.HQChart.Period>0?(this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1):(s.HttpRequest({url:fe.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var n=t.data[i],r=new B;r.Date=n[0],r.Value=n[2],a.push(r)}var s=e.HistoryData.GetFittingData(a),o=new V;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.TimingData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=null,n=this.IsOverlay();if((i=n?this.OverlayIndex.Frame.ChartPaint:t.GetChartPaint(e)).length!=this.Index.length)return!1;i[0].Data.Data=this.TimingData,i[0].NotSupportMessage=null;var r=e+1;if(n){var s=t.TitlePaint[r];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Vt(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);h.StringFormat=kt.THOUSANDS,h.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in i)t.TitlePaint[r].Data[o]=new Vt(i[o].Data,this.Index[o].Name,this.TitleColor),t.TitlePaint[r].Data[o].StringFormat=kt.THOUSANDS,t.TitlePaint[r].Data[o].FloatPrecision=0;return!0}}}}],["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Market-Attention"),delete this.newMethod,this.Index=new Array(new Ie("",null)),this.Data,this.TitleColor=fe.FrameSplitTextColor,this.ApiUrl=fe.Index.MarketAttentionApiUrl,this.Create=function(t,e){var a=null,i=this.IsOverlay();for(var n in a=i?this.OverlayIndex.Frame.Frame:t.Frame.SubFrame[e].Frame,this.Index){var r=new ft;r.Canvas=t.Canvas,r.Name=this.Name+"-"+n.toString(),r.ChartBorder=a.ChartBorder,r.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(r):t.ChartPaint.push(r)}},this.SetFrame=function(t,e,a){var i=this.IsOverlay();i?this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}:t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],n.HQChart.Period>0?(this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1):(s.HttpRequest({url:this.ApiUrl,data:{symbol:n.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var n=new B;n.Date=t.date[i],n.Value=t.value[i],a.push(n)}var r=e.HistoryData.GetFittingData(a),s=new V;s.Data=r,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),this.SetFrame(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=null,n=this.IsOverlay();if((i=n?this.OverlayIndex.Frame.ChartPaint:t.GetChartPaint(e)).length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var r=e+1;if(n){var s=t.TitlePaint[r];for(var o in s.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var h=new Vt(i[o].Data,this.Index[o].Name,this.Index[o].LineColor);h.StringFormat=kt.THOUSANDS,h.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[o]=h}}else for(var o in i)t.TitlePaint[r].Data[o]=new Vt(i[o].Data,this.Index[o].Name,this.TitleColor),t.TitlePaint[r].Data[o].StringFormat=kt.THOUSANDS,t.TitlePaint[r].Data[o].FloatPrecision=0;return!0}}}}],["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Ie("",5),new Ie("MA",10),new Ie("MA",null)),this.Data,this.ApiUrl=fe.Index.MarketHeatApiUrl,this.Index[0].LineColor=fe.FrameSplitTextColor,this.Index[1].LineColor=fe.Index.LineColor[0],this.Index[2].LineColor=fe.Index.LineColor[1],this.Create=function(t,e){var a=null,i=this.IsOverlay();for(var n in a=i?this.OverlayIndex.Frame.Frame:t.Frame.SubFrame[e].Frame,this.Index){var r=null;0==n?r=new ft:(r=new Q).Color=this.Index[n].LineColor,r.Canvas=t.Canvas,r.Name=this.Name+"-"+n.toString(),r.ChartBorder=a.ChartBorder,r.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(r):t.ChartPaint.push(r)}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],n.HQChart.Period>0?(this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1):(s.HttpRequest({url:this.ApiUrl,data:{symbol:n.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var n=new B;n.Date=t.date[i],n.Value=t.value[i],a.push(n)}var r=e.HistoryData.GetFittingData(a),s=new V;s.Data=r,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=null,n=this.IsOverlay();if((i=n?this.OverlayIndex.Frame.ChartPaint:t.GetChartPaint(e)).length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var r=pe.MA(this.Data,this.Index[0].Param);i[1].Data.Data=r;var s=pe.MA(this.Data,this.Index[1].Param);i[2].Data.Data=s;var o=e+1;if(n){var h=t.TitlePaint[o];for(var l in h.OverlayIndex.set(this.OverlayIndex.Identify,{Data:[],Title:""}),i){var u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param;var c=new Vt(i[l].Data,u,this.Index[l].LineColor);c.StringFormat=kt.DEFAULT,c.FloatPrecision=2,h.OverlayIndex.get(this.OverlayIndex.Identify).Data[l]=c}}else for(var l in i){var u="";u=0==l?t.Name+this.Index[l].Name:"MA"+this.Index[l-1].Param,t.TitlePaint[o].Data[l]=new Vt(i[l].Data,u,this.Index[l].LineColor),t.TitlePaint[o].Data[l].StringFormat=kt.DEFAULT,t.TitlePaint[o].Data[l].FloatPrecision=2}return!0}}}}],["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod(""),delete this.newMethod,this.Index=new Array(new Ie("",null),new Ie("",null)),this.Data,this.ApiUrl=fe.Index.StockHistoryDayApiUrl,this.Index[0].LineColor=fe.Index.LineColor[0],this.Index[1].LineColor="rgb(105,105,105)",this.Create=function(t,e){for(var a in this.Index){var i=null;0==a?i=new ut:1==a&&(i=new rt),i&&(i.Color=this.Index[a].LineColor,i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i))}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};if(this.Data=[],2!=n.HQChart.Period)return this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1;return s.HttpRequest({url:this.ApiUrl,data:{symbol:[n.HQChart.Symbol],field:["finance.benford","announcement2.quarter","announcement1.quarter","announcement3.quarter","announcement4.quarter"],condition:[{item:["date","int32","gte","20130101"]},{item:["announcement1.year","int32","gte",0,"announcement2.year","int32","gte",0,"announcement3.year","int32","gte",0,"announcement4.year","int32","gte",0,"or"]}]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0},this.JsonDataToMapSingleData=function(t){var e=t.stock[0].stockday,a=new Map;for(var i in e){var n=e[i],r=new B;if(r.Date=n.date,r.Value=new Array,null!=n.finance1&&null!=n.announcement1){let t=n.announcement1.year,e=n.announcement1.quarter,a=n.finance1.benford;r.Value.push({Year:t,Quarter:e,Value:a})}if(null!=n.finance2&&null!=n.announcement2){let t=n.announcement2.year,e=n.announcement2.quarter,a=n.finance2.benford;r.Value.push({Year:t,Quarter:e,Value:a})}if(null!=n.finance3&&null!=n.announcement3){let t=n.announcement3.year,e=n.announcement3.quarter,a=n.finance3.benford;r.Value.push({Year:t,Quarter:e,Value:a})}if(null!=n.finance4&&null!=n.announcement4){let t=n.announcement4.year,e=n.announcement4.quarter,a=n.finance4.benford;r.Value.push({Year:t,Quarter:e,Value:a})}a.set(r.Date,r)}var s=new Array;for(var n of a)s.push(n[1]);return s},this.RecvData=function(t,e){if(console.log(t),!(null==t.stock||t.stock.length<=0)){var a=this.JsonDataToMapSingleData(t),i=e.HistoryData.GetFittingMonthData(a),n=new V;n.Data=i,n.Period=e.HQChart.Period,n.Right=e.HQChart.Right,this.Data=n.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:1,Color:"rgb(255,106,106)",Title:"",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};var n=e+1;return t.TitlePaint[n].Data[1]=new Vt(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[n].Data[1].DataType="MultiReport",t.TitlePaint[n].Title=this.FormatIndexTitle(),!0}}}}],["",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Ie("",3),new Ie("",10),new Ie("MA",5),new Ie("MA",10)),this.Data,this.ApiUrl=fe.Index.CustomIndexHeatApiUrl,this.Index[1].LineColor=fe.Index.LineColor[1],this.Index[2].LineColor=fe.Index.LineColor[2],this.Index[3].LineColor=fe.Index.LineColor[3],this.Create=function(t,e){for(var a in this.Index){var i=null;0==a?i=new ut:(i=new Q).Color=this.Index[a].LineColor,i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.RequestData=function(t,e,a){var i=this,n={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],n.HQChart.Period>0?(this.NotSupport(n.HQChart,n.WindowIndex,""),n.HQChart.Draw(),!1):(s.HttpRequest({url:this.ApiUrl,data:{stock:n.HQChart.CustomStock,date:{startdate:n.HQChart.QueryDate.Start,enddate:n.HQChart.QueryDate.End},day:[this.Index[0].Param,this.Index[1].Param]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,n)}}),!0)},this.RecvData=function(t,e){if(!(null==t.data||t.data.length<0)){var a=new Array;for(let e in t.data){let i=t.data[e],n=new B;n.Date=i[0],n.Value=i[1],a.push(n)}var i=e.HistoryData.GetFittingData(a),n=new V;n.Data=i,n.Period=e.HQChart.Period,n.Right=e.HQChart.Right,this.Data=n.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){let i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"1",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"2",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:.8,Color:"rgb(255,106,106)",Title:"3",TitleColor:"rgb(245,255 ,250)"},{Value:.8,Value2:1,Color:"rgb(208, 32 ,144)",Title:"4",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data;let n=pe.MA(this.Data,this.Index[2].Param);i[2].Data.Data=n;let r=pe.MA(this.Data,this.Index[3].Param);i[3].Data.Data=r,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};let s=e+1;for(let e=1;e<i.length;++e){let a=this.Index[e].Name;"MA"==a&&(a="MA"+this.Index[e].Param),t.TitlePaint[s].Data[e]=new Vt(i[e].Data,a,this.Index[e].LineColor),t.TitlePaint[s].Data[e].StringFormat=kt.DEFAULT,t.TitlePaint[s].Data[e].FloatPrecision=2}return t.TitlePaint[s].Title="("+this.Index[0].Param+","+this.Index[1].Param+","+this.Index[2].Param+","+this.Index[3].Param+")",!0}}},Name:""}],["-",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod("Lighter-Trend"),delete this.newMethod,this.Index=new Array(new Ie("STICKLINE",null),new Ie("STICKLINE",null)),this.Index[0].LineColor="rgb(255,0,0)",this.Index[1].LineColor="rgb(0,0,255)",this.Create=function(t,e){for(var a in this.Index){var i=new st;i.Canvas=t.Canvas,i.Name=this.Name,i.Name=this.Name+"-"+a.toString(),i.Color=this.Index[a].LineColor,i.LineWidth=2,i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(2!=i.length)return!1;var n=a.GetClose(),r=pe.SMA(n,6.5,1),s=pe.SMA(n,13.5,1),o=pe.STICKLINE(pe.ARRAY_GT(r,s),r,s),h=pe.STICKLINE(pe.ARRAY_GT(s,r),r,s);i[0].Data.Data=o,i[1].Data.Data=h;var l=e+1;return t.TitlePaint[l].Title="/ ",!0}}},Name:"/"}],["-",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod(""),delete this.newMethod,this.Index=new Array(new Ie("STICKLINE",34),new Ie("STICKLINE",3),new Ie("STICKLINE",null),new Ie("STICKLINE",null),new Ie("STICKLINE",null),new Ie("STICKLINE",null),new Ie("LINE",null),new Ie("TEXT",null)),this.Index[0].LineColor="rgb(0,0,138)",this.Index[1].LineColor="rgb(133,0,138)",this.Index[2].LineColor="rgb(101,118,0)",this.Index[3].LineColor="rgb(105,0,121)",this.Index[4].LineColor="rgb(121,183,21)",this.Index[5].LineColor="rgb(0,0,138)",this.Index[6].LineColor="rgb(255,0,0)",this.Create=function(t,e){for(var a in this.Index){var i=null;"LINE"==this.Index[a].Name?(i=new Q).Color=this.Index[a].LineColor:"TEXT"==this.Index[a].Name?i=new ot:((i=new st).Color=this.Index[a].LineColor,i.LineWidth=5),i.Canvas=t.Canvas,i.Name=this.Name,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;var n=a.GetClose(),r=a.GetHigh(),s=a.GetLow();i[0].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),0,2),i[1].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),2,5),i[2].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),5,10),i[3].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),10,21.5),i[4].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),21.5,23,5),i[5].Data.Data=pe.STICKLINE(pe.ARRAY_GT(n,0),23,28,5);var o=pe.ARRAY_DIVIDE(pe.EMA(pe.ARRAY_MULTIPLY(pe.ARRAY_DIVIDE(pe.ARRAY_SUBTRACT(n,pe.LLV(s,this.Index[0].Param)),pe.ARRAY_SUBTRACT(pe.HHV(r,this.Index[0].Param),pe.LLV(s,this.Index[0].Param))),100),this.Index[1].Param),4);i[6].Data.Data=o;var h=new Array;h[0]={Value:1,Message:"",Color:"rgb(0,255,255)",Position:"Left"},h[1]={Value:3.5,Message:"",Color:"rgb(0,255,255)",Position:"Left"},h[2]={Value:7.5,Message:"",Color:"rgb(0,255,255)",Position:"Left"},h[3]={Value:16,Message:"",Color:"rgb(0,255,255)",Position:"Left"},h[4]={Value:22,Message:"",Color:"rgb(0,0,255)",Position:"Left"},h[5]={Value:25.5,Message:"",Color:"rgb(255,0,255)",Position:"Left"},i[7].Data.Data=h;var l=e+1;return t.TitlePaint[l].Data[0]=new Vt(i[6].Data,"",i[6].Color),t.TitlePaint[l].Title=this.FormatIndexTitle(),!0}}},Name:""}],["-",{IsMainIndex:!1,Create:function(){return new function(){this.newMethod=Ae,this.newMethod(""),delete this.newMethod,this.Index=new Array(new Ie("",null)),this.Index[0].LineColor="rgb(255,0,0)",this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;var n=a.GetClose(),r=(a.GetHigh(),a.GetLow()),s=pe.REF(r,1),o=pe.ARRAY_MULTIPLY(pe.ARRAY_DIVIDE(pe.SMA(pe.ABS(pe.ARRAY_SUBTRACT(r,s)),13,1),pe.SMA(pe.MAX(pe.ARRAY_SUBTRACT(r,s),0),13,1)),100),h=pe.EMA(pe.ARRAY_IF(pe.ARRAY_MULTIPLY(n,1.2),pe.ARRAY_MULTIPLY(o,13),pe.ARRAY_DIVIDE(o,13)),13),l=pe.LLV(r,34),u=pe.HHV(h,34),c=pe.ARRAY_IF(pe.LLV(r,56),1,0),f=pe.ARRAY_DIVIDE(pe.ARRAY_ADD(h,pe.ARRAY_MULTIPLY(u,2)),2),C=pe.ARRAY_MULTIPLY(pe.ARRAY_DIVIDE(pe.EMA(pe.ARRAY_IF(pe.ARRAY_LTE(r,l),f,0),3),618),c),d=pe.ARRAY_GT(C,pe.REF(C,1)),D=pe.REF(pe.LLV(r,100),3),p=pe.REFDATE(D,-1),m=pe.ARRAY_EQ(r,p),v=pe.ARRAY_AND(d,m);i[0].Data.Data=v;var S=e+1;for(var g in i)t.TitlePaint[S].Data[g]=new Vt(i[g].Data,this.Index[g].Name,this.Index[g].LineColor);return t.TitlePaint[S].Title=this.FormatIndexTitle(),!0}}},Name:""}]]).get(t)},pe.EMA=function(t,e){var a=[],i=0;if(i>=t.length)return a;for(;i<t.length&&(null==t[i]||isNaN(t[i]));++i);var n=i,r=i+1;a[n]=t[n];for(var s=i+1;s<t.length;++s,++n,++r)a[r]=(2*t[r]+(e-1)*a[n])/(e+1);return a},pe.SMA=function(t,e,a){for(var i=[],n=0,r=null;n<t.length;++n)if(null!=t[n]&&!isNaN(t[n])){r=t[n],i[n]=r;break}for(++n;n<t.length;++n)i[n]=(a*t[n]+(e-a)*r)/e,r=i[n];return i},pe.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:t[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},pe.HHV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,n=e,r=0;n<t.length;++n,++r){if(n<e+i)i=t[n]<t[i]?i:n;else for(r=1+(i=n-e+1);r<=n;++r)t[r]>t[i]&&(i=r);a[n]=t[i]}return a},pe.LLV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,n=e;n<t.length;++n,++r){if(n<e+i)i=t[n]>t[i]?i:n;else for(var r=1+(i=n-e+1);r<=n;++r)t[r]<t[i]&&(i=r);a[n]=t[i]}return a},pe.REF=function(t,e){var a=[];if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null);return a},pe.REFDATE=function(t,e){var a=[];if(t.length<=0)return a;for(var i in e=t.length-1,t)a[i]=t[e];return a},pe.SUM=function(t,e){var a=[];if(0==e){a[0]=t[0];for(var i=1;i<t.length;++i)a[i]=a[i-1]+t[i]}else{i=e-1;for(var n=0;i<t.length;++i,++n)for(var r=0;r<e;++r)0==r?a[i]=t[r+n]:a[i]+=t[r+n]}return a},pe.ARRAY_SUBTRACT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]-e;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=t[i]-e[i]:a[i]=null}return a},pe.ARRAY_GT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]>e[i]?1:0:a[i]=null}return a},pe.ARRAY_GTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>=e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]>=e[i]?1:0:a[i]=null}return a},pe.ARRAY_LT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]<e[i]?1:0:a[i]=null}return a},pe.ARRAY_LTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<=e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]<=e[i]?1:0:a[i]=null}return a},pe.ARRAY_EQ=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]==e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]==e[i]?1:0:a[i]=null}return a},pe.ARRAY_IF=function(t,e,a){var i=[],n=["number"==typeof e,"number"==typeof a];for(var r in t)t[r]?i[r]=n[0]?e:e[r]:i[r]=n[1]?a:a[r];return i},pe.ARRAY_AND=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]&&e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]&&e[i]?1:0:a[i]=0}return a},pe.ARRAY_OR=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]||e?1:0;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&t[i]?a[i]=1:i<e.length&&e[i]?a[i]=1:a[i]=0}return a},pe.ARRAY_MULTIPLY=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]*e;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?a[i]=t[i]*e[i]:a[i]=null}return a}for(a=pe.ARRAY_MULTIPLY(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=pe.ARRAY_MULTIPLY(a,arguments[i]);return a},pe.ARRAY_DIVIDE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]/e;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:0==e[i]?a[i]=null:a[i]=t[i]/e[i]:a[i]=null}return a},pe.ARRAY_ADD=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]+e;else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:a[i]=t[i]+e[i]:a[i]=null}return a}for(a=pe.ARRAY_ADD(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=pe.ARRAY_ADD(a,arguments[i]);return a},pe.MAX=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.max(t[i],e);else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.max(t[i],e[i]):a[i]=null}return a},pe.MIN=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.min(t[i],e);else{var n=Math.max(t.length,e.length);for(i=0;i<n;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.min(t[i],e[i]):a[i]=null}return a},pe.ABS=function(t){var e=[];for(var a in t)null==t[a]?e[a]=null:e[a]=Math.abs(t[a]);return e},pe.MA=function(t,e){for(var a=[],i=0,n=t.length;i<n;i++)if(i<e)a[i]=null;else{for(var r=0,s=0;s<e;s++)r+=t[i-s];a[i]=r/e}return a},pe.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},pe.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var n=0,r=0;i<t.length&&r<e;++r,++i)t[i]&&!isNaN(t[i])?n+=t[i]:n+=t[i-1];for(a[i-1]=n/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},pe.STD=function(t,e){for(var a=[],i=0,n=[],r=e-1;r<t.length;++r){i=0;for(var s=0;s<e;++s)i+=t[r-s];n[r]=i/e}for(r=e-1;r<t.length;++r){i=0;for(s=0;s<e;++s)i+=Math.pow(t[r-s]-n[r],2);a[r]=Math.sqrt(i/e)}return a},pe.AVEDEV=function(t,e){for(var a=[],i=0,n=[],r=e-1;r<t.length;++r){i=0;for(var s=0;s<e;++s)i+=t[r-s];n[r]=i/e}for(r=e-1;r<t.length;++r){i=0;for(s=0;s<e;++s)i+=Math.abs(t[r-s]-n[r]);a[r]=i/e}return a},pe.COUNT=function(t,e){for(var a=[],i=e-1;i<t.length;++i){for(var n=0,r=0;r<e;++r)t[i-r]&&++n;a[i]=n}return a},pe.CROSS=function(t,e){var a=[];if(t.length!=e.length)return[];for(var i=0;i<t.length&&(null==t[i]||isNaN(t[i])||null==e[i]||!isNaN(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0;return a},pe.MULAR=function(t,e){var a=[];if(t.length<e)return a;for(var i=e;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])){a[i]=t[i];break}for(++i;i<t.length;++i)a[i]=a[i-1]*t[i];return a},pe.STICKLINE=function(t,e,a){var i=[];if(t.length<=0)return i;var n="number"==typeof e,r="number"==typeof a;for(var s in t)if(i[s]=null,!isNaN(t[s])&&t[s])if(n&&r)i[s]={Value:e,Value2:a};else if(n&&!r){if(isNaN(a[s]))continue;i[s]={Value:e,Value2:a[s]}}else if(!n&&r){if(isNaN(e[s]))continue;i[s]={Value:e[s],Value2:a}}else{if(isNaN(e[s])||isNaN(a[s]))continue;i[s]={Value:e[s],Value2:a[s]}}return i},me.JsonDataToHistoryData=function(t){var e=[];if(!t.data)return e;for(var a=t.data,i=0;i<a.length;++i){var n=new P;n.Date=a[i][0],n.Open=a[i][2],n.YClose=a[i][1],n.Close=a[i][5],n.High=a[i][3],n.Low=a[i][4],n.Vol=a[i][6],n.Amount=a[i][7],isNaN(n.Open)||n.Open<=0||e.push(n)}return e},me.JsonDataToRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var n=t.stock[i];if(n&&n.symbol==e){a=n;break}}if(!a)return null;var r=e.toUpperCase(),s=we.IsSHSZ(r),o=new P;return o.Date=a.date,o.Open=a.open,o.YClose=a.yclose,o.High=a.high,o.Low=a.low,o.Vol=s?a.vol/100:a.vol,o.Amount=a.amount,o.Close=a.price,o},me.JsonDataToMinuteRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var n=t.stock[i];if(n&&n.symbol==e){a=n;break}}if(!a)return null;var r=e.toUpperCase(),s=we.IsSHSZ(r),o=we.IsChinaFutures(r),h=new Array,l=a.yclose,u=a.date;for(var i in o&&a.yclearing&&(l=a.yclearing),a.minute){var c=a.minute[i],f=new P;f.Close=c.price,f.Open=c.open,f.High=c.high,f.Low=c.low,f.Vol=s?c.vol/100:c.vol,f.Amount=c.amount,f.Date=u,f.Time=c.time,f.Close||(f.Close=l,f.Open=f.High=f.Low=f.Close),f.Open<=0&&(f.Open=null),f.Close<=0&&(f.Close=null),f.High<=0&&(f.High=null),f.Low<=0&&(f.Low=null),c.price>0&&(l=c.price),h[i]=f}return h},me.JsonDataToMinuteHistoryData=function(t){var e=null;t.symbol&&(e=t.symbol.toUpperCase());var a=!1;e&&(a=we.IsSHSZ(e));for(var i=t.data,n=new Array,r=0;r<i.length;++r){var s=new P;s.Date=i[r][0],s.Open=i[r][2],s.YClose=i[r][1],s.Close=i[r][5],s.High=i[r][3],s.Low=i[r][4],s.Vol=a?i[r][6]/100:i[r][6],s.Amount=i[r][7],s.Time=i[r][8],n.push(s)}for(r=0;r<n.length;++r){var o=n[r];if(null==o&&coninue,isNaN(o.Open)||o.Open<=0||isNaN(o.High)||o.High<=0||isNaN(o.Low)||o.Low<=0||isNaN(o.Close)||o.Close<=0||isNaN(o.YClose)||o.YClose<=0)if(0==r)o.YClose>0&&(o.Open=o.YClose,o.High=o.YClose,o.Low=o.YClose,o.Close=o.YClose);else for(var h=r-1;h>=0;--h){var l=n[h];if(null==l&&coninue,l.Open>0&&l.High>0&&l.Low>0&&l.Close>0){o.YClose<=0&&(o.YClose=l.Close),o.Open=l.Open,o.High=l.High,o.Low=l.Low,o.Close=l.Close;break}}}return n},me.JsonDataToTickData=function(t){var e=[];if(!t.detail)return e;var a=t.date,i=t.yclose;for(var n in t.detail){var r=new P,s=t.detail[n];s&&(r.Date=a,r.Time=s[0],r.Low=r.High=r.Close=r.Open=s[1],r.YClose=i,r.Vol=s[2],r.Amount=s[3],r.Flag=s[4],isNaN(r.Open)||r.Open<=0||(i=r.Close,e.push(r)))}return e},ve.JsonDataToMinuteData2=function(t){t.stock[0].symbol;var e=t.stock[0].yclose,a=t.stock[0].yclose,i=t.stock[0].yclose,n=[],r=t.stock[0],s=r.date;for(var o in r.before){var h=new b,l=(u=r.before[o])[0];h.Before={},h.Before.Close=u[1],h.Before.Close?e=h.Before.Close:h.Before.Close=e,h.Before.Vol=u[2]/100,h.Before.Amount=u[3],h.DateTime=s.toString()+" "+l.toString(),h.Date=s,h.Time=l,i&&h.Before.Close&&(h.Before.Increase=(h.Before.Close-i)/i*100),n.push(h)}for(var o in r.minute){var u=r.minute[o];h=new b;u.price&&(e=u.price),u.avprice&&(a=u.avprice),925!=u.time&&(h.Close=u.price,h.Open=u.open,h.High=u.high,h.Low=u.low,h.Amount=u.amount,h.Vol=u.vol/100,h.DateTime=t.stock[0].date.toString()+" "+u.time.toString(),h.Date=t.stock[0].date,h.Time=u.time,h.Increase=u.increase,h.Risefall=u.risefall,h.AvPrice=u.avprice,h.Close||(h.Open=h.High=h.Low=h.Close=e),h.AvPrice||(h.AvPrice=a),i&&h.Close&&(h.Increase=(h.Close-i)/i*100),n.push(h))}return n},ve.JsonDataToMinuteData=function(t,e){var a=t.stock[0].symbol.toUpperCase(),i=we.IsSHSZ(a),n=we.IsChinaFutures(a),r=new Array,s=t.stock[0].yclose,o=t.stock[0].yclose,h=t.stock[0].yclose;n&&t.stock[0].yclearing&&(h=s=o=t.stock[0].yclearing);var l=t.stock[0].date;for(var u in t.stock[0].minute){var c=t.stock[0].minute[u],f=new b;f.Close=c.price,f.Open=c.open,f.High=c.high,f.Low=c.low,f.Vol=i?c.vol/100:c.vol,f.Amount=c.amount,c.date>0&&(l=c.date),f.DateTime=l.toString()+" "+c.time.toString(),f.Date=l,f.Time=c.time,0==u&&(f.IsFristData=!0,i&&(f.DateTime=t.stock[0].date.toString()+" 0925",f.Time=925)),f.Increase=c.increase,f.Risefall=c.risefall,f.AvPrice=c.avprice,It.IsNumber(c.lead)&&(f.Lead=c.lead),f.Close||(f.Close=s,f.Open=f.High=f.Low=f.Close),f.AvPrice||(f.AvPrice=o),f.Open<=0&&(f.Open=null),f.Close<=0&&(f.Close=null),f.AvPrice<=0&&(f.AvPrice=null),f.High<=0&&(f.High=null),f.Low<=0&&(f.Low=null),h&&f.Close&&(f.Increase=(f.Close-h)/h*100);var C=Math.abs(f.AvPrice-f.Close);i&&C>.13*f.Close&&(f.AvPrice=o),c.price>0&&(s=c.price),c.avprice>0&&f.AvPrice===c.avprice&&(o=c.avprice),r[u]=f}return r},ve.JsonDataToMinuteDataArray=function(t){var e=t.symbol.toUpperCase(),a=we.IsSHSZ(e),i=(we.IsChinaFutures(e),[]);for(var n in t.data){var r=[],s=t.data[n],o=s.date,h=s.yclose,l=h,u=null;for(var c in s.minute){var f=s.minute[c];f[2]&&(l=f[2]);var C=new b;if(C.Close=f[2],C.Open=f[1],C.High=f[3],C.Low=f[4],C.Vol=f[5]/100,C.Amount=f[6],7<f.length&&f[7]>0&&(C.AvPrice=f[7]),C.DateTime=o.toString()+" "+f[0].toString(),C.Date=o,C.Time=f[0],C.Close||(C.Close=l,C.Open=C.High=C.Low=C.Close),!C.AvPrice&&u&&(C.AvPrice=u),C.Close&&h?C.Increase=(C.Close-h)/h*100:C.Increase=null,0==c&&(a&&(C.DateTime=o.toString()+" 0925",C.Time=925),C.IsFristData=!0),C.Open<=0&&(C.Open=null),C.Close<=0&&(C.Close=null),C.AvPrice<=0&&(C.AvPrice=null),C.High<=0&&(C.High=null),C.Low<=0&&(C.Low=null),C.AvPrice<=0&&(C.AvPrice=null),C.AvPrice&&a)Math.abs(C.AvPrice-C.Close)>.13*C.Close&&(C.AvPrice=u);f.length>7&&f[7]>0&&C.AvPrice===f[7]&&(u=f[7]),r[c]=C}var d=new V;d.Data=r,d.YClose=h,d.Close=s.close,d.Date=o,i.push(d)}return i},Se.JsonDataToMinuteData=function(t){var e=[];for(var a in t.minute.time){var i=new b;t.minute.price[a]<=0&&a>0?(i.Close=e[a-1].Close,i.Open=e[a-1].Close,i.High=i.Close,i.Low=i.Close,i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=e[a-1].AvPrice):(i.Close=t.minute.price[a],i.Open=t.minute.open[a],i.High=t.minute.high[a],i.Low=t.minute.low[a],i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=t.minute.avprice[a]),i.Open<=0&&(i.Open=null),i.Close<=0&&(i.Close=null),i.AvPrice<=0&&(i.AvPrice=null),i.High<=0&&(i.High=null),i.Low<=0&&(i.Low=null),e[a]=i}return e},ye.prototype.GetDefaultColor=function(t){let e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]},Fe.Get=function(t){return new Map([["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="InvestorInfo",this.RequestData=function(t){var e=this,a={HQChart:t};return this.Data=[],s.HttpRequest({url:fe.KLine.Info.Investor.ApiUrl,data:{filed:["question","answerdate","symbol","id"],symbol:[a.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)}}),!0},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],n=new H;n.Date=i.answerdate,n.Title=i.question,n.InfoType=_.INVESTOR,this.Data.push(n)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="AnnouncementInfo",this.ApiType=1,this.RequestData=function(t){var e=this,a={HQChart:t};if(this.Data=[],1==this.ApiType){var i=`${fe.CacheDomain}/cache/analyze/shszreportlist/${a.HQChart.Symbol}.json`;s.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,i){e.RecvError(t,i,a)}})}else s.HttpRequest({url:fe.KLine.Info.Announcement.ApiUrl,data:{filed:["title","releasedate","symbol","id"],symbol:[a.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,i){e.RecvError(t,i,a)}})},this.RecvData=function(t,e){if(!(t.report.length<=0)){for(var a in t.report){var i=t.report[a],n=new H;for(var r in n.Date=i.releasedate,n.Title=i.title,n.InfoType=_.ANNOUNCEMENT,i.type){var s=i.type[r];switch(s){case"":n.InfoType=_.ANNOUNCEMENT_QUARTER_1;break;case"":n.InfoType=_.ANNOUNCEMENT_QUARTER_2;break;case"":n.InfoType=_.ANNOUNCEMENT_QUARTER_3;break;case"":n.InfoType=_.ANNOUNCEMENT_QUARTER_4}}this.Data.push(n)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}},this.RecvError=function(t,e,a){console.warn("[AnnouncementInfo::RecvError] error, http ",e,t)}}}}],["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="PforecastInfo",this.RequestData=function(t){var e=this,a={HQChart:t};return this.Data=[],s.HttpRequest({url:fe.KLine.Info.Pforecast.ApiUrl,data:{field:["pforecast.type","pforecast.reportdate","fweek"],condition:[{item:["pforecast.reportdate","int32","gte",this.StartDate]}],symbol:[a.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a];if(i.pforecast.length>0){var n=i.pforecast[0],r=new H;r.Date=i.date,r.Title=n.type,r.InfoType=_.PFORECAST,r.ExtendData={Type:n.type,ReportDate:n.reportdate},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="ResearchInfo",this.RequestData=function(t){var e=this,a={HQChart:t};return this.Data=[],s.HttpRequest({url:fe.KLine.Info.Research.ApiUrl,data:{filed:["releasedate","researchdate","level","symbol","id","type"],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},symbol:[a.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)}}),!0},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],n=new H;n.ID=i.id,n.Date=i.researchdate,n.InfoType=_.RESEARCH,n.ExtendData={Level:i.level,Type:i.type},this.Data.push(n)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="BlockTrading",this.RequestData=function(t){var e=this,a={HQChart:t};return this.Data=[],s.HttpRequest({url:fe.KLine.Info.BlockTrading.ApiUrl,data:{field:["blocktrading.price","blocktrading.vol","blocktrading.premium","fweek","price"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["blocktrading.vol","int32","gte","0"]}],symbol:[a.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],n=new H;n.Date=i.date,n.InfoType=_.BLOCKTRADING,n.ExtendData={Price:i.blocktrading.price,Premium:i.blocktrading.premium,Vol:i.blocktrading.vol,ClosePrice:i.price},i.fweek&&(n.ExtendData.FWeek={},null!=i.fweek.week1&&(n.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(n.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(n)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}],["",{Create:function(){return new function(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="TradeDetail",this.RequestData=function(t){var e=this,a={HQChart:t};return this.Data=[],s.HttpRequest({url:fe.KLine.Info.TradeDetail.ApiUrl,data:{field:["tradedetail.typeexplain","tradedetail.type","fweek"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["tradedetail.type","int32","gte","0"]}],symbol:[a.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],n=new H;for(var r in n.Date=i.date,n.InfoType=_.TRADEDETAIL,n.ExtendData={Detail:new Array},i.tradedetail){var s=i.tradedetail[r];n.ExtendData.Detail.push({Type:s.type,TypeExplain:s.typeexplain})}i.fweek&&(n.ExtendData.FWeek={},null!=i.fweek.week1&&(n.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(n.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(n)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}}]]).get(t)},Fe.GetClassInfo=function(t){return new Map([["",{ClassName:"InvestorInfo"}],["",{ClassName:"AnnouncementInfo"}],["",{ClassName:"PforecastInfo"}],["",{ClassName:"ResearchInfo"}],["",{ClassName:"BlockTrading"}],["",{ClassName:"TradeDetail"}]]).get(t)},Fe.GetIconUrl=function(t){switch(t){case _.INVESTOR:return fe.KLine.Info.Investor.Icon;case _.PFORECAST:return fe.KLine.Info.Pforecast.Icon;case _.ANNOUNCEMENT:return fe.KLine.Info.Announcement.Icon;case _.ANNOUNCEMENT_QUARTER_1:case _.ANNOUNCEMENT_QUARTER_2:case _.ANNOUNCEMENT_QUARTER_3:case _.ANNOUNCEMENT_QUARTER_4:return fe.KLine.Info.Announcement.IconQuarter;case _.RESEARCH:return fe.KLine.Info.Research.Icon;case _.BLOCKTRADING:return fe.KLine.Info.BlockTrading.Icon;case _.TRADEDETAIL:return fe.KLine.Info.TradeDetail.Icon;default:return fe.KLine.Info.Announcement.Icon}},Fe.GetIconFont=function(t){switch(t){case _.INVESTOR:return fe.KLine.Info.Investor.IconFont;case _.PFORECAST:return fe.KLine.Info.Pforecast.IconFont;case _.ANNOUNCEMENT:return fe.KLine.Info.Announcement.IconFont;case _.ANNOUNCEMENT_QUARTER_1:case _.ANNOUNCEMENT_QUARTER_2:case _.ANNOUNCEMENT_QUARTER_3:case _.ANNOUNCEMENT_QUARTER_4:return fe.KLine.Info.Announcement.IconFont2;case _.RESEARCH:return fe.KLine.Info.Research.IconFont;case _.BLOCKTRADING:return fe.KLine.Info.BlockTrading.IconFont;case _.TRADEDETAIL:return fe.KLine.Info.TradeDetail.IconFont;default:return fe.KLine.Info.Announcement.IconFont}},Le.InfoMap=new Map([["",{Create:function(){return new function(){this.newMethod=xe,this.newMethod(),delete this.newMethod,this.ClassName="MarketEventInfo",this.RequestData=function(t){var e=this;this.Data=[];var a={HQChart:t},i=fe.CacheDomain+"/cache/analyze/shszevent/marketevent/concept/"+t.TradeDate+".json";if(t.NetworkFilter){var n={Name:"MarketEventInfo::RequestData",Explain:"",Request:{Url:i,Type:"Get",Data:{Date:t.TradeDate,Symbol:t.Symbol}},Self:this,PreventDefault:!1};if(t.NetworkFilter(n,function(t){e.RecvData(t,a),a.HQChart.UpdataChartInfo(),a.HQChart.Draw()}),1==n.PreventDefault)return}return s.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,e){console.warn("[MarketEventInfo::RequestData] error, http ",e,t)}}),!0},this.RecvData=function(t,e){for(var a in t.event){var i=t.event[a];for(var n in i.data){var r=i.data[n];if(!(r.length<2)){var s={Date:i.date,Time:r[0],Title:r[1],Type:0};this.Data.push(s)}}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}}]]),Le.Get=function(t){return Le.InfoMap.get(t)};var we={SH:".SH",SZ:".SZ",HK:".HK",FHK:".FHK",SHFE:".SHF",SHFE2:".SHFE",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",FTSE:".FTSE",BIT:".BIT",BIZ:".BIZ",IsFTSE:function(t){return!!t&&t.indexOf(this.FTSE)>0},IsFHK:function(t){return!!t&&t.indexOf(this.FHK)>0},IsBIT:function(t){return!!t&&(t.indexOf(this.BIT)>0||t.indexOf(this.BIZ)>0)},IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return!!t&&(t.indexOf(this.SHFE)>0||t.indexOf(this.SHFE2)>0)},IsCFFEX:function(t){return t.indexOf(this.CFFEX)>0},IsDCE:function(t){return t.indexOf(this.DCE)>0},IsCZCE:function(t){return t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e)&&"0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(1))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}return!1},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase(),a=new Date,i=a.getDay(),n=100*a.getHours()+a.getMinutes();if(this.IsUSA(e)){var r=function(t){if("number"!=typeof t)return;var e=new Date,a=e.getTime(),i=6e4*e.getTimezoneOffset();return new Date(a+i+36e5*t)}(-4);i=r.getDay(),n=100*r.getHours()+r.getMinutes();return 6==i||0==i?0:n>1730?3:n<930?1:2}return this.IsBIT(e)?2:this.IsFTSE(e)?6==i||0==i?0:n>=830&&n<=2359?2:n>=0&&n<=500?2:0:this.IsFHK(e)?6==i||0==i?0:n>=900&&n<=2359?2:n>=0&&n<=320?2:0:6==i||0==i?0:n>1540?3:n<925?1:2},GetLimitPriceRange:function(t,e){return this.IsSHSZStockA(t)?this.IsSHStockSTAR(t)?{Max:.2,Min:-.2}:e?e.indexOf("ST")>=0?{Max:.05,Min:-.05}:{Max:.1,Min:-.1}:null:null},GetFHKDecimal:function(t){return 0},GetFTSEDecimal:function(t){return 0},GetBITDecimal:function(t){return 2}};var Re=new function(){this.SHSZ=null,this.HK=null,this.Futures=new Map,this.USA=null,this.FTSE=null,this.FHK=null,this.Initialize=function(){},this.GetSHSZ=function(){return this.SHSZ||(this.SHSZ=this.CreateSHSZData()),this.SHSZ},this.GetHK=function(){return this.HK||(this.HK=this.CreateHKData()),this.HK},this.GetFutures=function(t){if(!this.Futures.has(t.Name)){var e=this.CreateTimeData(t.Data);this.Futures.set(t.Name,e)}return this.Futures.get(t.Name)},this.GetUSA=function(){return this.USA||(this.USA=this.CreateUSAData(0)),this.USA},this.GetFTSE=function(){return this.FTSE||(this.FTSE=this.CreateFTSEData()),this.FTSE},this.GetFHK=function(){return this.FHK||(this.FHK=this.CreateFHKData()),this.FHK},this.CreateSHSZData=function(){return this.CreateTimeData([{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}])},this.CreateHKData=function(){return this.CreateTimeData([{Start:930,End:1200},{Start:1300,End:1600}])},this.CreateFTSEData=function(){return this.CreateTimeData([{Start:1700,End:2359},{Start:0,End:445},{Start:900,End:1630}])},this.CreateFHKData=function(){return this.CreateTimeData([{Start:1715,End:2359},{Start:0,End:300},{Start:915,End:1200},{Start:1300,End:1630}])},this.CreateUSAData=function(t){if(1==t){const t=[{Start:2130,End:2359},{Start:0,End:400}];return this.CreateTimeData(t)}if(2==t){const t=[{Start:2230,End:2359},{Start:0,End:500}];return this.CreateTimeData(t)}{const t=[{Start:930,End:1600}];return this.CreateTimeData(t)}},this.CreateTimeData=function(t){var e=[];for(var a in t)for(var i=t[a],n=i.Start;n<=i.End;++n)n%100>=60||e.push(n);return e},this.GetTimeData=function(t){if(!t)return this.SHSZ;var e=t.toLocaleUpperCase();if(we.IsSH(e)||we.IsSZ(e))return this.GetSHSZ();if(we.IsHK(e))return this.GetHK();if(we.IsUSA(e))return this.GetUSA(!0);if(we.IsCFFEX(e)||we.IsCZCE(e)||we.IsDCE(e)||we.IsSHFE(e)){var a=be.GetSplitData(e);return a?this.GetFutures(a):null}return we.IsFTSE(e)?this.GetFTSE():we.IsFHK(e)?this.GetFHK():void 0}},Pe=new function(){const t={Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[122,1,"RGB(200,200,200)","13:00"],[152,0,"RGB(200,200,200)","13:30"],[182,0,"RGB(200,200,200)","14:00"],[212,0,"RGB(200,200,200)","14:30"],[242,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[122,1,"RGB(200,200,200)","13:00"],[182,0,"RGB(200,200,200)","14:00"],[242,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[122,1,"RGB(200,200,200)","13:00"],[242,1,"RGB(200,200,200)","15:00"]],Count:243,MiddleCount:122,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},e={Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:332,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},a={Full:[[0,0,"rgb(200,200,200)","9:30"],[30,0,"RGB(200,200,200)","10:00"],[90,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","14:00"],[330,0,"RGB(200,200,200)","15:00"],[390,0,"RGB(200,200,200)","16:00"]],Simple:[[30,0,"rgb(200,200,200)","10:00"],[150,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","14:00"],[390,0,"RGB(200,200,200)","16:00"]],Min:[[30,0,"rgb(200,200,200)","10:00"],[210,1,"RGB(200,200,200)","13:00"],[390,0,"RGB(200,200,200)","16:00"]],Count:391,MiddleCount:211,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},i={Full:[[0,1,"RGB(200,200,200)","17:00"],[120,1,"RGB(200,200,200)","19:00"],[240,1,"RGB(200,200,200)","21:00"],[360,1,"RGB(200,200,200)","23:00"],[480,1,"RGB(200,200,200)","01:00"],[600,1,"RGB(200,200,200)","03:00"],[706,1,"RGB(200,200,200)","09:00"],[826,1,"RGB(200,200,200)","11:00"],[946,1,"RGB(200,200,200)","13:00"],[1066,1,"RGB(200,200,200)","15:00"],[1156,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:00"],[240,1,"RGB(200,200,200)","21:00"],[480,1,"RGB(200,200,200)","01:00"],[706,1,"RGB(200,200,200)","09:00"],[946,1,"RGB(200,200,200)","13:00"],[1156,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:00"],[706,1,"RGB(200,200,200)","09:00"],[1156,1,"RGB(200,200,200)","16:30"]],Count:1157,MiddleCount:707,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},n={Full:[[0,1,"RGB(200,200,200)","17:15"],[105,1,"RGB(200,200,200)","19:00"],[225,1,"RGB(200,200,200)","21:00"],[345,1,"RGB(200,200,200)","23:00"],[586,0,"RGB(200,200,200)","09:15"],[691,1,"RGB(200,200,200)","11:00"],[812,1,"RGB(200,200,200)","14:00"],[963,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:15"],[225,1,"RGB(200,200,200)","21:00"],[586,0,"RGB(200,200,200)","09:15"],[752,1,"RGB(200,200,200)","13:00"],[963,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:15"],[586,0,"RGB(200,200,200)","09:15"],[963,1,"RGB(200,200,200)","16:30"]],Count:963,MiddleCount:526,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}};this.GetCoordinateData=function(a,i){var n=null;if(a){var r=a.toLocaleUpperCase();if(we.IsSH(r)||we.IsSZ(r)||we.IsSHSZIndex(r))n=this.GetSHSZData(r,i);else if(we.IsHK(r))n=e;else{if(we.IsCFFEX(r)||we.IsCZCE(r)||we.IsDCE(r)||we.IsSHFE(r))return this.GetFuturesData(r,i);we.IsUSA(r)?n=this.GetUSAData(r,i):we.IsFTSE(r,i)?n=this.GetFTSEData(r,i):we.IsFHK(r,i)&&(n=this.GetFHKData(r,i))}}else n=t;return{Count:n.Count,MiddleCount:n.MiddleCount,Data:n.GetData(i)}},this.GetSHSZData=function(e,a){return t},this.GetUSAData=function(t,e){return a},this.GetFuturesData=function(t,e){var a=be.GetSplitData(t);if(!a)return null;var i=Re.GetFutures(a);if(!i)return null;var n={Count:i.length},r=null;r=e<200?a.Coordinate.Min:e<480?a.Coordinate.Simple:a.Coordinate.Full;for(var s=[],o=0;o<i.length;++o)for(var h=i[o],l=0;l<r.length;++l){var u=r[l];if(h==u.Value){var c=[o,0,"RGB(200,200,200)",u.Text];s.push(c);break}}return n.Data=s,n},this.GetFTSEData=function(t,e){return i},this.GetFHKData=function(){return n}},be=new function(){const t=[{Name:"9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:900,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"9:15-11:30,13:00-15:15",Data:[{Start:915,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:30-11:30,13:00-15:00",Data:[{Start:930,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2330},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-1:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-2:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}}],e=new Map([[we.DCE+"-JD",{Time:0,Decimal:0}],[we.DCE+"-FB",{Time:0,Decimal:2}],[we.DCE+"-BB",{Time:0,Decimal:2}],[we.DCE+"-PP",{Time:0,Decimal:0}],[we.DCE+"-JM",{Time:3,Decimal:1}],[we.SHFE+"-CU",{Time:4,Decimal:0}],[we.SHFE+"-AL",{Time:4,Decimal:0}],[we.SHFE+"-NI",{Time:4,Decimal:0}],[we.SHFE+"-SN",{Time:4,Decimal:0}],[we.SHFE+"-ZN",{Time:4,Decimal:0}],[we.SHFE+"-PB",{Time:4,Decimal:0}],[we.SHFE+"-RU",{Time:6,Decimal:0}],[we.SHFE+"-FU",{Time:6,Decimal:0}],[we.SHFE+"-RB",{Time:6,Decimal:0}],[we.SHFE+"-BU",{Time:6,Decimal:0}],[we.SHFE+"-HC",{Time:6,Decimal:0}],[we.SHFE+"-WR",{Time:0,Decimal:0}],[we.SHFE+"-AG",{Time:5,Decimal:0}],[we.SHFE+"-AU",{Time:5,Decimal:2}],[we.SHFE+"-NR",{Time:5,Decimal:1}],[we.SHFE+"-SC",{Time:5,Decimal:1}],[we.CZCE+"-CF",{Time:3,Decimal:0}],[we.CZCE+"-SR",{Time:3,Decimal:0}],[we.CZCE+"-MA",{Time:3,Decimal:0}],[we.CZCE+"-ZC",{Time:3,Decimal:1}],[we.CZCE+"-TA",{Time:3,Decimal:0}],[we.CZCE+"-RM",{Time:3,Decimal:0}],[we.CZCE+"-OI",{Time:3,Decimal:0}],[we.CZCE+"-ME",{Time:3,Decimal:0}],[we.CZCE+"-FG",{Time:3,Decimal:0}],[we.CZCE+"-WS",{Time:0,Decimal:0}],[we.CZCE+"-WT",{Time:0,Decimal:0}],[we.CZCE+"-GN",{Time:0,Decimal:0}],[we.CZCE+"-RO",{Time:0,Decimal:0}],[we.CZCE+"-RS",{Time:0,Decimal:0}],[we.CZCE+"-ER",{Time:0,Decimal:0}],[we.CZCE+"-RI",{Time:0,Decimal:0}],[we.CZCE+"-WH",{Time:0,Decimal:0}],[we.CZCE+"-AP",{Time:0,Decimal:0}],[we.CZCE+"-PM",{Time:0,Decimal:0}],[we.CZCE+"-QM",{Time:0,Decimal:0}],[we.CZCE+"-TC",{Time:0,Decimal:0}],[we.CZCE+"-JR",{Time:0,Decimal:0}],[we.CZCE+"-LR",{Time:0,Decimal:0}],[we.CZCE+"-SF",{Time:0,Decimal:0}],[we.CZCE+"-SM",{Time:0,Decimal:0}],[we.CFFEX+"-TF",{Time:1,Decimal:3}],[we.CFFEX+"-TS",{Time:1,Decimal:3}],[we.CFFEX+"-IH",{Time:2,Decimal:1}],[we.CFFEX+"-IC",{Time:2,Decimal:1}],[we.CFFEX+"-IF",{Time:2,Decimal:1}]]),a=new Map([[we.DCE+"-C",{Time:0,Decimal:0}],[we.DCE+"-L",{Time:0,Decimal:0}],[we.DCE+"-V",{Time:0,Decimal:0}],[we.DCE+"-A",{Time:3,Decimal:0}],[we.DCE+"-B",{Time:3,Decimal:0}],[we.DCE+"-M",{Time:3,Decimal:0}],[we.DCE+"-Y",{Time:3,Decimal:0}],[we.DCE+"-P",{Time:3,Decimal:0}],[we.DCE+"-J",{Time:3,Decimal:1}],[we.DCE+"-I",{Time:3,Decimal:1}],[we.CFFEX+"-T",{Time:1,Decimal:3}]]);this.GetData=function(t){var i=t.charAt(0),n=t.substr(0,2),r=null,s=null;return we.IsDCE(t)?(r=we.DCE+"-"+i,s=we.DCE+"-"+n):we.IsSHFE(t)?(r=we.SHFE+"-"+i,s=we.SHFE+"-"+n):we.IsCFFEX(t)?(r=we.CFFEX+"-"+i,s=we.CFFEX+"-"+n):we.IsCZCE(t)&&(r=we.CZCE+"-"+i,s=we.CZCE+"-"+n),e.has(s)?e.get(s):a.has(r)?a.get(r):null},this.GetSplitData=function(e){var a=this.GetData(e);return a?t[a.Time]:null},this.GetDecimal=function(t){var e=this.GetData(t);return e?e.Decimal:2}};function Be(t){var e=2;if(!t)return e;var a=t.toUpperCase();return we.IsSHSZFund(a)?e=3:we.IsChinaFutures(a)?e=be.GetDecimal(a):we.IsFHK(a)?e=we.GetFHKDecimal(a):we.IsFTSE(a)?e=we.GetFTSEDecimal(a):we.IsBIT(a)&&(e=we.GetBITDecimal(a)),e}var _e={Domain:"https://opensource.zealink.com",CacheDomain:"https://opensourcecache.zealink.com",DrawIcon:{Family:"iconfont",Data:new Map([[1,{Text:"",Color:"rgb(255,106,106)"}],[2,{Text:"",Color:"rgb(46,139,87)"}],[11,{Text:"",Color:"rgb(245,159,40)"}],[12,{Text:"",Color:"rgb(245,159,40)"}],[13,{Text:"",Color:"rgb(209,37,35)"}],[14,{Text:"",Color:"rgb(127,209,59)"}],[9,{Text:"",Color:"rgb(245,159,40)"}],[36,{Text:"",Color:"rgb(255,106,106)"}],[37,{Text:"",Color:"rgb(46,139,87)"}],[38,{Text:"",Color:"rgb(238,44,44)"}],[39,{Text:"",Color:"rgb(0,139,69)"}],[46,{Text:"",Color:"rgb(51,51,51)"}]])},CustomDrawIcon:{Data:new Map},CustomFunction:{Data:new Map},CustomVariant:{Data:new Map},GetDrawIcon:function(t){if(_e.CustomDrawIcon.Data.has(t)){const e=_e.CustomDrawIcon.Data.get(t);return{Symbol:e.Text,Color:e.Color,Family:e.Family,IconFont:!0,ID:t}}if(_e.DrawIcon.Data.has(t)){const e=_e.DrawIcon.Data.get(t);return{Symbol:e.Text,Color:e.Color,Family:_e.DrawIcon.Family,IconFont:!0,ID:t}}return null},IsCustomFunction:function(t){return!!_e.CustomFunction.Data.has(t)},IsCustomVariant:function(t){return!!_e.CustomVariant.Data.has(t)}},He={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"},ke={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Ve={FromCodePoint:function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))},IsWhiteSpace:function(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0},IsLineTerminator:function(t){return 10===t||13===t||8232===t||8233===t},IsIdentifierStart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&ke.NonAsciiIdentifierStart.test(Ve.FromCodePoint(t))},IsIdentifierPart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&ke.NonAsciiIdentifierPart.test(Ve.FromCodePoint(t))},IsDecimalDigit:function(t){return t>=48&&t<=57},IsHexDigit:function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},isOctalDigit:function(t){return t>=48&&t<=55}},Ge={};function Ye(){this.Error=[],this.RecordError=function(t){this.Error.push(t)},this.ConstructError=function(t,e){let a=new Error(t);try{throw a}catch(t){Object.create&&Object.defineProperties&&((a=Object.create(t)).Column=e)}return a},this.CreateError=function(t,e,a,i){let n="Line "+e+": "+i,r=this.ConstructError(n,a);return r.Index=t,r.LineNumber=e,r.Description=i,r},this.ThrowError=function(t,e,a,i){throw this.CreateError(t,e,a,i)},this.ThrowDownloadJob=function(t,e,a,i,n){let r=this.CreateError(t,e,a,i);throw r.Job=n,r}}function Ue(t,e){this.Source=t,this.ErrorHandler=e,this.Length=t.length,this.Index=0,this.LineNumber=t.length>0?1:0,this.LineStart=0,this.CurlyStack=[],this.SaveState=function(){return{Index:this.Index,LineNumber:this.LineNumber,LineStart:this.LineStart}},this.RestoreState=function(t){this.Index=t.Index,this.LineNumber=t.LineNumber,this.LineStart=t.LineStart},this.IsEOF=function(){return this.Index>=this.Length},this.IsKeyword=function(t){return!1},this.CodePointAt=function(t){let e=this.Source.charCodeAt(t);if(e>=55296&&e<=56319){let a=this.Source.charCodeAt(t+1);if(a>=56320&&a<=57343)e=1024*(e-55296)+a-56320+65536}return e},this.Lex=function(){if(this.IsEOF())return{Type:2,Value:"",LineNumber:this.LineNumber,LineStart:this.LineStart,Start:this.Index,End:this.Index};let t=this.Source.charCodeAt(this.Index);return Ve.IsIdentifierStart(t)?this.ScanIdentifier():40===t||41===t||59===t?this.ScanPunctuator():39===t||34===t?this.ScanStringLiteral():46==t?Ve.IsDecimalDigit(this.Source.charCodeAt(this.Index+1))?this.ScanNumericLiteral():this.ScanPunctuator():Ve.IsDecimalDigit(t)?this.ScanNumericLiteral():t>=55296&&t<57343&&Ve.IsIdentifierStart(this.CodePointAt(this.Index))?this.ScanIdentifier():this.ScanPunctuator()},this.ScanIdentifier=function(){let t,e=this.Index,a=92===this.Source.charCodeAt(e)?this.GetComplexIdentifier():this.GetIdentifier();if(3!=(t=a.length?3:this.IsKeyword(a)?4:null==a?5:"true"==a||"false"==a?1:3)&&e+a.length!=this.Index){this.Index;throw this.Index=e,He.InvalidEscapedReservedWord}return"AND"!=a&&"OR"!=a||(t=7),{Type:t,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:e,End:this.Index}},this.GetIdentifier=function(){let t=this.Index++;for(;!this.IsEOF();){let e=this.Source.charCodeAt(this.Index);if(92==e)return this.Index=t,this.GetComplexIdentifier();if(e>=55296&&e<57343)return this.Index=t,this.GetComplexIdentifier();if(!Ve.IsIdentifierPart(e))break;++this.Index}return this.Source.slice(t,this.Index)},this.ScanPunctuator=function(){let t=this.Index,e=this.Source[this.Index];switch(e){case"(":++this.Index;break;case")":case";":case",":++this.Index;break;default:"AND"==(e=this.Source.substr(this.Index,3))?this.Index+=3:"&&"===(e=this.Source.substr(this.Index,2))||"||"===e||"=="===e||"!="===e||"<="===e||">="===e||"=>"===e||":="==e||"OR"==e||"<>"==e?this.Index+=2:(e=this.Source[this.Index],"<>=!+-*%&|^/:".indexOf(e)>=0&&++this.Index)}return this.Index==t&&this.ThrowUnecpectedToken(),{Type:7,Value:e,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanStringLiteral=function(){let t=this.Index,e=this.Source[this.Index];++this.Index;let a="";for(;!this.IsEOF();){let t=this.Source[this.Index++];if(t==e){e="";break}if("\\"==t)throw"not complete";if(Ve.IsLineTerminator(t.charCodeAt(0)))break;a+=t}return""!=e&&(this.Index=t,this.ThrowUnecpectedToken()),{Type:8,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanNumericLiteral=function(){let t=this.Index,e=this.Source[this.Index],a="";if("."!=e){if(a=this.Source[this.Index++],e=this.Source[this.Index],"0"==a&&("x"==e||"X"==e))return++this.Index,this.ScanHexLiteral(t);for(;Ve.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("."==e){for(a+=this.Source[this.Index++];Ve.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("e"==e||"E"==e)if(a+=this.Source[this.Index++],"+"!=(e=this.Source[this.Index])&&"-"!=e||(a+=this.Source[this.Index]),Ve.IsDecimalDigit(this.Source.charCodeAt(this.Index)))for(;Ve.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];else this.ThrowUnecpectedToken();return Ve.IsIdentifierStart(this.Source.charCodeAt(this.Index))&&this.ThrowUnecpectedToken(),{Type:6,Value:parseFloat(a),LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanComments=function(){let t=0==this.Index;for(;!this.IsEOF();){let e=this.Source.charCodeAt(this.Index);if(Ve.IsWhiteSpace(e))++this.Index;else if(Ve.IsLineTerminator(e))++this.Index,13==e&&10==this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,t=!0;else if(47==e){if(47!=(e=this.Source.charCodeAt(this.Index+1)))break;this.Index+=2;this.SkipSingleLineComment(2);t=!0}else{if(123!=e)break;this.Index+=1;this.SkipMultiLineComment()}}},this.SkipMultiLineComment=function(){for(var t=[];!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(Ve.IsLineTerminator(e))++this.LineNumber,++this.Index,this.LineStart=this.Index;else{if(125==e)return this.Index+=1,t;++this.Index}}return t},this.SkipSingleLineComment=function(t){let e=[];for(;!this.IsEOF();){let t=this.Source.charCodeAt(this.Index);if(++this.Index,Ve.IsLineTerminator(t))return 13===t&&10===this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,e}return e},this.ThrowUnecpectedToken=function(t){return t||(t=He.UnexpectedTokenIllegal),this.ErrorHandler.ThrowError(this.Index,this.LineNumber,this.Index-this.LineStart+1,t)}}Ge[1]="Boolean",Ge[2]="<end>",Ge[3]="Identifier",Ge[4]="Keyword",Ge[5]="Null",Ge[6]="Numeric",Ge[7]="Punctuator",Ge[8]="String",Ge[9]="RegularExpression",Ge[10]="Template";var We={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function Xe(t){this.ErrorHandler=new Ye,this.Scanner=new Ue(t,this.ErrorHandler),this.Node=new function(){this.IsNeedIndexData=!1,this.IsNeedLatestData=!1,this.IsNeedSymbolData=!1,this.IsNeedFinanceData=new Set,this.IsNeedMarginData=new Set,this.IsNeedNewsAnalysisData=new Set,this.IsNeedBlockIncreaseData=new Set,this.IsNeedSymbolExData=new Set,this.IsNeedHK2SHSZData=new Set,this.IsNeedSectionFinance=new Map,this.IsCustomFunction=[],this.IsCustomVariant=[],this.GetDataJobList=function(){let t=[];for(var e of(this.IsNeedSymbolData&&t.push({ID:$e.JOB_DOWNLOAD_SYMBOL_DATA}),this.IsNeedIndexData&&t.push({ID:$e.JOB_DOWNLOAD_INDEX_DATA}),this.IsNeedLatestData&&t.push({ID:$e.JOB_DOWNLOAD_SYMBOL_LATEST_DATA}),this.IsNeedBlockIncreaseData))t.push({ID:$e.JOB_DOWNLOAD_INDEX_INCREASE_DATA,Symbol:e});for(var a of this.IsNeedFinanceData)a==$e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA&&t.push({ID:$e.JOB_DOWNLOAD_MARKETVALUE_DATA}),t.push({ID:a});for(var a of this.IsNeedMarginData)t.push({ID:a});for(var a of this.IsNeedHK2SHSZData)t.push({ID:a});for(var a of this.IsNeedNewsAnalysisData)t.push({ID:a});for(var a of this.IsNeedSymbolExData)t.push({ID:a});for(var i of this.IsNeedSectionFinance)t.push({ID:$e.JOB_DOWNLOAD_SECTION_SF,SF:i});for(var n in this.IsCustomVariant)i=this.IsCustomVariant[n],t.push({ID:i.ID,Name:i.Name});for(var n in this.IsCustomFunction)i=this.IsCustomFunction[n],t.push({ID:i.ID,Name:i.Name,Args:i.Args});return t},this.VerifySymbolVariable=function(t){if(new Set(["INDEXA","INDEXC","INDEXH","INDEXL","INDEXO","INDEXV","INDEXDEC","INDEXADV"]).has(t))this.IsNeedIndexData=!0;else if(new Set(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT"]).has(t))this.IsNeedSymbolData=!0;else if("VOLR"===t&&(this.IsNeedSymbolExData.has($e.JOB_DOWNLOAD_VOLR_DATA)||this.IsNeedSymbolExData.add($e.JOB_DOWNLOAD_VOLR_DATA)),"HYBLOCK"!=t&&"DYBLOCK"!=t&&"GNBLOCK"!=t||this.IsNeedSymbolExData.has($e.JOB_DOWNLOAD_GROUP_DATA)||this.IsNeedSymbolExData.add($e.JOB_DOWNLOAD_GROUP_DATA),"CAPITAL"===t&&(this.IsNeedFinanceData.has($e.JOB_DOWNLOAD_CAPITAL_DATA)||this.IsNeedFinanceData.add($e.JOB_DOWNLOAD_CAPITAL_DATA)),"EXCHANGE"===t&&(this.IsNeedFinanceData.has($e.JOB_DOWNLOAD_EXCHANGE_DATA)||this.IsNeedFinanceData.add($e.JOB_DOWNLOAD_EXCHANGE_DATA)),_e.IsCustomVariant(t)){var e={Name:t,ID:$e.JOB_CUSTOM_VARIANT_DATA};this.IsCustomVariant.push(e)}},this.VerifySymbolFunction=function(t,e){if("DYNAINFO"!=t.Name)if("FINANCE"!=t.Name)if("MARGIN"!==t.Name)if("NEWS"!==t.Name)if("HK2SHSZ"!==t.Name)if("COST"!=t.Name&&"WINNER"!=t.Name)if("BETA"!==t.Name)if("UPCOUNT"!=t.Name&&"DOWNCOUNT"!=t.Name)if("SF"!=t.Name){if(_e.IsCustomFunction(t.Name)){var a={Name:t.Name,ID:$e.JOB_CUSTOM_FUNCTION_DATA,Args:e};this.IsCustomFunction.push(a)}}else{let t=$e.GetSectionReportPeriod(e[0].Value,e[1].Value);if(!t)return;let a=$e.GetSectionFinanceID(e[2].Value);if(!a)return;var i=t.Year+"-"+t.Quarter;if(this.IsNeedSectionFinance.has(i))(n=this.IsNeedSectionFinance.get(i)).Fields.has(a)||n.Fields.add(a);else{var n={Period:t,Fields:new Set([a])};this.IsNeedSectionFinance.set(i,n)}}else{var r=e[0].Value;this.IsNeedBlockIncreaseData.has(r)||this.IsNeedBlockIncreaseData.add(r)}else this.IsNeedIndexData=!0;else this.IsNeedFinanceData.has($e.JOB_DOWNLOAD_EXCHANGE_DATA)||this.IsNeedFinanceData.add($e.JOB_DOWNLOAD_EXCHANGE_DATA);else{let t=$e.GetHK2SHSZJobID(e[0].Value);t&&!this.IsNeedHK2SHSZData.has(t)&&this.IsNeedHK2SHSZData.add(t)}else{let t=$e.GetNewsAnalysisID(e[0].Value);t&&!this.IsNeedNewsAnalysisData.has(t)&&this.IsNeedNewsAnalysisData.add(t)}else{let t=$e.GetMarginJobID(e[0].Value);t&&!this.IsNeedMarginData.has(t)&&this.IsNeedMarginData.add(t)}else{let t=$e.GetFinnanceJobID(e[0].Value);t&&!this.IsNeedFinanceData.has(t)&&this.IsNeedFinanceData.add(t)}else this.IsNeedLatestData=!0},this.ExpressionStatement=function(t){return{Type:We.ExpressionStatement,Expression:t}},this.Script=function(t){return{Type:We.Program,Body:t,SourceType:""}},this.SequenceExpression=function(t){return{Type:We.SequenceExpression,Expression:t}},this.BinaryExpression=function(t,e,a){return{Type:"||"===t||"&&"===t||"AND"==t||"OR"==t?We.LogicalExpression:We.BinaryExpression,Operator:t,Left:e,Right:a}},this.Literal=function(t,e){return{Type:We.Literal,Value:t,Raw:e}},this.Identifier=function(t){return this.VerifySymbolVariable(t),{Type:We.Identifier,Name:t}},this.AssignmentExpression=function(t,e,a){return{Type:We.AssignmentExpression,Operator:t,Left:e,Right:a}},this.UnaryExpression=function(t,e){return{Type:We.UnaryExpression,Operator:t,Argument:e,Prefix:!0}},this.EmptyStatement=function(){return{Type:We.EmptyStatement}},this.CallExpression=function(t,e){return this.VerifySymbolFunction(t,e),{Type:We.CallExpression,Callee:t,Arguments:e}}},this.LookAhead={Type:2,Value:"",LineNumber:this.Scanner.LineNumber,LineStart:0,Start:0,End:0},this.HasLineTerminator=!1,this.Context={IsModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,FirstCoverInitializedNameError:null,IsAssignmentTarget:!1,IsBindingElement:!1,InFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},Strict:!1},this.PeratorPrecedence={")":0,";":0,",":0,"]":0,"||":1,OR:1,"&&":2,AND:2,"|":3,"^":4,"&":5,"==":6,"=":6,"!=":6,"<>":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.StartMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.LastMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.Initialize=function(){this.NextToken(),this.LastMarker={Index:this.Scanner.Index,Line:this.Scanner.LineNumber,Column:this.Scanner.Index-this.Scanner.LineStart}},this.CreateNode=function(){return{Index:this.StartMarker.Index,Line:this.StartMarker.Line,Column:this.StartMarker.Column}},this.StartNode=function(t,e){void 0==e&&(e=0);let a=t.Start-t.LineStart,i=t.LineNumber;return a<0&&(a+=e,i--),{Index:t.Start,Line:i,Column:a}},this.Match=function(t){return 7==this.LookAhead.Type&&this.LookAhead.Value==t},this.Expect=function(t){let e=this.NextToken();7==e.Type&&e.Value==t||this.ThrowUnexpectedToken(e)},this.MatchAssign=function(){if(7!=this.LookAhead.Type)return!1;let t=this.LookAhead.Value;return":"==t||":="==t},this.GetTokenRaw=function(t){return this.Scanner.Source.slice(t.Start,t.End)},this.NextToken=function(){let t=this.LookAhead;this.LastMarker.Index=this.Scanner.Index,this.LastMarker.Line=this.Scanner.LineNumber,this.LastMarker.Column=this.Scanner.Index-this.Scanner.LineStart,this.CollectComments(),this.Scanner.Index!==this.StartMarker.Index&&(this.StartMarker.Index=this.Scanner.Index,this.StartMarker.Line=this.Scanner.LineNumber,this.StartMarker.Column=this.Scanner.Index-this.Scanner.LineStart);let e=this.Scanner.Lex();return this.HasLineTerminator=t.LineNumber!=e.LineNumber,e&&this.Context.Strict&&e.Type,this.LookAhead=e,t},this.CollectComments=function(){this.Scanner.ScanComments()},this.ParseScript=function(){let t=this.CreateNode(),e=this.ParseDirectivePrologues();for(;2!=this.LookAhead.Type;)e.push(this.ParseStatementListItem());return this.Finalize(t,this.Node.Script(e))},this.ParseDirective=function(){this.LookAhead,this.CreateNode(),this.ParseExpression()},this.ParseDirectivePrologues=function(){let t=[];for(;;){if(8!=this.LookAhead.Type)break;let e=this.ParseDirective();t.push(e)}return t},this.ParseStatementListItem=function(){let t;return this.Context.IsAssignmentTarget=!0,this.Context.IsBindingElement=!0,4==this.LookAhead.Type||(t=this.ParseStatement()),t},this.ParseStatement=function(){let t;switch(this.LookAhead.Type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.ParseExpressionStatement();break;case 7:let e=this.LookAhead.Value;t="("===e?this.ParseExpressionStatement():";"===e?this.ParseEmptyStatement():this.ParseExpressionStatement();break;case 3:t=this.ParseLabelledStatement();break;case 4:break;default:t="error"}return t},this.ParseEmptyStatement=function(){let t=this.CreateNode();return this.Expect(";"),this.Finalize(t,this.Node.EmptyStatement())},this.ParseLabelledStatement=function(){let t=this.CreateNode(),e=this.ParseExpression();this.ConsumeSemicolon();let a=new this.Node.ExpressionStatement(e);return this.Finalize(t,a)},this.ParseExpression=function(){let t=this.LookAhead,e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(this.Match(",")){let a=[];for(a.push(e);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),a.push(this.IsolateCoverGrammar(this.ParseAssignmentExpression));e=this.Finalize(this.StartNode(t),this.Node.SequenceExpression(a))}return e},this.ParseAssignmentExpression=function(){let t,e=this.LookAhead,a=e;if(t=this.ParseConditionalExpression(),this.MatchAssign()){if(!this.Context.IsAssignmentTarget){let e=t.Marker;this.ThrowUnexpectedError(e.Index,e.Line,e.Column,He.InvalidLHSInAssignment)}this.Match("=")||this.Match(":")?this.ReinterpretExpressionAsPattern(t):(this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1);let i=(a=this.NextToken()).Value,n=this.IsolateCoverGrammar(this.ParseAssignmentExpression);t=this.Finalize(this.StartNode(e),this.Node.AssignmentExpression(i,t,n)),this.Context.FirstCoverInitializedNameError=null}return t},this.ParseConditionalExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseBinaryExpression)},this.ParseBinaryExpression=function(){let t=this.LookAhead,e=this.InheritCoverGrammar(this.ParseExponentiationExpression),a=this.LookAhead;var i=this.BinaryPrecedence(a);if(i>0){this.NextToken(),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1;let n=[t,this.LookAhead],r=e,s=this.IsolateCoverGrammar(this.ParseExponentiationExpression),o=[r,a.Value,s],h=[i];for(;!((i=this.BinaryPrecedence(this.LookAhead))<=0);){for(;o.length>2&&i<=h[h.length-1];){s=o.pop();let t=o.pop();h.pop(),r=o.pop(),n.pop();let e=this.StartNode(n[n.length-1]);o.push(this.Finalize(e,this.Node.BinaryExpression(t,r,s)))}o.push(this.NextToken().Value),h.push(i),n.push(this.LookAhead),o.push(this.IsolateCoverGrammar(this.ParseExponentiationExpression))}let l=o.length-1;e=o[l];let u=n.pop();for(;l>1;){let t=n.pop(),a=u&&u.LineStart,i=this.StartNode(t,a),r=o[l-1];e=this.Finalize(i,this.Node.BinaryExpression(r,o[l-2],e)),l-=2,u=t}}return e},this.ParseExponentiationExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseUnaryExpression)},this.ParseUnaryExpression=function(){let t;if(this.Match("+")||this.Match("-")){let e=this.StartNode(this.LookAhead),a=this.NextToken();t=this.InheritCoverGrammar(this.ParseUnaryExpression),t=this.Finalize(e,this.Node.UnaryExpression(a.Value,t)),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1}else t=this.ParseUpdateExpression();return t},this.ParseUpdateExpression=function(){let t;this.LookAhead;return t=this.InheritCoverGrammar(this.ParseLeftHandSideExpressionAllowCall)},this.ParseLeftHandSideExpressionAllowCall=function(){let t,e=this.LookAhead;for(t=this.InheritCoverGrammar(this.ParsePrimaryExpression);this.Match("(");){this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!1;var a=this.ParseArguments();t=this.Finalize(this.StartNode(e),this.Node.CallExpression(t,a))}return t},this.ParseArguments=function(){this.Expect("(");var t=[];if(!this.Match(")"))for(;;){let e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(t.push(e),this.Match(")"))break;if(this.ExpectCommaSeparator(),this.Match(")"))break}return this.Expect(")"),t},this.ExpectCommaSeparator=function(){this.Expect(",")},this.ParsePrimaryExpression=function(){let t,e=this.CreateNode();var a,i;switch(this.LookAhead.Type){case 3:t=this.Finalize(e,this.Node.Identifier(this.NextToken().Value));break;case 6:case 8:this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1,a=this.NextToken(),i=this.GetTokenRaw(a),t=this.Finalize(e,this.Node.Literal(a.Value,i));break;case 7:switch(this.LookAhead.Value){case"(":this.Context.IsBindingElement=!1,t=this.InheritCoverGrammar(this.ParseGroupExpression);break;default:t=this.ThrowUnexpectedToken(this.NextToken())}break;default:t=this.ThrowUnexpectedToken(this.NextToken())}return t},this.ParseGroupExpression=function(){let t;if(this.Expect("("),this.Match(")"))this.NextToken();else{this.LookAhead;let e=!1;if(this.Context.IsBindingElement=!0,t=this.InheritCoverGrammar(this.ParseAssignmentExpression),this.Match(",")){let e=[];for(this.Context.IsAssignmentTarget=!1,e.push(t);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),this.Match(")")}e||(this.Expect(")"),this.Context.IsBindingElement=!1)}return t},this.ParseExpressionStatement=function(){let t=this.CreateNode(),e=this.ParseExpression();return this.ConsumeSemicolon(),this.Finalize(t,this.Node.ExpressionStatement(e))},this.ConsumeSemicolon=function(){this.Match(";")?this.NextToken():this.HasLineTerminator||(this.LastMarker.Index=this.StartMarker.Index,this.LastMarker.Line=this.StartMarker.Line,this.LastMarker.Column=this.StartMarker.Column)},this.ReinterpretExpressionAsPattern=function(t){switch(t.Type){case We.Identifier:case We.AssignmentExpression:}},this.Finalize=function(t,e){return e.Marker={Line:t.Line,Column:t.Column,Index:t.Index},e},this.BinaryPrecedence=function(t){let e,a=t.Value;return e=7===t.Type&&this.PeratorPrecedence[a]||0},this.IsolateCoverGrammar=function(t){let e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;let n=t.call(this);return this.Context.FirstCoverInitializedNameError,this.Context.IsBindingElement=e,this.Context.IsAssignmentTarget=a,this.Context.FirstCoverInitializedNameError=i,n},this.InheritCoverGrammar=function(t){let e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;let n=t.call(this);return this.Context.IsBindingElement=this.Context.IsBindingElement&&e,this.Context.IsAssignmentTarget=this.Context.IsAssignmentTarget&&a,this.Context.FirstCoverInitializedNameError=i||this.Context.FirstCoverInitializedNameError,n},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.ThrowUnexpectedError=function(t,e,a,i){let n=i||"";return this.ErrorHandler.ThrowError(t,e,a,n)},this.UnexpectedTokenError=function(t,e){let a=e||He.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){let e=t.Start,i=t.LineNumber,n=this.LastMarker.Index-this.LastMarker.Column,r=t.Start-n+1;return this.ErrorHandler.CreateError(e,i,r,a)}{let t=this.LastMarker.Index,e=this.LastMarker.Line,i=this.LastMarker.Column+1;return this.ErrorHandler.CreateError(t,e,i,a)}}}function Je(t,e){this.ErrorHandler=t,this.SymbolData=e,this.Add=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t+e;let n,r,s=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)s[i]=null,i<t.length&&i<e.length&&this.IsNumber(t[i])&&this.IsNumber(e[i])&&(s[i]=t[i]+e[i]);return s}a?(n=t,r=e):(n=e,r=t);for(let t in r)s[t]=null,this.IsNumber(r[t])&&this.IsNumber(n)&&(s[t]=n+r[t]);return s},this.Subtract=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t-e;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&this.IsNumber(t[i])&&this.IsNumber(e[i])&&(n[i]=t[i]-e[i]);return n}if(a)for(let a in e)n[a]=null,this.IsNumber(t)&&this.IsNumber(e[a])&&(n[a]=t-e[a]);else for(let a in t)n[a]=null,this.IsNumber(t[a])&&this.IsNumber(e)&&(n[a]=t[a]-e);return n},this.Multiply=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t*e;let n,r,s=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)s[i]=null,i<t.length&&i<e.length&&this.IsNumber(t[i])&&this.IsNumber(e[i])&&(s[i]=t[i]*e[i]);return s}a?(n=t,r=e):(n=e,r=t);for(let t in r)s[t]=null,this.IsNumber(r[t])&&this.IsNumber(n)&&(s[t]=n*r[t]);return s},this.Divide=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return 0==e?null:t/e;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&this.IsNumber(t[i])&&this.IsDivideNumber(e[i])&&(n[i]=t[i]/e[i]);return n}if(a)for(let a in e)n[a]=null,this.IsNumber(t)&&this.IsDivideNumber(e[a])&&(n[a]=t/e[a]);else for(let a in t)n[a]=null,this.IsNumber(t[a])&&this.IsDivideNumber(e)&&(n[a]=t[a]/e);return n},this.GT=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]>e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t>e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]>e?1:0);return n},this.GTE=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]>=e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t>=e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]>=e?1:0);return n},this.LT=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t<e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]<e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t<e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]<e?1:0);return n},this.LTE=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]<=e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t<=e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]<=e?1:0);return n},this.EQ=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t==e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]==e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t==e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]==e?1:0);return n},this.NEQ=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t!=e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]!=e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t!=e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]!=e?1:0);return n},this.And=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t&&e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]&&e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t&&e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]&&e?1:0);return n},this.Or=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return t||e?1:0;let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=t[i]||e[i]?1:0));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=t||e[a]?1:0);else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=t[a]||e?1:0);return n},this.IF=function(t,e,a){let i="number"==typeof e,n="number"==typeof a;if("number"==typeof t)return t?e:a;let r=[];for(let s in t)t[s]?r[s]=i?e:e[s]:r[s]=n?a:a[s];return r},this.IFN=function(t,e,a){return this.IF(t,a,e)},this.REF=function(t,e){let a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(let t=0;t<e;++t)a.unshift(null)}else for(let n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var i=e[n];a[n]=i>0&&i<=n?t[n-i]:n?a[n-1]:t[n]}return a},this.MAX=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return Math.max(t,e);let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=Math.max(t[i],e[i])));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=Math.max(t,e[a]));else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=Math.max(t[a],e));return n},this.MIN=function(t,e){let a="number"==typeof t,i="number"==typeof e;if(a&&i)return Math.min(t,e);let n=[];if(!a&&!i){let a=Math.max(t.length,e.length);for(let i=0;i<a;++i)n[i]=null,i<t.length&&i<e.length&&(isNaN(t[i])||isNaN(e[i])||(n[i]=Math.min(t[i],e[i])));return n}if(a)for(let a in e)n[a]=null,isNaN(t)||isNaN(e[a])||(n[a]=Math.min(t,e[a]));else for(let a in t)n[a]=null,isNaN(t[a])||isNaN(e)||(n[a]=Math.min(t[a],e));return n},this.ABS=function(t){let e=[];for(let a in t)e[a]=null,isNaN(t[a])||(e[a]=Math.abs(t[a]));return e},this.MA=function(t,e){let a=[];if(Array.isArray(e)){for(o=0;o<t.length;++o)if(a[o]=null,!(o>=e.length)){var i=e[o];if(this.IsNumber(i)){i<=0&&(i=o);for(var n=0,r=o,s=0;r>=0&&s<i;--r,++s)n+=t[r];a[o]=n/i}}}else{if(e<=0&&(e=1),!t||!t.length)return a;for(var o=0;o<t.length&&(a[o]=null,!this.IsNumber(t[o]));++o);t=t.slice(0);for(var h=0;o<t.length;++o,++h){if(h<e-1){a[o]=null;continue}let i=t[o-(e-1)],n=0;for(let a=e-1;a>=0;--a){var l=t[o-a];this.IsNumber(l)?i=l:(l=i,t[o-a]=l),n+=l}a[o]=n/e}}return a},this.EMA=function(t,e){var a=[],i=0;if(i>=t.length)return a;for(;i<t.length&&(null==t[i]||isNaN(t[i]));++i);var n=i,r=i+1;a[n]=t[n];for(var s=i+1;s<t.length;++s,++n,++r)a[r]=(2*t[r]+(e-1)*a[n])/(e+1);return a},this.SMA=function(t,e,a){for(var i=[],n=0,r=null;n<t.length;++n)if(null!=t[n]&&!isNaN(t[n])){r=t[n],i[n]=r;break}for(++n;n<t.length;++n)i[n]=(a*t[n]+(e-a)*r)/e,r=i[n];return i},this.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:e[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},this.WMA=function(t,e){let a=[];if(!t||!t.length)return a;e<1&&(e=1);var i=0;for(i=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;t=t.slice(0);for(var n=0;i<t.length;++i,++n)if(n<e-1)a[i]=null;else{for(var r=t[i-(e-1)],s=0,o=0,h=e-1;h>=0;++h){var l=t[i-h];this.IsNumber(l)?r=l:(l=r,t[i-h]=l),o+=e-h,s+=l*(e-h)}a[i]=s/o}return a},this.MEMA=function(t,e){let a=[];if(!t||!t.length)return a;var i=0,n=0;for(n=0;n<t.length&&!this.IsNumber(t[n]);++n)a[n]=null;if(i=n,e<1||i+e>=t.length)return a;var r=0;for(t=t.slice(0);i<n+e;++i)a[i]=null,!this.IsNumber(t[i])&&i-1>=0&&(t[i]=t[i-1]),r+=t[i];for(a[i-1]=r/e;i<t.length;++i)this.IsNumber(a[i-1])&&this.IsNumber(t[i])?a[i]=(t[i]+a[i-1]*(e-1))/e:i-1>-1&&this.IsNumber(a[i-1])?a[i]=a[i-1]:a[i]=null;return a},this.EXPMA=function(t,e){let a=[];if(e>=t.length)return a;let i=e;for(;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var n=0,r=0;i<t.length&&r<e;++r,++i)t[i]&&!isNaN(t[i])?n+=t[i]:n+=t[i-1];for(a[i-1]=n/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.SUMBARS=function(t,e){var a=[];if(!(t&&t.length&&e&&e.length))return a;for(var i=0,n=0,r=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;for(n=t.length-1;n>=i;--n){var s=0;for(r=n,s=0;r>=i&&s<e[n];--r)s+=t[r];a[n]=r<i?null:n-r}for(n=i+1;n<t.length;++n)null==a[n]&&(a[n]=a[n-1]);return a},this.REVERSE=function(t){for(var e=[],a=0;a<t.length&&!this.isNumber(t[a]);++a)e[a]=null;for(;a<t.length;++a)this.isNumber(t[a])?e[a]=0-t[a]:e[a]=null;return e},this.COUNT=function(t,e){let a=[];for(let i=0;i<t.length;++i){let n=0;for(let a=0;a<e&&i-a>=0;++a)t[i-a]&&++n;a[i]=n}return a},this.HHV=function(t,e){let a=[];if(Array.isArray(e)){for(var i=null,n=0,r=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){i=null;var s=e[n];if(s>0&&s<=n)for(r=n-s;r<=n;++r)(null==i||i<t[r])&&(i=t[r]);else for(s=n,r=0;r<=n;++r)(null==i||i<t[r])&&(i=t[r]);a[n]=i}}else{if(e>t.length)return a;e<=0&&(e=t.length-1);var o=0;for(o=0;o<t.length&&!this.IsNumber(t[o]);++o);o<t.length&&(a[o]=t[o]);for(n=o+1,r=2;n<t.length&&r<e;++n,++r)t[n]>=t[o]&&(o=n),a[n]=t[o];for(;n<t.length;++n){if(n-o<e)o=t[n]<t[o]?o:n;else for(r=o=n-e+2;r<=n;++r)o=t[r]<t[o]?o:r;a[n]=t[o]}}return a},this.LLV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var n=null,r=e[i];if(r>0&&r<=i)for(var s=i-r;s<=i;++s)(null==n||n>t[s])&&(n=t[s]);else{r=i;for(s=0;s<=i;++s)(null==n||n>t[s])&&(n=t[s])}a[i]=n}}else{if(e>t.length)return a;e<=0&&(e=t.length-1);for(n=null,i=e;i<t.length;++i,++s){if(null==n||i<e+n)n=t[i]>t[n]?n:i;else for(s=1+(n=i-e+1);s<=i;++s)t[s]<t[n]&&(n=s);a[i]=t[n]}}return a},this.STD=function(t,e){for(var a=[],i=0,n=[],r=e-1;r<t.length;++r){i=0;for(var s=0;s<e;++s)i+=t[r-s];n[r]=i/e}for(r=e-1;r<t.length;++r){i=0;for(s=0;s<e;++s)i+=Math.pow(t[r-s]-n[r],2);a[r]=Math.sqrt(i/e)}return a},this.AVEDEV=function(t,e){for(var a=[],i=0,n=[],r=e-1;r<t.length;++r){i=0;for(var s=0;s<e;++s)i+=t[r-s];n[r]=i/e}for(r=e-1;r<t.length;++r){i=0;for(s=0;s<e;++s)i+=Math.abs(t[r-s]-n[r]);a[r]=i/e}return a},this.CROSS=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return[];for(var i=0;i<t.length&&(!this.IsNumber(t[i])||!this.IsNumber(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0}else if(Array.isArray(t)&&"number"==typeof e){for(i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(++i;i<t.length;++i)a[i]=t[i]>e&&t[i-1]<e?1:0}else if("number"==typeof t&&Array.isArray(e)){for(i=0;i<e.length&&!this.IsNumber(e[i]);++i);for(++i;i<e.length;++i)a[i]=e[i]<t&&e[i-1]>t?1:0}return a},this.MULAR=function(t,e){var a=[];if(t.length<e)return a;for(var i=e;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])){a[i]=t[i];break}for(++i;i<t.length;++i)a[i]=a[i-1]*t[i];return a},this.SUM=function(t,e){var a=[];if(Array.isArray(e))for(n=0;n<t.length;++n){a[n]=null;var i=e[n];if(i>0)for(r=n,s=0;r>=0&&s<i;--r,++s)0==s?a[n]=t[r]:a[n]+=t[r]}else if(0==e){a[0]=t[0];for(var n=1;n<t.length;++n)a[n]=a[n-1]+t[n]}else for(var n=e-1,r=0;n<t.length;++n,++r)for(var s=0;s<e;++s)0==s?a[n]=t[s+r]:a[n]+=t[s+r];return a},this.BARSCOUNT=function(t){let e=[],a=null;for(let i in t){if(e[i]=0,null==a){if(!this.IsNumber(t[i]))continue;a=0}e[i]=a,++a}return e},this.DEVSQ=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,n=t.length,r=0,s=0,o=0,h=0,l=0;for(r=0;r<n&&!this.isNumber(t[r]);++r)a[r]=null;if(i<1||r+i>n)return a;for(h=0;r<n&&s<i;++r,++s)h+=t[r]/i;if(s==i){for(l=0,r--;o<i;o++)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l,r++}for(;r<n;++r){for(h+=(t[r]-t[r-i])/i,l=0,o=0;o<i;++o)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l}return a},this.NOT=function(t){if("number"==typeof t)return t?0:1;let e=[];for(let a in t)e[a]=null,this.IsNumber(t[a])&&(e[a]=t[a]?0:1);return e},this.FORCAST=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,n=t.length;if(i<1||i>=n)return a;var r,s,o,h,l=0,u=0,c=0,f=0;for(h=0;h<n&&!this.isNumber(t[h]);++h)a[h]=null;for(o=h+i-1;o<n;++o){for(l=u=c=f=0,h=0;h<i&&h<=o;++h)l+=o-h,u+=t[o-h];for(l/=i,u/=i,h=0;h<i&&h<=o;++h)c+=(o-h-l)*(t[o-h]-u),f+=(o-h-l)*(o-h-l);r=(u-l*(s=c/f))/i,a[o]=s*i+r}return a},this.SLOPE=function(t,e){let a=[];if("number"!=typeof e&&(e=parseInt(e)),e<1||!t.length)return a;if(e>=t.length)return a;let i,n,r,s,o=0;for(let e=0;e<t.length&&(a[e]=null,!this.IsNumber(t[e]));++e,++o);for(let l=o+e-1;l<t.length;++l){a[l]=null,i=n=r=s=0;for(var h=0;h<e&&h<=l;++h)i+=l-h,n+=t[l-h];for(i/=e,n/=e,h=0;h<e&&h<=l;++h)r+=(l-h-i)*(t[l-h]-n),s+=(l-h-i)*(l-h-i);s?a[l]=r/s:l&&(a[l]=a[l-1])}return a},this.STDP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,n=t.length;if(i<1||i>=n)return a;var r=0,s=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;for(var o,h=0,l=0;r<n&&s<i;++r,++s)h+=t[r]*t[r],l+=t[r];for(s==i&&(o=i*h-l*l,a[r-1]=Math.sqrt(o)/i);r<n;++r)o=i*(h+=t[r]*t[r]-t[r-i]*t[r-i])-(l+=t[r]-t[r-i])*l,a[r]=Math.sqrt(o)/i;return a},this.VAR=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i,n,r,s,o=e,h=t.length;if(o<=1||o>=h)return a;for(i=0;i<h&&!this.IsNumber(t[i]);++i)a[i]=null;for(n=0,i=i+o-1;i<h;++i){for(r=s=0,n=0;n<o&&n<=i;++n)r+=t[i-n]*t[i-n],s+=t[i-n];a[i]=(o*r-s*s)/o*(o-1)}return a},this.VARP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,n=t.length;if(i<1||i>=n)return a;var r=0,s=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;for(var o=0,h=0;r<n&&s<i;++r,++s)o+=t[r]*t[r],h+=t[r];for(s==i&&(a[r-1]=(i*o-h*h)/(i*i));r<n;++r)o+=t[r]*t[r]-t[r-i]*t[r-i],h+=t[r]-t[r-i],a[r]=(i*o-h*h)/(i*i);return a},this.RANGE=function(t,e,a){let i="number"==typeof e,n="number"==typeof a;if("number"==typeof t&&i&&n)return t>Math.min(e,a)&&t<Math.max(e,a)?1:0;let r,s,o=[];for(let h=0;h<t.length;++h)if(o[h]=null,r=t[h],this.IsNumber(r)){if(i)s=e;else{if(h>=e.length)continue;s=e[h]}if(this.IsNumber(s)){if(n)rangeValue2=a;else{if(h>=a.length)continue;rangeValue2=a[h]}this.IsNumber(rangeValue2)&&(o[h]=r>Math.min(s,rangeValue2)&&r<Math.max(s,rangeValue2)?1:0)}}return o},this.EXIST=function(t,e){if(e=parseInt(e),"number"==typeof t)return 0;var a,i=null,n=[];for(let r=0;r<t.length;++r)n[r]=null,a=t[r],this.IsNumber(a)&&a>0&&(i=r),n[r]=null!=i&&r-i<e?1:0;return n},this.TFILTER=function(t,e,a){a=parseInt(a);let i=Math.max(t.length,e.length);for(let t=0;t<i;++t);return[]},this.FILTER=function(t,e){var a=[];for(let i=0,n=0;i<t.length;++i)if(t[i]){for(a[i]=1,n=0;n<e&&n+i+1<t.length;++n)a[n+i+1]=0;i+=e}else a[i]=0;return a},this.BARSLAST=function(t){var e=[];if(!t)return e;let a=null;for(let i=0;i<t.length;++i)e[i]=null,t[i]>0?a=0:null!=a&&++a,null!=a&&(e[i]=a);return e},this.BARSSINCEN=function(t,e){var a=[],i=null;for(let n=0;n<t.length;++n)a[n]=null,null==i?t[n]&&(i=0):t[n]?i+1<e&&++i:i=null,i&&(a[n]=i);return a},this.BARSSINCE=function(t){var e=[],a=null;for(let i=0;i<t.length;++i)e[i]=null,null==a?t[i]&&(a=0):++a,a&&(e[i]=a);return e},this.Trigonometric=function(t,e){if(Array.isArray(t)){var a=[];for(let n in t){var i=t[n];this.IsNumber(i)?a[n]=e(i):a[n]=null}return a}return this.IsNumber(t)?e(t):null},this.LAST=function(t,e,a){var i=[];if(a<=0&&(a=t.length-1),a>e)return i;var n=0;for(let o=0,h=0;o<t.length;++o){i[o]=0,n=0;var r=o-e,s=o-a;if(!(r<0||s<0)){for(h=r;h<t.length&&h<=s&&t[h];++h,++n);n==s-r+1&&(i[o]=1)}}return i},this.ZIG=function(t,e){var a=this.SymbolData.Data,i=[];if("number"==typeof t)switch(t){case 0:t=a.GetOpen();break;case 1:t=a.GetHigh();break;case 2:t=a.GetLow();break;case 3:t=a.GetClose();break;default:return i}var n=!1,r=!1,s={},o={},h={},l={};for(let a in t){i[a]=null;var u=t[a];if(this.IsNumber(u))if(0==n)n=!0,s={ID:parseInt(a),Value:u};else if(1==n&&0==r){(c=(u-s.Value)/s.Value*100)>e?(o={ID:parseInt(a),Value:u,Up:!0},l={ID:parseInt(a),Value:u},r=!0):c<-e&&(o={ID:parseInt(a),Value:u,Up:!1},l={ID:parseInt(a),Value:u},r=!0)}else if(1==n&&1==r){var c=(u-l.Value)/l.Value*100;1==o.Up?c<-e?(h={ID:parseInt(a),Value:u,Up:!1},this.CalculateZIGLine(s,o,h,t,i),l={ID:parseInt(a),Value:u}):u>l.Value&&(l={ID:parseInt(a),Value:u}):c>e?(h={ID:parseInt(a),Value:u,Up:!0},this.CalculateZIGLine(s,o,h,t,i),l={ID:parseInt(a),Value:u}):u<l.Value&&(l={ID:parseInt(a),Value:u})}}return h={ID:t.length-1,Value:t[t.length-1],Up:!o.Up},this.CalculateZIGLine(s,o,h,t,i),i},this.JSDraw=null,this.CalculateZIGLine=function(t,e,a,i,n){null==this.JSDraw&&(this.JSDraw=new Ke(this.ErrorHandler));var r=t;if(e.Up)for(var s=t.ID+1;s<a.ID;++s){var o=i[s];this.IsNumber(o)&&(r.Value<o&&(r={ID:s,Value:o}))}else for(s=t.ID+1;s<a.ID;++s){o=i[s];this.IsNumber(o)&&(r.Value>o&&(r={ID:s,Value:o}))}e.Value=r.Value,e.ID=r.ID;var h={Start:{ID:t.ID,Value:t.Value},End:{ID:e.ID,Value:e.Value}},l=this.JSDraw.CalculateDrawLine(h);for(var s in l){n[(u=l[s]).ID]=u.Value}if(a.ID==i.length-1)for(var s in h={Start:{ID:e.ID,Value:e.Value},End:{ID:a.ID,Value:a.Value}},l=this.JSDraw.CalculateDrawLine(h)){var u;n[(u=l[s]).ID]=u.Value}else t.ID=e.ID,t.Value=e.Value,e.ID=a.ID,e.Value=a.Value,e.Up=t.Value<e.Value},this.TROUGHBARS=function(t,e,a){var i=this.ZIG(t,e),n=0,r=[];for(n=0;n<i.length&&(r[n]=null,!this.IsNumber(i[n]));++n);for(var s=[],o=n,h=0;n<i.length;++n)if(n+1<i.length&&n-1>=0&&i[n]<i[n-1]&&i[n]<i[n+1]){s[0]=n;break}for(n+=1;n<i.length;++n)r[n]=null,n+1<i.length&&n-1>=0&&i[n]<i[n-1]&&i[n]<i[n+1]?(console.log("[TROUGHBARS] i",n,i[n]),s[++h]=n,h+1==a?r[n]=n-o:h+1>a&&(s.shift(),o=s[0],--h,r[n]=n-o)):h+1===a&&(r[n]=n-o);return r},this.PEAKBARS=function(t,e,a){var i=this.ZIG(t,e),n=0,r=[];for(n=0;n<i.length&&(r[n]=null,!this.IsNumber(i[n]));++n);for(var s=[],o=n,h=0;n<i.length;++n)if(n+1<i.length&&n-1>=0&&i[n]>i[n-1]&&i[n]>i[n+1]){s[0]=n;break}for(n+=1;n<i.length;++n)r[n]=null,n+1<i.length&&n-1>=0&&i[n]>i[n-1]&&i[n]>i[n+1]?(console.log("[TROUGHBARS] i",n,i[n]),s[++h]=n,h+1==a?r[n]=n-o:h+1>a&&(s.shift(),o=s[0],--h,r[n]=n-o)):h+1===a&&(r[n]=n-o);return r},this.EVERY=function(t,e){var a=[];if(e<1)return a;for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var n=0;i<t.length;++i)t[i]?n+=1:n=0,n==e?(a[i]=1,--n):a[i]=0;return a},this.COST=function(t){var e=[],a=this.SymbolData.GetFinanceCacheData(201);if(!a)return e;var i=null;!Array.isArray(t)&&(i=parseFloat(t));var n=null;for(let D=this.SymbolData.Data.Data.length-1,p=0,m=0;D>=0;--D){e[D]=null;var r=this.CalculateChip(D,a,this.SymbolData.Data.Data,1);if(!(null==r.Max||null==r.Min||r.Max<=0||r.Min<=0)){var s=parseInt(100*r.Max);parseInt(100*r.Min);if(null!=i)n=i;else{if(D>=t.length)continue;n=t[D]}var o=0,h=0,l=new Map;for(p=D;p>=0;--p){var u=r.Data[p],c=parseInt(100*u.Low),f=parseInt(100*u.High);if(!(f-c+1<=0)){var C=u.Vol;if(!((C/=f-c+1)<=0)){for(m=c;m<=f&&m<=s;++m)l.has(m)?(h=l.get(m),l.set(m,h+C)):l.set(m,C);o+=u.Vol}}}for(var d of(h=0,l))if(h+=d[1],e[D]=d[0]/100,h/o*100>n)break}}return e},this.WINNER=function(t){var e=[],a=this.SymbolData.GetFinanceCacheData(201);if(!a)return e;var i=null;!Array.isArray(t)&&(i=parseInt(100*parseFloat(t)));var n=null;for(let f=this.SymbolData.Data.Data.length-1,C=0;f>=0;--f){e[f]=null;var r=this.CalculateChip(f,a,this.SymbolData.Data.Data,1);if(!(null==r.Max||null==r.Min||r.Max<=0||r.Min<=0)){parseInt(100*r.Max),parseInt(100*r.Min);if(null!=i)n=i;else{if(f>=t.length)continue;n=parseInt(100*t[f])}var s=0,o=0;for(C=f;C>=0;--C){var h=r.Data[C],l=parseInt(100*h.Low),u=parseInt(100*h.High);if(!(u-l+1<=0)){var c=h.Vol;if(!((c/=u-l+1)<=0)){o+=n>u?h.Vol:n<l?0:h.Vol*(n-l+1)/(u-l+1),s+=h.Vol}}}s>0&&(e[f]=o/s)}}return e},this.CalculateChip=function(t,e,a,i){var n={Min:null,Max:null,Data:[]},r=1,s=null,o=null;for(let l=t;l>=0;--l){let u={};var h=a[l];u.Vol=l==t?h.Vol*e[l]:h.Vol*r,u.Date=h.Date,u.High=h.High,u.Low=h.Low,null==s?s=u.High:s<u.High&&(s=u.High),null==o?o=u.Low:o<u.Low&&(o=u.Low),n.Data[l]=u,r*=1-e[l]/100*i}return n.Max=s,n.Min=o,n},this.UPNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;var i=0;for(let n=0;n<t.length;++n)a[n]=0,n-1<0||(this.IsNumber(t[n])&&this.IsNumber(t[n-1])?(t[n]>t[n-1]?++i:i=0,i==e&&(a[n]=1,--i)):i=0);return a},this.DOWNNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;var i=0;for(let n=0;n<t.length;++n)a[n]=0,n-1<0||(this.IsNumber(t[n])&&this.IsNumber(t[n-1])?(t[n]<t[n-1]?++i:i=0,i==e&&(a[n]=1,--i)):i=0);return a},this.NDAY=function(t,e,a){var i=[];if(a<1)return i;if(!Array.isArray(t)&&!Array.isArray(e))return i;if(null==t||null==e)return i;if(Array.isArray(t)&&Array.isArray(e)){if(a>=t.length||a>=e.length)return i;var n=Math.max(t.length,e.length),r=0;for(let s=0;s<n;++s)i[s]=0,s>=t.length||s>=e.length||(this.IsNumber(t[s])&&this.IsNumber(e[s])?(t[s]>e[s]?++r:r=0,r==a&&(i[s]=1,--r)):r=0)}else if(Array.isArray(t)&&!Array.isArray(e)){if(a>=t.length||!this.IsNumber(e))return;r=0;for(let n in t)i[n]=0,this.IsNumber(t[n])?(t[n]>e?++r:r=0,r==a&&(i[n]=1,--r)):r=0}else if(!Array.isArray(t)&&Array.isArray(e)){if(a>=e.length||!this.IsNumber(t))return;r=0;for(let n in e)i[n]=0,this.IsNumber(e[n])?(t>e[n]?++r:r=0,r==a&&(i[n]=1,--r)):r=0}return i},this.LONGCROSS=function(t,e,a){var i=[],n=Math.max(t.length,e.length);for(let a=0;a<n;++a)i[a]=0,a-1<0||a>=t.length||a>=e.length||this.IsNumber(t[a])&&this.IsNumber(e[a])&&this.IsNumber(t[a-1])&&this.IsNumber(e[a-1])&&t[a]>e[a]&&t[a-1]<e[a-1]&&(i[a]=1);for(let r=0,s=0;r<n;++r)if(i[r])for(s=1;s<=a&&r-s>=0;++s)if(t[r-s]>=e[r-s]){i[r]=0;break}return i},this.EXISTR=function(t,e,a){var i=[];if(!Array.isArray(t))return i;if(e=parseInt(e),a=parseInt(a),e<=0&&(e=t.length),a<=0&&(a=1),a>e)return i;i=[];for(let r=0,s=0;r<t.length;++r)if(i[r]=null,!(r-e<0||r-a<0))for(i[r]=0,s=e;s>=a;--s){var n=t[r-s];if(this.IsNumber(n)&&n){i[r]=1;break}}return i},this.RELATE=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;var n=this.CalculateAverage(t,a),r=this.CalculateAverage(e,a),s=Math.max(t.length,e.length);for(let f=0,C=0;f<s;++f)if(i[f]=null,!(f>=t.length||f>=e.length||f>=n.length||f>=r.length)){var o=n[f],h=r[f],l=0,u=0,c=0;for(C=f-a+1;C<=f;++C)l+=(t[C]-o)*(e[C]-h),u+=Math.pow(t[C]-o,2),c+=Math.pow(e[C]-h,2);i[f]=l/a/(Math.sqrt(u/a)*Math.sqrt(c/a))}return i},this.CalculateAverage=function(t,e){var a=[];if(e<1)return a;for(var i=0,n=0;n<t.length&&!this.IsNumber(t[n]);++n);for(;n<t.length&&n<e;++n){a[n]=null;var r=t[n];this.IsNumber(r)&&(i+=r)}for(a[n-1]=i/e;n<t.length;++n){r=t[n];var s=t[n-e];this.IsNumber(r)||(r=0),this.IsNumber(s)||(s=0),i=i-s+r,a[n]=i/e}return a},this.COVAR=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;var n=this.CalculateAverage(t,a),r=this.CalculateAverage(e,a),s=Math.max(t.length,e.length);s=Math.max(t.length,e.length);for(let u=0,c=0;u<s;++u)if(i[u]=null,!(u>=t.length||u>=e.length||u>=n.length||u>=r.length)){var o=n[u],h=r[u],l=0;for(c=u-a+1;c<=u;++c)l+=(t[c]-o)*(e[c]-h);i[u]=l/a}return i},this.HHVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;e<1&&(e=t.length);for(var i=null,n=0;n<t.length;++n)if(a[n]=null,this.IsNumber(t[n])){i=n;break}var r=0;for(n=i+1;n<t.length&&r<e;++n,++r)t[n]>=t[i]&&(i=n),e==t.length&&(a[n]=n-i);for(;n<t.length;++n){if(n-i<e)t[n]>=t[i]&&(i=n);else for(r=i=n-e+1;r<=n;++r)t[r]>=t[i]&&(i=r);a[n]=n-i}return a},this.LLVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;e<1&&(e=t.length);for(var i=null,n=0;n<t.length;++n)if(a[n]=null,this.IsNumber(t[n])){i=n;break}var r=0;for(n=i+1;n<t.length&&r<e;++n,++r)t[n]<=t[i]&&(i=n),e==t.length&&(a[n]=n-i);for(;n<t.length;++n){if(n-i<e)t[n]<=t[i]&&(i=n);else for(r=i=n-e+1;r<=n;++r)t[r]<=t[i]&&(i=r);a[n]=n-i}return a},this.BETA=function(t){var e=[],a=this.SymbolData.Data,i=this.SymbolData.IndexData;t<=0&&(t=1);var n=[],r=[];for(let t=0;t<a.Data.length;++t){n[t]=0,r[t]=0;var s=a.Data[t],o=i.Data[t];s.Close>0&&s.YClose>0&&(n[t]=(s.Close-s.YClose)/s.YClose),o.Close>0&&o.YClose>0&&(r[t]=(o.Close-o.YClose)/o.YClose)}for(var h=this.CalculateAverage(n,t),l=this.CalculateAverage(r,t),u=0,c=0;u<a.Data.length;++u)if(e[u]=null,!(u>=n.length||u>=r.length||u>=h.length||u>=l.length)){var f=h[u],C=l[u],d=0,D=0;for(c=u-t+1;c<=u;++c){var p=r[c]-C;d+=p*(n[c]-f),D+=p*p}this.IsDivideNumber(D)&&this.IsNumber(d)&&(e[u]=d/D)}return e},this.BETA2=function(t,e,a){var i=[];a<=0&&(a=1);for(var n=[null],r=[null],s=Math.max(t.length,e.length),o={X:t[0],Y:e[0]},h=1;h<s;++h){n[h]=0,r[h]=0;var l=t[h],u=e[h];o.X>0&&(n[h]=(l-o.X)/o.X),o.Y>0&&(r[h]=(u-o.Y)/o.Y),o={X:l,Y:u}}for(var c=this.CalculateAverage(n,a),f=this.CalculateAverage(r,a),C=(h=0,0);h<s;++h)if(i[h]=null,!(h>=n.length||h>=r.length||h>=c.length||h>=f.length)){var d=c[h],D=f[h],p=0,m=0;for(C=h-a+1;C<=h;++C){var v=n[C]-d;p+=v*(r[C]-D),m+=v*v}this.IsDivideNumber(m)&&this.IsNumber(p)&&(i[h]=p/m)}return i},this.SAR=function(t,e,a){var i=[],n=this.SymbolData.Data;if(t>=n.Data.length)return i;for(var r=null,s=null,o=0;o<t;++o){var h=n.Data[o];null==r?r=h.High:r<h.High&&(r=h.High),null==s?s=h.Low:s>h.Low&&(s=h.Low)}var l=0;i[t-1]=s;var u=s,c=n.Data[0].High,f=a/100;for(o=t;o<n.Data.length;++o){var C=c,d=(h=n.Data[o],n.Data[o-1]);0==l?h.Low<i[o-1]?(l=1,c=h.Low,f=e/100,u=Math.max(h.High,d.High),u=Math.max(u,C+f*(c-C))):(l=0,h.High>C&&(c=h.High,f=Math.min(f+e/100,a/100)),u=Math.min(h.Low,d.Low),u=Math.min(u,i[o-1]+f*(c-i[o-1]))):1==l&&(h.High>i[o-1]?(l=0,c=h.High,f=e/100,u=Math.min(h.Low,d.Low),u=Math.min(u,i[o-1]+f*(c-C))):(l=1,h.Low<C&&(c=h.Low,f=Math.min(f+e/100,a/100)),u=Math.max(h.High,d.High),u=Math.max(u,i[o-1]+f*(c-i[o-1])))),i[o]=u}return i},this.SARTURN=function(t,e,a){var i=[],n=this.SAR(t,e,a),r=this.SymbolData.Data,s=0;for(s=0;s<n.length&&!this.IsNumber(n[s]);++s);var o=0;s<r.Data.length&&(o=r.Data[s].Close>n[s]);for(var h=s+1;h<r.Data.length;++h){var l=r.Data[h];l.Close<n[h]&&o?i[h]=-1:i[h]=l.Close>n[h]&&!o?1:0,o=l.Close>n[h]}return i},this.BACKSET=function(t,e){var a=[];if(!t)return a;var i=t.length;if(!this.IsNumber(i)||i<=0)return a;for(var n=0;n<i;++n)a[n]=0;for(var r=0;r<i&&!this.IsNumber(t[r]);++r);if(r==i)return a;for(var s=Math.min(i-r,Math.max(e,1)),o=(n=i-1,0);n>=0;--n){var h=t[n];if(this.IsNumber(h)&&h)for(o=n;o>n-s;--o)a[o]=1}if(t[n])for(o=n;o>=r;--o)a[o]=1;return a},this.BETWEEN=function(t,e,a){var i=[],n="number"==typeof e,r="number"==typeof a;if("number"==typeof t&&n&&r)return t>=e&&t<=a?1:0;for(var s in t){i[s]=0;var o=t[s],h=null,l=null;n?h=e:s<e.length-1&&(h=e[s]),r?l=a:s<a.length-1&&(l=a[s]),null!=h&&null!=l&&(h>l?o>=l&&o<=h&&(i[s]=1):o<=l&&o>=h&&(i[s]=1))}return i},this.STRCAT=function(t,e){return t+e},this.CON2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var n=t[i];if(It.IsNumber(n))return a=n.toFixed(e)}else It.IsNumber(t)&&(a=t.toFixed(e));return a},this.CallFunction=function(t,e,a,i){switch(t){case"MAX":return this.MAX(e[0],e[1]);case"MIN":return this.MIN(e[0],e[1]);case"REF":return this.REF(e[0],e[1]);case"ABS":return this.ABS(e[0]);case"MA":return this.MA(e[0],e[1]);case"EMA":return this.EMA(e[0],e[1]);case"SMA":return this.SMA(e[0],e[1],e[2]);case"DMA":return this.DMA(e[0],e[1]);case"EXPMA":return this.EXPMA(e[0],e[1]);case"EXPMEMA":return this.EXPMEMA(e[0],e[1]);case"COUNT":return this.COUNT(e[0],e[1]);case"LLV":return this.LLV(e[0],e[1]);case"LLVBARS":return this.LLVBARS(e[0],e[1]);case"HHV":return this.HHV(e[0],e[1]);case"HHVBARS":return this.HHVBARS(e[0],e[1]);case"MULAR":return this.MULAR(e[0],e[1]);case"CROSS":return this.CROSS(e[0],e[1]);case"LONGCROSS":return this.LONGCROSS(e[0],e[1],e[2]);case"AVEDEV":return this.AVEDEV(e[0],e[1]);case"STD":return this.STD(e[0],e[1]);case"IF":case"IFF":return this.IF(e[0],e[1],e[2]);case"IFN":return this.IFN(e[0],e[1],e[2]);case"NOT":return this.NOT(e[0]);case"SUM":return this.SUM(e[0],e[1]);case"RANGE":return this.RANGE(e[0],e[1],e[2]);case"EXIST":return this.EXIST(e[0],e[1]);case"EXISTR":return this.EXISTR(e[0],e[1],e[2]);case"FILTER":return this.FILTER(e[0],e[1]);case"TFILTER":return this.TFILTER(e[0],e[1],e[2]);case"SLOPE":return this.SLOPE(e[0],e[1]);case"BARSLAST":return this.BARSLAST(e[0]);case"BARSCOUNT":return this.BARSCOUNT(e[0]);case"BARSSINCEN":return this.BARSSINCEN(e[0],e[1]);case"BARSSINCE":return this.BARSSINCE(e[0]);case"LAST":return this.LAST(e[0],e[1],e[2]);case"EVERY":return this.EVERY(e[0],e[1]);case"DEVSQ":return this.DEVSQ(e[0],e[1]);case"ZIG":return this.ZIG(e[0],e[1]);case"TROUGHBARS":return this.TROUGHBARS(e[0],e[1],e[2]);case"PEAKBARS":return this.PEAKBARS(e[0],e[1],e[2]);case"COST":return this.COST(e[0]);case"WINNER":return this.WINNER(e[0]);case"FORCAST":return this.FORCAST(e[0],e[1]);case"STDP":return this.STDP(e[0],e[1]);case"VAR":return this.VAR(e[0],e[1]);case"VARP":return this.VARP(e[0],e[1]);case"UPNDAY":return this.UPNDAY(e[0],e[1]);case"DOWNNDAY":return this.DOWNNDAY(e[0],e[1]);case"NDAY":return this.NDAY(e[0],e[1],e[2]);case"RELATE":return this.RELATE(e[0],e[1],e[2]);case"COVAR":return this.COVAR(e[0],e[1],e[2]);case"BETA":return this.BETA(e[0]);case"BETA2":return this.BETA2(e[0],e[1],e[2]);case"WMA":return this.WMA(e[0],e[1]);case"MEMA":return this.MEMA(e[0],e[1]);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"REVERSE":return this.REVERSE(e[0]);case"SAR":return this.SAR(e[0],e[1],e[2]);case"SARTURN":return this.SARTURN(e[0],e[1],e[2]);case"BACKSET":return this.BACKSET(e[0],e[1]);case"BETWEEN":return this.BETWEEN(e[0],e[1],e[2]);case"STRCAT":return this.STRCAT(e[0],e[1]);case"CON2STR":return this.CON2STR(e[0],e[1]);case"ATAN":return this.Trigonometric(e[0],Math.atan);case"ACOS":return this.Trigonometric(e[0],Math.acos);case"ASIN":return this.Trigonometric(e[0],Math.asin);case"COS":return this.Trigonometric(e[0],Math.cos);case"SIN":return this.Trigonometric(e[0],Math.sin);case"TAN":return this.Trigonometric(e[0],Math.tan);case"LN":return this.Trigonometric(e[0],Math.log);case"LOG":return this.Trigonometric(e[0],Math.log10);case"EXP":return this.Trigonometric(e[0],Math.exp);case"SQRT":return this.Trigonometric(e[0],Math.sqrt);default:if(_e.IsCustomFunction(t))return this.CallCustomFunction(t,e,i);this.ThrowUnexpectedNode(a,""+t+"")}},this.CallCustomFunction=function(t,e,a){var i=_e.CustomFunction.Data.get(t);if(!i||!i.Invoke)return[];var n={Name:t,Args:e,Symbol:a.Symbol,Period:a.Period,Right:a.Right,KData:a.Data};return i.Invoke(n)},this.ThrowUnexpectedNode=function(t,e){let a=t.Marker,i=e||"";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)}}function Ke(t,e){this.ErrorHandler=t,this.SymbolData=e,this.DRAWTEXT=function(t,e,a){let i=[],n={DrawData:i,DrawType:"DRAWTEXT",Text:a};if(t.length<=0)return n;var r="number"==typeof e;for(var s in t)i[s]=null,!isNaN(t[s])&&t[s]&&(r?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s]));return n},this.DRAWTEXT_FIX=function(t,e,a,i,n){let r={Position:null,DrawType:"DRAWTEXT_FIX",Text:n};if(t.length<=0)return r;for(var s in t)if(!isNaN(t[s])&&t[s])return r.Position={X:e,Y:a,Type:i},r;return r},this.SUPERDRAWTEXT=function(t,e,a,i,n){let r=[],s={DrawData:r,DrawType:"SUPERDRAWTEXT",Text:a,YOffset:n,Direction:i,TextAlign:"center"};if(t.length<=0)return s;var o="number"==typeof e;for(var h in t)r[h]=null,!isNaN(t[h])&&t[h]&&(o?r[h]=e:this.IsNumber(e[h])&&(r[h]=e[h]));return s},this.STICKLINE=function(t,e,a,i,n){let r=[],s={DrawData:r,DrawType:"STICKLINE",Width:i,Type:n};if(t.length<=0)return s;var o="number"==typeof e,h="number"==typeof a;for(var l in t)if(r[l]=null,!isNaN(t[l])&&t[l])if(o&&h)r[l]={Value:e,Value2:a};else if(o&&!h){if(isNaN(a[l]))continue;r[l]={Value:e,Value2:a[l]}}else if(!o&&h){if(isNaN(e[l]))continue;r[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;r[l]={Value:e[l],Value2:a[l]}}return s},this.DRAWLINE=function(t,e,a,i,n){let r=[],s={DrawData:r,DrawType:"DRAWLINE",Expand:n};if(t.length<=0)return s;let o=Math.max(t.length,a.length),h=!1,l=!1,u={Start:{},End:{},List:new Array};for(let n=0;n<o;++n)if(r[n]=null,n<t.length&&n<a.length){if(0==h&&0==l){if(null==t[n]||!t[n])continue;h=!0,u.Start={ID:n,Value:e[n]}}else if(1==h&&0==l){var c=null!=a[n]&&a[n];if(!c)continue;c&&(l=!0,u.End={ID:n,Value:i[n]})}if(1==h&&1==l){let t=this.CalculateDrawLine(u);for(let e in t){let a=t[e];r[a.ID]=a.Value}h=l=!1,u={Start:{},End:{}}}}return s},this.DRAWBAND=function(t,e,a,i){let n=[],r={DrawData:n,DrawType:"DRAWBAND",Color:[e.toLowerCase(),i.toLowerCase()]},s=Math.max(t.length,a.length);for(let e=0;e<s;++e){let i={Value:null,Value2:null};e<t.length&&(i.Value=t[e]),e<a.length&&(i.Value2=a[e]),n.push(i)}return r},this.DRAWKLINE=function(t,e,a,i){let n=[],r={DrawData:n,DrawType:"DRAWKLINE"},s=Math.max(t.length,e.length,a.length,i.length);for(let r=0;r<s;++r){let s={Open:null,High:null,Low:null,Close:null};r<t.length&&r<e.length&&r<a.length&&r<i.length&&(s.Open=e[r],s.High=t[r],s.Low=a[r],s.Close=i[r]),n[r]=s}return r},this.DRAWKLINE_IF=function(t,e,a,i,n){let r=[],s={DrawData:r,DrawType:"DRAWKLINE_IF"},o=Math.max(t.length,e.length,a.length,i.length,n.length);for(let s=0;s<o;++s){let o={Open:null,High:null,Low:null,Close:null};s<e.length&&s<a.length&&s<i.length&&s<n.length&&s<t.length&&t[s]&&(o.Open=a[s],o.High=e[s],o.Low=i[s],o.Close=n[s]),r[s]=o}return s},this.POLYLINE=function(t,e){let a=[],i={DrawData:a,DrawType:"POLYLINE"},n=!1;if("number"==typeof e)for(let i in t)if(a[i]=null,0==n){if(!t[i])continue;a[i]=e,n=!0}else a[i]=e;else{let i={Start:{},End:{},List:new Array};for(let r in t)if(a[r]=null,0==n){if(null==t[r]||!t[r])continue;if(r>=e.length||!this.IsNumber(e[r]))continue;n=!0,i.Start={ID:parseInt(r),Value:e[r]}}else if(1==n){if(null==t[r]||!t[r])continue;if(r>=e.length||!this.IsNumber(e[r]))continue;i.End={ID:parseInt(r),Value:e[r]};let n=this.CalculateDrawLine(i);for(let t in n){let e=n[t];a[e.ID]=e.Value}i={Start:{ID:i.End.ID,Value:i.End.Value},End:{}}}}return i},this.DRAWNUMBER=function(t,e,a){let i,n={Value:new Array,Text:new Array},r={DrawData:n,DrawType:"DRAWNUMBER"},s="number"==typeof a;s&&(i=a.toFixed(2));for(let r in t)if(n.Value[r]=null,t[r]&&!(r>=e.length)&&this.IsNumber(e[r]))if(s)n.Value[r]=e[r],n.Text[r]=i;else{if(r>=a.length||!a[r])continue;n.Value[r]=e[r],"number"==typeof a[r]?n.Text[r]=a[r].toFixed(2):n.Text[r]=a[r].toString()}return r},this.DRAWICON=function(t,e,a){var i=_e.GetDrawIcon(a);if(!i){i=new Map([[1,{Symbol:"",Color:"rgb(238,44,44)"}],[2,{Symbol:"",Color:"rgb(0,139,69)"}],[3,{Symbol:""}],[4,{Symbol:""}],[5,{Symbol:""}],[6,{Symbol:""}],[7,{Symbol:"B",Color:"rgb(238,44,44)"}],[8,{Symbol:"S",Color:"rgb(0,139,69)"}],[9,{Symbol:""}],[10,{Symbol:""}],[11,{Symbol:""}],[12,{Symbol:""}],[13,{Symbol:"B",Color:"rgb(178,34,34)"}],[14,{Symbol:"S",Color:"rgb(0,139,69)"}],[36,{Symbol:"",Color:"rgb(238,44,44)"}],[37,{Symbol:"X",Color:"rgb(0,139,69)"}],[38,{Symbol:"",Color:"rgb(238,44,44)"}],[39,{Symbol:"",Color:"rgb(0,139,69)"}],[40,{Symbol:"",Color:"rgb(238,44,44)"}],[41,{Symbol:"",Color:"rgb(238,44,44)"}],[42,{Symbol:""}],[43,{Symbol:""}],[44,{Symbol:""}],[45,{Symbol:""}],[46,{Symbol:""}],[47,{Symbol:""}]]).get(a)}i||(i={Symbol:""});let n=[],r={DrawData:n,DrawType:"DRAWICON",Icon:i};if(t.length<=0)return r;var s="number"==typeof e;if("number"==typeof t){if(!t)return r;for(var o=0;o<this.SymbolData.Data.Data.length;++o)s?n[o]=e:o<e.length&&this.IsNumber(e[o])?n[o]=e[o]:n[o]=null;return r}for(var o in t)n[o]=null,t[o]&&(s?n[o]=e:this.IsNumber(e[o])&&(n[o]=e[o]));return r},this.DRAWCHANNEL=function(t,e,a,i,n,r,s){let o=[],h={DrawData:o,DrawType:"DRAWCHANNEL",Border:{}};if(t.length<=0)return h;if(i&&(h.Border.Color=i),s&&(h.AreaColor=s),n>0&&(h.Border.Width=n),r){let t=r.split(",");for(var l in h.Border.Dotted=[],t){if(t[l]){var u=parseInt(t[l]);u<=0||h.Border.Dotted.push(u)}}h.Border.Dotted.length<=0&&(h.Border.Dotted=null)}var c="number"==typeof e,f="number"==typeof a;if("number"==typeof t){if(!t)return h;for(l=0;l<this.SymbolData.Data.Data.length;++l)if(o[l]=null,c&&f)o[l]={Value:e,Value2:a};else if(c&&!f){if(isNaN(a[l]))continue;o[l]={Value:e,Value2:a[l]}}else if(!c&&f){if(isNaN(e[l]))continue;o[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;o[l]={Value:e[l],Value2:a[l]}}}else for(l=0;l<t.length;++l)if(o[l]=null,!isNaN(t[l])&&t[l])if(c&&f)o[l]={Value:e,Value2:a};else if(c&&!f){if(isNaN(a[l]))continue;o[l]={Value:e,Value2:a[l]}}else if(!c&&f){if(isNaN(e[l]))continue;o[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;o[l]={Value:e[l],Value2:a[l]}}return h},this.RGB=function(t,e,a){return`RGB(${t},${e},${a})`},this.RGBA=function(t,e,a,i){return`RGB(${t},${e},${a},${i})`},this.PARTLINE=function(t){let e=[],a={DrawData:e,DrawType:"PARTLINE"};if(t.length<3)return a;for(var i=t[0],n=[],r=1;r<t.length&&r+1<t.length;r+=2)n.push({Cond:t[r],RGB:t[r+1]});for(var r in i){var s={Value:null,RGB:null};e[r]=s;var o=i[r];if(this.IsNumber(o)){var h=null;for(var l in n){var u=n[l];if(r<u.Cond.length&&u.Cond[r]){h=u.RGB;break}}h&&(s.Value=o,s.RGB=h)}}return a},this.DRAWGBK=function(t,e,a,i){let n={Color:[],Angle:i};e&&n.Color.push(e),a&&n.Color.push(a);let r={DrawData:null,DrawType:"DRAWGBK"};if(Array.isArray(t))for(var s in t){if(t[s]){r.DrawData=n;break}}else t&&(r.DrawData=n);return r},this.DRAWTEXT_LINE=function(t,e,a,i,n,r,s){let o={Text:{Title:a,Color:i},Line:{Type:r,Color:s}};n<=0&&(n=12),o.Text.Font=n*d()+"px ";let h={DrawData:null,DrawType:"DRAWTEXT_LINE"};if(Array.isArray(t))for(var l in t){if(t[l]){Array.isArray(e)?o.Price=e[l]:o.Price=e,h.DrawData=o;break}}else t&&(Array.isArray(e)?o.Price=e[0]:o.Price=e,h.DrawData=o);return h},this.DRAWRECTREL=function(t,e,a,i,n){let r={Rect:{Left:t,Top:e,Right:a,Bottom:i},Color:n};return 0==n&&(r.Color=null),{DrawData:r,DrawType:"DRAWRECTREL"}}}Je.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Je.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},Ke.prototype.CalculateDrawLine=function(t){t.List=[];for(let e=t.Start.ID;e<=t.End.ID;++e)t.List.push(e);let e=Math.abs(t.Start.Value-t.End.Value),a=t.List.length-1;var i=[];if(i.push({ID:t.Start.ID,Value:t.Start.Value}),t.Start.Value>t.End.Value)for(let r=1;r<t.List.length-1;++r){var n=e*(t.List.length-1-r)/a+t.End.Value;i.push({ID:t.List[r],Value:n})}else for(let r=1;r<t.List.length-1;++r){n=e*r/a+t.Start.Value;i.push({ID:t.List[r],Value:n})}return i.push({ID:t.End.ID,Value:t.End.Value}),i},Ke.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Ke.prototype.IsDrawFunction=function(t){return!!new Set(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE_IF","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL"]).has(t)};var qe={YCLOSE:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,AMOUNT:10,AMPLITUDE:13,INCREASE:14,EXCHANGERATE:37};function ze(t,e,a){this.AST=t,this.Execute=a,this.Symbol="600000.sh",this.Name,this.Data=null,this.SourceData=null,this.MarketValue=null,this.Period=0,this.Right=0,this.DataType=0,this.IsBeforeData=!1,this.DayCount,this.KLineApiUrl=_e.Domain+"/API/KLine2",this.MinuteKLineApiUrl=_e.Domain+"/API/KLine3",this.RealtimeApiUrl=_e.Domain+"/API/stock",this.HistoryMinuteApiUrl=fe.Domain+"/API/StockMinuteData",this.StockHistoryDayApiUrl=_e.Domain+"/API/StockHistoryDay",this.StockHistoryDay3ApiUrl=_e.Domain+"/API/StockHistoryDay3",this.StockNewsAnalysisApiUrl=_e.CacheDomain+"/cache/newsanalyze",this.HKToSHSZApiUrl=[_e.CacheDomain+"/cache/historyday/all/hk2shsz.json",_e.CacheDomain+"/cache/analyze/hk2shsz/hk2shsz.json",_e.Domain+"/API/HKToSHSZMinuteData"],this.MaxRequestDataCount=1e3,this.MaxRequestMinuteDayCount=5,this.LatestData,this.IndexData,this.FinanceData=new Map,this.MarginData=new Map,this.HKToSHSZData=new Map,this.NewsAnalysisData=new Map,this.ExtendData=new Map,this.UserData=new Map,this.SectionFinanceData=new Map,this.ThrowSFPeirod=new Set,this.NetworkFilter,e&&(e.HQDataType&&(this.DataType=e.HQDataType),e.Data&&(this.Data=e.Data,this.DataType!=ta.MINUTE_ID&&this.DataType!=ta.MULTIDAY_MINUTE_ID&&this.DataType!=ta.HISTORY_MINUTE_ID&&(this.Period=e.Data.Period,this.Right=e.Data.Right)),e.SourceData&&(this.SourceData=e.SourceData),e.Symbol&&(this.Symbol=e.Symbol),e.Name&&(this.Name=e.Name),e.MaxRequestDataCount>0&&(this.MaxRequestDataCount=e.MaxRequestDataCount),e.MaxRequestMinuteDayCount>0&&(this.MaxRequestMinuteDayCount=e.MaxRequestMinuteDayCount),e.KLineApiUrl&&(this.KLineApiUrl=e.KLineApiUrl),e.Right&&(this.Right=e.Right),e.Period&&(this.Period=e.Period),!0===e.IsBeforeData&&(this.IsBeforeData=e.IsBeforeData),e.NetworkFilter&&(this.NetworkFilter=e.NetworkFilter),e.DayCount>0&&(this.DayCount=e.DayCount)),this.RecvError=function(t){throw console.log("[JSSymbolData::RecvError] ajax error.",t.status),{FunctionName:"RecvError",Request:t}},this.GetLatestData=function(){if(this.LatestData)return this.Execute.RunNextJob();var t=this;if(this.NetworkFilter){var e={Name:"JSSymbolData::GetLatestData",Explain:"DYNAINFO()",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvLatestData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}s.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(e){t.RecvLatestData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})},this.RecvLatestData=function(t){if(!t.stock||1!=t.stock.length)return;let e=t.stock[0];this.LatestData={Symbol:e.symbol,Name:e.name,Date:e.date,Time:e.time,YClose:e.yclose,Price:e.price,Open:e.open,High:e.high,Low:e.low,Vol:e.vol,Amount:e.amount,Increase:e.increase,Exchangerate:e.exchangerate,Amplitude:e.amplitude},console.log("[JSSymbolData::RecvLatestData]",this.LatestData)},this.GetLatestCacheData=function(t){if(!this.LatestData)return null;switch(t){case qe.YCLOSE:return this.LatestData.YClose;case qe.OPEN:return this.LatestData.Open;case qe.HIGH:return this.LatestData.High;case qe.LOW:return this.LatestData.Low;case qe.VOL:return this.LatestData.Vol;case qe.AMOUNT:return this.LatestData.Amount;case qe.INCREASE:return this.LatestData.Increase;case qe.EXCHANGERATE:return this.LatestData.Exchangerate;case qe.AMPLITUDE:return this.LatestData.Amplitude;case qe.CLOSE:return this.LatestData.Price;default:return null}},this.GetVolRateData=function(t,e){var a=t.ID.toString()+"-VolRate-"+this.Symbol;if(this.ExtendData.has(a))return this.Execute.RunNextJob();var i=this;r.a.ajax({url:i.RealtimeApiUrl,data:{field:["name","symbol","avgvol5","date"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})},this.RecvVolRateData=function(t,e){if(t.stock&&1==t.stock.length){var a={AvgVol5:t.stock[0].avgvol5,Date:t.stock[0].date};this.ExtendData.set(e,a),console.log("[JSSymbolData::RecvVolRateData]",a)}},this.GetVolRateCacheData=function(t){var e=$e.JOB_DOWNLOAD_VOLR_DATA.toString()+"-VolRate-"+this.Symbol;e&&this.ExtendData.has(e)||this.Execute.ThrowUnexpectedNode(t,"VOLR");for(var a=[],i=this.ExtendData.get(e),n=i.AvgVol5/241,r=0,s=0,o=0;s<this.Data.Data.length;++s){a[s]=null;var h=this.Data.Data[s],l=h.DateTime;if(l){var u=l.split(" ");if(2==u.length)parseInt(u[0])==i.Date&&(r+=h.Vol,n>0&&(a[s]=r/(o+1)/n*100),++o)}}return a},this.GetGroupData=function(t){var e=t.ID.toString()+"-Group-"+this.Symbol;if(this.ExtendData.has(e))return this.Execute.RunNextJob();var a=this;if(this.NetworkFilter){var i={Name:"JSSymbolData::GetGroupData",Explain:"HYBLOCK|DYBLOCK",Request:{Url:a.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","industry","concept","region"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){a.RecvGroupData(t,e),a.Execute.RunNextJob()}),1==i.PreventDefault)return}s.HttpRequest({url:a.RealtimeApiUrl,data:{field:["name","symbol","industry","concept","region"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){a.RecvGroupData(t,e),a.Execute.RunNextJob()},error:function(t){a.RecvError(t)}})},this.RecvGroupData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0],i=a.industry,n=a.concept,r=a.region,s={Industry:[],Concept:[],Region:[]};if(i)for(var o in i){var h=i[o];s.Industry.push({Name:h.name,Symbol:h.symbol})}if(n)for(var o in n){h=n[o];s.Concept.push({Name:h.name,Symbol:h.symbol})}if(r)for(var o in r){h=r[o];s.Region.push({Name:h.name,Symbol:h.symbol})}this.ExtendData.set(e,s)}},this.GetIndexData=function(){if(this.IndexData)return this.Execute.RunNextJob();var t=this;if(V.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetIndexData",Explain:"",Period:t.Period,Request:{Url:t.KLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}s.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(V.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){e={Name:"JSSymbolData::GetIndexData",Explain:"",Period:t.Period,Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+5}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}s.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvIndexHistroyData=function(t){console.log("[JSSymbolData::RecvIndexHistroyData] recv data",t);let e=this.JsonDataToHistoryData(t);this.IndexData=new V,this.IndexData.DataType=0,this.IndexData.Data=e;var a=this.SourceData.GetOverlayData(this.IndexData.Data);if(this.IndexData.Data=a,V.IsDayPeriod(this.Period,!1)){let t=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=t}},this.RecvIndexMinuteHistroyData=function(t){console.log("[JSSymbolData::RecvIndexMinuteHistroyData] recv data",t);let e=this.JsonDataToMinuteHistoryData(t);if(this.IndexData=new V,this.IndexData.DataType=1,this.IndexData.Data=e,V.IsMinutePeriod(this.Period,!1)){let t=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=t}},this.GetIndexCacheData=function(t){if(!this.IndexData)return new Array;switch(t){case"INDEXA":return this.IndexData.GetAmount();case"INDEXC":return this.IndexData.GetClose();case"INDEXH":return this.IndexData.GetHigh();case"INDEXL":return this.IndexData.GetLow();case"INDEXO":return this.IndexData.GetOpen();case"INDEXV":return this.IndexData.GetVol();case"INDEXADV":return this.IndexData.GetUp();case"INDEXDEC":return this.IndexData.GetDown()}},this.GetIndexIncreaseData=function(t){var e=t.ID.toString()+"-UpCount-"+t.Symbol,a=t.ID.toString()+"-DownCount-"+t.Symbol;if(this.ExtendData.has(e)&&this.ExtendData.has(a))return this.Execute.RunNextJob();var i=t.Symbol;i=i.replace(".CI",".ci");var n=this;if(this.DataType===ta.MINUTE_ID||this.DataType===ta.MULTIDAY_MINUTE_ID){var s=_e.CacheDomain+"/cache/analyze/increaseanalyze/"+i+".json";console.log("[JSSymbolData::GetIndexIncreaseData] minute Get url=",s),r.a.ajax({url:s,type:"get",dataType:"json",async:!0,success:function(t){n.RecvMinuteIncreaseData(t,{UpKey:e,DownKey:a}),n.Execute.RunNextJob()},error:function(t){n.RecvError(t)}})}else this.DataType===ta.KLINE_ID&&0===this.Period&&(console.log("[JSSymbolData::GetIndexIncreaseData] K day Get url=",n.KLineApiUrl),r.a.ajax({url:n.KLineApiUrl,data:{symbol:i,start:-1,count:n.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){n.RecvHistoryIncreaseData(t,{UpKey:e,DownKey:a}),n.Execute.RunNextJob()},error:function(t){n.RecvError(t)}}))},this.RecvHistoryIncreaseData=function(t,e){console.log("[JSSymbolData::RecvHistoryIncreaseData] recv data",t);var a=[],i=[];for(var n in t.data){var r=t.data[n];let e=new B,s=new B;e.Date=r[0],e.Value=r[8],a[n]=e,s.Date=r[0],s.Value=r[9],i[n]=s}var s=this.Data.GetFittingData(a),o=new V;o.Data=s,o.Period=this.Period;t=o.GetValue();this.ExtendData.set(e.UpKey,t),s=this.Data.GetFittingData(i),(o=new V).Data=s,o.Period=this.Period,t=o.GetValue(),this.ExtendData.set(e.DownKey,t)},this.RecvMinuteIncreaseData=function(t,e){if(console.log("[JSSymbolData::RecvMinuteIncreaseData] recv data",t),t.minute){var a=t.minute;if(a.time&&a.up&&a.down){var i=[],n=[];if(this.IsBeforeData)for(var r=0,s=0;r<this.Data.Data.length;++r){if(i[r]=null,n[r]=null,!(o=this.Data.Data[r]).Before)if(h=o.DateTime)if(2==(l=h.split(" ")).length)parseInt(l[0])==t.date&&(i[r]=a.up[s],n[r]=a.down[s],++s)}else for(r=0,s=0;r<this.Data.Data.length;++r){var o,h,l;if(i[r]=null,n[r]=null,h=(o=this.Data.Data[r]).DateTime)if(2==(l=h.split(" ")).length)parseInt(l[0])==t.date&&(i[r]=a.up[s],n[r]=a.down[s],++s)}this.ExtendData.set(e.UpKey,i),this.ExtendData.set(e.DownKey,n)}}},this.GetIndexIncreaseCacheData=function(t,e,a){var i;return"UPCOUNT"==t?i=$e.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-UpCount-"+e:"DOWNCOUNT"==t&&(i=$e.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-DownCount-"+e),i&&this.ExtendData.has(i)||this.Execute.ThrowUnexpectedNode(a,""+t+"("+e+")"),this.ExtendData.get(i)},this.GetSymbolData=function(){if(this.Data)return this.Execute.RunNextJob();let t=this;this.DataType!==ta.MINUTE_ID?this.DataType!==ta.MULTIDAY_MINUTE_ID?V.IsDayPeriod(this.Period,!0)?s.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}}):V.IsMinutePeriod(this.Period,!0)&&s.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}}):s.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMultiDayMinuteData(e),t.Execute.RunNextJob()}}):s.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","minute","time","minutecount"],symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteData(e),t.Execute.RunNextJob()}})},this.RecvHistroyData=function(t){console.log("[JSSymbolData::RecvHistroyData] recv data",t);let e=this.JsonDataToHistoryData(t);if(this.Data=new V,this.Data.DataType=0,this.Data.Data=e,this.SourceData=new V,this.SourceData.Data=e,this.Right>0){let t=this.Data.GetRightDate(this.Right);this.Data.Data=t}if(V.IsDayPeriod(this.Period,!1)){let t=this.Data.GetPeriodData(this.Period);this.Data.Data=t}this.Data.Right=this.Right,this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteHistroyData=function(t){console.log("[JSSymbolData::RecvMinuteHistroyData] recv data",t);let e=this.JsonDataToMinuteHistoryData(t);if(this.Data=new V,this.Data.DataType=1,this.Data.Data=e,this.SourceData=new V,this.SourceData.Data=e,V.IsMinutePeriod(this.Period,!1)){let t=this.Data.GetPeriodData(this.Period);this.Data.Data=t}this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteData=function(t){console.log("[JSSymbolData::RecvMinuteData] recv data",t);var e=this.JsonDataToMinuteData(t);this.Data=new V,this.Data.DataType=2,this.Data.Data=e,this.Name=t.stock[0].name},this.RecvMultiDayMinuteData=function(t){var e=this.JsonDataToMultiDayMinuteData(t);this.Data=new V,this.Data.DataType=2,this.Data.Data=e,this.Name=t.name},this.GetSymbolCacheData=function(t){if(!this.Data)return new Array;switch(t){case"CLOSE":case"C":return this.Data.GetClose();case"VOL":case"V":return this.Data.GetVol();case"OPEN":case"O":return this.Data.GetOpen();case"HIGH":case"H":return this.Data.GetHigh();case"LOW":case"L":return this.Data.GetLow();case"AMOUNT":return this.Data.GetAmount()}},this.GetCurrBarsCount=function(){let t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(let e=this.Data.Data.length-1;e>=0;--e)t.push(e);return t},this.GetIsLastBar=function(){let t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;let e=this.Data.Data.length;for(let a=0;a<e;++a)a==e-1?t.push(1):t.push(0);return t},this.GetFinanceCacheData=function(t,e){let a=$e.GetFinnanceJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"FINANCE("+t+")"),this.FinanceData.has(a)?this.FinanceData.get(a):[]},this.GetCompanyReleaseDate=function(t){if(this.FinanceData.has(t))return this.Execute.RunNextJob();var e=this;r.a.ajax({url:e.RealtimeApiUrl,data:{field:["name","symbol","company.releasedate"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(a){e.RecvCompanyReleaseDate(t,a),e.Execute.RunNextJob()},error:function(t){e.RecvError(t)}})},this.RecvCompanyReleaseDate=function(t,e){if(!e.stock||1!=e.stock.length)return;let a=e.stock[0].company.releasedate,i=new Date(a/1e4,a%1e4/100,a%100),n=[];for(let t in this.Data.Data){a=this.Data.Data[t].Date;let e=new Date(a/1e4,a%1e4/100,a%100),r=new B;r.Date=a,r.Value=parseInt((e-i)/864e5),n[t]=r}console.log("[JSSymbolData::RecvCompanyReleaseDate] jobID=",t,n);var r=new V;if(r.Data=n,r.Period=this.Period,r.Period>0){var s=r.GetPeriodSingleData(r.Period);r.Data=s}let o=r.GetValue();this.FinanceData.set(t,o)},this.GetFinanceData=function(t){if(this.FinanceData.has(t))return this.Execute.RunNextJob();console.log("[JSSymbolData::GetFinanceData] jobID=",t);var e=this;let a=["name","date","symbol"];switch(t){case $e.JOB_DOWNLOAD_FLOW_EQUITY_DATA:case $e.JOB_DOWNLOAD_CAPITAL_DATA:case $e.JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA:case $e.JOB_DOWNLOAD_EXCHANGE_DATA:a.push("capital.a");break;case $e.JOB_DOWNLOAD_TOTAL_EQUITY_DATA:case $e.JOB_DOWNLOAD_MARKETVALUE_DATA:a.push("capital.total");break;case $e.JOB_DOWNLOAD_PER_U_PROFIT_DATA:a.push("finance.peruprofit");break;case $e.JOB_DOWNLOAD_PER_NETASSET_DATA:a.push("finance.pernetasset");break;case $e.JOB_DOWNLOAD_PER_C_RESERVE_DATA:a.push("finance.percreserve");break;case $e.JOB_DOWNLOAD_PER_S_EARNING_DATA:case $e.JOB_DOWNLOAD_PER_S_EARNING2_DATA:a.push("finance.persearning");break;case $e.JOB_DOWNLOAD_N_PROFIT_DATA:a.push("finance.nprofit");break;case $e.JOB_DOWNLOAD_AL_RATIO_DATA:a.push("finance.alratio");break;case $e.JOB_DOWNLOAD_PROFIT_YOY_DATA:a.push("finance.profityoy");break;case $e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA:a.push("execdividend.quarter4");break;case $e.JOB_DOWNLOAD_SHAREHOLDER_DATA:a.push("shareholder")}if(this.NetworkFilter){var i={Name:"JSSymbolData::GetFinanceData",Explain:"",JobID:t,Request:{Url:e.StockHistoryDayApiUrl,Type:"POST",Data:{field:a,symbol:[this.Symbol],orderfield:"date"}},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(a){e.RecvFinanceData(a,t),e.Execute.RunNextJob()}),1==i.PreventDefault)return}r.a.ajax({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvFinanceData(a,t),e.Execute.RunNextJob()}})},this.RecvFinanceData=function(t,e){switch(e){case $e.JOB_DOWNLOAD_FLOW_EQUITY_DATA:case $e.JOB_DOWNLOAD_CAPITAL_DATA:case $e.JOB_DOWNLOAD_TOTAL_EQUITY_DATA:case $e.JOB_DOWNLOAD_PER_U_PROFIT_DATA:case $e.JOB_DOWNLOAD_PER_NETASSET_DATA:case $e.JOB_DOWNLOAD_PER_C_RESERVE_DATA:case $e.JOB_DOWNLOAD_PER_S_EARNING_DATA:case $e.JOB_DOWNLOAD_PER_S_EARNING2_DATA:case $e.JOB_DOWNLOAD_N_PROFIT_DATA:case $e.JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA:case $e.JOB_DOWNLOAD_MARKETVALUE_DATA:case $e.JOB_DOWNLOAD_EXCHANGE_DATA:case $e.JOB_DOWNLOAD_AL_RATIO_DATA:case $e.JOB_DOWNLOAD_PROFIT_YOY_DATA:case $e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA:case $e.JOB_DOWNLOAD_SHAREHOLDER_DATA:return this.RecvStockDayData(t,e)}},this.RecvStockDayData=function(t,e){if(!t.stock||1!=t.stock.length)return;let a=t.stock[0];var i=!1,n=!1,r=new Array;for(let t in a.stockday){var s=a.stockday[t];let l=new B;switch(l.Date=s.date,e){case $e.JOB_DOWNLOAD_CAPITAL_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.a))continue;l.Value=o.a/100,i=!0;break;case $e.JOB_DOWNLOAD_TOTAL_EQUITY_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.total))continue;l.Value=o.total/1e4,i=!0;break;case $e.JOB_DOWNLOAD_FLOW_EQUITY_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.a))continue;l.Value=o.a/1e4,i=!0;break;case $e.JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.a))continue;l.Value=o.a,n=!0;break;case $e.JOB_DOWNLOAD_MARKETVALUE_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.total))continue;l.Value=o.total,n=!0;break;case $e.JOB_DOWNLOAD_EXCHANGE_DATA:if(!(o=s.capital))continue;if(!this.IsNumber(o.a))continue;l.Value=o.a,i=!0;break;case $e.JOB_DOWNLOAD_PER_U_PROFIT_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.peruprofit))continue;l.Value=o.Finance.peruprofit,i=!0;break;case $e.JOB_DOWNLOAD_PER_NETASSET_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.pernetasset))continue;l.Value=o.Finance.pernetasset,i=!0;break;case $e.JOB_DOWNLOAD_PER_C_RESERVE_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.percreserve))continue;l.Value=o.Finance.percreserve,i=!0;break;case $e.JOB_DOWNLOAD_PER_S_EARNING_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.persearning))continue;l.Value=o.Finance.persearning,i=!0;break;case $e.JOB_DOWNLOAD_PER_S_EARNING2_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.persearning))continue;l.Value=o.Finance.persearning/o.Announcement.quarter*4,i=!0;break;case $e.JOB_DOWNLOAD_N_PROFIT_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.nprofit))continue;l.Value=o.Finance.nprofit,i=!0;break;case $e.JOB_DOWNLOAD_AL_RATIO_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.alratio))continue;l.Value=o.Finance.alratio,i=!0;break;case $e.JOB_DOWNLOAD_PROFIT_YOY_DATA:if(!(o=this.JsonDataToFinance(s)))continue;if(!this.IsNumber(o.Finance.profityoy))continue;l.Value=o.Finance.profityoy,i=!0;break;case $e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA:var o;if(!(o=s.execdividend))continue;if(!this.IsNumber(o.quarter4))continue;l.Value=o.quarter4,i=!0;break;case $e.JOB_DOWNLOAD_SHAREHOLDER_DATA:var h=s.shareholder;if(!h||!this.IsNumber(h.count))continue;l.Value=h.count,i=!0;break;default:continue}r.push(l)}let l;i?l=this.SourceData?this.SourceData.GetFittingFinanceData(r):this.Data.GetFittingFinanceData(r):n?(l=this.SourceData?this.SourceData.GetFittingMarketValueData(r):this.Data.GetFittingMarketValueData(r),e==$e.JOB_DOWNLOAD_MARKETVALUE_DATA&&(this.MarketValue=l)):l=e==$e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA?this.CalculateDividendYield(r):this.SourceData.GetFittingData(r);var u=new V;if(u.Data=l,u.Period=this.Period,u.Period>0){var c=u.GetPeriodSingleData(u.Period);u.Data=c}if(e==$e.JOB_DOWNLOAD_EXCHANGE_DATA)for(let t in this.Data.Data)u.Data[t]&&(this.IsNumber(u.Data[t].Value)&&0!=u.Data[t].Value?u.Data[t].Value=this.Data.Data[t].Vol/u.Data[t].Value*100:u.Data[t].Value=1);let f=u.GetValue();this.FinanceData.set(e,f)},this.CalculateDividendYield=function(t){var e=[];if(!this.MarketValue)return e;for(let s=0,o=0;s<this.Data.Data.length;++s){var a=this.Data.Data[s],i=this.MarketValue[s];if(!a||!i)continue;let h=new B;if(h.Date=a.Date,h.Value=0,o+1<t.length&&t[o].Date<a.Date&&t[o+1].Date<=a.Date)++o,--s;else{if(o<t.length){var n=t[o],r=n.Date+1e4;a.Date>=n.Date&&a.Date<=r&&this.IsDivideNumber(i.Value)&&this.IsNumber(n.Value)&&(h.Value=n.Value/i.Value*100)}e.push(h)}}return e},this.GetMarginCacheData=function(t,e){let a=$e.GetMarginJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"MARGIN("+t+")"),this.MarginData.has(a)?this.MarginData.get(a):[]},this.GetMarginData=function(t){if(this.MarginData.has(t))return this.Execute.RunNextJob();console.log("[JSSymbolData::GetMarginData] jobID=",t);var e=this;let a=["name","date","symbol"];switch(t){case $e.JOB_DOWNLOAD_MARGIN_BALANCE:a.push("margin.balance");break;case $e.JOB_DOWNLOAD_MARGIN_RATE:a.push("margin.rate");break;case $e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case $e.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case $e.JOB_DOWNLOAD_MARGIN_BUY_NET:a.push("margin.buy");break;case $e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case $e.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case $e.JOB_DOWNLOAD_MARGIN_SELL_NET:a.push("margin.sell")}r.a.ajax({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvMarginData(a,t),e.Execute.RunNextJob()}})},this.RecvMarginData=function(t,e){if(console.log(t),!t.stock||1!=t.stock.length)return;let a=t.stock[0];var i=new Array,n=[],r=[],s=[];for(let t in a.stockday){var o=a.stockday[t],h=o.margin;if(!h)continue;let d=new B;switch(d.Date=o.date,e){case $e.JOB_DOWNLOAD_MARGIN_BALANCE:if(!this.IsNumber(h.balance))continue;d.Value=h.balance,i.push(d);break;case $e.JOB_DOWNLOAD_MARGIN_RATE:if(!this.IsNumber(h.rate))continue;d.Value=h.rate,i.push(d);break;case $e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case $e.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case $e.JOB_DOWNLOAD_MARGIN_BUY_NET:var l=h.buy;if(!l)continue;if(!(this.IsNumber(l.balance)&&this.IsNumber(l.amount)&&this.IsNumber(l.repay)&&this.IsNumber(l.net)))continue;d.Value=l.balance,(u=new B).Date=o.date,u.Value=l.amount,(c=new B).Date=o.date,c.Value=l.repay,(f=new B).Date=o.date,f.Value=l.net,i.push(d),n.push(u),r.push(c),s.push(f);break;case $e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case $e.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case $e.JOB_DOWNLOAD_MARGIN_SELL_NET:var u,c,f,C=h.sell;if(!C)continue;if(!(this.IsNumber(C.balance)&&this.IsNumber(C.volume)&&this.IsNumber(C.repay)&&this.IsNumber(C.net)))continue;d.Value=l.balance,(u=new B).Date=o.date,u.Value=l.volume,(c=new B).Date=o.date,c.Value=l.repay,(f=new B).Date=o.date,f.Value=l.net,i.push(d),n.push(u),r.push(c),s.push(f);break;default:continue}}var d=[];e===$e.JOB_DOWNLOAD_MARGIN_BALANCE||e===$e.JOB_DOWNLOAD_MARGIN_RATE?d.push({JobID:e,Data:i}):e===$e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE||e===$e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT||e===$e.JOB_DOWNLOAD_MARGIN_BUY_REPAY||e===$e.JOB_DOWNLOAD_MARGIN_BUY_NET?(d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE,Data:i}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT,Data:n}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_BUY_REPAY,Data:r}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_BUY_NET,Data:s})):e!==$e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE&&e!==$e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME&&e!==$e.JOB_DOWNLOAD_MARGIN_SELL_REPAY&&e!==$e.JOB_DOWNLOAD_MARGIN_SELL_NET||(d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE,Data:i}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME,Data:n}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_SELL_REPAY,Data:r}),d.push({JobID:$e.JOB_DOWNLOAD_MARGIN_SELL_NET,Data:s}));for(let t in d){let e=this.SourceData.GetFittingData(d[t].Data);var D=new V;if(D.Data=e,D.Period=this.Period,D.Period>0){var p=D.GetPeriodSingleData(D.Period);D.Data=p}let a=D.GetValue();this.MarginData.set(d[t].JobID,a)}},this.GetNewsAnalysisCacheData=function(t,e){let a=$e.GetNewsAnalysisID(t);return a||this.Execute.ThrowUnexpectedNode(e,"NEWS("+t+")"),this.NewsAnalysisData.has(a)?this.NewsAnalysisData.get(a):[]},this.GetHKToSHSZData=function(t){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var e,a=0;this.DataType===ta.MINUTE_ID?a=1:this.DataType==ta.MULTIDAY_MINUTE_ID?a=2:this.Period<=3&&(a=0),e=this.HKToSHSZApiUrl[a];var i=this;console.log(`[JSSymbolData::GetHKToSHSZData] jobID=${t}, url=${e}, dataType=${a}`),2===a?r.a.ajax({url:e,data:{symbol:this.Symbol,daycount:this.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){i.RecvMulitMinuteHKToSHSZData(e,t),i.Execute.RunNextJob()}}):r.a.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){0==a?i.RecvHKToSHSZData(e,t):1==a&&i.RecvMinuteHKToSHSZData(e,t),i.Execute.RunNextJob()}})},this.RecvMinuteHKToSHSZData=function(t,e){var a=[],i=[],n=[];if(this.IsBeforeData){for(r in this.SourceData.Data){if(!(u=this.SourceData.Data[r]).Before)break;a.push(null),i.push(null),n.push(null)}for(var r=0;r<t.time.length;++r){if(925!==t.time[r]){var s=(o=t.hk2sh[r])+(h=t.hk2sz[r]);a.push(s),i.push(o),n.push(h)}}}else for(r=0;r<t.time.length;++r){var o,h;t.time[r],s=(o=t.hk2sh[r])+(h=t.hk2sz[r]);a.push(s),i.push(o),n.push(h)}var l=[{Data:a,JobID:$e.JOB_DOWNLOAD_HK_TO_SH_SZ},{Data:i,JobID:$e.JOB_DOWNLOAD_HK_TO_SH},{Data:n,JobID:$e.JOB_DOWNLOAD_HK_TO_SZ}];for(var r in l){var u=l[r];this.HKToSHSZData.set(u.JobID,u.Data)}},this.RecvHKToSHSZData=function(t,e){for(var a=[],i=[],n=[],r=0;r<t.date.length;++r){var s=t.date[r],o=1e6*t.hk2sh[r],h=1e6*t.hk2sz[r],l=o+h;let e=new B;e.Date=s,e.Value=l;let u=new B;u.Date=s,u.Value=o;let c=new B;c.Date=s,c.Value=h,a.push(e),i.push(u),n.push(c)}var u=[{Data:a,JobID:$e.JOB_DOWNLOAD_HK_TO_SH_SZ},{Data:i,JobID:$e.JOB_DOWNLOAD_HK_TO_SH},{Data:n,JobID:$e.JOB_DOWNLOAD_HK_TO_SZ}];for(let t in u){let e=this.Data.GetFittingData(u[t].Data);var c=new V;if(c.Data=e,c.Period=this.Period,c.Period>0){var f=c.GetPeriodSingleData(c.Period);c.Data=f}let a=c.GetValue();this.HKToSHSZData.set(u[t].JobID,a)}},this.RecvMulitMinuteHKToSHSZData=function(t,e){if(t.data&&!(t.data.length<=0)){for(var a=[],i=[],n=[],r=0,s=0;r<this.Data.Data.length&&s<t.data.length;){a[r]=null,i[r]=null,n[r]=null;var o=(m=this.Data.Data[r]).DateTime;if(o){var h=o.split(" ");if(2==h.length){var l=parseInt(h[0]),u=t.data[s];if(!u.minute||u.minute.length<=0)++s;else if(u.date>l)++r;else if(u.date<l)++s;else{for(var c in u.minute){var f=u.minute[c],C=f[1],d=f[2],D=C+d;a[r]=D,i[r]=C,n[r]=d,++r}++s}}else++r}else++r}var p=[{Data:a,JobID:$e.JOB_DOWNLOAD_HK_TO_SH_SZ},{Data:i,JobID:$e.JOB_DOWNLOAD_HK_TO_SH},{Data:n,JobID:$e.JOB_DOWNLOAD_HK_TO_SZ}];for(var r in p){var m=p[r];this.HKToSHSZData.set(m.JobID,m.Data)}}},this.GetHKToSHSZCacheData=function(t,e){let a=$e.GetHK2SHSZJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"HK2SHSZ("+t+")"),this.HKToSHSZData.has(a)?this.HKToSHSZData.get(a):[]},this.GetNewsAnalysisData=function(t){if(this.NewsAnalysisData.has(t))return this.Execute.RunNextJob();var e=this,a=new Map([[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE,"negative"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH,"research"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT,"interact"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,"holderchange"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,"holderchange"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER,"trustholder"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING,"Blocktrading"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS,"companynews"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS,"topmanagers"],[$e.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE,"Pledge"]]);if(a.has(t)){var i=a.get(t),n=this.StockNewsAnalysisApiUrl+"/"+i+"/"+this.Symbol+".json";r.a.ajax({url:n,type:"get",dataType:"json",async:!0,success:function(a){e.RecvNewsAnalysisData(a,t),e.Execute.RunNextJob()},error:function(a,i){e.RecvNewsAnalysisDataError(a,i,t),e.Execute.RunNextJob()}})}else this.Execute.RunNextJob()},this.RecvNewsAnalysisDataError=function(t,e,a){console.log("[JSSymbolData::RecvNewsAnalysisDataError] ajax error.",t.status);for(var i=[],n=0;n<this.Data.Data.length;++n){var r=new B;r.Date=this.Data.Data[n].Date,r.Value=0,i.push(r)}var s=new V;s.Data=i,this.NewsAnalysisData.set(a,s.GetValue())},this.RecvNewsAnalysisData=function(t,e){if(t.data&&t.date&&!(t.data.length<=0||t.data.length!=t.date.length))if(console.log("[JSSymbolData::RecvNewsAnalysisData] jobID",e,t.update),e==$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE||e==$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2){for(var a=[],i=[],n=0;n<t.data.length;++n){(r=new B).Date=t.date[n],r.Value=t.data[n],this.IsNumber(r.Value)&&a.push(r),n<t.data2.length&&((r=new B).Date=t.date[n],r.Value=t.data2[n],this.IsNumber(r.Value)&&i.push(r))}let e=this.Data.GetFittingData2(a,0);(s=new V).Data=e,this.NewsAnalysisData.set($e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,s.GetValue()),e=this.Data.GetFittingData2(i,0),(s=new V).Data=e,this.NewsAnalysisData.set($e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,s.GetValue())}else{for(a=[],n=0;n<t.data.length;++n){var r;(r=new B).Date=t.date[n],r.Value=t.data[n],a.push(r)}let i=this.Data.GetFittingData2(a,0);var s;(s=new V).Data=i,this.NewsAnalysisData.set(e,s.GetValue())}},this.GetSectionFinanceData=function(t){var e=t.SF[0],a=t.SF[1].Period;if(this.SectionFinanceData.has(e))return this.Execute.RunNextJob();console.log(`[JSSymbolData::GetSectionFinanceData] ${a.Year}-${a.Quarter}`);var i="announcement"+a.Quarter,n=this,r=["name","date","symbol",i,"finance"+a.Quarter],o=[i+".year","int32","eq",a.Year.toString()];s.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:r,symbol:[this.Symbol],condition:[{item:o}]},type:"post",dataType:"json",async:!0,success:function(e){n.RecvSectionFinanceData(e,t),n.Execute.RunNextJob()}})},this.RecvSectionFinanceData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0];if(a.stockday&&!(a.stockday.length<=0)){var i=a.stockday[0],n=e.SF[1].Period,r=null;if(1===n.Quarter?r=i.finance1:2===n.Quarter?r=i.finance2:3===n.Quarter?r=i.finance3:4===n.Quarter&&(r=i.finance4),r){t=new Map([[$e.JOB_DOWNLOAD_SECTION_F_01,r.currentassets],[$e.JOB_DOWNLOAD_SECTION_F_02,r.monetaryfunds],[$e.JOB_DOWNLOAD_SECTION_F_03,r.inventory],[$e.JOB_DOWNLOAD_SECTION_F_04,r.currentliabilities],[$e.JOB_DOWNLOAD_SECTION_F_05,r.ncurrentliabilities],[$e.JOB_DOWNLOAD_SECTION_F_06,r.expenses3],[$e.JOB_DOWNLOAD_SECTION_F_07,r.investmentincome],[$e.JOB_DOWNLOAD_SECTION_F_08,r.pcnprofit],[$e.JOB_DOWNLOAD_SECTION_F_09,r.nnetprofit],[$e.JOB_DOWNLOAD_SECTION_F_10,r.npersearning],[$e.JOB_DOWNLOAD_SECTION_F_11,r.woewa],[$e.JOB_DOWNLOAD_SECTION_F_12,r.inprocess],[$e.JOB_DOWNLOAD_SECTION_F_13,r.accdepreciation],[$e.JOB_DOWNLOAD_SECTION_F_14,r.mholderprofit],[$e.JOB_DOWNLOAD_SECTION_F_15,r.lossexchange],[$e.JOB_DOWNLOAD_SECTION_F_16,r.baddebts],[$e.JOB_DOWNLOAD_SECTION_F_17,r.fixedassets],[$e.JOB_DOWNLOAD_SECTION_F_18,r.curdepreciation],[$e.JOB_DOWNLOAD_SECTION_F_19,r.orevenues],[$e.JOB_DOWNLOAD_SECTION_F_20,r.moprofit],[$e.JOB_DOWNLOAD_SECTION_F_21,r.oprofit],[$e.JOB_DOWNLOAD_SECTION_F_22,r.nprofit],[$e.JOB_DOWNLOAD_SECTION_F_23,r.areceivable],[$e.JOB_DOWNLOAD_SECTION_F_24,r.financialcost],[$e.JOB_DOWNLOAD_SECTION_F_25,r.ccfo],[$e.JOB_DOWNLOAD_SECTION_F_26,r.totalassets],[$e.JOB_DOWNLOAD_SECTION_F_27,r.totalliabilities],[$e.JOB_DOWNLOAD_SECTION_F_28,r.totalownersequity],[$e.JOB_DOWNLOAD_SECTION_F_29,r.grossmargin],[$e.JOB_DOWNLOAD_SECTION_F_30,r.percreserve],[$e.JOB_DOWNLOAD_SECTION_F_31,r.peruprofit],[$e.JOB_DOWNLOAD_SECTION_F_32,r.persearning],[$e.JOB_DOWNLOAD_SECTION_F_33,r.pernetasset],[$e.JOB_DOWNLOAD_SECTION_F_34,r.perccfo],[$e.JOB_DOWNLOAD_SECTION_F_38,r.alratio],[$e.JOB_DOWNLOAD_SECTION_F_39,r.profityoy]]);4===n.Quarter&&(t.set($e.JOB_DOWNLOAD_SECTION_F_35,r.nnprofitincrease),t.set($e.JOB_DOWNLOAD_SECTION_F_36,r.nnprofitspeed),t.set($e.JOB_DOWNLOAD_SECTION_F_37,r.nprofitincrease));var s=e.SF[0];this.SectionFinanceData.set(s,t)}}}},this.GetSectionFinanceCacheData=function(t,e,a,i){var n=$e.GetSectionReportPeriod(t,e);n||this.Execute.ThrowUnexpectedNode(i,`FS(${t}, ${e}, '${a}') `);var r=$e.GetSectionFinanceID(a);r||this.Execute.ThrowUnexpectedNode(i,`FS(${t}, ${e},'${a}') `);var s=n.Year+"-"+n.Quarter;if(!this.SectionFinanceData.has(s)&&!this.ThrowSFPeirod.has(s)){this.ThrowSFPeirod.add(s);var o={ID:$e.JOB_DOWNLOAD_SECTION_SF,SF:[s,{Period:n,Fields:new Set([r])}]};this.Execute.ThrowDownloadSF(i,o,`FS(${t}, ${e}, '${a}') `)}if(!this.SectionFinanceData.has(s))return this.Execute.ThrowUnexpectedNode(i,`FS(${t}, ${e}, '${a}') `);var h=this.SectionFinanceData.get(s);return h.has(r)||this.Execute.ThrowUnexpectedNode(i,`FS(${t}, ${e}, '${a}') `),h.get(r)},this.DownloadCustomVariantData=function(t){var e=_e.CustomVariant.Data.get(t.Name);if(!e||!e.Download)return this.Execute.RunNextJob();var a=this,i={Name:t.Name,Symbol:this.Symbol,KData:this.Data,Period:this.Period,Right:this.Right,Success:function(){a.Execute.RunNextJob()}};e.Download(i)},this.DownloadCustomFunctionData=function(t){var e=_e.CustomFunction.Data.get(t.Name);if(!e||!e.Download)return this.Execute.RunNextJob();var a=this,i={Symbol:this.Symbol,KData:this.Data,Period:this.Period,Right:this.Right,Args:t.Args,Name:t.Name,Success:function(){a.Execute.RunNextJob()}};e.Download(i)},this.JsonDataToHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var n=new P;n.Date=e[i][0],n.Open=e[i][2],n.YClose=e[i][1],n.Close=e[i][5],n.High=e[i][3],n.Low=e[i][4],n.Vol=e[i][6],n.Amount=e[i][7],e[i].length>8&&(n.Up=e[i][8]),e[i].length>9&&(n.Down=e[i][9]),e[i].length>10&&(n.Stop=e[i][10]),e[i].length>11&&(n.Unchanged=e[i][11]),isNaN(n.Open)||n.Open<=0||a.push(n)}return a},this.JsonDataToMinuteHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){let t=new P;t.Date=e[i][0],t.Open=e[i][2],t.YClose=e[i][1],t.Close=e[i][5],t.High=e[i][3],t.Low=e[i][4],t.Vol=e[i][6],t.Amount=e[i][7],t.Time=e[i][8],a.push(t)}for(let t=0;t<a.length;++t){var n=a[t];if(null==n&&coninue,isNaN(n.Open)||n.Open<=0||isNaN(n.High)||n.High<=0||isNaN(n.Low)||n.Low<=0||isNaN(n.Close)||n.Close<=0||isNaN(n.YClose)||n.YClose<=0)if(0==t)n.YClose>0&&(n.Open=n.YClose,n.High=n.YClose,n.Low=n.YClose,n.Close=n.YClose);else for(let e=t-1;e>=0;--e){var r=a[e];if(null==r&&coninue,r.Open>0&&r.High>0&&r.Low>0&&r.Close>0){n.YClose<=0&&(n.YClose=r.Close),n.Open=r.Open,n.High=r.High,n.Low=r.Low,n.Close=r.Close;break}}}return a},this.JsonDataToMinuteData=function(t){var e=new Array;for(var a in t.stock[0].minute){var i=t.stock[0].minute[a],n=new b;n.Close=i.price,n.Open=i.open,n.High=i.high,n.Low=i.low,n.Vol=i.vol,n.Amount=i.amount,n.DateTime=0==a?t.stock[0].date.toString()+" 0925":t.stock[0].date.toString()+" "+i.time.toString(),n.Date=t.stock[0].date,n.Time=i.time,n.Increase=i.increase,n.Risefall=i.risefall,n.AvPrice=i.avprice,e[a]=n}return e},this.JsonDataToMultiDayMinuteData=function(t){var e=t.symbol.toUpperCase(),a=we.IsSHSZ(e),i=(we.IsChinaFutures(e),[]);for(var n in t.data){var r=[],s=t.data[n],o=s.date,h=s.yclose,l=h,u=null;for(var c in s.minute){var f=s.minute[c];f[2]&&(l=f[2]),(d=new b).Close=f[2],d.Open=f[1],d.High=f[3],d.Low=f[4],d.Vol=f[5]/100,d.Amount=f[6],7<f.length&&f[7]>0&&(d.AvPrice=f[7],u=f[7]),d.DateTime=o.toString()+" "+f[0].toString(),d.Date=o,d.Time=f[0],d.Close||(d.Close=l,d.Open=d.High=d.Low=d.Close),!d.AvPrice&&u&&(d.AvPrice=u),d.Close&&h?d.Increase=(d.Close-h)/h*100:d.Increase=null,0==c&&(a&&(d.DateTime=o.toString()+" 0925"),d.IsFristData=!0),d.Open<=0&&(d.Open=null),d.Close<=0&&(d.Close=null),d.AvPrice<=0&&(d.AvPrice=null),d.High<=0&&(d.High=null),d.Low<=0&&(d.Low=null),d.AvPrice<=0&&(d.AvPrice=null),r[c]=d}var C=new V;C.Data=r,C.YClose=h,C.Close=s.close,C.Date=o,i.push(C)}for(r=[],n=i.length-1;n>=0;--n){var d=i[n];for(var c in d.Data)r.push(d.Data[c])}return r},this.CODELIKE=function(t){return this.Symbol&&0==this.Symbol.indexOf(t)?1:0},this.NAMELIKE=function(t){return this.Name&&0==this.Name.indexOf(t)?1:0},this.SETCODE=function(){return this.Symbol.indexOf(".sh")?1:(this.Symbol.indexOf(".sz"),0)},this.GetSymbol=function(){return this.Symbol},this.GetName=function(){return this.Name},this.GetIndustry=function(){var t=$e.JOB_DOWNLOAD_GROUP_DATA.toString()+"-Group-"+this.Symbol;if(!this.ExtendData.has(t))return"";var e=this.ExtendData.get(t);if(!e.Industry||e.Industry.length<=0)return"";var a="";for(var i in e.Industry){var n=e.Industry[i];a.length>0&&(a+=" "),a+=n.Name}return a},this.GetRegion=function(){var t=$e.JOB_DOWNLOAD_GROUP_DATA.toString()+"-Group-"+this.Symbol;if(!this.ExtendData.has(t))return"";var e=this.ExtendData.get(t);if(!e.Region||e.Region.length<=0)return"";var a="";for(var i in e.Region){var n=e.Region[i];a.length>0&&(a+=" "),a+=n.Name}return a},this.GetConcept=function(){var t=$e.JOB_DOWNLOAD_GROUP_DATA.toString()+"-Group-"+this.Symbol;if(!this.ExtendData.has(t))return"";var e=this.ExtendData.get(t);if(!e.Concept||e.Concept.length<=0)return"";var a="";for(var i in e.Concept){var n=e.Concept[i];a.length>0&&(a+=" "),a+=n.Name}return a},this.DATE=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(let a in this.Data.Data){var e=this.Data.Data[a];t[a]=e.Date}return t},this.YEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(let a in this.Data.Data){var e=this.Data.Data[a];this.IsNumber(e.Date)?t[a]=parseInt(e.Date/1e4):t[a]=null}return t},this.MONTH=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(let a in this.Data.Data){var e=this.Data.Data[a];this.IsNumber(e.Date)?t[a]=parseInt(e.Date%1e4/100):t[a]=null}return t},this.WEEK=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;var e=new Date;for(let s in this.Data.Data){var a=this.Data.Data[s];if(t[s]=null,this.IsNumber(a.Date)){var i=parseInt(a.Date/1e4),n=parseInt(a.Date%1e4/100),r=a.Date%100;e.setFullYear(i),e.setMonth(n-1),e.setDate(r),t[s]=e.getDay()}}return t},this.REFDATE=function(t,e){var a=null;for(let t in this.Data.Data)if(this.Data.Data[t].Date==e){a=parseInt(t);break}return null==a||a>=t.length?null:t[a]},this.PERIOD=function(){const t=[5,6,7,11,0,1,2,3,4,5,9];return this.Period>=0&&this.Period<=t.length-1?t[this.Period]:this.Period},this.GetDrawNull=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(let e in this.Data.Data)t[e]=null;return t}}ze.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},ze.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},ze.prototype.JsonDataToFinance=function(t){var e;for(let n=1;n<=4;++n){switch(n){case 1:var a=t.finance1,i=t.announcement1;break;case 2:a=t.finance2,i=t.announcement2;break;case 3:a=t.finance3,i=t.announcement3;break;case 4:a=t.finance4,i=t.announcement4}a&&i&&this.IsNumber(i.year)&&this.IsNumber(i.quarter)&&(e?e.Announcement.year<i.year&&(e={Date:t.date,Finance:a,Announcement:i}):e={Date:t.date,Finance:a,Announcement:i})}return e};var je=!1,$e={JOB_DOWNLOAD_SYMBOL_DATA:1,JOB_DOWNLOAD_INDEX_DATA:2,JOB_DOWNLOAD_SYMBOL_LATEST_DATA:3,JOB_DOWNLOAD_INDEX_INCREASE_DATA:4,JOB_DOWNLOAD_VOLR_DATA:5,JOB_DOWNLOAD_GROUP_DATA:6,JOB_DOWNLOAD_TOTAL_EQUITY_DATA:100,JOB_DOWNLOAD_FLOW_EQUITY_DATA:101,JOB_DOWNLOAD_PER_U_PROFIT_DATA:102,JOB_DOWNLOAD_PER_NETASSET_DATA:103,JOB_DOWNLOAD_PER_C_RESERVE_DATA:104,JOB_DOWNLOAD_PER_S_EARNING_DATA:105,JOB_DOWNLOAD_PER_S_EARNING2_DATA:106,JOB_DOWNLOAD_RELEASE_DATE_DATA:107,JOB_DOWNLOAD_N_PROFIT_DATA:108,JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA:109,JOB_DOWNLOAD_MARKETVALUE_DATA:110,JOB_DOWNLOAD_PROFIT_YOY_DATA:111,JOB_DOWNLOAD_AL_RATIO_DATA:112,JOB_DOWNLOAD_DIVIDEND_YIELD_DATA:113,JOB_DOWNLOAD_SHAREHOLDER_DATA:114,JOB_DOWNLOAD_CAPITAL_DATA:200,JOB_DOWNLOAD_EXCHANGE_DATA:201,JOB_DOWNLOAD_MARGIN_BALANCE:1e3,JOB_DOWNLOAD_MARGIN_RATE:1001,JOB_DOWNLOAD_MARGIN_BUY_BALANCE:1010,JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:1011,JOB_DOWNLOAD_MARGIN_BUY_REPAY:1012,JOB_DOWNLOAD_MARGIN_BUY_NET:1013,JOB_DOWNLOAD_MARGIN_SELL_BALANCE:1020,JOB_DOWNLOAD_MARGIN_SELL_VOLUME:1021,JOB_DOWNLOAD_MARGIN_SELL_REPAY:1022,JOB_DOWNLOAD_MARGIN_SELL_NET:1023,JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:2e3,JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:2001,JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:2002,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:2003,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:2004,JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:2005,JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:2006,JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:2007,JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:2008,JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:2009,JOB_DOWNLOAD_HK_TO_SH:2050,JOB_DOWNLOAD_HK_TO_SZ:2051,JOB_DOWNLOAD_HK_TO_SH_SZ:2052,JOB_CUSTOM_FUNCTION_DATA:6e3,JOB_CUSTOM_VARIANT_DATA:6001,JOB_DOWNLOAD_SECTION_SF:2e4,JOB_DOWNLOAD_SECTION_F_01:20001,JOB_DOWNLOAD_SECTION_F_02:20002,JOB_DOWNLOAD_SECTION_F_03:20003,JOB_DOWNLOAD_SECTION_F_04:20004,JOB_DOWNLOAD_SECTION_F_05:20005,JOB_DOWNLOAD_SECTION_F_06:20006,JOB_DOWNLOAD_SECTION_F_07:20007,JOB_DOWNLOAD_SECTION_F_08:20008,JOB_DOWNLOAD_SECTION_F_09:20009,JOB_DOWNLOAD_SECTION_F_10:20010,JOB_DOWNLOAD_SECTION_F_11:20011,JOB_DOWNLOAD_SECTION_F_12:20012,JOB_DOWNLOAD_SECTION_F_13:20013,JOB_DOWNLOAD_SECTION_F_14:20014,JOB_DOWNLOAD_SECTION_F_15:20015,JOB_DOWNLOAD_SECTION_F_16:20016,JOB_DOWNLOAD_SECTION_F_17:20017,JOB_DOWNLOAD_SECTION_F_18:20018,JOB_DOWNLOAD_SECTION_F_19:20019,JOB_DOWNLOAD_SECTION_F_20:20020,JOB_DOWNLOAD_SECTION_F_21:20021,JOB_DOWNLOAD_SECTION_F_22:20022,JOB_DOWNLOAD_SECTION_F_23:20023,JOB_DOWNLOAD_SECTION_F_24:20024,JOB_DOWNLOAD_SECTION_F_25:20025,JOB_DOWNLOAD_SECTION_F_26:20026,JOB_DOWNLOAD_SECTION_F_27:20027,JOB_DOWNLOAD_SECTION_F_28:20028,JOB_DOWNLOAD_SECTION_F_29:20029,JOB_DOWNLOAD_SECTION_F_30:20030,JOB_DOWNLOAD_SECTION_F_31:20031,JOB_DOWNLOAD_SECTION_F_32:20032,JOB_DOWNLOAD_SECTION_F_33:20033,JOB_DOWNLOAD_SECTION_F_34:20034,JOB_DOWNLOAD_SECTION_F_35:20035,JOB_DOWNLOAD_SECTION_F_36:20036,JOB_DOWNLOAD_SECTION_F_37:20037,JOB_DOWNLOAD_SECTION_F_38:20038,JOB_DOWNLOAD_SECTION_F_39:20039,JOB_RUN_SCRIPT:1e4,GetFinnanceJobID:function(t){let e=new Map([[1,$e.JOB_DOWNLOAD_TOTAL_EQUITY_DATA],[7,$e.JOB_DOWNLOAD_FLOW_EQUITY_DATA],[9,$e.JOB_DOWNLOAD_AL_RATIO_DATA],[18,$e.JOB_DOWNLOAD_PER_C_RESERVE_DATA],[30,$e.JOB_DOWNLOAD_N_PROFIT_DATA],[32,$e.JOB_DOWNLOAD_PER_U_PROFIT_DATA],[33,$e.JOB_DOWNLOAD_PER_S_EARNING2_DATA],[34,$e.JOB_DOWNLOAD_PER_NETASSET_DATA],[38,$e.JOB_DOWNLOAD_PER_S_EARNING_DATA],[40,$e.JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA],[41,$e.JOB_DOWNLOAD_MARKETVALUE_DATA],[42,$e.JOB_DOWNLOAD_RELEASE_DATE_DATA],[43,$e.JOB_DOWNLOAD_PROFIT_YOY_DATA],[45,$e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA],[100,$e.JOB_DOWNLOAD_SHAREHOLDER_DATA],[200,$e.JOB_DOWNLOAD_CAPITAL_DATA],[201,$e.JOB_DOWNLOAD_EXCHANGE_DATA]]);return e.has(t)?e.get(t):null},GetMarginJobID:function(t){let e=new Map([[1,$e.JOB_DOWNLOAD_MARGIN_BALANCE],[2,$e.JOB_DOWNLOAD_MARGIN_RATE],[3,$e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE],[4,$e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT],[5,$e.JOB_DOWNLOAD_MARGIN_BUY_REPAY],[6,$e.JOB_DOWNLOAD_MARGIN_BUY_NET],[7,$e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE],[8,$e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME],[9,$e.JOB_DOWNLOAD_MARGIN_SELL_REPAY],[10,$e.JOB_DOWNLOAD_MARGIN_SELL_NET]]);return e.has(t)?e.get(t):null},GetHK2SHSZJobID:function(t){let e=new Map([[1,$e.JOB_DOWNLOAD_HK_TO_SH_SZ],[2,$e.JOB_DOWNLOAD_HK_TO_SH],[3,$e.JOB_DOWNLOAD_HK_TO_SZ]]);return e.has(t)?e.get(t):null},GetNewsAnalysisID:function(t){let e=new Map([[1,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE],[2,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH],[3,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT],[4,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE],[5,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2],[6,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER],[7,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING],[8,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS],[9,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS],[10,$e.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE]]);return e.has(t)?e.get(t):null},GetSectionFinanceID:function(t){let e=new Map([["",$e.JOB_DOWNLOAD_SECTION_F_01],["",$e.JOB_DOWNLOAD_SECTION_F_02],["",$e.JOB_DOWNLOAD_SECTION_F_03],["",$e.JOB_DOWNLOAD_SECTION_F_04],["",$e.JOB_DOWNLOAD_SECTION_F_05],["",$e.JOB_DOWNLOAD_SECTION_F_06],["",$e.JOB_DOWNLOAD_SECTION_F_07],["",$e.JOB_DOWNLOAD_SECTION_F_08],["",$e.JOB_DOWNLOAD_SECTION_F_09],["",$e.JOB_DOWNLOAD_SECTION_F_10],["",$e.JOB_DOWNLOAD_SECTION_F_11],["",$e.JOB_DOWNLOAD_SECTION_F_12],["",$e.JOB_DOWNLOAD_SECTION_F_13],["",$e.JOB_DOWNLOAD_SECTION_F_14],["",$e.JOB_DOWNLOAD_SECTION_F_15],["",$e.JOB_DOWNLOAD_SECTION_F_16],["",$e.JOB_DOWNLOAD_SECTION_F_17],["",$e.JOB_DOWNLOAD_SECTION_F_18],["",$e.JOB_DOWNLOAD_SECTION_F_19],["",$e.JOB_DOWNLOAD_SECTION_F_20],["",$e.JOB_DOWNLOAD_SECTION_F_21],["",$e.JOB_DOWNLOAD_SECTION_F_22],["",$e.JOB_DOWNLOAD_SECTION_F_23],["",$e.JOB_DOWNLOAD_SECTION_F_24],["",$e.JOB_DOWNLOAD_SECTION_F_25],["",$e.JOB_DOWNLOAD_SECTION_F_26],["",$e.JOB_DOWNLOAD_SECTION_F_27],["",$e.JOB_DOWNLOAD_SECTION_F_28],["",$e.JOB_DOWNLOAD_SECTION_F_29],["",$e.JOB_DOWNLOAD_SECTION_F_30],["",$e.JOB_DOWNLOAD_SECTION_F_31],["",$e.JOB_DOWNLOAD_SECTION_F_32],["",$e.JOB_DOWNLOAD_SECTION_F_33],["",$e.JOB_DOWNLOAD_SECTION_F_34],["",$e.JOB_DOWNLOAD_SECTION_F_35],["",$e.JOB_DOWNLOAD_SECTION_F_36],["",$e.JOB_DOWNLOAD_SECTION_F_37],["",$e.JOB_DOWNLOAD_SECTION_F_38],["",$e.JOB_DOWNLOAD_SECTION_F_39]]);return e.has(t)?e.get(t):null},GetSectionReportPeriod:function(t,e){return t>=2e3&&e>=1&&e<=4?{Year:t,Quarter:e}:null}};function Ze(){}function Qe(t){return new Promise(e=>{setTimeout(e,t)})}Ze.Tokenize=function(t){console.log("[JSComplier.Tokenize]",t);let e=new function(t){this.ErrorHandler=new Ye,this.Scanner=new Ue(t,this.ErrorHandler),this.Buffer=[],this.GetNextToken=function(){if(0==this.Buffer.length&&(this.Scanner.ScanComments(),!this.Scanner.IsEOF())){let t=this.Scanner.Lex(),e={Type:Ge[t.Type],Value:this.Scanner.Source.slice(t.Start,t.End)};this.Buffer.push(e)}return this.Buffer.shift()}}(t),a=[];try{for(;;){let t=e.GetNextToken();if(!t)break;a.push(t)}}catch(t){}return a},Ze.Parse=function(t){console.log("[JSComplier.Parse]",t);let e=new Xe(t);return e.Initialize(),e.ParseScript()},Ze.Execute=function(t,e,a){!function(){try{console.log("[JSComplier.Execute]",t,e),console.log("[JSComplier.Execute] parser .....");let i=new Xe(t);i.Initialize();let n=i.ParseScript();console.log("[JSComplier.Execute] parser finish.",n),console.log("[JSComplier.Execute] execute .....");let r=new function(t,e){this.AST=t,this.ErrorHandler=new Ye,this.VarTable=new Map,this.OutVarTable=[],this.Arguments=[],this.ErrorCallback,this.ConstVarTable=new Map([["CLOSE",null],["VOL",null],["OPEN",null],["HIGH",null],["LOW",null],["AMOUNT",null],["C",null],["V",null],["O",null],["H",null],["L",null],["VOLR",null],["DATE",null],["YEAR",null],["MONTH",null],["PERIOD",null],["WEEK",null],["INDEXA",null],["INDEXC",null],["INDEXH",null],["INDEXL",null],["INDEXO",null],["INDEXV",null],["INDEXADV",null],["INDEXDEC",null],["CURRBARSCOUNT",null],["ISLASTBAR",null],["CAPITAL",null],["EXCHANGE",null],["SETCODE",null],["CODE",null],["STKNAME",null],["HYBLOCK",null],["DYBLOCK",null],["GNBLOCK",null],["DRAWNULL",null]]),this.SymbolData=new ze(this.AST,e,this),this.Algorithm=new Je(this.ErrorHandler,this.SymbolData),this.Draw=new Ke(this.ErrorHandler,this.SymbolData),this.JobList=[],this.UpdateUICallback=null,this.CallbackParam=null,this.IsSectionMode=!1,e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam),e.Arguments&&(this.Arguments=e.Arguments),e.IsSectionMode&&(this.IsSectionMode=e.IsSectionMode)),this.Execute=function(){console.log("[JSExecute::Execute] JobList",this.JobList),this.OutVarTable=[],this.VarTable=new Map,this.RunNextJob()},this.RunNextJob=function(){if(!(this.JobList.length<=0)){var t=this.JobList.shift();switch(t.ID){case $e.JOB_DOWNLOAD_SYMBOL_DATA:return this.SymbolData.GetSymbolData();case $e.JOB_DOWNLOAD_INDEX_DATA:return this.SymbolData.GetIndexData();case $e.JOB_DOWNLOAD_INDEX_INCREASE_DATA:return this.SymbolData.GetIndexIncreaseData(t);case $e.JOB_DOWNLOAD_SYMBOL_LATEST_DATA:return this.SymbolData.GetLatestData();case $e.JOB_DOWNLOAD_VOLR_DATA:return this.SymbolData.GetVolRateData(t);case $e.JOB_DOWNLOAD_GROUP_DATA:return this.SymbolData.GetGroupData(t);case $e.JOB_DOWNLOAD_TOTAL_EQUITY_DATA:case $e.JOB_DOWNLOAD_CAPITAL_DATA:case $e.JOB_DOWNLOAD_FLOW_EQUITY_DATA:case $e.JOB_DOWNLOAD_PER_NETASSET_DATA:case $e.JOB_DOWNLOAD_PER_U_PROFIT_DATA:case $e.JOB_DOWNLOAD_PER_C_RESERVE_DATA:case $e.JOB_DOWNLOAD_PER_S_EARNING_DATA:case $e.JOB_DOWNLOAD_PER_S_EARNING2_DATA:case $e.JOB_DOWNLOAD_N_PROFIT_DATA:case $e.JOB_DOWNLOAD_FLOW_MARKETVALUE_DATA:case $e.JOB_DOWNLOAD_MARKETVALUE_DATA:case $e.JOB_DOWNLOAD_EXCHANGE_DATA:case $e.JOB_DOWNLOAD_AL_RATIO_DATA:case $e.JOB_DOWNLOAD_PROFIT_YOY_DATA:case $e.JOB_DOWNLOAD_DIVIDEND_YIELD_DATA:case $e.JOB_DOWNLOAD_SHAREHOLDER_DATA:return this.SymbolData.GetFinanceData(t.ID);case $e.JOB_DOWNLOAD_RELEASE_DATE_DATA:return this.SymbolData.GetCompanyReleaseDate(t.ID);case $e.JOB_DOWNLOAD_MARGIN_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_RATE:case $e.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case $e.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case $e.JOB_DOWNLOAD_MARGIN_BUY_NET:case $e.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case $e.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case $e.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case $e.JOB_DOWNLOAD_MARGIN_SELL_NET:return this.SymbolData.GetMarginData(t.ID);case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:case $e.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:return this.SymbolData.GetNewsAnalysisData(t.ID);case $e.JOB_DOWNLOAD_HK_TO_SH_SZ:case $e.JOB_DOWNLOAD_HK_TO_SH:case $e.JOB_DOWNLOAD_HK_TO_SZ:return this.SymbolData.GetHKToSHSZData(t.ID);case $e.JOB_DOWNLOAD_SECTION_SF:return this.SymbolData.GetSectionFinanceData(t);case $e.JOB_CUSTOM_VARIANT_DATA:return this.SymbolData.DownloadCustomVariantData(t);case $e.JOB_CUSTOM_FUNCTION_DATA:return this.SymbolData.DownloadCustomFunctionData(t);case $e.JOB_RUN_SCRIPT:return this.Run()}}},this.ReadSymbolData=function(t,e){switch(t){case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":return this.SymbolData.GetSymbolCacheData(t);case"VOLR":return this.SymbolData.GetVolRateCacheData(e);case"INDEXA":case"INDEXC":case"INDEXH":case"INDEXH":case"INDEXO":case"INDEXV":case"INDEXL":case"INDEXADV":case"INDEXDEC":return this.SymbolData.GetIndexCacheData(t);case"CURRBARSCOUNT":return this.SymbolData.GetCurrBarsCount();case"ISLASTBAR":return this.SymbolData.GetIsLastBar();case"CAPITAL":return this.SymbolData.GetFinanceCacheData($e.JOB_DOWNLOAD_CAPITAL_DATA);case"EXCHANGE":return this.SymbolData.GetFinanceCacheData($e.JOB_DOWNLOAD_EXCHANGE_DATA);case"SETCODE":return this.SymbolData.SETCODE();case"CODE":return this.SymbolData.GetSymbol();case"STKNAME":return this.SymbolData.GetName();case"HYBLOCK":return this.SymbolData.GetIndustry();case"DYBLOCK":return this.SymbolData.GetRegion();case"GNBLOCK":return this.SymbolData.GetConcept();case"DATE":return this.SymbolData.DATE();case"YEAR":return this.SymbolData.YEAR();case"MONTH":return this.SymbolData.MONTH();case"WEEK":return this.SymbolData.WEEK();case"PERIOD":return this.SymbolData.PERIOD();case"DRAWNULL":return this.SymbolData.GetDrawNull()}},this.ReadCustomVariant=function(t,e){var a=_e.CustomVariant.Data.get(t);if(!a||!a.Read)return[];var i={Name:t,Symbol:this.SymbolData.Symbol,KData:this.SymbolData.Data,Period:this.SymbolData.Period,Right:this.SymbolData.Right};return a.Read(i)},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){let a=this.ConstVarTable.get(t);return null==a&&(a=this.ReadSymbolData(t,e),this.ConstVarTable.set(t,a)),a}return _e.IsCustomVariant(t)?this.ReadCustomVariant(t,e):this.VarTable.has(t)?this.VarTable.get(t):(this.ThrowUnexpectedNode(e,""+t+""),null)},this.SingleDataToArrayData=function(t){let e=this.SymbolData.Data.Data.length,a=[];for(let i=0;i<e;++i)a[i]=t;return a},this.RunAST=function(){for(let t in this.Arguments){let e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(let e in this.AST.Body){let a=this.AST.Body[e];if(this.VisitNode(a),a.Type==We.ExpressionStatement&&a.Expression)if(a.Expression.Type==We.AssignmentExpression&&":"==a.Expression.Operator&&a.Expression.Left){let t=a.Expression.Left.Name,e=this.VarTable.get(t);this.IsSectionMode||Array.isArray(e)||(e="string"==typeof e?this.SingleDataToArrayData(parseFloat(e)):this.SingleDataToArrayData(e)),this.OutVarTable.push({Name:t,Data:e,Type:0})}else if(a.Expression.Type==We.CallExpression){let t=a.Expression;if(this.Draw.IsDrawFunction(t.Callee.Name)){let e=t.Draw;e.Name=t.Callee.Name,this.OutVarTable.push({Name:e.Name,Draw:e,Type:1})}}else if(a.Expression.Type==We.SequenceExpression){let e,i,n,r,s=!1,o=!1,h=!1,l=!1,u=!1,c=!1,f=!0,C=!1,d=!1;for(let t in a.Expression.Expression){let D=a.Expression.Expression[t];if(D.Type==We.AssignmentExpression&&":"==D.Operator&&D.Left){e=D.Left.Name;let t=this.VarTable.get(e);Array.isArray(t)||(t=this.SingleDataToArrayData(t),this.VarTable.set(e,t))}else if(D.Type==We.Identifier){let t=D.Name;"COLORSTICK"===t?s=!0:"POINTDOT"===t?o=!0:"CIRCLEDOT"===t?h=!0:"DOTLINE"==t?d=!0:"LINESTICK"===t?l=!0:"STICK"===t?u=!0:"VOLSTICK"===t?c=!0:0==t.indexOf("COLOR")?n=t:0==t.indexOf("LINETHICK")?r=t:0==t.indexOf("NODRAW")?f=!1:0==t.indexOf("EXDATA")&&(C=!0)}else if(D.Type==We.Literal){let t=this.SingleDataToArrayData(D.Value);e=D.Value.toString(),this.VarTable.set(e,t)}else D.Type==We.CallExpression&&this.Draw.IsDrawFunction(D.Callee.Name)&&((i=D.Draw).Name=D.Callee.Name)}if(o&&e){let t=this.VarTable.get(e);Array.isArray(t)||(t=this.SingleDataToArrayData(t));let a={Name:e,Data:t,Radius:2,Type:3};n&&(a.Color=n),r&&(a.LineWidth=r),this.OutVarTable.push(a)}else if(h&&e){let t=this.VarTable.get(e);Array.isArray(t)||(t=this.SingleDataToArrayData(t));let a={Name:e,Data:t,Radius:1.3,Type:3};n&&(a.Color=n),r&&(a.LineWidth=r),this.OutVarTable.push(a)}else if(l&&e){let t={Name:e,Data:this.VarTable.get(e),Type:4};n&&(t.Color=n),r&&(t.LineWidth=r),this.OutVarTable.push(t)}else if(u&&e){let t={Name:e,Data:this.VarTable.get(e),Type:5};n&&(t.Color=n),r&&(t.LineWidth=r),this.OutVarTable.push(t)}else if(c&&e){let t={Name:e,Data:this.VarTable.get(e),Type:6};n&&(t.Color=n),this.OutVarTable.push(t)}else if(e&&n){let t=this.VarTable.get(e);Array.isArray(t)||(t=this.SingleDataToArrayData(t));let a={Name:e,Data:t,Color:n,Type:0};r&&(a.LineWidth=r),0==f&&(a.IsShow=!1),1==C&&(a.IsExData=!0),1==d&&(a.IsDotLine=!0),this.OutVarTable.push(a)}else if(i){var t={Name:i.Name,Draw:i,Type:1};n&&(t.Color=n),r&&(t.LineWidth=r),this.OutVarTable.push(t)}else if(s&&e){let t={Name:e,Data:this.VarTable.get(e),Color:n,Type:2};this.OutVarTable.push(t)}else if(e){let t={Name:e,Data:this.VarTable.get(e),Type:0};n&&(t.Color=n),r&&(t.LineWidth=r),0==f&&(t.IsShow=!1),1==C&&(t.IsExData=!0),1==d&&(t.IsDotLine=!0),this.OutVarTable.push(t)}}}return console.log("[JSExecute::Run]",this.VarTable),this.OutVarTable},this.Run=function(){try{let t=this.RunAST();console.log("[JSComplier.Run] execute finish",t),this.UpdateUICallback&&(console.log("[JSComplier.Run] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),this.UpdateUICallback(t,this.CallbackParam))}catch(t){console.log(t),t.Job?(console.log("[JSComplier.Run] download job and reexectue",t.Job),this.JobList.push(t.Job),this.JobList.push({ID:$e.JOB_RUN_SCRIPT}),this.Execute()):this.ErrorCallback&&this.ErrorCallback(t)}},this.VisitNode=function(t){switch(t.Type){case We.SequenceExpression:this.VisitSequenceExpression(t);break;case We.ExpressionStatement:this.VisitNode(t.Expression);break;case We.AssignmentExpression:this.VisitAssignmentExpression(t);break;case We.BinaryExpression:case We.LogicalExpression:this.VisitBinaryExpression(t);break;case We.CallExpression:this.VisitCallExpression(t)}},this.VisitSequenceExpression=function(t){for(let e in t.Expression){let a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){let e=t.Callee.Name,a=[];for(let e in t.Arguments){let i,n=t.Arguments[e];i=n.Type==We.BinaryExpression||n.Type==We.LogicalExpression?this.VisitBinaryExpression(n):n.Type==We.CallExpression?this.VisitCallExpression(n):this.GetNodeValue(n),a.push(i)}switch(je&&console.log("[JSExecute::VisitCallExpression]",e,"(",a.toString(),")"),e){case"DYNAINFO":t.Out=this.SymbolData.GetLatestCacheData(a[0]);break;case"STICKLINE":t.Draw=this.Draw.STICKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT":t.Draw=this.Draw.DRAWTEXT(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXT_FIX":t.Draw=this.Draw.DRAWTEXT_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"SUPERDRAWTEXT":t.Draw=this.Draw.SUPERDRAWTEXT(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWICON":t.Draw=this.Draw.DRAWICON(a[0],a[1],a[2]),t.Out=[];break;case"DRAWLINE":t.Draw=this.Draw.DRAWLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData;break;case"DRAWBAND":t.Draw=this.Draw.DRAWBAND(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE":t.Draw=this.Draw.DRAWKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE_IF":t.Draw=this.Draw.DRAWKLINE_IF(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"PLOYLINE":case"POLYLINE":t.Draw=this.Draw.POLYLINE(a[0],a[1]),t.Out=t.Draw.DrawData;break;case"DRAWNUMBER":t.Draw=this.Draw.DRAWNUMBER(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Value;break;case"DRAWCHANNEL":t.Draw=this.Draw.DRAWCHANNEL(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"RGB":t.Out=this.Draw.RGB(a[0],a[1],a[2]);break;case"PARTLINE":t.Draw=this.Draw.PARTLINE(a),t.Out=[];break;case"DRAWGBK":t.Draw=this.Draw.DRAWGBK(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWTEXT_LINE":t.Draw=this.Draw.DRAWTEXT_LINE(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"DRAWRECTREL":t.Draw=this.Draw.DRAWRECTREL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"CODELIKE":t.Out=this.SymbolData.CODELIKE(a[0]);break;case"NAMELIKE":t.Out=this.SymbolData.NAMELIKE(a[1]);break;case"REFDATE":t.Out=this.SymbolData.REFDATE(a[0],a[1]);break;case"FINANCE":t.Out=this.SymbolData.GetFinanceCacheData(a[0],t);break;case"MARGIN":t.Out=this.SymbolData.GetMarginCacheData(a[0],t);break;case"HK2SHSZ":t.Out=this.SymbolData.GetHKToSHSZCacheData(a[0],t);break;case"NEWS":t.Out=this.SymbolData.GetNewsAnalysisCacheData(a[0],t);break;case"UPCOUNT":case"DOWNCOUNT":t.Out=this.SymbolData.GetIndexIncreaseCacheData(e,a[0],t);break;case"SF":t.Out=this.SymbolData.GetSectionFinanceCacheData(a[0],a[1],a[2],t);break;default:t.Out=this.Algorithm.CallFunction(e,a,t,this.SymbolData)}return t.Out},this.VisitAssignmentExpression=function(t){let e=t.Left;e.Type!=We.Identifier&&this.ThrowUnexpectedNode(t);let a=e.Name,i=t.Right,n=null;i.Type==We.BinaryExpression||i.Type==We.LogicalExpression?n=this.VisitBinaryExpression(i):i.Type==We.CallExpression?n=this.VisitCallExpression(i):i.Type==We.Literal?n=i.Value:i.Type==We.Identifier&&(n=this.ReadVariable(i.Name,i)),je&&console.log("[JSExecute::VisitAssignmentExpression]",a," = ",n),this.VarTable.set(a,n)},this.VisitBinaryExpression=function(t){let e=[];e.push(t);let a=null;for(;0!=e.length;)if((a=e[e.length-1]).Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{let i=e.pop();if(i.Type==We.BinaryExpression){let t=this.GetNodeValue(i.Left),e=this.GetNodeValue(i.Right);switch(je&&console.log("[JSExecute::VisitBinaryExpression] BinaryExpression",i,t,e),i.Out=null,i.Operator){case"-":i.Out=this.Algorithm.Subtract(t,e);break;case"*":i.Out=this.Algorithm.Multiply(t,e);break;case"/":i.Out=this.Algorithm.Divide(t,e);break;case"+":i.Out=this.Algorithm.Add(t,e);break;case">":i.Out=this.Algorithm.GT(t,e);break;case">=":i.Out=this.Algorithm.GTE(t,e);break;case"<":i.Out=this.Algorithm.LT(t,e);break;case"<=":i.Out=this.Algorithm.LTE(t,e);break;case"==":case"=":i.Out=this.Algorithm.EQ(t,e);break;case"!=":case"<>":i.Out=this.Algorithm.NEQ(t,e)}je&&console.log("[JSExecute::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==We.LogicalExpression){let t=this.GetNodeValue(i.Left),e=this.GetNodeValue(i.Right);switch(je&&console.log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,t,e),i.Out=null,i.Operator){case"&&":case"AND":i.Out=this.Algorithm.And(t,e);break;case"||":case"OR":i.Out=this.Algorithm.Or(t,e)}je&&console.log("[JSExecute::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case We.Literal:return t.Value;case We.UnaryExpression:if("-"==t.Operator){let e=this.GetNodeValue(t.Argument);return this.Algorithm.Subtract(0,e)}return t.Argument.Value;case We.Identifier:return this.ReadVariable(t.Name,t);case We.BinaryExpression:case We.LogicalExpression:return t.Out;case We.CallExpression:return this.VisitCallExpression(t);default:this.ThrowUnexpectedNode(t)}},this.ThrowUnexpectedNode=function(t,e){let a=t.Marker,i=e||"";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)},this.ThrowDownloadSF=function(t,e,a){let i=t.Marker,n=a;return this.ErrorHandler.ThrowDownloadJob(i.Index,i.Line,i.Column,n,e)},this.ThrowError=function(){}}(n,e);r.ErrorCallback=a,r.JobList=i.Node.GetDataJobList(),r.JobList.push({ID:$e.JOB_RUN_SCRIPT}),r.Execute()}catch(t){console.log(t),a&&a(t)}}(),console.log("[JSComplier.Execute] async execute.")},Ze.SetDomain=function(t,e){t&&(_e.Domain=t),e&&(_e.CacheDomain=e)},Ze.AddIcon=function(t){_e.CustomDrawIcon.Data.set(t.ID,t)},Ze.AddFunction=function(t){if(t&&t){var e=t.Name.toUpperCase();_e.CustomFunction.Data.set(e,t)}},Ze.AddVariant=function(t){if(t&&t){var e=t.Name.toUpperCase();_e.CustomVariant.Data.set(e,t)}};var ta={KLINE_ID:0,MINUTE_ID:2,HISTORY_MINUTE_ID:3,MULTIDAY_MINUTE_ID:4};function ea(t,e,a,i){this.newMethod=Ae,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ID,this.FloatPrecision=2,this.StringFormat,this.KLineType=null,this.InstructionType,this.YSpecificMaxMin=null,this.YSplitScale=null,this.Condition=null,this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20,this.LockMinWidth=null,i&&(i.FloatPrecision>=0&&(this.FloatPrecision=i.FloatPrecision),i.StringFormat>0&&(this.StringFormat=i.StringFormat),i.ID&&(this.ID=i.ID),(i.KLineType>=0||-1===i.KLineType)&&(this.KLineType=i.KLineType),i.InstructionType&&(this.InstructionType=i.InstructionType),i.YSpecificMaxMin&&(this.YSpecificMaxMin=i.YSpecificMaxMin),i.YSplitScale&&(this.YSplitScale=i.YSplitScale),i.Condition&&(this.Condition=i.Condition)),i&&i.Lock&&(1==i.Lock.IsLocked&&(this.IsLocked=!0),i.Lock.Callback&&(this.LockCallback=i.Lock.Callback),i.Lock.ID&&(this.LockID=i.Lock.ID),i.Lock.BG&&(this.LockBG=i.Lock.BG),i.Lock.TextColor&&(this.LockTextColor=i.Lock.TextColor),i.Lock.Text&&(this.LockText=i.Lock.Text),i.Lock.Font&&(this.LockFont=i.Lock.Font),i.Lock.Count&&(this.LockCount=i.Lock.Count),i.Lock.MinWidth&&(this.LockMinWidth=i.Lock.MinWidth*d())),a&&(this.Arguments=a),this.SetLock=function(t){1==t.IsLocked?(this.IsLocked=!0,t.Callback&&(this.LockCallback=t.Callback),t.ID&&(this.LockID=t.ID),t.BG&&(this.LockBG=t.BG),t.TextColor&&(this.LockTextColor=t.TextColor),t.Text&&(this.LockText=t.Text),t.Font&&(this.LockFont=t.Font),t.Count&&(this.LockCount=t.Count),t.MinWidth&&(this.LockMinWidth=t.MinWidth*d())):(this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20)},this.ExecuteScript=function(t,e,a){this.OutVar=[];let i={HQChart:t,WindowIndex:e,HistoryData:a,Self:this},n=ta.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?n=t.DayCount>1?ta.MULTIDAY_MINUTE_ID:ta.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(n=ta.HISTORY_MINUTE_ID);let r={HQDataType:n,Symbol:t.Symbol,Name:t.Name,Data:a,SourceData:t.SourceData,Callback:this.RecvResultData,CallbackParam:i,Async:!0,MaxRequestDataCount:t.MaxReqeustDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Arguments:this.Arguments,Condition:this.Condition,IsBeforeData:t.IsBeforeData};if(n===ta.HISTORY_MINUTE_ID&&(r.TrateDate=t.TradeDate),n===ta.MULTIDAY_MINUTE_ID&&(r.DayCount=t.DayCount),t.NetworkFilter&&(r.NetworkFilter=t.NetworkFilter),this.Condition&&!this.IsMeetCondition(i,r))return void this.ShowConditionError(i);let s=this.Script;Ze.Execute(s,r,t.ScriptErrorCallback)},this.IsMeetCondition=function(t,e){return console.log("[ScriptIndex::IsMeetCondition] ",this.Condition),!(this.Condition.Period&&!this.IsMeetPeriodCondition(t,e))},this.IsMeetPeriodCondition=function(t,e){if(!this.Condition.Period)return!0;for(var a in this.Condition.Period){var i=this.Condition.Period[a];switch(i){case o.MINUTE_ID:if(e.HQDataType==ta.MINUTE_ID)return!0;break;case o.MULTIDAY_MINUTE_ID:if(e.HQDataType==ta.MULTIDAY_MINUTE_ID)return!0;break;case o.KLINE_DAY_ID:case o.KLINE_WEEK_ID:case o.KLINE_MONTH_ID:case o.KLINE_YEAR_ID:case o.KLINE_MINUTE_ID:case o.KLINE_5_MINUTE_ID:case o.KLINE_15_MINUTE_ID:case o.KLINE_30_MINUTE_ID:case o.KLINE_60_MINUTE_ID:if(t.HQChart.Period==i)return!0}}return!1},this.ShowConditionError=function(t){var e=t.HQChart,a=t.WindowIndex;e.DeleteIndexPaint(a),0==a&&e.ShowKLine(!0);let i=new Q;i.Canvas=e.Canvas,i.ChartBorder=e.Frame.SubFrame[a].Frame.ChartBorder,i.ChartFrame=e.Frame.SubFrame[a].Frame,i.NotSupportMessage="",e.ChartPaint.push(i),e.Draw()},this.RecvResultData=function(t,e){let a=e.HQChart,i=e.WindowIndex,n=e.HistoryData;if(e.Self.OutVar=t,e.Self.BindData(a,i,n),0==e.Self.IsLocked)e.HQChart.Frame.SubFrame[i].Frame.SetLock(null);else{let t={IsLocked:!0,Callback:e.Self.LockCallback,IndexName:e.Self.Name,ID:e.Self.LockID,BG:e.Self.LockBG,Text:e.Self.LockText,TextColor:e.Self.LockTextColor,Font:e.Self.LockFont,Count:e.Self.LockCount,MinWidth:e.Self.LockMinWidth};e.HQChart.Frame.SubFrame[i].Frame.SetLock(t)}if(e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw(),a.GetIndexEvent){var r=a.GetIndexEvent();if(r){var s=e.Self,o={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:n,Stock:{Symbol:a.Symbol,Name:a.Name}};r.Callback(r,o,s)}}},this.CreateLine=function(t,e,a,i){let n=new Q;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.LineWidth=t)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateBar=function(t,e,a,i){let n=new st;n.Canvas=t.Canvas,a.Draw.Width>0?n.LineWidth=a.Draw.Width:n.LineWidth=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i);n.Data.Data=a.Draw.DrawData,n.BarType=a.Draw.Type,t.ChartPaint.push(n)},this.CreateText=function(t,e,a,i){let n=new ht;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i);a.Draw.Position&&(n.Position=a.Draw.Position),a.Draw.DrawData&&(n.Data.Data=a.Draw.DrawData),n.Text=a.Draw.Text,a.Draw.Direction>0&&(n.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(n.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(n.TextAlign=a.Draw.TextAlign),t.ChartPaint.push(n)},this.CreateMACD=function(t,e,a,i){let n=new ft;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame;let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(n)},this.CreatePointDot=function(t,e,a,i){let n=new et;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.Radius&&(n.Radius=a.Radius),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.Radius=t)}let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateStick=function(t,e,a,i){let n=new at;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.LineWidth=t)}let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateLineStick=function(t,e,a,i){let n=new it;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.LineWidth=t)}let r=e+1;n.Data.Data=a.Data,t.TitlePaint[r].Data[i]=new Vt(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateStraightLine=function(t,e,a,i){let n=new Q;if(n.DrawType=1,n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.LineWidth=t)}n.Data.Data=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreateVolStick=function(t,e,a,i,n){let r=new nt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.KLineDrawType=t.KLineDrawType,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i);let s=e+1;r.Data.Data=a.Data,r.HistoryData=n,t.TitlePaint[s].Data[i]=new Vt(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateBand=function(t,e,a,i){let n=new dt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.FirstColor=a.Draw.Color[0],n.SecondColor=a.Draw.Color[1],n.Data.Data=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreateKLine=function(t,e,a,i){let n=new z;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Data.Data=a.Draw.DrawData,n.IsShowMaxMinPrice=!1,n.IsShowKTooltip=!1,a.Color&&(n.UnchagneColor=n.DownColor=n.UpColor=this.GetColor(a.Color)),t.ChartPaint.push(n)},this.CreatePolyLine=function(t,e,a,i){let n=new Q;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){let t=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(t)&&t>0&&(n.LineWidth=t)}let r=e+1;n.Data.Data=a.Draw.DrawData,t.TitlePaint[r].Data[i]=new Vt(n.Data," ",n.Color),t.ChartPaint.push(n)},this.CreateBackgroud=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Color=null,this.ColorAngle=0,this.Draw=function(){if(this.IsShow&&this.Color&&!(this.Color.length<=0)){if(2==this.Color.length){if(0==this.ColorAngle)var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()};let a=this.Canvas.createLinearGradient(t.X,t.Y,e.X,e.Y);a.addColorStop(0,this.Color[0]),a.addColorStop(1,this.Color[1]),this.Canvas.fillStyle=a}else{if(1!=this.Color.length)return;this.Canvas.fillStyle=this.Color[0]}var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetWidth(),r=this.ChartBorder.GetHeightEx();this.Canvas.fillRect(a,i,n,r)}}};if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var r=a.Draw.DrawData;n.Color=r.Color,n.ColorAngle=r.Angle}t.ChartPaint.push(n)},this.CreateTextLine=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Text,this.Line,this.Price,this.Draw=function(){if(this.IsShow&&this.Text&&this.Line&&It.IsNumber(this.Price)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx(),i=this.ChartBorder.GetTopEx(),n=this.ChartFrame.GetYFromData(this.Price),r=0;if(this.Text.Title){var s=t+2*d(),o=n;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var h=8*d();n-h<i?(this.Canvas.textBaseline="top",o=i):n+h>a&&(this.Canvas.textBaseline="bottom",o=a),this.Canvas.fillStyle=this.Text.Color,this.Canvas.font=this.Text.Font,this.Canvas.fillText(this.Text.Title,s,o),r=this.Canvas.measureText(this.Text.Title).width+4*d()}this.Line.Type>0&&(2==this.Line.Type&&(this.Canvas.save(),this.Canvas.setLineDash([3,5])),s=t+r,this.Canvas.strokeStyle=this.Line.Color,this.Canvas.beginPath(),this.Canvas.moveTo(s,S(n)),this.Canvas.lineTo(e,S(n)),this.Canvas.stroke(),2==this.Line.Type&&this.Canvas.restore())}},this.GetMaxMin=function(){var t={Min:null,Max:null};return It.IsNumber(this.Price)&&(t.Min=this.Price,t.Max=this.Price),t}};if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var r=a.Draw.DrawData;n.Text=r.Text,n.Line=r.Line,n.Price=r.Price}t.ChartPaint.push(n)},this.CreateNumberText=function(t,e,a,i){let n=new ht;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i);n.Data.Data=a.Draw.DrawData.Value,n.Text=a.Draw.DrawData.Text,t.ChartPaint.push(n)},this.CreateIcon=function(t,e,a,i){let n=new ht;n.Canvas=t.Canvas,n.TextAlign="center",n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame;n.Data.Data=a.Draw.DrawData;var r=a.Draw.Icon;1==r.IconFont?n.IconFont={Family:r.Family,Text:r.Symbol,Color:r.Color}:(n.Text=r.Symbol,a.Color?n.Color=this.GetColor(a.Color):r.Color?n.Color=r.Color:n.Color="rgb(0,0,0)"),t.ChartPaint.push(n)},this.CreateChannel=function(t,e,a,i){let n=new Dt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw.AreaColor?n.AreaColor=a.Draw.AreaColor:a.Color?n.AreaColor=this.GetColor(a.Color):n.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?n.LineColor=a.Draw.Border.Color:n.LineColor=null,a.Draw.Border.Dotted&&(n.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(n.LineWidth=a.Draw.Border.Width),n.Data.Data=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreatePartLine=function(t,e,a,i){let n=new tt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Data.Data=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreateMultiLine=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Lines=[],this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=[];for(var i in this.Lines){var n=this.Lines[i],r={Point:[],Color:n.Color};for(var s in n.Point){var o=n.Point[s];if(It.IsNumber(o.Index)){var h=o.Index-e;if(h>=0&&h<t){var l=this.ChartFrame.GetXFromIndex(h),u=this.ChartFrame.GetYFromData(o.Value);r.Point.push({X:l,Y:u})}}}r.Point.length>=2&&a.push(r)}for(var i in a){var c=a[i];this.DrawLine(c)}}},this.DrawLine=function(t){for(var e in this.Canvas.strokeStyle=t.Color,t.Point){var a=t.Point[e];0==e?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(a.Y,a.X):this.Canvas.moveTo(a.X,a.Y)):this.IsHScreen?this.Canvas.lineTo(a.Y,a.X):this.Canvas.lineTo(a.X,a.Y)}this.Canvas.stroke()},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var n in this.Lines){var r=this.Lines[n];for(var s in r.Point){var o=r.Point[s];o.Index>=a&&o.Index<i&&(null==t.Max?t.Max=o.Value:t.Max<o.Value&&(t.Max=o.Value),null==t.Min?t.Min=o.Value:t.Min>o.Value&&(t.Min=o.Value))}}return t}};n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Data=t.ChartPaint[0].Data,n.Lines=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreateMultiText=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Texts=[],this.Font=fe.DefaultTextFont,this.Color=fe.DefaultTextColor,this.Draw=function(){if(this.IsShow&&this.Data&&!(this.Data.length<=0)&&this.Texts){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight();for(var n in this.Texts){var r=this.Texts[n];if(r.Text&&It.IsNumber(r.Index)){var s=r.Index-e;if(s>=0&&s<t){var o=this.ChartFrame.GetXFromIndex(s),h=this.ChartFrame.GetYFromData(r.Value);r.Color?this.Canvas.fillStyle=r.Color:this.Canvas.fillStyle=this.Color,r.Font?this.Canvas.font=r.Font:this.Canvas.font=this.Font;var l=this.Canvas.measureText(r.Text).width;this.Canvas.textAlign="center",o+l/2>=i?(this.Canvas.textAlign="right",o=i):o-l/2<a&&(this.Canvas.textAlign="left",o=a),1==r.Baseline?this.Canvas.textBaseline="top":2==r.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.Canvas.fillText(r.Text,o,h)}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var n in this.Texts){var r=this.Texts[n];r.Index>=a&&r.Index<i&&(null==t.Max?t.Max=r.Value:t.Max<r.Value&&(t.Max=r.Value),null==t.Min?t.Min=r.Value:t.Min>r.Value&&(t.Min=r.Value))}return t}};n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Data=t.ChartPaint[0].Data,n.Texts=a.Draw.DrawData,t.ChartPaint.push(n)},this.CreateMultiSVGIcon=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Icon,this.Family,this.Color=fe.DefaultTextColor,this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&this.Data&&!(this.Data.length<=0)&&this.Family&&this.Icon){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight();this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen&&(a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom());var n=this.DataWidth+this.DistanceWidth-2;for(var r in n<8&&(n=8),this.Canvas.font=n+"px "+this.Family,this.Icon){var s=this.Icon[r];if(It.IsNumber(s.Index)){var o=s.Index-e;if(o>=0&&o<t){var h=this.ChartFrame.GetXFromIndex(o),l=this.ChartFrame.GetYFromData(s.Value);s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.Color;var u=this.Canvas.measureText(s.Text).width;this.Canvas.textAlign="center",h+u/2>=i?(this.Canvas.textAlign="right",h+=this.DataWidth/2):h-u/2<a&&(this.Canvas.textAlign="left",h-=this.DataWidth/2),1==s.Baseline?this.Canvas.textBaseline="top":2==s.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(l,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Symbol,0,0),this.Canvas.restore()):this.Canvas.fillText(s.Symbol,h,l)}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var n in this.Icon){var r=this.Icon[n];r.Index>=a&&r.Index<i&&(null==t.Max?t.Max=r.Value:t.Max<r.Value&&(t.Max=r.Value),null==t.Min?t.Min=r.Value:t.Min>r.Value&&(t.Min=r.Value))}return t}};n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Data=t.ChartPaint[0].Data,n.Family=a.Draw.DrawData.Family,n.Icon=a.Draw.DrawData.Icon,t.ChartPaint.push(n)},this.CreateRectangle=function(t,e,a,i){let n=new function(){this.newMethod=K,this.newMethod(),delete this.newMethod,this.Color=[],this.Rect,this.BorderColor=fe.FrameBorderPen,this.Draw=function(){if(this.IsShow&&this.Color&&this.Rect&&!(this.Color.length<=0)){this.Canvas.strokeStyle=this.BorderColor;var t=!1;if(2==this.Color.length)this.Canvas.fillStyle=this.Color[0],t=!0;else{if(1!=this.Color.length)return;this.Color[0]&&(this.Canvas.fillStyle=this.Color[0],t=!0)}var e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetHeightEx(),i=this.Rect.Left/1e3*e,n=this.Rect.Top/1e3*a,r=this.Rect.Right/1e3*e,s=this.Rect.Bottom/1e3*a;i=this.ChartBorder.GetLeft()+i,n=this.ChartBorder.GetTopEx()+n,r=this.ChartBorder.GetLeft()+r,s=this.ChartBorder.GetTopEx()+s;var o=Math.abs(i-r),h=Math.abs(n-s);t&&this.Canvas.fillRect(i,n,o,h),this.Canvas.rect(S(i),S(n),g(o),g(h)),this.Canvas.stroke()}}};n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Color=[a.Draw.DrawData.Color],n.Rect=a.Draw.DrawData.Rect,a.Color&&(n.BorderColor=this.GetColor(a.Color)),t.ChartPaint.push(n)},this.CreateSelfKLine=function(t,e,a){let i=new z;i.Canvas=t.Canvas,i.Name="Self Kline",i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Data=a,i.IsShowMaxMinPrice=!1,i.IsShowKTooltip=!1,i.DrawType=this.KLineType,t.ChartPaint.push(i)},this.BindInstructionData=function(t,e,a){if(!(null==this.OutVar||this.OutVar.length<0)){if(2==this.InstructionType){let e=this.OutVar[this.OutVar.length-1];return t.SetInstructionData(this.InstructionType,{Data:e.Data,Name:this.Name,ID:this.ID}),!0}if(1==this.InstructionType){var i,n;for(var r in this.OutVar){let t=this.OutVar[r];"ENTERLONG"==t.Name?i=t.Data:"EXITLONG"==t.Name&&(n=t.Data)}return t.SetInstructionData(this.InstructionType,{Buy:i,Sell:n,Name:this.Name,ID:this.ID}),!0}}},this.BindData=function(t,e,a){if(0==e&&this.InstructionType)return void this.BindInstructionData(t,e,a);if(t.DeleteIndexPaint(e),0==e&&t.ShowKLine(!0),null==this.OutVar||this.OutVar.length<0)return;null!=this.KLineType&&(0===this.KLineType||1===this.KLineType||2===this.KLineType?this.CreateSelfKLine(t,e,a):-1===this.KLineType&&0==e&&t.ShowKLine(!1)),e>=1&&t.Frame&&(t.Frame.SubFrame[e].Frame.YSplitOperator.FloatPrecision=this.FloatPrecision,this.YSpecificMaxMin&&(t.Frame.SubFrame[e].Frame.YSpecificMaxMin=this.YSpecificMaxMin),this.YSplitScale&&(t.Frame.SubFrame[e].Frame.YSplitScale=this.YSplitScale));for(let n in this.OutVar){let r=this.OutVar[n];if(!0!==r.IsExData){if(0==r.Type)this.CreateLine(t,e,r,n);else if(1==r.Type)switch(r.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,r,n);break;case"DRAWTEXT":case"SUPERDRAWTEXT":case"DRAWTEXT_FIX":this.CreateText(t,e,r,n);break;case"DRAWLINE":this.CreateStraightLine(t,e,r,n);break;case"DRAWBAND":this.CreateBand(t,e,r,n);break;case"DRAWKLINE":case"DRAWKLINE_IF":this.CreateKLine(t,e,r,n);break;case"POLYLINE":this.CreatePolyLine(t,e,r,n);break;case"DRAWGBK":this.CreateBackgroud(t,e,r,n);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,r,n);break;case"DRAWNUMBER":this.CreateNumberText(t,e,r,n);break;case"DRAWICON":this.CreateIcon(t,e,r,n);break;case"DRAWCHANNEL":this.CreateChannel(t,e,r,n);break;case"PARTLINE":this.CreatePartLine(t,e,r,n);break;case"DRAWRECTREL":this.CreateRectangle(t,e,r,n);break;case"MULTI_LINE":this.CreateMultiLine(t,e,r,n);break;case"MULTI_TEXT":this.CreateMultiText(t,e,r,n);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,r,n)}else 2==r.Type?this.CreateMACD(t,e,r,n):3==r.Type?this.CreatePointDot(t,e,r,n):4==r.Type?this.CreateLineStick(t,e,r,n):5==r.Type?this.CreateStick(t,e,r,n):6==r.Type&&this.CreateVolStick(t,e,r,n,a);var i=t.TitlePaint[e+1];i&&i.Data&&n<i.Data.length&&(this.StringFormat>0&&(i.Data[n].StringFormat=this.StringFormat),this.FloatPrecision>=0&&(i.Data[n].FloatPrecision=this.FloatPrecision))}}let n=e+1;t.TitlePaint[n].Title=this.Name;let r="";for(let t in this.Arguments){let e=this.Arguments[t];r.length>0&&(r+=","),r+=e.Value.toString()}return r.length>0&&(t.TitlePaint[n].Title=this.Name+"("+r+")"),!0},this.GetDefaultColor=function(t){let e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]},this.GetColor=function(t){let e=new Map([["COLORBLACK","rgb(0,0,0)"],["COLORBLUE","rgb(18,95,216)"],["COLORGREEN","rgb(25,158,0)"],["COLORCYAN","rgb(0,255,198)"],["COLORRED","rgb(238,21,21)"],["COLORMAGENTA","rgb(255,0,222)"],["COLORBROWN","rgb(149,94,15)"],["COLORLIGRAY","rgb(218,218,218)"],["COLORGRAY","rgb(133,133,133)"],["COLORLIBLUE","rgb(94,204,255)"],["COLORLIGREEN","rgb(183,255,190)"],["COLORLICYAN","rgb(154,255,242)"],["COLORLIRED","rgb(255,172,172)"],["COLORLIMAGENTA","rgb(255,145,241)"],["COLORWHITE","rgb(255,255,255)"],["COLORYELLOW","rgb(255,198,0)"]]);return e.has(t)?e.get(t):0==t.indexOf("COLOR")?"#"+t.substr(5):"rgb(30,144,255)"}}function aa(t,e,a,i){this.newMethod=ea,this.newMethod(t,e,a,i),delete this.newMethod,this.ApiUrl,this.HQDataType,i.API&&(i.API.Url&&(this.ApiUrl=i.API.Url),i.API.Name&&(this.Name=this.ID=i.API.Name),i.API.ID&&(this.ID=i.API.ID)),this.ExecuteScript=function(t,e,a){console.log("[APIScriptIndex::ExecuteScript] name, Arguments ",this.Name,this.Arguments);let i=ta.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?i=t.DayCount>1?ta.MULTIDAY_MINUTE_ID:ta.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(i=ta.HISTORY_MINUTE_ID);var n=[];if(this.Arguments)for(var r in this.Arguments){var o=this.Arguments[r];n.push({name:o.Name,value:o.Value})}var h=t.GetRequestDataCount(),l=this,u={indexname:this.ID,symbol:t.Symbol,script:this.Script,args:n,period:t.Period,right:t.Right,maxdatacount:h.MaxRequestDataCount,maxminutedaycount:h.MaxRequestMinuteDayCount,hqdatatype:i};if(i!=ta.MULTIDAY_MINUTE_ID&&i!=ta.MINUTE_ID||(u.daycount=t.DayCount),this.HQDataType=i,t.NetworkFilter){var c={Name:"APIScriptIndex::ExecuteScript",Explain:"",Request:{Url:l.ApiUrl,Type:"POST",Data:u},Self:this,HQChart:t,PreventDefault:!1};if(t.NetworkFilter(c,function(i){l.RecvAPIData(i,t,e,a)}),1==c.PreventDefault)return}s.HttpRequest({url:l.ApiUrl,data:u,type:"post",dataType:"json",async:!0,success:function(i){l.RecvAPIData(i,t,e,a)},error:function(t){l.RecvError(t)}})},this.RecvAPIData=function(t,e,a,i){if(console.log("[APIScriptIndex::RecvAPIData] recv data ",this.Name,t),0==t.code){if(t.outdata&&t.outdata.name&&(this.Name=t.outdata.name),this.Arguments=[],t.outdata.args)for(var n in t.outdata.args){var r=t.outdata.args[n];this.Arguments.push({Name:r.name,Value:r.value})}if(this.HQDataType==ta.KLINE_ID?(this.OutVar=this.FittingData(t.outdata,e),console.log("[APIScriptIndex::RecvAPIData] conver to OutVar ",this.OutVar)):this.OutVar=this.FittingMinuteData(t.outdata,e),this.BindData(e,a,i),0==this.IsLocked)e.Frame.SubFrame[a].Frame.SetLock(null);else{let t={IsLocked:!0,Callback:this.LockCallback,IndexName:this.Name,ID:this.LockID,BG:this.LockBG,Text:this.LockText,TextColor:this.LockTextColor,Font:this.LockFont,Count:this.LockCount,MinWidth:this.LockMinWidth};e.Frame.SubFrame[a].Frame.SetLock(t)}if(e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var s=e.GetIndexEvent();if(s){t={OutVar:param.Self.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};s.Callback(s,t,this)}}}},this.FittingArray=function(t,e,a,i,n){var r,s=i.ChartPaint[0].Data,o=[];for(var h in t){var l=t[h],u=new B;u.Date=e[h],a&&h<a.length&&(u.Time=a[h]),u.Value=l,o.push(u)}r=V.IsDayPeriod(i.Period)?s.GetFittingData(o):s.GetMinuteFittingData(o);var c=new V;return c.Data=r,1==n?c.GetObject():c.GetValue()},this.FittingMultiLine=function(t,e,a,i){var n=i.ChartPaint[0].Data;if(V.IsDayPeriod(i.Period,!0)){var r=[];for(var s in t){var o=t[s];for(var h in o.Point){var l=o.Point[h];r.push(l)}}return r.sort(function(t,e){return t.Date-e.Date}),n.GetDateIndex(r),t}if(V.IsMinutePeriod(i.Period,!0)){r=[];for(var s in t){o=t[s];for(var h in o.Point){l=o.Point[h];r.push(l)}}return r.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),n.GetDateTimeIndex(r),t}return null},this.FittingMultiText=function(t,e,a,i){var n=i.ChartPaint[0].Data;return V.IsDayPeriod(i.Period,!0)?(t.sort(function(t,e){return t.Date-e.Date}),n.GetDateIndex(t),t):V.IsMinutePeriod(i.Period,!0)?(t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),n.GetDateTimeIndex(t),t):null},this.FittingData=function(t,e){var a=t.outvar,i=t.date,n=t.time,r=(e.ChartPaint[0].Data,[]);for(var s in a){var o=a[s],h={Name:o.name,Type:o.type};if(o.color&&(h.Color=o.color),o.data)h.Data=this.FittingArray(o.data,i,n,e),o.color&&(h.Color=o.color),o.linewidth>=1&&(h.LineWidth=o.linewidth),0==o.isshow&&(h.IsShow=!1),1==o.isexdata&&(h.IsExData=!0),r.push(h);else if(o.Draw){var l=o.Draw,u={};"DRAWICON"==l.DrawType?(u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,n,e),h.Draw=u,r.push(h)):"DRAWTEXT"==l.DrawType?(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,n,e),h.Draw=u,r.push(h)):"STICKLINE"==l.DrawType?(u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,n,e,1),h.Draw=u,r.push(h)):"MULTI_LINE"==l.DrawType?(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,n,e),h.Draw=u,r.push(h)):"MULTI_TEXT"==l.DrawType?(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,n,e),h.Draw=u,r.push(h)):"MULTI_SVGICON"==l.DrawType&&(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,n,e),Family:l.DrawData.Family},h.Draw=u,r.push(h))}}return r},this.FittingMinuteData=function(t,e){var a=t.outvar,i=t.date,n=t.time,r=[];for(var s in a){item=a[s];var o={Name:item.name,Type:item.type};item.data&&(o.Data=this.FittingMinuteArray(item.data,i,n,e),item.color&&(o.Color=item.color),item.linewidth>=1&&(o.LineWidth=item.linewidth),0==item.isshow&&(o.IsShow=!1),1==item.isexdata&&(o.IsExData=!0),r.push(o))}return r},this.FittingMinuteArray=function(t,e,a,i){var n=i.SourceData,r=[];for(var s in t){var o=t[s],h=new B;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=o,r.push(h)}var l=n.GetMinuteFittingData(r),u=new V;return u.Data=l,u.GetValue()}}function ia(t,e,a){this.newMethod=ea,this.newMethod(t,null,e,null),delete this.newMethod,this.JsonData,a.JsonData&&(this.JsonData=a.JsonData),this.RequestData=function(t,e,a){if(!this.JsonData)return console.warn("[LocalJsonDataIndex::RequestData] JsonData is null"),void(param.HQChart.ScriptErrorCallback&&param.HQChart.ScriptErrorCallback("json "));this.OutVar=this.FittingData(this.JsonData,a),this.BindData(t,e,a)},this.FittingData=function(t,e){for(i in outVar=t.OutVar,date=t.Date,time=t.Time,result=[],outVar){item=outVar[i];var a=[];for(j in outVarItem={Name:item.Name,Type:item.Type},item.Data){var n=new B;n.Date=date[j],time&&j<time.length&&(n.Time=time[j]),n.Value=item.Data[j],a.push(n)}if(e.Period<4)var r=e.GetFittingData(a);else r=e.GetMinuteFittingData(a);var s=new V;s.Data=r,outVarItem.Data=s.GetValue(),result.push(outVarItem)}return result}}function na(t){this.ID,this.Name,this.Script,this.Arguments=[],this.ClassName="ScriptIndexConsole",this.ErrorCallback,this.FinishCallback,this.IsSectionMode=!1,t&&(t.Name&&(this.Name=t.Name),t.Script&&(this.Script=t.Script),t.ID&&(this.ID=t.ID),t.Args&&(this.Arguments=t.Args),t.ErrorCallback&&(this.ErrorCallback=t.ErrorCallback),t.FinishCallback&&(this.FinishCallback=t.FinishCallback),t.IsSectionMode&&(this.IsSectionMode=t.IsSectionMode)),this.ExecuteScript=function(t){this.OutVar=[];let e={Self:this},a={HQDataType:t.HQDataType,Symbol:t.Stock.Symbol,Name:t.Stock.Name,Period:t.Period,Right:t.Right,Callback:this.RecvResultData,CallbackParam:e,Async:!0,MaxRequestDataCount:t.Request.MaxDataCount,MaxRequestMinuteDayCount:t.Request.MaxMinuteDayCount,Arguments:this.Arguments,IsSectionMode:this.IsSectionMode};t.HQDataType===ta.HISTORY_MINUTE_ID&&(a.TrateDate=t.Request.TradeDate),t.HQDataType==ta.MULTIDAY_MINUTE_ID&&(a.DayCount=t.DayCount);let i=this.Script;Ze.Execute(i,a,this.ErrorCallback)},this.RecvResultData=function(t,e){var a=e.Self,i=e.JSExecute,n=null;i.SymbolData.Data&&(n=i.SymbolData.Data.GetDate());var r={Out:t,Date:n,Stock:{Name:i.SymbolData.Name,Symbol:i.SymbolData.Symbol},Index:{Name:a.Name,ID:a.ID}};i.SymbolData.DataType==ta.MULTIDAY_MINUTE_ID||i.SymbolData.DataType==ta.MINUTE_ID?r.Time=i.SymbolData.Data.GetTime():i.SymbolData.DataType==ta.KLINE_ID&&V.IsMinutePeriod(i.SymbolData.Period,!0)&&(r.Time=i.SymbolData.Data.GetTime()),a.FinishCallback&&a.FinishCallback(r,e.JSExecute)}}na.SetDomain=function(t,e){Ze.SetDomain(t,e)};var ra={BGColor:"rgb(0,0,0)",TooltipBGColor:"rgb(255, 255, 255)",TooltipAlpha:.92,SelectRectBGColor:"rgba(1,130,212,0.06)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(228,228,228)",Minute:{VolBarColor:"rgb(255,236,0)",PriceColor:"rgb(25,180,231)",AreaPriceColor:"rgba(63,158,255,.3)",AvPriceColor:"rgb(255,236,0)"},DefaultTextColor:"rgb(101,104,112)",DefaultTextFont:14*d()+"px ",TitleFont:13*d()+"px ",UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(101,104,112)",CloseLineColor:"rgb(178,34,34)",FrameBorderPen:"rgba(236,236,236,0.13)",FrameSplitPen:"rgba(236,236,236,0.13)",FrameSplitTextColor:"rgb(101,104,112)",FrameSplitTextFont:12*d()+"px ",FrameTitleBGColor:"rgb(0,0,0)",CorssCursorBGColor:"rgb(43,54,69)",CorssCursorTextColor:"rgb(255,255,255)",CorssCursorTextFont:12*d()+"px ",CorssCursorPenColor:"rgb(130,130,130)",KLine:{MaxMin:{Font:12*d()+"px ",Color:"rgb(111,111,111)"},Info:{Investor:{ApiUrl:"https://opensource.zealink.com/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"https://opensource.zealink.com/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"https://opensource.zealink.com/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"https://opensource.zealink.com/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},Index:{LineColor:["rgb(255,189,09)","rgb(22,198,255)","rgb(174,35,161)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],NotSupport:{Font:"14px ",TextColor:"rgb(52,52,52)"}},ColorArray:["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],DrawPicture:{LineColor:"rgb(30,144,255)",PointColor:"rgb(105,105,105)"},TooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:13*d()+"px "},MinuteInfo:{TextColor:"rgb(84,143,255)",Font:14*d()+"px ",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,1)"}},sa={BLACK_ID:1};function oa(){}oa.GetStyleConfig=function(t){switch(t){case sa.BLACK_ID:return ra;default:return null}},e.default={jsChartInit:u.Init,jsChartStyle:u.SetStyle,JSChart:u,MARKET_SUFFIX_NAME:we,IFrameSplitOperator:It,JSKLineInfoMap:Fe,JSCHART_EVENT_ID:c,JSCHART_OPERATOR_ID:f,JSAlgorithm:Je,JSComplier:Ze,JSIndexScript:l,GetDevicePixelRatio:d,GetDevicePixelRatio:d,ScriptIndexConsole:na,STYLE_TYPE_ID:sa,HQChartStyle:oa}},"7t+N":function(t,e,a){var i;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
!function(e,a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?a(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(e)}("undefined"!=typeof window?window:this,function(a,n){"use strict";var r=[],s=a.document,o=Object.getPrototypeOf,h=r.slice,l=r.concat,u=r.push,c=r.indexOf,f={},C=f.toString,d=f.hasOwnProperty,D=d.toString,p=D.call(Object),m={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},S=function(t){return null!=t&&t===t.window},g={type:!0,src:!0,nonce:!0,noModule:!0};function I(t,e,a){var i,n,r=(a=a||s).createElement("script");if(r.text=t,e)for(i in g)(n=e[i]||e.getAttribute&&e.getAttribute(i))&&r.setAttribute(i,n);a.head.appendChild(r).parentNode.removeChild(r)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[C.call(t)]||"object":typeof t}var y=function(t,e){return new y.fn.init(t,e)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function F(t){var e=!!t&&"length"in t&&t.length,a=A(t);return!v(t)&&!S(t)&&("array"===a||0===e||"number"==typeof e&&e>0&&e-1 in t)}y.fn=y.prototype={jquery:"3.4.1",constructor:y,length:0,toArray:function(){return h.call(this)},get:function(t){return null==t?h.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=y.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return y.each(this,t)},map:function(t){return this.pushStack(y.map(this,function(e,a){return t.call(e,a,e)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,a=+t+(t<0?e:0);return this.pushStack(a>=0&&a<e?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},y.extend=y.fn.extend=function(){var t,e,a,i,n,r,s=arguments[0]||{},o=1,h=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[o]||{},o++),"object"==typeof s||v(s)||(s={}),o===h&&(s=this,o--);o<h;o++)if(null!=(t=arguments[o]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(l&&i&&(y.isPlainObject(i)||(n=Array.isArray(i)))?(a=s[e],r=n&&!Array.isArray(a)?[]:n||y.isPlainObject(a)?a:{},n=!1,s[e]=y.extend(l,r,i)):void 0!==i&&(s[e]=i));return s},y.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,a;return!(!t||"[object Object]"!==C.call(t))&&(!(e=o(t))||"function"==typeof(a=d.call(e,"constructor")&&e.constructor)&&D.call(a)===p)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){I(t,{nonce:e&&e.nonce})},each:function(t,e){var a,i=0;if(F(t))for(a=t.length;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(T,"")},makeArray:function(t,e){var a=e||[];return null!=t&&(F(Object(t))?y.merge(a,"string"==typeof t?[t]:t):u.call(a,t)),a},inArray:function(t,e,a){return null==e?-1:c.call(e,t,a)},merge:function(t,e){for(var a=+e.length,i=0,n=t.length;i<a;i++)t[n++]=e[i];return t.length=n,t},grep:function(t,e,a){for(var i=[],n=0,r=t.length,s=!a;n<r;n++)!e(t[n],n)!==s&&i.push(t[n]);return i},map:function(t,e,a){var i,n,r=0,s=[];if(F(t))for(i=t.length;r<i;r++)null!=(n=e(t[r],r,a))&&s.push(n);else for(r in t)null!=(n=e(t[r],r,a))&&s.push(n);return l.apply([],s)},guid:1,support:m}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=r[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){f["[object "+e+"]"]=e.toLowerCase()});var E=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(t){var e,a,i,n,r,s,o,h,l,u,c,f,C,d,D,p,m,v,S,g="sizzle"+1*new Date,I=t.document,A=0,y=0,T=ht(),F=ht(),E=ht(),L=ht(),x=function(t,e){return t===e&&(c=!0),0},N={}.hasOwnProperty,O=[],M=O.pop,w=O.push,R=O.push,P=O.slice,b=function(t,e){for(var a=0,i=t.length;a<i;a++)if(t[a]===e)return a;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",k="\\["+_+"*("+H+")(?:"+_+"*([*^$|!~]?=)"+_+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+_+"*\\]",V=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+k+")*)|.*)\\)|)",G=new RegExp(_+"+","g"),Y=new RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),U=new RegExp("^"+_+"*,"+_+"*"),W=new RegExp("^"+_+"*([>+~]|"+_+")"+_+"*"),X=new RegExp(_+"|>"),J=new RegExp(V),K=new RegExp("^"+H+"$"),q={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+k),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},z=/HTML$/i,j=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+_+"?|("+_+")|.)","ig"),at=function(t,e,a){var i="0x"+e-65536;return i!=i||a?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){f()},st=gt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(O=P.call(I.childNodes),I.childNodes),O[I.childNodes.length].nodeType}catch(t){R={apply:O.length?function(t,e){w.apply(t,P.call(e))}:function(t,e){for(var a=t.length,i=0;t[a++]=e[i++];);t.length=a-1}}}function ot(t,e,i,n){var r,o,l,u,c,d,m,v=e&&e.ownerDocument,A=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==A&&9!==A&&11!==A)return i;if(!n&&((e?e.ownerDocument||e:I)!==C&&f(e),e=e||C,D)){if(11!==A&&(c=Q.exec(t)))if(r=c[1]){if(9===A){if(!(l=e.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(v&&(l=v.getElementById(r))&&S(e,l)&&l.id===r)return i.push(l),i}else{if(c[2])return R.apply(i,e.getElementsByTagName(t)),i;if((r=c[3])&&a.getElementsByClassName&&e.getElementsByClassName)return R.apply(i,e.getElementsByClassName(r)),i}if(a.qsa&&!L[t+" "]&&(!p||!p.test(t))&&(1!==A||"object"!==e.nodeName.toLowerCase())){if(m=t,v=e,1===A&&X.test(t)){for((u=e.getAttribute("id"))?u=u.replace(it,nt):e.setAttribute("id",u=g),o=(d=s(t)).length;o--;)d[o]="#"+u+" "+St(d[o]);m=d.join(","),v=tt.test(t)&&mt(e.parentNode)||e}try{return R.apply(i,v.querySelectorAll(m)),i}catch(e){L(t,!0)}finally{u===g&&e.removeAttribute("id")}}}return h(t.replace(Y,"$1"),e,i,n)}function ht(){var t=[];return function e(a,n){return t.push(a+" ")>i.cacheLength&&delete e[t.shift()],e[a+" "]=n}}function lt(t){return t[g]=!0,t}function ut(t){var e=C.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var a=t.split("|"),n=a.length;n--;)i.attrHandle[a[n]]=e}function ft(t,e){var a=e&&t,i=a&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(a)for(;a=a.nextSibling;)if(a===e)return-1;return t?1:-1}function Ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var a=e.nodeName.toLowerCase();return("input"===a||"button"===a)&&e.type===t}}function Dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return lt(function(e){return e=+e,lt(function(a,i){for(var n,r=t([],a.length,e),s=r.length;s--;)a[n=r[s]]&&(a[n]=!(i[n]=a[n]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in a=ot.support={},r=ot.isXML=function(t){var e=t.namespaceURI,a=(t.ownerDocument||t).documentElement;return!z.test(e||a&&a.nodeName||"HTML")},f=ot.setDocument=function(t){var e,n,s=t?t.ownerDocument||t:I;return s!==C&&9===s.nodeType&&s.documentElement?(d=(C=s).documentElement,D=!r(C),I!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",rt,!1):n.attachEvent&&n.attachEvent("onunload",rt)),a.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),a.getElementsByTagName=ut(function(t){return t.appendChild(C.createComment("")),!t.getElementsByTagName("*").length}),a.getElementsByClassName=Z.test(C.getElementsByClassName),a.getById=ut(function(t){return d.appendChild(t).id=g,!C.getElementsByName||!C.getElementsByName(g).length}),a.getById?(i.filter.ID=function(t){var e=t.replace(et,at);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var a=e.getElementById(t);return a?[a]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,at);return function(t){var a=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return a&&a.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var a,i,n,r=e.getElementById(t);if(r){if((a=r.getAttributeNode("id"))&&a.value===t)return[r];for(n=e.getElementsByName(t),i=0;r=n[i++];)if((a=r.getAttributeNode("id"))&&a.value===t)return[r]}return[]}}),i.find.TAG=a.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):a.qsa?e.querySelectorAll(t):void 0}:function(t,e){var a,i=[],n=0,r=e.getElementsByTagName(t);if("*"===t){for(;a=r[n++];)1===a.nodeType&&i.push(a);return i}return r},i.find.CLASS=a.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&D)return e.getElementsByClassName(t)},m=[],p=[],(a.qsa=Z.test(C.querySelectorAll))&&(ut(function(t){d.appendChild(t).innerHTML="<a id='"+g+"'></a><select id='"+g+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&p.push("[*^$]="+_+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||p.push("\\["+_+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+g+"-]").length||p.push("~="),t.querySelectorAll(":checked").length||p.push(":checked"),t.querySelectorAll("a#"+g+"+*").length||p.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=C.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&p.push("name"+_+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&p.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),p.push(",.*:")})),(a.matchesSelector=Z.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(t){a.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),m.push("!=",V)}),p=p.length&&new RegExp(p.join("|")),m=m.length&&new RegExp(m.join("|")),e=Z.test(d.compareDocumentPosition),S=e||Z.test(d.contains)?function(t,e){var a=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(a.contains?a.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},x=e?function(t,e){if(t===e)return c=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!a.sortDetached&&e.compareDocumentPosition(t)===i?t===C||t.ownerDocument===I&&S(I,t)?-1:e===C||e.ownerDocument===I&&S(I,e)?1:u?b(u,t)-b(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var a,i=0,n=t.parentNode,r=e.parentNode,s=[t],o=[e];if(!n||!r)return t===C?-1:e===C?1:n?-1:r?1:u?b(u,t)-b(u,e):0;if(n===r)return ft(t,e);for(a=t;a=a.parentNode;)s.unshift(a);for(a=e;a=a.parentNode;)o.unshift(a);for(;s[i]===o[i];)i++;return i?ft(s[i],o[i]):s[i]===I?-1:o[i]===I?1:0},C):C},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==C&&f(t),a.matchesSelector&&D&&!L[e+" "]&&(!m||!m.test(e))&&(!p||!p.test(e)))try{var i=v.call(t,e);if(i||a.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){L(e,!0)}return ot(e,C,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==C&&f(t),S(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==C&&f(t);var n=i.attrHandle[e.toLowerCase()],r=n&&N.call(i.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==r?r:a.attributes||!D?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},ot.escape=function(t){return(t+"").replace(it,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],n=0,r=0;if(c=!a.detectDuplicates,u=!a.sortStable&&t.slice(0),t.sort(x),c){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return u=null,t},n=ot.getText=function(t){var e,a="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)a+=n(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)a+=n(e);return a},(i=ot.selectors={cacheLength:50,createPseudo:lt,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,at),t[3]=(t[3]||t[4]||t[5]||"").replace(et,at),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,a=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":a&&J.test(a)&&(e=s(a,!0))&&(e=a.indexOf(")",a.length-e)-a.length)&&(t[0]=t[0].slice(0,e),t[2]=a.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,at).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+_+")"+t+"("+_+"|$)"))&&T(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,a){return function(i){var n=ot.attr(i,t);return null==n?"!="===e:!e||(n+="","="===e?n===a:"!="===e?n!==a:"^="===e?a&&0===n.indexOf(a):"*="===e?a&&n.indexOf(a)>-1:"$="===e?a&&n.slice(-a.length)===a:"~="===e?(" "+n.replace(G," ")+" ").indexOf(a)>-1:"|="===e&&(n===a||n.slice(0,a.length+1)===a+"-"))}},CHILD:function(t,e,a,i,n){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===n?function(t){return!!t.parentNode}:function(e,a,h){var l,u,c,f,C,d,D=r!==s?"nextSibling":"previousSibling",p=e.parentNode,m=o&&e.nodeName.toLowerCase(),v=!h&&!o,S=!1;if(p){if(r){for(;D;){for(f=e;f=f[D];)if(o?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;d=D="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?p.firstChild:p.lastChild],s&&v){for(S=(C=(l=(u=(c=(f=p)[g]||(f[g]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]||[])[0]===A&&l[1])&&l[2],f=C&&p.childNodes[C];f=++C&&f&&f[D]||(S=C=0)||d.pop();)if(1===f.nodeType&&++S&&f===e){u[t]=[A,C,S];break}}else if(v&&(S=C=(l=(u=(c=(f=e)[g]||(f[g]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]||[])[0]===A&&l[1]),!1===S)for(;(f=++C&&f&&f[D]||(S=C=0)||d.pop())&&((o?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++S||(v&&((u=(c=f[g]||(f[g]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]=[A,S]),f!==e)););return(S-=n)===i||S%i==0&&S/i>=0}}},PSEUDO:function(t,e){var a,n=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return n[g]?n(e):n.length>1?(a=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt(function(t,a){for(var i,r=n(t,e),s=r.length;s--;)t[i=b(t,r[s])]=!(a[i]=r[s])}):function(t){return n(t,0,a)}):n}},pseudos:{not:lt(function(t){var e=[],a=[],i=o(t.replace(Y,"$1"));return i[g]?lt(function(t,e,a,n){for(var r,s=i(t,null,n,[]),o=t.length;o--;)(r=s[o])&&(t[o]=!(e[o]=r))}):function(t,n,r){return e[0]=t,i(e,null,r,a),e[0]=null,!a.pop()}}),has:lt(function(t){return function(e){return ot(t,e).length>0}}),contains:lt(function(t){return t=t.replace(et,at),function(e){return(e.textContent||n(e)).indexOf(t)>-1}}),lang:lt(function(t){return K.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,at).toLowerCase(),function(e){var a;do{if(a=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(a=a.toLowerCase())===t||0===a.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var a=t.location&&t.location.hash;return a&&a.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:Dt(!1),disabled:Dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return j.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,a){return[a<0?a+e:a]}),even:pt(function(t,e){for(var a=0;a<e;a+=2)t.push(a);return t}),odd:pt(function(t,e){for(var a=1;a<e;a+=2)t.push(a);return t}),lt:pt(function(t,e,a){for(var i=a<0?a+e:a>e?e:a;--i>=0;)t.push(i);return t}),gt:pt(function(t,e,a){for(var i=a<0?a+e:a;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=Ct(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function vt(){}function St(t){for(var e=0,a=t.length,i="";e<a;e++)i+=t[e].value;return i}function gt(t,e,a){var i=e.dir,n=e.next,r=n||i,s=a&&"parentNode"===r,o=y++;return e.first?function(e,a,n){for(;e=e[i];)if(1===e.nodeType||s)return t(e,a,n);return!1}:function(e,a,h){var l,u,c,f=[A,o];if(h){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,a,h))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(u=(c=e[g]||(e[g]={}))[e.uniqueID]||(c[e.uniqueID]={}),n&&n===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[r])&&l[0]===A&&l[1]===o)return f[2]=l[2];if(u[r]=f,f[2]=t(e,a,h))return!0}return!1}}function It(t){return t.length>1?function(e,a,i){for(var n=t.length;n--;)if(!t[n](e,a,i))return!1;return!0}:t[0]}function At(t,e,a,i,n){for(var r,s=[],o=0,h=t.length,l=null!=e;o<h;o++)(r=t[o])&&(a&&!a(r,i,n)||(s.push(r),l&&e.push(o)));return s}function yt(t,e,a,i,n,r){return i&&!i[g]&&(i=yt(i)),n&&!n[g]&&(n=yt(n,r)),lt(function(r,s,o,h){var l,u,c,f=[],C=[],d=s.length,D=r||function(t,e,a){for(var i=0,n=e.length;i<n;i++)ot(t,e[i],a);return a}(e||"*",o.nodeType?[o]:o,[]),p=!t||!r&&e?D:At(D,f,t,o,h),m=a?n||(r?t:d||i)?[]:s:p;if(a&&a(p,m,o,h),i)for(l=At(m,C),i(l,[],o,h),u=l.length;u--;)(c=l[u])&&(m[C[u]]=!(p[C[u]]=c));if(r){if(n||t){if(n){for(l=[],u=m.length;u--;)(c=m[u])&&l.push(p[u]=c);n(null,m=[],l,h)}for(u=m.length;u--;)(c=m[u])&&(l=n?b(r,c):f[u])>-1&&(r[l]=!(s[l]=c))}}else m=At(m===s?m.splice(d,m.length):m),n?n(null,s,m,h):R.apply(s,m)})}function Tt(t){for(var e,a,n,r=t.length,s=i.relative[t[0].type],o=s||i.relative[" "],h=s?1:0,u=gt(function(t){return t===e},o,!0),c=gt(function(t){return b(e,t)>-1},o,!0),f=[function(t,a,i){var n=!s&&(i||a!==l)||((e=a).nodeType?u(t,a,i):c(t,a,i));return e=null,n}];h<r;h++)if(a=i.relative[t[h].type])f=[gt(It(f),a)];else{if((a=i.filter[t[h].type].apply(null,t[h].matches))[g]){for(n=++h;n<r&&!i.relative[t[n].type];n++);return yt(h>1&&It(f),h>1&&St(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(Y,"$1"),a,h<n&&Tt(t.slice(h,n)),n<r&&Tt(t=t.slice(n)),n<r&&St(t))}f.push(a)}return It(f)}return vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,s=ot.tokenize=function(t,e){var a,n,r,s,o,h,l,u=F[t+" "];if(u)return e?0:u.slice(0);for(o=t,h=[],l=i.preFilter;o;){for(s in a&&!(n=U.exec(o))||(n&&(o=o.slice(n[0].length)||o),h.push(r=[])),a=!1,(n=W.exec(o))&&(a=n.shift(),r.push({value:a,type:n[0].replace(Y," ")}),o=o.slice(a.length)),i.filter)!(n=q[s].exec(o))||l[s]&&!(n=l[s](n))||(a=n.shift(),r.push({value:a,type:s,matches:n}),o=o.slice(a.length));if(!a)break}return e?o.length:o?ot.error(t):F(t,h).slice(0)},o=ot.compile=function(t,e){var a,n=[],r=[],o=E[t+" "];if(!o){for(e||(e=s(t)),a=e.length;a--;)(o=Tt(e[a]))[g]?n.push(o):r.push(o);(o=E(t,function(t,e){var a=e.length>0,n=t.length>0,r=function(r,s,o,h,u){var c,d,p,m=0,v="0",S=r&&[],g=[],I=l,y=r||n&&i.find.TAG("*",u),T=A+=null==I?1:Math.random()||.1,F=y.length;for(u&&(l=s===C||s||u);v!==F&&null!=(c=y[v]);v++){if(n&&c){for(d=0,s||c.ownerDocument===C||(f(c),o=!D);p=t[d++];)if(p(c,s||C,o)){h.push(c);break}u&&(A=T)}a&&((c=!p&&c)&&m--,r&&S.push(c))}if(m+=v,a&&v!==m){for(d=0;p=e[d++];)p(S,g,s,o);if(r){if(m>0)for(;v--;)S[v]||g[v]||(g[v]=M.call(h));g=At(g)}R.apply(h,g),u&&!r&&g.length>0&&m+e.length>1&&ot.uniqueSort(h)}return u&&(A=T,l=I),S};return a?lt(r):r}(r,n))).selector=t}return o},h=ot.select=function(t,e,a,n){var r,h,l,u,c,f="function"==typeof t&&t,C=!n&&s(t=f.selector||t);if(a=a||[],1===C.length){if((h=C[0]=C[0].slice(0)).length>2&&"ID"===(l=h[0]).type&&9===e.nodeType&&D&&i.relative[h[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,at),e)||[])[0]))return a;f&&(e=e.parentNode),t=t.slice(h.shift().value.length)}for(r=q.needsContext.test(t)?0:h.length;r--&&(l=h[r],!i.relative[u=l.type]);)if((c=i.find[u])&&(n=c(l.matches[0].replace(et,at),tt.test(h[0].type)&&mt(e.parentNode)||e))){if(h.splice(r,1),!(t=n.length&&St(h)))return R.apply(a,n),a;break}}return(f||o(t,C))(n,e,!D,a,!e||tt.test(t)&&mt(e.parentNode)||e),a},a.sortStable=g.split("").sort(x).join("")===g,a.detectDuplicates=!!c,f(),a.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(C.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,a){if(!a)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),a.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,a){if(!a&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||ct(B,function(t,e,a){var i;if(!a)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(a);y.find=E,y.expr=E.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=E.uniqueSort,y.text=E.getText,y.isXMLDoc=E.isXML,y.contains=E.contains,y.escapeSelector=E.escape;var L=function(t,e,a){for(var i=[],n=void 0!==a;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&y(t).is(a))break;i.push(t)}return i},x=function(t,e){for(var a=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&a.push(t);return a},N=y.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function w(t,e,a){return v(e)?y.grep(t,function(t,i){return!!e.call(t,i,t)!==a}):e.nodeType?y.grep(t,function(t){return t===e!==a}):"string"!=typeof e?y.grep(t,function(t){return c.call(e,t)>-1!==a}):y.filter(e,t,a)}y.filter=function(t,e,a){var i=e[0];return a&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?y.find.matchesSelector(i,t)?[i]:[]:y.find.matches(t,y.grep(e,function(t){return 1===t.nodeType}))},y.fn.extend({find:function(t){var e,a,i=this.length,n=this;if("string"!=typeof t)return this.pushStack(y(t).filter(function(){for(e=0;e<i;e++)if(y.contains(n[e],this))return!0}));for(a=this.pushStack([]),e=0;e<i;e++)y.find(t,n[e],a);return i>1?y.uniqueSort(a):a},filter:function(t){return this.pushStack(w(this,t||[],!1))},not:function(t){return this.pushStack(w(this,t||[],!0))},is:function(t){return!!w(this,"string"==typeof t&&N.test(t)?y(t):t||[],!1).length}});var R,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(t,e,a){var i,n;if(!t)return this;if(a=a||R,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:P.exec(t))||!i[1]&&e)return!e||e.jquery?(e||a).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof y?e[0]:e,y.merge(this,y.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:s,!0)),M.test(i[1])&&y.isPlainObject(e))for(i in e)v(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(n=s.getElementById(i[2]))&&(this[0]=n,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==a.ready?a.ready(t):t(y):y.makeArray(t,this)}).prototype=y.fn,R=y(s);var b=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function _(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}y.fn.extend({has:function(t){var e=y(t,this),a=e.length;return this.filter(function(){for(var t=0;t<a;t++)if(y.contains(this,e[t]))return!0})},closest:function(t,e){var a,i=0,n=this.length,r=[],s="string"!=typeof t&&y(t);if(!N.test(t))for(;i<n;i++)for(a=this[i];a&&a!==e;a=a.parentNode)if(a.nodeType<11&&(s?s.index(a)>-1:1===a.nodeType&&y.find.matchesSelector(a,t))){r.push(a);break}return this.pushStack(r.length>1?y.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?c.call(y(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),y.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return L(t,"parentNode")},parentsUntil:function(t,e,a){return L(t,"parentNode",a)},next:function(t){return _(t,"nextSibling")},prev:function(t){return _(t,"previousSibling")},nextAll:function(t){return L(t,"nextSibling")},prevAll:function(t){return L(t,"previousSibling")},nextUntil:function(t,e,a){return L(t,"nextSibling",a)},prevUntil:function(t,e,a){return L(t,"previousSibling",a)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(O(t,"template")&&(t=t.content||t),y.merge([],t.childNodes))}},function(t,e){y.fn[t]=function(a,i){var n=y.map(this,e,a);return"Until"!==t.slice(-5)&&(i=a),i&&"string"==typeof i&&(n=y.filter(i,n)),this.length>1&&(B[t]||y.uniqueSort(n),b.test(t)&&n.reverse()),this.pushStack(n)}});var H=/[^\x20\t\r\n\f]+/g;function k(t){return t}function V(t){throw t}function G(t,e,a,i){var n;try{t&&v(n=t.promise)?n.call(t).done(e).fail(a):t&&v(n=t.then)?n.call(t,e,a):e.apply(void 0,[t].slice(i))}catch(t){a.apply(void 0,[t])}}y.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return y.each(t.match(H)||[],function(t,a){e[a]=!0}),e}(t):y.extend({},t);var e,a,i,n,r=[],s=[],o=-1,h=function(){for(n=n||t.once,i=e=!0;s.length;o=-1)for(a=s.shift();++o<r.length;)!1===r[o].apply(a[0],a[1])&&t.stopOnFalse&&(o=r.length,a=!1);t.memory||(a=!1),e=!1,n&&(r=a?[]:"")},l={add:function(){return r&&(a&&!e&&(o=r.length-1,s.push(a)),function e(a){y.each(a,function(a,i){v(i)?t.unique&&l.has(i)||r.push(i):i&&i.length&&"string"!==A(i)&&e(i)})}(arguments),a&&!e&&h()),this},remove:function(){return y.each(arguments,function(t,e){for(var a;(a=y.inArray(e,r,a))>-1;)r.splice(a,1),a<=o&&o--}),this},has:function(t){return t?y.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return n=s=[],r=a="",this},disabled:function(){return!r},lock:function(){return n=s=[],a||e||(r=a=""),this},locked:function(){return!!n},fireWith:function(t,a){return n||(a=[t,(a=a||[]).slice?a.slice():a],s.push(a),e||h()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},y.extend({Deferred:function(t){var e=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var t=arguments;return y.Deferred(function(a){y.each(e,function(e,i){var n=v(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=n&&n.apply(this,arguments);t&&v(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[i[0]+"With"](this,n?[t]:arguments)})}),t=null}).promise()},then:function(t,i,n){var r=0;function s(t,e,i,n){return function(){var o=this,h=arguments,l=function(){var a,l;if(!(t<r)){if((a=i.apply(o,h))===e.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,v(l)?n?l.call(a,s(r,e,k,n),s(r,e,V,n)):(r++,l.call(a,s(r,e,k,n),s(r,e,V,n),s(r,e,k,e.notifyWith))):(i!==k&&(o=void 0,h=[a]),(n||e.resolveWith)(o,h))}},u=n?l:function(){try{l()}catch(a){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(a,u.stackTrace),t+1>=r&&(i!==V&&(o=void 0,h=[a]),e.rejectWith(o,h))}};t?u():(y.Deferred.getStackHook&&(u.stackTrace=y.Deferred.getStackHook()),a.setTimeout(u))}}return y.Deferred(function(a){e[0][3].add(s(0,a,v(n)?n:k,a.notifyWith)),e[1][3].add(s(0,a,v(t)?t:k)),e[2][3].add(s(0,a,v(i)?i:V))}).promise()},promise:function(t){return null!=t?y.extend(t,n):n}},r={};return y.each(e,function(t,a){var s=a[2],o=a[5];n[a[1]]=s.add,o&&s.add(function(){i=o},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(a[3].fire),r[a[0]]=function(){return r[a[0]+"With"](this===r?void 0:this,arguments),this},r[a[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,a=e,i=Array(a),n=h.call(arguments),r=y.Deferred(),s=function(t){return function(a){i[t]=this,n[t]=arguments.length>1?h.call(arguments):a,--e||r.resolveWith(i,n)}};if(e<=1&&(G(t,r.done(s(a)).resolve,r.reject,!e),"pending"===r.state()||v(n[a]&&n[a].then)))return r.then();for(;a--;)G(n[a],s(a),r.reject);return r.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(t,e){a.console&&a.console.warn&&t&&Y.test(t.name)&&a.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},y.readyException=function(t){a.setTimeout(function(){throw t})};var U=y.Deferred();function W(){s.removeEventListener("DOMContentLoaded",W),a.removeEventListener("load",W),y.ready()}y.fn.ready=function(t){return U.then(t).catch(function(t){y.readyException(t)}),this},y.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==t&&--y.readyWait>0||U.resolveWith(s,[y]))}}),y.ready.then=U.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?a.setTimeout(y.ready):(s.addEventListener("DOMContentLoaded",W),a.addEventListener("load",W));var X=function(t,e,a,i,n,r,s){var o=0,h=t.length,l=null==a;if("object"===A(a))for(o in n=!0,a)X(t,e,o,a[o],!0,r,s);else if(void 0!==i&&(n=!0,v(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,a){return l.call(y(t),a)})),e))for(;o<h;o++)e(t[o],a,s?i:i.call(t[o],o,e(t[o],a)));return n?t:l?e.call(t):h?e(t[0],a):r},J=/^-ms-/,K=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function z(t){return t.replace(J,"ms-").replace(K,q)}var j=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function $(){this.expando=y.expando+$.uid++}$.uid=1,$.prototype={cache:function(t){var e=t[this.expando];return e||(e={},j(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,a){var i,n=this.cache(t);if("string"==typeof e)n[z(e)]=a;else for(i in e)n[z(i)]=e[i];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][z(e)]},access:function(t,e,a){return void 0===e||e&&"string"==typeof e&&void 0===a?this.get(t,e):(this.set(t,e,a),void 0!==a?a:e)},remove:function(t,e){var a,i=t[this.expando];if(void 0!==i){if(void 0!==e){a=(e=Array.isArray(e)?e.map(z):(e=z(e))in i?[e]:e.match(H)||[]).length;for(;a--;)delete i[e[a]]}(void 0===e||y.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!y.isEmptyObject(e)}};var Z=new $,Q=new $,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function at(t,e,a){var i;if(void 0===a&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(a=t.getAttribute(i))){try{a=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(a)}catch(t){}Q.set(t,e,a)}else a=void 0;return a}y.extend({hasData:function(t){return Q.hasData(t)||Z.hasData(t)},data:function(t,e,a){return Q.access(t,e,a)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,a){return Z.access(t,e,a)},_removeData:function(t,e){Z.remove(t,e)}}),y.fn.extend({data:function(t,e){var a,i,n,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(n=Q.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(a=s.length;a--;)s[a]&&0===(i=s[a].name).indexOf("data-")&&(i=z(i.slice(5)),at(r,i,n[i]));Z.set(r,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each(function(){Q.set(this,t)}):X(this,function(e){var a;if(r&&void 0===e)return void 0!==(a=Q.get(r,t))?a:void 0!==(a=at(r,t))?a:void 0;this.each(function(){Q.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),y.extend({queue:function(t,e,a){var i;if(t)return e=(e||"fx")+"queue",i=Z.get(t,e),a&&(!i||Array.isArray(a)?i=Z.access(t,e,y.makeArray(a)):i.push(a)),i||[]},dequeue:function(t,e){e=e||"fx";var a=y.queue(t,e),i=a.length,n=a.shift(),r=y._queueHooks(t,e);"inprogress"===n&&(n=a.shift(),i--),n&&("fx"===e&&a.unshift("inprogress"),delete r.stop,n.call(t,function(){y.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var a=e+"queueHooks";return Z.get(t,a)||Z.access(t,a,{empty:y.Callbacks("once memory").add(function(){Z.remove(t,[e+"queue",a])})})}}),y.fn.extend({queue:function(t,e){var a=2;return"string"!=typeof t&&(e=t,t="fx",a--),arguments.length<a?y.queue(this[0],t):void 0===e?this:this.each(function(){var a=y.queue(this,t,e);y._queueHooks(this,t),"fx"===t&&"inprogress"!==a[0]&&y.dequeue(this,t)})},dequeue:function(t){return this.each(function(){y.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var a,i=1,n=y.Deferred(),r=this,s=this.length,o=function(){--i||n.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(a=Z.get(r[s],t+"queueHooks"))&&a.empty&&(i++,a.empty.add(o));return o(),n.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],st=s.documentElement,ot=function(t){return y.contains(t.ownerDocument,t)},ht={composed:!0};st.getRootNode&&(ot=function(t){return y.contains(t.ownerDocument,t)||t.getRootNode(ht)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===y.css(t,"display")},ut=function(t,e,a,i){var n,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in n=a.apply(t,i||[]),e)t.style[r]=s[r];return n};function ct(t,e,a,i){var n,r,s=20,o=i?function(){return i.cur()}:function(){return y.css(t,e,"")},h=o(),l=a&&a[3]||(y.cssNumber[e]?"":"px"),u=t.nodeType&&(y.cssNumber[e]||"px"!==l&&+h)&&nt.exec(y.css(t,e));if(u&&u[3]!==l){for(h/=2,l=l||u[3],u=+h||1;s--;)y.style(t,e,u+l),(1-r)*(1-(r=o()/h||.5))<=0&&(s=0),u/=r;u*=2,y.style(t,e,u+l),a=a||[]}return a&&(u=+u||+h||0,n=a[1]?u+(a[1]+1)*a[2]:+a[2],i&&(i.unit=l,i.start=u,i.end=n)),n}var ft={};function Ct(t){var e,a=t.ownerDocument,i=t.nodeName,n=ft[i];return n||(e=a.body.appendChild(a.createElement(i)),n=y.css(e,"display"),e.parentNode.removeChild(e),"none"===n&&(n="block"),ft[i]=n,n)}function dt(t,e){for(var a,i,n=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(a=i.style.display,e?("none"===a&&(n[r]=Z.get(i,"display")||null,n[r]||(i.style.display="")),""===i.style.display&&lt(i)&&(n[r]=Ct(i))):"none"!==a&&(n[r]="none",Z.set(i,"display",a)));for(r=0;r<s;r++)null!=n[r]&&(t[r].style.display=n[r]);return t}y.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){lt(this)?y(this).show():y(this).hide()})}});var Dt=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i,vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function St(t,e){var a;return a=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?y.merge([t],a):a}function gt(t,e){for(var a=0,i=t.length;a<i;a++)Z.set(t[a],"globalEval",!e||Z.get(e[a],"globalEval"))}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td;var It,At,yt=/<|&#?\w+;/;function Tt(t,e,a,i,n){for(var r,s,o,h,l,u,c=e.createDocumentFragment(),f=[],C=0,d=t.length;C<d;C++)if((r=t[C])||0===r)if("object"===A(r))y.merge(f,r.nodeType?[r]:r);else if(yt.test(r)){for(s=s||c.appendChild(e.createElement("div")),o=(pt.exec(r)||["",""])[1].toLowerCase(),h=vt[o]||vt._default,s.innerHTML=h[1]+y.htmlPrefilter(r)+h[2],u=h[0];u--;)s=s.lastChild;y.merge(f,s.childNodes),(s=c.firstChild).textContent=""}else f.push(e.createTextNode(r));for(c.textContent="",C=0;r=f[C++];)if(i&&y.inArray(r,i)>-1)n&&n.push(r);else if(l=ot(r),s=St(c.appendChild(r),"script"),l&&gt(s),a)for(u=0;r=s[u++];)mt.test(r.type||"")&&a.push(r);return c}It=s.createDocumentFragment().appendChild(s.createElement("div")),(At=s.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),It.appendChild(At),m.checkClone=It.cloneNode(!0).cloneNode(!0).lastChild.checked,It.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!It.cloneNode(!0).lastChild.defaultValue;var Ft=/^key/,Et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Lt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Nt(){return!1}function Ot(t,e){return t===function(){try{return s.activeElement}catch(t){}}()==("focus"===e)}function Mt(t,e,a,i,n,r){var s,o;if("object"==typeof e){for(o in"string"!=typeof a&&(i=i||a,a=void 0),e)Mt(t,o,a,i,e[o],r);return t}if(null==i&&null==n?(n=a,i=a=void 0):null==n&&("string"==typeof a?(n=i,i=void 0):(n=i,i=a,a=void 0)),!1===n)n=Nt;else if(!n)return t;return 1===r&&(s=n,(n=function(t){return y().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=y.guid++)),t.each(function(){y.event.add(this,e,n,i,a)})}function wt(t,e,a){a?(Z.set(t,e,!1),y.event.add(t,e,{namespace:!1,handler:function(t){var i,n,r=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(y.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=h.call(arguments),Z.set(this,e,r),i=a(this,e),this[e](),r!==(n=Z.get(this,e))||i?Z.set(this,e,!1):n={},r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else r.length&&(Z.set(this,e,{value:y.event.trigger(y.extend(r[0],y.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&y.event.add(t,e,xt)}y.event={global:{},add:function(t,e,a,i,n){var r,s,o,h,l,u,c,f,C,d,D,p=Z.get(t);if(p)for(a.handler&&(a=(r=a).handler,n=r.selector),n&&y.find.matchesSelector(st,n),a.guid||(a.guid=y.guid++),(h=p.events)||(h=p.events={}),(s=p.handle)||(s=p.handle=function(e){return void 0!==y&&y.event.triggered!==e.type?y.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(H)||[""]).length;l--;)C=D=(o=Lt.exec(e[l])||[])[1],d=(o[2]||"").split(".").sort(),C&&(c=y.event.special[C]||{},C=(n?c.delegateType:c.bindType)||C,c=y.event.special[C]||{},u=y.extend({type:C,origType:D,data:i,handler:a,guid:a.guid,selector:n,needsContext:n&&y.expr.match.needsContext.test(n),namespace:d.join(".")},r),(f=h[C])||((f=h[C]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,d,s)||t.addEventListener&&t.addEventListener(C,s)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=a.guid)),n?f.splice(f.delegateCount++,0,u):f.push(u),y.event.global[C]=!0)},remove:function(t,e,a,i,n){var r,s,o,h,l,u,c,f,C,d,D,p=Z.hasData(t)&&Z.get(t);if(p&&(h=p.events)){for(l=(e=(e||"").match(H)||[""]).length;l--;)if(C=D=(o=Lt.exec(e[l])||[])[1],d=(o[2]||"").split(".").sort(),C){for(c=y.event.special[C]||{},f=h[C=(i?c.delegateType:c.bindType)||C]||[],o=o[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=f.length;r--;)u=f[r],!n&&D!==u.origType||a&&a.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(r,1),u.selector&&f.delegateCount--,c.remove&&c.remove.call(t,u));s&&!f.length&&(c.teardown&&!1!==c.teardown.call(t,d,p.handle)||y.removeEvent(t,C,p.handle),delete h[C])}else for(C in h)y.event.remove(t,C+e[l],a,i,!0);y.isEmptyObject(h)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,a,i,n,r,s,o=y.event.fix(t),h=new Array(arguments.length),l=(Z.get(this,"events")||{})[o.type]||[],u=y.event.special[o.type]||{};for(h[0]=o,e=1;e<arguments.length;e++)h[e]=arguments[e];if(o.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,o)){for(s=y.event.handlers.call(this,o,l),e=0;(n=s[e++])&&!o.isPropagationStopped();)for(o.currentTarget=n.elem,a=0;(r=n.handlers[a++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==r.namespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(i=((y.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,h))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,o),o.result}},handlers:function(t,e){var a,i,n,r,s,o=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(r=[],s={},a=0;a<h;a++)void 0===s[n=(i=e[a]).selector+" "]&&(s[n]=i.needsContext?y(n,this).index(l)>-1:y.find(n,this,null,[l]).length),s[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return l=this,h<e.length&&o.push({elem:l,handlers:e.slice(h)}),o},addProp:function(t,e){Object.defineProperty(y.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[y.expando]?t:new y.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Dt.test(e.type)&&e.click&&O(e,"input")&&wt(e,"click",xt),!1},trigger:function(t){var e=this||t;return Dt.test(e.type)&&e.click&&O(e,"input")&&wt(e,"click"),!0},_default:function(t){var e=t.target;return Dt.test(e.type)&&e.click&&O(e,"input")&&Z.get(e,"click")||O(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},y.removeEvent=function(t,e,a){t.removeEventListener&&t.removeEventListener(e,a)},y.Event=function(t,e){if(!(this instanceof y.Event))return new y.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Nt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&y.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:Nt,isPropagationStopped:Nt,isImmediatePropagationStopped:Nt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Ft.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Et.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(t,e){y.event.special[t]={setup:function(){return wt(this,t,Ot),!1},trigger:function(){return wt(this,t),!0},delegateType:e}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){y.event.special[t]={delegateType:e,bindType:e,handle:function(t){var a,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||y.contains(this,i))||(t.type=n.origType,a=n.handler.apply(this,arguments),t.type=e),a}}}),y.fn.extend({on:function(t,e,a,i){return Mt(this,t,e,a,i)},one:function(t,e,a,i){return Mt(this,t,e,a,i,1)},off:function(t,e,a){var i,n;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,y(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return!1!==e&&"function"!=typeof e||(a=e,e=void 0),!1===a&&(a=Nt),this.each(function(){y.event.remove(this,t,a,e)})}});var Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pt=/<script|<style|<link/i,bt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function _t(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&y(t).children("tbody")[0]||t}function Ht(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function kt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Vt(t,e){var a,i,n,r,s,o,h,l;if(1===e.nodeType){if(Z.hasData(t)&&(r=Z.access(t),s=Z.set(e,r),l=r.events))for(n in delete s.handle,s.events={},l)for(a=0,i=l[n].length;a<i;a++)y.event.add(e,n,l[n][a]);Q.hasData(t)&&(o=Q.access(t),h=y.extend({},o),Q.set(e,h))}}function Gt(t,e,a,i){e=l.apply([],e);var n,r,s,o,h,u,c=0,f=t.length,C=f-1,d=e[0],D=v(d);if(D||f>1&&"string"==typeof d&&!m.checkClone&&bt.test(d))return t.each(function(n){var r=t.eq(n);D&&(e[0]=d.call(this,n,r.html())),Gt(r,e,a,i)});if(f&&(r=(n=Tt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===n.childNodes.length&&(n=r),r||i)){for(o=(s=y.map(St(n,"script"),Ht)).length;c<f;c++)h=n,c!==C&&(h=y.clone(h,!0,!0),o&&y.merge(s,St(h,"script"))),a.call(t[c],h,c);if(o)for(u=s[s.length-1].ownerDocument,y.map(s,kt),c=0;c<o;c++)h=s[c],mt.test(h.type||"")&&!Z.access(h,"globalEval")&&y.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?y._evalUrl&&!h.noModule&&y._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")}):I(h.textContent.replace(Bt,""),h,u))}return t}function Yt(t,e,a){for(var i,n=e?y.filter(e,t):t,r=0;null!=(i=n[r]);r++)a||1!==i.nodeType||y.cleanData(St(i)),i.parentNode&&(a&&ot(i)&&gt(St(i,"script")),i.parentNode.removeChild(i));return t}y.extend({htmlPrefilter:function(t){return t.replace(Rt,"<$1></$2>")},clone:function(t,e,a){var i,n,r,s,o,h,l,u=t.cloneNode(!0),c=ot(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||y.isXMLDoc(t)))for(s=St(u),i=0,n=(r=St(t)).length;i<n;i++)o=r[i],h=s[i],void 0,"input"===(l=h.nodeName.toLowerCase())&&Dt.test(o.type)?h.checked=o.checked:"input"!==l&&"textarea"!==l||(h.defaultValue=o.defaultValue);if(e)if(a)for(r=r||St(t),s=s||St(u),i=0,n=r.length;i<n;i++)Vt(r[i],s[i]);else Vt(t,u);return(s=St(u,"script")).length>0&&gt(s,!c&&St(t,"script")),u},cleanData:function(t){for(var e,a,i,n=y.event.special,r=0;void 0!==(a=t[r]);r++)if(j(a)){if(e=a[Z.expando]){if(e.events)for(i in e.events)n[i]?y.event.remove(a,i):y.removeEvent(a,i,e.handle);a[Z.expando]=void 0}a[Q.expando]&&(a[Q.expando]=void 0)}}}),y.fn.extend({detach:function(t){return Yt(this,t,!0)},remove:function(t){return Yt(this,t)},text:function(t){return X(this,function(t){return void 0===t?y.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Gt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_t(this,t).appendChild(t)})},prepend:function(){return Gt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_t(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Gt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Gt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(y.cleanData(St(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return y.clone(this,t,e)})},html:function(t){return X(this,function(t){var e=this[0]||{},a=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!vt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=y.htmlPrefilter(t);try{for(;a<i;a++)1===(e=this[a]||{}).nodeType&&(y.cleanData(St(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Gt(this,arguments,function(e){var a=this.parentNode;y.inArray(this,t)<0&&(y.cleanData(St(this)),a&&a.replaceChild(e,this))},t)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){y.fn[t]=function(t){for(var a,i=[],n=y(t),r=n.length-1,s=0;s<=r;s++)a=s===r?this:this.clone(!0),y(n[s])[e](a),u.apply(i,a.get());return this.pushStack(i)}});var Ut=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Wt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=a),e.getComputedStyle(t)},Xt=new RegExp(rt.join("|"),"i");function Jt(t,e,a){var i,n,r,s,o=t.style;return(a=a||Wt(t))&&(""!==(s=a.getPropertyValue(e)||a[e])||ot(t)||(s=y.style(t,e)),!m.pixelBoxStyles()&&Ut.test(s)&&Xt.test(e)&&(i=o.width,n=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=a.width,o.width=i,o.minWidth=n,o.maxWidth=r)),void 0!==s?s+"":s}function Kt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(l).appendChild(u);var t=a.getComputedStyle(u);i="1%"!==t.top,h=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),n=36===e(t.width),u.style.position="absolute",r=12===e(u.offsetWidth/3),st.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var i,n,r,o,h,l=s.createElement("div"),u=s.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,y.extend(m,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),h},scrollboxSize:function(){return t(),r}}))}();var qt=["Webkit","Moz","ms"],zt=s.createElement("div").style,jt={};function $t(t){var e=y.cssProps[t]||jt[t];return e||(t in zt?t:jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),a=qt.length;a--;)if((t=qt[a]+e)in zt)return t}(t)||t)}var Zt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"};function ae(t,e,a){var i=nt.exec(e);return i?Math.max(0,i[2]-(a||0))+(i[3]||"px"):e}function ie(t,e,a,i,n,r){var s="width"===e?1:0,o=0,h=0;if(a===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===a&&(h+=y.css(t,a+rt[s],!0,n)),i?("content"===a&&(h-=y.css(t,"padding"+rt[s],!0,n)),"margin"!==a&&(h-=y.css(t,"border"+rt[s]+"Width",!0,n))):(h+=y.css(t,"padding"+rt[s],!0,n),"padding"!==a?h+=y.css(t,"border"+rt[s]+"Width",!0,n):o+=y.css(t,"border"+rt[s]+"Width",!0,n));return!i&&r>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-h-o-.5))||0),h}function ne(t,e,a){var i=Wt(t),n=(!m.boxSizingReliable()||a)&&"border-box"===y.css(t,"boxSizing",!1,i),r=n,s=Jt(t,e,i),o="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(s)){if(!a)return s;s="auto"}return(!m.boxSizingReliable()&&n||"auto"===s||!parseFloat(s)&&"inline"===y.css(t,"display",!1,i))&&t.getClientRects().length&&(n="border-box"===y.css(t,"boxSizing",!1,i),(r=o in t)&&(s=t[o])),(s=parseFloat(s)||0)+ie(t,e,a||(n?"border":"content"),r,i,s)+"px"}function re(t,e,a,i,n){return new re.prototype.init(t,e,a,i,n)}y.extend({cssHooks:{opacity:{get:function(t,e){if(e){var a=Jt(t,"opacity");return""===a?"1":a}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,a,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,r,s,o=z(e),h=Qt.test(e),l=t.style;if(h||(e=$t(o)),s=y.cssHooks[e]||y.cssHooks[o],void 0===a)return s&&"get"in s&&void 0!==(n=s.get(t,!1,i))?n:l[e];"string"===(r=typeof a)&&(n=nt.exec(a))&&n[1]&&(a=ct(t,e,n),r="number"),null!=a&&a==a&&("number"!==r||h||(a+=n&&n[3]||(y.cssNumber[o]?"":"px")),m.clearCloneStyle||""!==a||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(a=s.set(t,a,i))||(h?l.setProperty(e,a):l[e]=a))}},css:function(t,e,a,i){var n,r,s,o=z(e);return Qt.test(e)||(e=$t(o)),(s=y.cssHooks[e]||y.cssHooks[o])&&"get"in s&&(n=s.get(t,!0,a)),void 0===n&&(n=Jt(t,e,i)),"normal"===n&&e in ee&&(n=ee[e]),""===a||a?(r=parseFloat(n),!0===a||isFinite(r)?r||0:n):n}}),y.each(["height","width"],function(t,e){y.cssHooks[e]={get:function(t,a,i){if(a)return!Zt.test(y.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):ut(t,te,function(){return ne(t,e,i)})},set:function(t,a,i){var n,r=Wt(t),s=!m.scrollboxSize()&&"absolute"===r.position,o=(s||i)&&"border-box"===y.css(t,"boxSizing",!1,r),h=i?ie(t,e,i,o,r):0;return o&&s&&(h-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-ie(t,e,"border",!1,r)-.5)),h&&(n=nt.exec(a))&&"px"!==(n[3]||"px")&&(t.style[e]=a,a=y.css(t,e)),ae(0,a,h)}}}),y.cssHooks.marginLeft=Kt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(t,e){y.cssHooks[t+e]={expand:function(a){for(var i=0,n={},r="string"==typeof a?a.split(" "):[a];i<4;i++)n[t+rt[i]+e]=r[i]||r[i-2]||r[0];return n}},"margin"!==t&&(y.cssHooks[t+e].set=ae)}),y.fn.extend({css:function(t,e){return X(this,function(t,e,a){var i,n,r={},s=0;if(Array.isArray(e)){for(i=Wt(t),n=e.length;s<n;s++)r[e[s]]=y.css(t,e[s],!1,i);return r}return void 0!==a?y.style(t,e,a):y.css(t,e)},t,e,arguments.length>1)}}),y.Tween=re,re.prototype={constructor:re,init:function(t,e,a,i,n,r){this.elem=t,this.prop=a,this.easing=n||y.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(y.cssNumber[a]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return t&&t.get?t.get(this):re.propHooks._default.get(this)},run:function(t){var e,a=re.propHooks[this.prop];return this.options.duration?this.pos=e=y.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):re.propHooks._default.set(this),this}},re.prototype.init.prototype=re.prototype,re.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=y.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){y.fx.step[t.prop]?y.fx.step[t.prop](t):1!==t.elem.nodeType||!y.cssHooks[t.prop]&&null==t.elem.style[$t(t.prop)]?t.elem[t.prop]=t.now:y.style(t.elem,t.prop,t.now+t.unit)}}},re.propHooks.scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},y.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},y.fx=re.prototype.init,y.fx.step={};var se,oe,he=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function ue(){oe&&(!1===s.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(ue):a.setTimeout(ue,y.fx.interval),y.fx.tick())}function ce(){return a.setTimeout(function(){se=void 0}),se=Date.now()}function fe(t,e){var a,i=0,n={height:t};for(e=e?1:0;i<4;i+=2-e)n["margin"+(a=rt[i])]=n["padding"+a]=t;return e&&(n.opacity=n.width=t),n}function Ce(t,e,a){for(var i,n=(de.tweeners[e]||[]).concat(de.tweeners["*"]),r=0,s=n.length;r<s;r++)if(i=n[r].call(a,e,t))return i}function de(t,e,a){var i,n,r=0,s=de.prefilters.length,o=y.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var e=se||ce(),a=Math.max(0,l.startTime+l.duration-e),i=1-(a/l.duration||0),r=0,s=l.tweens.length;r<s;r++)l.tweens[r].run(i);return o.notifyWith(t,[l,i,a]),i<1&&s?a:(s||o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l]),!1)},l=o.promise({elem:t,props:y.extend({},e),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},a),originalProperties:e,originalOptions:a,startTime:se||ce(),duration:a.duration,tweens:[],createTween:function(e,a){var i=y.Tween(t,l.opts,e,a,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var a=0,i=e?l.tweens.length:0;if(n)return this;for(n=!0;a<i;a++)l.tweens[a].run(1);return e?(o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l,e])):o.rejectWith(t,[l,e]),this}}),u=l.props;for(!function(t,e){var a,i,n,r,s;for(a in t)if(n=e[i=z(a)],r=t[a],Array.isArray(r)&&(n=r[1],r=t[a]=r[0]),a!==i&&(t[i]=r,delete t[a]),(s=y.cssHooks[i])&&"expand"in s)for(a in r=s.expand(r),delete t[i],r)a in t||(t[a]=r[a],e[a]=n);else e[i]=n}(u,l.opts.specialEasing);r<s;r++)if(i=de.prefilters[r].call(l,t,u,l.opts))return v(i.stop)&&(y._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return y.map(u,Ce,l),v(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),y.fx.timer(y.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l}y.Animation=y.extend(de,{tweeners:{"*":[function(t,e){var a=this.createTween(t,e);return ct(a.elem,t,nt.exec(e),a),a}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(H);for(var a,i=0,n=t.length;i<n;i++)a=t[i],de.tweeners[a]=de.tweeners[a]||[],de.tweeners[a].unshift(e)},prefilters:[function(t,e,a){var i,n,r,s,o,h,l,u,c="width"in e||"height"in e,f=this,C={},d=t.style,D=t.nodeType&&lt(t),p=Z.get(t,"fxshow");for(i in a.queue||(null==(s=y._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,y.queue(t,"fx").length||s.empty.fire()})})),e)if(n=e[i],he.test(n)){if(delete e[i],r=r||"toggle"===n,n===(D?"hide":"show")){if("show"!==n||!p||void 0===p[i])continue;D=!0}C[i]=p&&p[i]||y.style(t,i)}if((h=!y.isEmptyObject(e))||!y.isEmptyObject(C))for(i in c&&1===t.nodeType&&(a.overflow=[d.overflow,d.overflowX,d.overflowY],null==(l=p&&p.display)&&(l=Z.get(t,"display")),"none"===(u=y.css(t,"display"))&&(l?u=l:(dt([t],!0),l=t.style.display||l,u=y.css(t,"display"),dt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===y.css(t,"float")&&(h||(f.done(function(){d.display=l}),null==l&&(u=d.display,l="none"===u?"":u)),d.display="inline-block")),a.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=a.overflow[0],d.overflowX=a.overflow[1],d.overflowY=a.overflow[2]})),h=!1,C)h||(p?"hidden"in p&&(D=p.hidden):p=Z.access(t,"fxshow",{display:l}),r&&(p.hidden=!D),D&&dt([t],!0),f.done(function(){for(i in D||dt([t]),Z.remove(t,"fxshow"),C)y.style(t,i,C[i])})),h=Ce(D?p[i]:0,i,f),i in p||(p[i]=h.start,D&&(h.end=h.start,h.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),y.speed=function(t,e,a){var i=t&&"object"==typeof t?y.extend({},t):{complete:a||!a&&e||v(t)&&t,duration:t,easing:a&&e||e&&!v(e)&&e};return y.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in y.fx.speeds?i.duration=y.fx.speeds[i.duration]:i.duration=y.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&y.dequeue(this,i.queue)},i},y.fn.extend({fadeTo:function(t,e,a,i){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,a,i)},animate:function(t,e,a,i){var n=y.isEmptyObject(t),r=y.speed(e,a,i),s=function(){var e=de(this,y.extend({},t),r);(n||Z.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,a){var i=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof t&&(a=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=y.timers,s=Z.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&le.test(n)&&i(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(a),e=!1,r.splice(n,1));!e&&a||y.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,a=Z.get(this),i=a[t+"queue"],n=a[t+"queueHooks"],r=y.timers,s=i?i.length:0;for(a.finish=!0,y.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete a.finish})}}),y.each(["toggle","show","hide"],function(t,e){var a=y.fn[e];y.fn[e]=function(t,i,n){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(fe(e,!0),t,i,n)}}),y.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){y.fn[t]=function(t,a,i){return this.animate(e,t,a,i)}}),y.timers=[],y.fx.tick=function(){var t,e=0,a=y.timers;for(se=Date.now();e<a.length;e++)(t=a[e])()||a[e]!==t||a.splice(e--,1);a.length||y.fx.stop(),se=void 0},y.fx.timer=function(t){y.timers.push(t),y.fx.start()},y.fx.interval=13,y.fx.start=function(){oe||(oe=!0,ue())},y.fx.stop=function(){oe=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(t,e){return t=y.fx&&y.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var n=a.setTimeout(e,t);i.stop=function(){a.clearTimeout(n)}})},function(){var t=s.createElement("input"),e=s.createElement("select").appendChild(s.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=s.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var De,pe=y.expr.attrHandle;y.fn.extend({attr:function(t,e){return X(this,y.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){y.removeAttr(this,t)})}}),y.extend({attr:function(t,e,a){var i,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?y.prop(t,e,a):(1===r&&y.isXMLDoc(t)||(n=y.attrHooks[e.toLowerCase()]||(y.expr.match.bool.test(e)?De:void 0)),void 0!==a?null===a?void y.removeAttr(t,e):n&&"set"in n&&void 0!==(i=n.set(t,a,e))?i:(t.setAttribute(e,a+""),a):n&&"get"in n&&null!==(i=n.get(t,e))?i:null==(i=y.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&O(t,"input")){var a=t.value;return t.setAttribute("type",e),a&&(t.value=a),e}}}},removeAttr:function(t,e){var a,i=0,n=e&&e.match(H);if(n&&1===t.nodeType)for(;a=n[i++];)t.removeAttribute(a)}}),De={set:function(t,e,a){return!1===e?y.removeAttr(t,a):t.setAttribute(a,a),a}},y.each(y.expr.match.bool.source.match(/\w+/g),function(t,e){var a=pe[e]||y.find.attr;pe[e]=function(t,e,i){var n,r,s=e.toLowerCase();return i||(r=pe[s],pe[s]=n,n=null!=a(t,e,i)?s:null,pe[s]=r),n}});var me=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;function Se(t){return(t.match(H)||[]).join(" ")}function ge(t){return t.getAttribute&&t.getAttribute("class")||""}function Ie(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(H)||[]}y.fn.extend({prop:function(t,e){return X(this,y.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[y.propFix[t]||t]})}}),y.extend({prop:function(t,e,a){var i,n,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&y.isXMLDoc(t)||(e=y.propFix[e]||e,n=y.propHooks[e]),void 0!==a?n&&"set"in n&&void 0!==(i=n.set(t,a,e))?i:t[e]=a:n&&"get"in n&&null!==(i=n.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=y.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(y.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),y.fn.extend({addClass:function(t){var e,a,i,n,r,s,o,h=0;if(v(t))return this.each(function(e){y(this).addClass(t.call(this,e,ge(this)))});if((e=Ie(t)).length)for(;a=this[h++];)if(n=ge(a),i=1===a.nodeType&&" "+Se(n)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n!==(o=Se(i))&&a.setAttribute("class",o)}return this},removeClass:function(t){var e,a,i,n,r,s,o,h=0;if(v(t))return this.each(function(e){y(this).removeClass(t.call(this,e,ge(this)))});if(!arguments.length)return this.attr("class","");if((e=Ie(t)).length)for(;a=this[h++];)if(n=ge(a),i=1===a.nodeType&&" "+Se(n)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");n!==(o=Se(i))&&a.setAttribute("class",o)}return this},toggleClass:function(t,e){var a=typeof t,i="string"===a||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):v(t)?this.each(function(a){y(this).toggleClass(t.call(this,a,ge(this),e),e)}):this.each(function(){var e,n,r,s;if(i)for(n=0,r=y(this),s=Ie(t);e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==a||((e=ge(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))})},hasClass:function(t){var e,a,i=0;for(e=" "+t+" ";a=this[i++];)if(1===a.nodeType&&(" "+Se(ge(a))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;y.fn.extend({val:function(t){var e,a,i,n=this[0];return arguments.length?(i=v(t),this.each(function(a){var n;1===this.nodeType&&(null==(n=i?t.call(this,a,y(this).val()):t)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=y.map(n,function(t){return null==t?"":t+""})),(e=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))})):n?(e=y.valHooks[n.type]||y.valHooks[n.nodeName.toLowerCase()])&&"get"in e&&void 0!==(a=e.get(n,"value"))?a:"string"==typeof(a=n.value)?a.replace(Ae,""):null==a?"":a:void 0}}),y.extend({valHooks:{option:{get:function(t){var e=y.find.attr(t,"value");return null!=e?e:Se(y.text(t))}},select:{get:function(t){var e,a,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type,o=s?null:[],h=s?r+1:n.length;for(i=r<0?h:s?r:0;i<h;i++)if(((a=n[i]).selected||i===r)&&!a.disabled&&(!a.parentNode.disabled||!O(a.parentNode,"optgroup"))){if(e=y(a).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var a,i,n=t.options,r=y.makeArray(e),s=n.length;s--;)((i=n[s]).selected=y.inArray(y.valHooks.option.get(i),r)>-1)&&(a=!0);return a||(t.selectedIndex=-1),r}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=y.inArray(y(t).val(),e)>-1}},m.checkOn||(y.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in a;var ye=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};y.extend(y.event,{trigger:function(t,e,i,n){var r,o,h,l,u,c,f,C,D=[i||s],p=d.call(t,"type")?t.type:t,m=d.call(t,"namespace")?t.namespace.split("."):[];if(o=C=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!ye.test(p+y.event.triggered)&&(p.indexOf(".")>-1&&(p=(m=p.split(".")).shift(),m.sort()),u=p.indexOf(":")<0&&"on"+p,(t=t[y.expando]?t:new y.Event(p,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:y.makeArray(e,[t]),f=y.event.special[p]||{},n||!f.trigger||!1!==f.trigger.apply(i,e))){if(!n&&!f.noBubble&&!S(i)){for(l=f.delegateType||p,ye.test(l+p)||(o=o.parentNode);o;o=o.parentNode)D.push(o),h=o;h===(i.ownerDocument||s)&&D.push(h.defaultView||h.parentWindow||a)}for(r=0;(o=D[r++])&&!t.isPropagationStopped();)C=o,t.type=r>1?l:f.bindType||p,(c=(Z.get(o,"events")||{})[t.type]&&Z.get(o,"handle"))&&c.apply(o,e),(c=u&&o[u])&&c.apply&&j(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,n||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(D.pop(),e)||!j(i)||u&&v(i[p])&&!S(i)&&((h=i[u])&&(i[u]=null),y.event.triggered=p,t.isPropagationStopped()&&C.addEventListener(p,Te),i[p](),t.isPropagationStopped()&&C.removeEventListener(p,Te),y.event.triggered=void 0,h&&(i[u]=h)),t.result}},simulate:function(t,e,a){var i=y.extend(new y.Event,a,{type:t,isSimulated:!0});y.event.trigger(i,null,e)}}),y.fn.extend({trigger:function(t,e){return this.each(function(){y.event.trigger(t,e,this)})},triggerHandler:function(t,e){var a=this[0];if(a)return y.event.trigger(t,e,a,!0)}}),m.focusin||y.each({focus:"focusin",blur:"focusout"},function(t,e){var a=function(t){y.event.simulate(e,t.target,y.event.fix(t))};y.event.special[e]={setup:function(){var i=this.ownerDocument||this,n=Z.access(i,e);n||i.addEventListener(t,a,!0),Z.access(i,e,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=Z.access(i,e)-1;n?Z.access(i,e,n):(i.removeEventListener(t,a,!0),Z.remove(i,e))}}});var Fe=a.location,Ee=Date.now(),Le=/\?/;y.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new a.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+t),e};var xe=/\[\]$/,Ne=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;function we(t,e,a,i){var n;if(Array.isArray(e))y.each(e,function(e,n){a||xe.test(t)?i(t,n):we(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,a,i)});else if(a||"object"!==A(e))i(t,e);else for(n in e)we(t+"["+n+"]",e[n],a,i)}y.param=function(t,e){var a,i=[],n=function(t,e){var a=v(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==a?"":a)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!y.isPlainObject(t))y.each(t,function(){n(this.name,this.value)});else for(a in t)we(a,t[a],e,n);return i.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=y.prop(this,"elements");return t?y.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!y(this).is(":disabled")&&Me.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!Dt.test(t))}).map(function(t,e){var a=y(this).val();return null==a?null:Array.isArray(a)?y.map(a,function(t){return{name:e.name,value:t.replace(Ne,"\r\n")}}):{name:e.name,value:a.replace(Ne,"\r\n")}}).get()}});var Re=/%20/g,Pe=/#.*$/,be=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,_e=/^(?:GET|HEAD)$/,He=/^\/\//,ke={},Ve={},Ge="*/".concat("*"),Ye=s.createElement("a");function Ue(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var i,n=0,r=e.toLowerCase().match(H)||[];if(v(a))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(a)):(t[i]=t[i]||[]).push(a)}}function We(t,e,a,i){var n={},r=t===Ve;function s(o){var h;return n[o]=!0,y.each(t[o]||[],function(t,o){var l=o(e,a,i);return"string"!=typeof l||r||n[l]?r?!(h=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),h}return s(e.dataTypes[0])||!n["*"]&&s("*")}function Xe(t,e){var a,i,n=y.ajaxSettings.flatOptions||{};for(a in e)void 0!==e[a]&&((n[a]?t:i||(i={}))[a]=e[a]);return i&&y.extend(!0,t,i),t}Ye.href=Fe.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Fe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,y.ajaxSettings),e):Xe(y.ajaxSettings,t)},ajaxPrefilter:Ue(ke),ajaxTransport:Ue(Ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,r,o,h,l,u,c,f,C,d=y.ajaxSetup({},e),D=d.context||d,p=d.context&&(D.nodeType||D.jquery)?y(D):y.event,m=y.Deferred(),v=y.Callbacks("once memory"),S=d.statusCode||{},g={},I={},A="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(u){if(!o)for(o={};e=Be.exec(r);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(t,e){return null==u&&(t=I[t.toLowerCase()]=I[t.toLowerCase()]||t,g[t]=e),this},overrideMimeType:function(t){return null==u&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)T.always(t[T.status]);else for(e in t)S[e]=[S[e],t[e]];return this},abort:function(t){var e=t||A;return i&&i.abort(e),F(0,e),this}};if(m.promise(T),d.url=((t||d.url||Fe.href)+"").replace(He,Fe.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(H)||[""],null==d.crossDomain){l=s.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=Ye.protocol+"//"+Ye.host!=l.protocol+"//"+l.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=y.param(d.data,d.traditional)),We(ke,d,e,T),u)return T;for(f in(c=y.event&&d.global)&&0==y.active++&&y.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!_e.test(d.type),n=d.url.replace(Pe,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Re,"+")):(C=d.url.slice(n.length),d.data&&(d.processData||"string"==typeof d.data)&&(n+=(Le.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(be,"$1"),C=(Le.test(n)?"&":"?")+"_="+Ee+++C),d.url=n+C),d.ifModified&&(y.lastModified[n]&&T.setRequestHeader("If-Modified-Since",y.lastModified[n]),y.etag[n]&&T.setRequestHeader("If-None-Match",y.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&T.setRequestHeader("Content-Type",d.contentType),T.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ge+"; q=0.01":""):d.accepts["*"]),d.headers)T.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(D,T,d)||u))return T.abort();if(A="abort",v.add(d.complete),T.done(d.success),T.fail(d.error),i=We(Ve,d,e,T)){if(T.readyState=1,c&&p.trigger("ajaxSend",[T,d]),u)return T;d.async&&d.timeout>0&&(h=a.setTimeout(function(){T.abort("timeout")},d.timeout));try{u=!1,i.send(g,F)}catch(t){if(u)throw t;F(-1,t)}}else F(-1,"No Transport");function F(t,e,s,o){var l,f,C,g,I,A=e;u||(u=!0,h&&a.clearTimeout(h),i=void 0,r=o||"",T.readyState=t>0?4:0,l=t>=200&&t<300||304===t,s&&(g=function(t,e,a){for(var i,n,r,s,o=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(n in o)if(o[n]&&o[n].test(i)){h.unshift(n);break}if(h[0]in a)r=h[0];else{for(n in a){if(!h[0]||t.converters[n+" "+h[0]]){r=n;break}s||(s=n)}r=r||s}if(r)return r!==h[0]&&h.unshift(r),a[r]}(d,T,s)),g=function(t,e,a,i){var n,r,s,o,h,l={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(a[t.responseFields[r]]=e),!h&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=r,r=u.shift())if("*"===r)r=h;else if("*"!==h&&h!==r){if(!(s=l[h+" "+r]||l["* "+r]))for(n in l)if((o=n.split(" "))[1]===r&&(s=l[h+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[n]:!0!==l[n]&&(r=o[0],u.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+h+" to "+r}}}return{state:"success",data:e}}(d,g,T,l),l?(d.ifModified&&((I=T.getResponseHeader("Last-Modified"))&&(y.lastModified[n]=I),(I=T.getResponseHeader("etag"))&&(y.etag[n]=I)),204===t||"HEAD"===d.type?A="nocontent":304===t?A="notmodified":(A=g.state,f=g.data,l=!(C=g.error))):(C=A,!t&&A||(A="error",t<0&&(t=0))),T.status=t,T.statusText=(e||A)+"",l?m.resolveWith(D,[f,A,T]):m.rejectWith(D,[T,A,C]),T.statusCode(S),S=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[T,d,l?f:C]),v.fireWith(D,[T,A]),c&&(p.trigger("ajaxComplete",[T,d]),--y.active||y.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,a){return y.get(t,e,a,"json")},getScript:function(t,e){return y.get(t,void 0,e,"script")}}),y.each(["get","post"],function(t,e){y[e]=function(t,a,i,n){return v(a)&&(n=n||i,i=a,a=void 0),y.ajax(y.extend({url:t,type:e,dataType:n,data:a,success:i},y.isPlainObject(t)&&t))}}),y._evalUrl=function(t,e){return y.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){y.globalEval(t,e)}})},y.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=y(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return v(t)?this.each(function(e){y(this).wrapInner(t.call(this,e))}):this.each(function(){var e=y(this),a=e.contents();a.length?a.wrapAll(t):e.append(t)})},wrap:function(t){var e=v(t);return this.each(function(a){y(this).wrapAll(e?t.call(this,a):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(t){return!y.expr.pseudos.visible(t)},y.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Ke=y.ajaxSettings.xhr();m.cors=!!Ke&&"withCredentials"in Ke,m.ajax=Ke=!!Ke,y.ajaxTransport(function(t){var e,i;if(m.cors||Ke&&!t.crossDomain)return{send:function(n,r){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(s,n[s]);e=function(t){return function(){e&&(e=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?r(0,"error"):r(o.status,o.statusText):r(Je[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=e(),i=o.onerror=o.ontimeout=e("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&a.setTimeout(function(){e&&i()})},e=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),y.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return y.globalEval(t),t}}}),y.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),y.ajaxTransport("script",function(t){var e,a;if(t.crossDomain||t.scriptAttrs)return{send:function(i,n){e=y("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",a=function(t){e.remove(),a=null,t&&n("error"===t.type?404:200,t.type)}),s.head.appendChild(e[0])},abort:function(){a&&a()}}});var qe,ze=[],je=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||y.expando+"_"+Ee++;return this[t]=!0,t}}),y.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,s,o=!1!==t.jsonp&&(je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&je.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(je,"$1"+n):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||y.error(n+" was not called"),s[0]},t.dataTypes[0]="json",r=a[n],a[n]=function(){s=arguments},i.always(function(){void 0===r?y(a).removeProp(n):a[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,ze.push(n)),s&&v(r)&&r(s[0]),s=r=void 0}),"script"}),m.createHTMLDocument=((qe=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),y.parseHTML=function(t,e,a){return"string"!=typeof t?[]:("boolean"==typeof e&&(a=e,e=!1),e||(m.createHTMLDocument?((i=(e=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,e.head.appendChild(i)):e=s),n=M.exec(t),r=!a&&[],n?[e.createElement(n[1])]:(n=Tt([t],e,r),r&&r.length&&y(r).remove(),y.merge([],n.childNodes)));var i,n,r},y.fn.load=function(t,e,a){var i,n,r,s=this,o=t.indexOf(" ");return o>-1&&(i=Se(t.slice(o)),t=t.slice(0,o)),v(e)?(a=e,e=void 0):e&&"object"==typeof e&&(n="POST"),s.length>0&&y.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?y("<div>").append(y.parseHTML(t)).find(i):t)}).always(a&&function(t,e){s.each(function(){a.apply(this,r||[t.responseText,e,t])})}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){y.fn[e]=function(t){return this.on(e,t)}}),y.expr.pseudos.animated=function(t){return y.grep(y.timers,function(e){return t===e.elem}).length},y.offset={setOffset:function(t,e,a){var i,n,r,s,o,h,l=y.css(t,"position"),u=y(t),c={};"static"===l&&(t.style.position="relative"),o=u.offset(),r=y.css(t,"top"),h=y.css(t,"left"),("absolute"===l||"fixed"===l)&&(r+h).indexOf("auto")>-1?(s=(i=u.position()).top,n=i.left):(s=parseFloat(r)||0,n=parseFloat(h)||0),v(e)&&(e=e.call(t,a,y.extend({},o))),null!=e.top&&(c.top=e.top-o.top+s),null!=e.left&&(c.left=e.left-o.left+n),"using"in e?e.using.call(t,c):u.css(c)}},y.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){y.offset.setOffset(this,t,e)});var e,a,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),a=i.ownerDocument.defaultView,{top:e.top+a.pageYOffset,left:e.left+a.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,a,i=this[0],n={top:0,left:0};if("fixed"===y.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),a=i.ownerDocument,t=i.offsetParent||a.documentElement;t&&(t===a.body||t===a.documentElement)&&"static"===y.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((n=y(t).offset()).top+=y.css(t,"borderTopWidth",!0),n.left+=y.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-y.css(i,"marginTop",!0),left:e.left-n.left-y.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===y.css(t,"position");)t=t.offsetParent;return t||st})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var a="pageYOffset"===e;y.fn[t]=function(i){return X(this,function(t,i,n){var r;if(S(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[e]:t[i];r?r.scrollTo(a?r.pageXOffset:n,a?n:r.pageYOffset):t[i]=n},t,i,arguments.length)}}),y.each(["top","left"],function(t,e){y.cssHooks[e]=Kt(m.pixelPosition,function(t,a){if(a)return a=Jt(t,e),Ut.test(a)?y(t).position()[e]+"px":a})}),y.each({Height:"height",Width:"width"},function(t,e){y.each({padding:"inner"+t,content:e,"":"outer"+t},function(a,i){y.fn[i]=function(n,r){var s=arguments.length&&(a||"boolean"!=typeof n),o=a||(!0===n||!0===r?"margin":"border");return X(this,function(e,a,n){var r;return S(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?y.css(e,a,o):y.style(e,a,n,o)},e,s?n:void 0,s)}})}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){y.fn[e]=function(t,a){return arguments.length>0?this.on(e,null,t,a):this.trigger(e)}}),y.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),y.fn.extend({bind:function(t,e,a){return this.on(t,null,e,a)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,a,i){return this.on(e,t,a,i)},undelegate:function(t,e,a){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",a)}}),y.proxy=function(t,e){var a,i,n;if("string"==typeof e&&(a=t[e],e=t,t=a),v(t))return i=h.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(h.call(arguments)))}).guid=t.guid=t.guid||y.guid++,n},y.holdReady=function(t){t?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=O,y.isFunction=v,y.isWindow=S,y.camelCase=z,y.type=A,y.now=Date.now,y.isNumeric=function(t){var e=y.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(i=function(){return y}.apply(e,[]))||(t.exports=i);var $e=a.jQuery,Ze=a.$;return y.noConflict=function(t){return a.$===y&&(a.$=Ze),t&&a.jQuery===y&&(a.jQuery=$e),y},n||(a.jQuery=a.$=y),y})},"9rXv":function(t,e,a){"use strict";var i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,s={},o=0,h=0;function l(t){var e="";do{e=n[t%r]+e,t=Math.floor(t/r)}while(t>0);return e}function u(){var t=l(+new Date);return t!==i?(o=0,i=t):t+"."+l(o++)}for(;h<r;h++)s[n[h]]=h;u.encode=l,u.decode=function(t){var e=0;for(h=0;h<t.length;h++)e=e*r+s[t.charAt(h)];return e},t.exports=u},ARv7:function(t,e,a){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;e.splice(1,0,a,"color: inherit");let i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&"%c"===t&&(n=++i)}),e.splice(n,0,a)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=Object({NODE_ENV:"production"}).DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=a("4ptk")(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(e,a("W2nU"))},AYMf:function(t,e,a){var i=a("4ThM"),n=a("qjVX"),r=a("bqFq"),s=a("SJFm"),o=a("zqJT"),h=a("dtwh")("socket.io-client:socket"),l=a("gVZZ"),u=a("5+KW");t.exports=C;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=n.prototype.emit;function C(t,e,a){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},a&&a.query&&(this.query=a.query),this.io.autoConnect&&this.open()}n(C.prototype),C.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",o(this,"onopen")),s(t,"packet",o(this,"onpacket")),s(t,"close",o(this,"onclose"))]}},C.prototype.open=C.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},C.prototype.send=function(){var t=r(arguments);return t.unshift("message"),this.emit.apply(this,t),this},C.prototype.emit=function(t){if(c.hasOwnProperty(t))return f.apply(this,arguments),this;var e=r(arguments),a={type:(void 0!==this.flags.binary?this.flags.binary:u(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return a.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),a.id=this.ids++),this.connected?this.packet(a):this.sendBuffer.push(a),this.flags={},this},C.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},C.prototype.onopen=function(){if(h("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?l.encode(this.query):this.query;h("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},C.prototype.onclose=function(t){h("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},C.prototype.onpacket=function(t){var e=t.nsp===this.nsp,a=t.type===i.ERROR&&"/"===t.nsp;if(e||a)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},C.prototype.onevent=function(t){var e=t.data||[];h("emitting event %j",e),null!=t.id&&(h("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},C.prototype.ack=function(t){var e=this,a=!1;return function(){if(!a){a=!0;var n=r(arguments);h("sending ack %j",n),e.packet({type:u(n)?i.BINARY_ACK:i.ACK,id:t,data:n})}}},C.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(h("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):h("bad ack %s",t.id)},C.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},C.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},C.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},C.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},C.prototype.close=C.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},C.prototype.compress=function(t){return this.flags.compress=t,this},C.prototype.binary=function(t){return this.flags.binary=t,this}},AszH:function(t,e,a){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function a(){this.off(t,a),e.apply(this,arguments)}return a.fn=e,this.on(t,a),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((a=i[n])===e||a.fn===e){i.splice(n,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),a=this._callbacks["$"+t];if(a)for(var i=0,n=(a=a.slice(0)).length;i<n;++i)a[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},CdYZ:function(t,e,a){var i=a("IMZa"),n=a("sVLd"),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.deconstructPacket=function(t){var e=[],a=t.data,r=t;return r.data=function t(e,a){if(!e)return e;if(n(e)){var r={_placeholder:!0,num:a.length};return a.push(e),r}if(i(e)){for(var s=new Array(e.length),o=0;o<e.length;o++)s[o]=t(e[o],a);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var h in e)s[h]=t(e[h],a);return s}return e}(a,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,a){if(!e)return e;if(e&&e._placeholder)return a[e.num];if(i(e))for(var n=0;n<e.length;n++)e[n]=t(e[n],a);else if("object"==typeof e)for(var r in e)e[r]=t(e[r],a);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var a=0,r=t;!function t(h,l,u){if(!h)return h;if(s&&h instanceof Blob||o&&h instanceof File){a++;var c=new FileReader;c.onload=function(){u?u[l]=this.result:r=this.result,--a||e(r)},c.readAsArrayBuffer(h)}else if(i(h))for(var f=0;f<h.length;f++)t(h[f],f,h);else if("object"==typeof h&&!n(h))for(var C in h)t(h[C],C,h)}(r),a||e(r)}},Csua:function(t,e){var a=[].indexOf;t.exports=function(t,e){if(a)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},Ctjl:function(t,e,a){var i=a("psuf"),n=a("AYMf"),r=a("qjVX"),s=a("4ThM"),o=a("SJFm"),h=a("zqJT"),l=a("dtwh")("socket.io-client:manager"),u=a("Csua"),c=a("+lzb"),f=Object.prototype.hasOwnProperty;function C(t,e){if(!(this instanceof C))return new C(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new c({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var a=e.parser||s;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=C,C.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},C.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},C.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},r(C.prototype),C.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},C.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},C.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},C.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},C.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},C.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},C.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},C.prototype.open=C.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var a=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=o(a,"open",function(){n.onopen(),t&&t()}),s=o(a,"error",function(e){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var a=new Error("Connection error");a.data=e,t(a)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;l("connect attempt will timeout after %d",h);var u=setTimeout(function(){l("connect attempt timed out after %d",h),r.destroy(),a.close(),a.emit("error","timeout"),n.emitAll("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(r),this.subs.push(s),this},C.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(o(t,"data",h(this,"ondata"))),this.subs.push(o(t,"ping",h(this,"onping"))),this.subs.push(o(t,"pong",h(this,"onpong"))),this.subs.push(o(t,"error",h(this,"onerror"))),this.subs.push(o(t,"close",h(this,"onclose"))),this.subs.push(o(this.decoder,"decoded",h(this,"ondecoded")))},C.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},C.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},C.prototype.ondata=function(t){this.decoder.add(t)},C.prototype.ondecoded=function(t){this.emit("packet",t)},C.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},C.prototype.socket=function(t,e){var a=this.nsps[t];if(!a){a=new n(this,t,e),this.nsps[t]=a;var i=this;a.on("connecting",r),a.on("connect",function(){a.id=i.generateId(t)}),this.autoConnect&&r()}function r(){~u(i.connecting,a)||i.connecting.push(a)}return a},C.prototype.destroy=function(t){var e=u(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},C.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(a){for(var i=0;i<a.length;i++)e.engine.write(a[i],t.options);e.encoding=!1,e.processPacketQueue()}))},C.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},C.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},C.prototype.close=C.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},C.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},C.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var a=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(a)}})}},C.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},DmT9:function(t,e,a){var i=a("V1mL"),n=a("4ThM"),r=a("Ctjl"),s=a("dtwh")("socket.io-client");t.exports=e=h;var o=e.managers={};function h(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var a,n=i(t),h=n.source,l=n.id,u=n.path,c=o[l]&&u in o[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||c?(s("ignoring socket cache for %s",h),a=r(h,e)):(o[l]||(s("new io instance for %s",h),o[l]=r(h,e)),a=o[l]),n.query&&!e.query&&(e.query=n.query),a.socket(n.path,e)}e.protocol=n.protocol,e.connect=h,e.Manager=a("Ctjl"),e.Socket=a("AYMf")},DuR2:function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},EKta:function(t,e,a){"use strict";e.byteLength=function(t){var e=l(t),a=e[0],i=e[1];return 3*(a+i)/4-i},e.toByteArray=function(t){var e,a,i=l(t),s=i[0],o=i[1],h=new r(function(t,e,a){return 3*(e+a)/4-a}(0,s,o)),u=0,c=o>0?s-4:s;for(a=0;a<c;a+=4)e=n[t.charCodeAt(a)]<<18|n[t.charCodeAt(a+1)]<<12|n[t.charCodeAt(a+2)]<<6|n[t.charCodeAt(a+3)],h[u++]=e>>16&255,h[u++]=e>>8&255,h[u++]=255&e;2===o&&(e=n[t.charCodeAt(a)]<<2|n[t.charCodeAt(a+1)]>>4,h[u++]=255&e);1===o&&(e=n[t.charCodeAt(a)]<<10|n[t.charCodeAt(a+1)]<<4|n[t.charCodeAt(a+2)]>>2,h[u++]=e>>8&255,h[u++]=255&e);return h},e.fromByteArray=function(t){for(var e,a=t.length,n=a%3,r=[],s=0,o=a-n;s<o;s+=16383)r.push(u(t,s,s+16383>o?o:s+16383));1===n?(e=t[a-1],r.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[a-2]<<8)+t[a-1],r.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return r.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=s.length;o<h;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=t.indexOf("=");return-1===a&&(a=e),[a,a===e?0:4-a%4]}function u(t,e,a){for(var n,r,s=[],o=e;o<a;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(i[(r=n)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},ElvI:function(t,e,a){var i,n=a("2gBs"),r=a("5+KW"),s=a("Tff0"),o=a("YUmt"),h=a("eAwk");"undefined"!=typeof ArrayBuffer&&(i=a("kVGU"));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),c=l||u;e.protocol=3;var f=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},C=n(f),d={type:"error",data:"parser error"},D=a("6mly");function p(t,e,a){for(var i=new Array(t.length),n=o(t.length,a),r=function(t,a,n){e(a,function(e,a){i[t]=a,n(e,i)})},s=0;s<t.length;s++)r(s,t[s],n)}e.encodePacket=function(t,a,i,n){"function"==typeof a&&(n=a,a=!1),"function"==typeof i&&(n=i,i=null);var r=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer)return function(t,a,i){if(!a)return e.encodeBase64Packet(t,i);var n=t.data,r=new Uint8Array(n),s=new Uint8Array(1+n.byteLength);s[0]=f[t.type];for(var o=0;o<r.length;o++)s[o+1]=r[o];return i(s.buffer)}(t,a,n);if(void 0!==D&&r instanceof D)return function(t,a,i){if(!a)return e.encodeBase64Packet(t,i);if(c)return function(t,a,i){if(!a)return e.encodeBase64Packet(t,i);var n=new FileReader;return n.onload=function(){e.encodePacket({type:t.type,data:n.result},a,!0,i)},n.readAsArrayBuffer(t.data)}(t,a,i);var n=new Uint8Array(1);n[0]=f[t.type];var r=new D([n.buffer,t.data]);return i(r)}(t,a,n);if(r&&r.base64)return function(t,a){var i="b"+e.packets[t.type]+t.data.data;return a(i)}(t,n);var s=f[t.type];return void 0!==t.data&&(s+=i?h.encode(String(t.data),{strict:!1}):String(t.data)),n(""+s)},e.encodeBase64Packet=function(t,a){var i,n="b"+e.packets[t.type];if(void 0!==D&&t.data instanceof D){var r=new FileReader;return r.onload=function(){var t=r.result.split(",")[1];a(n+t)},r.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),o=new Array(s.length),h=0;h<s.length;h++)o[h]=s[h];i=String.fromCharCode.apply(null,o)}return n+=btoa(i),a(n)},e.decodePacket=function(t,a,i){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),a);if(i&&!1===(t=function(t){try{t=h.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var n=t.charAt(0);return Number(n)==n&&C[n]?t.length>1?{type:C[n],data:t.substring(1)}:{type:C[n]}:d}n=new Uint8Array(t)[0];var r=s(t,1);return D&&"blob"===a&&(r=new D([r])),{type:C[n],data:r}},e.decodeBase64Packet=function(t,e){var a=C[t.charAt(0)];if(!i)return{type:a,data:{base64:!0,data:t.substr(1)}};var n=i.decode(t.substr(1));return"blob"===e&&D&&(n=new D([n])),{type:a,data:n}},e.encodePayload=function(t,a,i){"function"==typeof a&&(i=a,a=null);var n=r(t);if(a&&n)return D&&!c?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i);if(!t.length)return i("0:");p(t,function(t,i){e.encodePacket(t,!!n&&a,!1,function(t){i(null,function(t){return t.length+":"+t}(t))})},function(t,e){return i(e.join(""))})},e.decodePayload=function(t,a,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,a,i);var n;if("function"==typeof a&&(i=a,a=null),""===t)return i(d,0,1);for(var r,s,o="",h=0,l=t.length;h<l;h++){var u=t.charAt(h);if(":"===u){if(""===o||o!=(r=Number(o)))return i(d,0,1);if(o!=(s=t.substr(h+1,r)).length)return i(d,0,1);if(s.length){if(n=e.decodePacket(s,a,!1),d.type===n.type&&d.data===n.data)return i(d,0,1);if(!1===i(n,h+r,l))return}h+=r,o=""}else o+=u}return""!==o?i(d,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,a){if(!t.length)return a(new ArrayBuffer(0));p(t,function(t,a){e.encodePacket(t,!0,!0,function(t){return a(null,t)})},function(t,e){var i=e.reduce(function(t,e){var a;return t+(a="string"==typeof e?e.length:e.byteLength).toString().length+a+2},0),n=new Uint8Array(i),r=0;return e.forEach(function(t){var e="string"==typeof t,a=t;if(e){for(var i=new Uint8Array(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);a=i.buffer}n[r++]=e?0:1;var o=a.byteLength.toString();for(s=0;s<o.length;s++)n[r++]=parseInt(o[s]);n[r++]=255;for(i=new Uint8Array(a),s=0;s<i.length;s++)n[r++]=i[s]}),a(n.buffer)})},e.encodePayloadAsBlob=function(t,a){p(t,function(t,a){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);t=i.buffer,e[0]=0}var r=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(r.length+1);for(n=0;n<r.length;n++)s[n]=parseInt(r[n]);if(s[r.length]=255,D){var o=new D([e.buffer,s.buffer,t]);a(null,o)}})},function(t,e){return a(new D(e))})},e.decodePayloadAsBinary=function(t,a,i){"function"==typeof a&&(i=a,a=null);for(var n=t,r=[];n.byteLength>0;){for(var o=new Uint8Array(n),h=0===o[0],l="",u=1;255!==o[u];u++){if(l.length>310)return i(d,0,1);l+=o[u]}n=s(n,2+l.length),l=parseInt(l);var c=s(n,0,l);if(h)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(t){var f=new Uint8Array(c);c="";for(u=0;u<f.length;u++)c+=String.fromCharCode(f[u])}r.push(c),n=s(n,l)}var C=r.length;r.forEach(function(t,n){i(e.decodePacket(t,a,!0),n,C)})}},EuP9:function(t,e,a){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=a("EKta"),n=a("ujcs"),r=a("sOR5");function s(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,a){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,a);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,a)}function l(t,e,a,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,a,i){if(e.byteLength,a<0||e.byteLength<a)throw new RangeError("'offset' is out of bounds");if(e.byteLength<a+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===a&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,a):new Uint8Array(e,a,i);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=f(t,e);return t}(t,e,a,i):"string"==typeof e?function(t,e,a){"string"==typeof a&&""!==a||(a="utf8");if(!h.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,a),n=(t=o(t,i)).write(e,a);n!==i&&(t=t.slice(0,n));return t}(t,e,a):function(t,e){if(h.isBuffer(e)){var a=0|C(e.length);return 0===(t=o(t,a)).length?t:(e.copy(t,0,0,a),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?o(t,0):f(t,e);if("Buffer"===e.type&&r(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(u(e),t=o(t,e<0?0:0|C(e)),!h.TYPED_ARRAY_SUPPORT)for(var a=0;a<e;++a)t[a]=0;return t}function f(t,e){var a=e.length<0?0:0|C(e.length);t=o(t,a);for(var i=0;i<a;i+=1)t[i]=255&e[i];return t}function C(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var a=t.length;if(0===a)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return G(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function D(t,e,a){var i=t[e];t[e]=t[a],t[a]=i}function p(t,e,a,i,n){if(0===t.length)return-1;if("string"==typeof a?(i=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,isNaN(a)&&(a=n?0:t.length-1),a<0&&(a=t.length+a),a>=t.length){if(n)return-1;a=t.length-1}else if(a<0){if(!n)return-1;a=0}if("string"==typeof e&&(e=h.from(e,i)),h.isBuffer(e))return 0===e.length?-1:m(t,e,a,i,n);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,a):Uint8Array.prototype.lastIndexOf.call(t,e,a):m(t,[e],a,i,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,a,i,n){var r,s=1,o=t.length,h=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,o/=2,h/=2,a/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var u=-1;for(r=a;r<o;r++)if(l(t,r)===l(e,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===h)return u*s}else-1!==u&&(r-=r-u),u=-1}else for(a+h>o&&(a=o-h),r=a;r>=0;r--){for(var c=!0,f=0;f<h;f++)if(l(t,r+f)!==l(e,f)){c=!1;break}if(c)return r}return-1}function v(t,e,a,i){a=Number(a)||0;var n=t.length-a;i?(i=Number(i))>n&&(i=n):i=n;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var s=0;s<i;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[a+s]=o}return s}function S(t,e,a,i){return Y(V(e,t.length-a),t,a,i)}function g(t,e,a,i){return Y(function(t){for(var e=[],a=0;a<t.length;++a)e.push(255&t.charCodeAt(a));return e}(e),t,a,i)}function I(t,e,a,i){return g(t,e,a,i)}function A(t,e,a,i){return Y(G(e),t,a,i)}function y(t,e,a,i){return Y(function(t,e){for(var a,i,n,r=[],s=0;s<t.length&&!((e-=2)<0);++s)a=t.charCodeAt(s),i=a>>8,n=a%256,r.push(n),r.push(i);return r}(e,t.length-a),t,a,i)}function T(t,e,a){return 0===e&&a===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,a))}function F(t,e,a){a=Math.min(t.length,a);for(var i=[],n=e;n<a;){var r,s,o,h,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c<=a)switch(c){case 1:l<128&&(u=l);break;case 2:128==(192&(r=t[n+1]))&&(h=(31&l)<<6|63&r)>127&&(u=h);break;case 3:r=t[n+1],s=t[n+2],128==(192&r)&&128==(192&s)&&(h=(15&l)<<12|(63&r)<<6|63&s)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:r=t[n+1],s=t[n+2],o=t[n+3],128==(192&r)&&128==(192&s)&&128==(192&o)&&(h=(15&l)<<18|(63&r)<<12|(63&s)<<6|63&o)>65535&&h<1114112&&(u=h)}null===u?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=c}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var a="",i=0;for(;i<e;)a+=String.fromCharCode.apply(String,t.slice(i,i+=E));return a}(i)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,a){return l(null,t,e,a)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,a){return function(t,e,a,i){return u(e),e<=0?o(t,e):void 0!==a?"string"==typeof i?o(t,e).fill(a,i):o(t,e).fill(a):o(t,e)}(null,t,e,a)},h.allocUnsafe=function(t){return c(null,t)},h.allocUnsafeSlow=function(t){return c(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var a=t.length,i=e.length,n=0,r=Math.min(a,i);n<r;++n)if(t[n]!==e[n]){a=t[n],i=e[n];break}return a<i?-1:i<a?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var a;if(void 0===e)for(e=0,a=0;a<t.length;++a)e+=t[a].length;var i=h.allocUnsafe(e),n=0;for(a=0;a<t.length;++a){var s=t[a];if(!h.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)D(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)D(this,e,e+3),D(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)D(this,e,e+7),D(this,e+1,e+6),D(this,e+2,e+5),D(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):function(t,e,a){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),a<=0)return"";if((a>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,a);case"utf8":case"utf-8":return F(this,e,a);case"ascii":return L(this,e,a);case"latin1":case"binary":return x(this,e,a);case"base64":return T(this,e,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,a);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",a=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,a,i,n){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===a&&(a=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||a>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=a)return 0;if(i>=n)return-1;if(e>=a)return 1;if(e>>>=0,a>>>=0,i>>>=0,n>>>=0,this===t)return 0;for(var r=n-i,s=a-e,o=Math.min(r,s),l=this.slice(i,n),u=t.slice(e,a),c=0;c<o;++c)if(l[c]!==u[c]){r=l[c],s=u[c];break}return r<s?-1:s<r?1:0},h.prototype.includes=function(t,e,a){return-1!==this.indexOf(t,e,a)},h.prototype.indexOf=function(t,e,a){return p(this,t,e,a,!0)},h.prototype.lastIndexOf=function(t,e,a){return p(this,t,e,a,!1)},h.prototype.write=function(t,e,a,i){if(void 0===e)i="utf8",a=this.length,e=0;else if(void 0===a&&"string"==typeof e)i=e,a=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(a)?(a|=0,void 0===i&&(i="utf8")):(i=a,a=void 0)}var n=this.length-e;if((void 0===a||a>n)&&(a=n),t.length>0&&(a<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return v(this,t,e,a);case"utf8":case"utf-8":return S(this,t,e,a);case"ascii":return g(this,t,e,a);case"latin1":case"binary":return I(this,t,e,a);case"base64":return A(this,t,e,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,t,e,a);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function L(t,e,a){var i="";a=Math.min(t.length,a);for(var n=e;n<a;++n)i+=String.fromCharCode(127&t[n]);return i}function x(t,e,a){var i="";a=Math.min(t.length,a);for(var n=e;n<a;++n)i+=String.fromCharCode(t[n]);return i}function N(t,e,a){var i=t.length;(!e||e<0)&&(e=0),(!a||a<0||a>i)&&(a=i);for(var n="",r=e;r<a;++r)n+=k(t[r]);return n}function O(t,e,a){for(var i=t.slice(e,a),n="",r=0;r<i.length;r+=2)n+=String.fromCharCode(i[r]+256*i[r+1]);return n}function M(t,e,a){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>a)throw new RangeError("Trying to access beyond buffer length")}function w(t,e,a,i,n,r){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(a+i>t.length)throw new RangeError("Index out of range")}function R(t,e,a,i){e<0&&(e=65535+e+1);for(var n=0,r=Math.min(t.length-a,2);n<r;++n)t[a+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function P(t,e,a,i){e<0&&(e=4294967295+e+1);for(var n=0,r=Math.min(t.length-a,4);n<r;++n)t[a+n]=e>>>8*(i?n:3-n)&255}function b(t,e,a,i,n,r){if(a+i>t.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function B(t,e,a,i,r){return r||b(t,0,a,4),n.write(t,e,a,i,23,4),a+4}function _(t,e,a,i,r){return r||b(t,0,a,8),n.write(t,e,a,i,52,8),a+8}h.prototype.slice=function(t,e){var a,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(a=this.subarray(t,e)).__proto__=h.prototype;else{var n=e-t;a=new h(n,void 0);for(var r=0;r<n;++r)a[r]=this[r+t]}return a},h.prototype.readUIntLE=function(t,e,a){t|=0,e|=0,a||M(t,e,this.length);for(var i=this[t],n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i},h.prototype.readUIntBE=function(t,e,a){t|=0,e|=0,a||M(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},h.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,a){t|=0,e|=0,a||M(t,e,this.length);for(var i=this[t],n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},h.prototype.readIntBE=function(t,e,a){t|=0,e|=0,a||M(t,e,this.length);for(var i=e,n=1,r=this[t+--i];i>0&&(n*=256);)r+=this[t+--i]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},h.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var a=this[t]|this[t+1]<<8;return 32768&a?4294901760|a:a},h.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var a=this[t+1]|this[t]<<8;return 32768&a?4294901760|a:a},h.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),n.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),n.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),n.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),n.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,a,i){(t=+t,e|=0,a|=0,i)||w(this,t,e,a,Math.pow(2,8*a)-1,0);var n=1,r=0;for(this[e]=255&t;++r<a&&(n*=256);)this[e+r]=t/n&255;return e+a},h.prototype.writeUIntBE=function(t,e,a,i){(t=+t,e|=0,a|=0,i)||w(this,t,e,a,Math.pow(2,8*a)-1,0);var n=a-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+a},h.prototype.writeUInt8=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,a,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*a-1);w(this,t,e,a,n-1,-n)}var r=0,s=1,o=0;for(this[e]=255&t;++r<a&&(s*=256);)t<0&&0===o&&0!==this[e+r-1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+a},h.prototype.writeIntBE=function(t,e,a,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*a-1);w(this,t,e,a,n-1,-n)}var r=a-1,s=1,o=0;for(this[e+r]=255&t;--r>=0&&(s*=256);)t<0&&0===o&&0!==this[e+r+1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+a},h.prototype.writeInt8=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,a){return t=+t,e|=0,a||w(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,a){return B(this,t,e,!0,a)},h.prototype.writeFloatBE=function(t,e,a){return B(this,t,e,!1,a)},h.prototype.writeDoubleLE=function(t,e,a){return _(this,t,e,!0,a)},h.prototype.writeDoubleBE=function(t,e,a){return _(this,t,e,!1,a)},h.prototype.copy=function(t,e,a,i){if(a||(a=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<a&&(i=a),i===a)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-a&&(i=t.length-e+a);var n,r=i-a;if(this===t&&a<e&&e<i)for(n=r-1;n>=0;--n)t[n+e]=this[n+a];else if(r<1e3||!h.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)t[n+e]=this[n+a];else Uint8Array.prototype.set.call(t,this.subarray(a,a+r),e);return r},h.prototype.fill=function(t,e,a,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,a=this.length):"string"==typeof a&&(i=a,a=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<a)throw new RangeError("Out of range index");if(a<=e)return this;var r;if(e>>>=0,a=void 0===a?this.length:a>>>0,t||(t=0),"number"==typeof t)for(r=e;r<a;++r)this[r]=t;else{var s=h.isBuffer(t)?t:V(new h(t,i).toString()),o=s.length;for(r=0;r<a-e;++r)this[r+e]=s[r%o]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var a;e=e||1/0;for(var i=t.length,n=null,r=[],s=0;s<i;++s){if((a=t.charCodeAt(s))>55295&&a<57344){if(!n){if(a>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&r.push(239,191,189);continue}n=a;continue}if(a<56320){(e-=3)>-1&&r.push(239,191,189),n=a;continue}a=65536+(n-55296<<10|a-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,a<128){if((e-=1)<0)break;r.push(a)}else if(a<2048){if((e-=2)<0)break;r.push(a>>6|192,63&a|128)}else if(a<65536){if((e-=3)<0)break;r.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return r}function G(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,a,i){for(var n=0;n<i&&!(n+a>=e.length||n>=t.length);++n)e[n+a]=t[n];return n}}).call(e,a("DuR2"))},IMZa:function(t,e){var a={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},P2cu:function(t,e,a){var i=a("bKul");t.exports=function(t){var e=t.xdomain,a=t.xscheme,n=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!a&&n)return new XDomainRequest}catch(t){}if(!e)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},QamB:function(t,e){t.exports=function(t,e){var a=function(){};a.prototype=e.prototype,t.prototype=new a,t.prototype.constructor=t}},SJFm:function(t,e){t.exports=function(t,e,a){return t.on(e,a),{destroy:function(){t.removeListener(e,a)}}}},Tff0:function(t,e){t.exports=function(t,e,a){var i=t.byteLength;if(e=e||0,a=a||i,t.slice)return t.slice(e,a);if(e<0&&(e+=i),a<0&&(a+=i),a>i&&(a=i),e>=i||e>=a||0===i)return new ArrayBuffer(0);for(var n=new Uint8Array(t),r=new Uint8Array(a-e),s=e,o=0;s<a;s++,o++)r[o]=n[s];return r.buffer}},V1mL:function(t,e,a){var i=a("fOB9"),n=a("dtwh")("socket.io-client:url");t.exports=function(t,e){var a=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),n("parse %s",t),a=i(t));a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443"));a.path=a.path||"/";var r=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+r+":"+a.port,a.href=a.protocol+"://"+r+(e&&e.port===a.port?"":":"+a.port),a}},"VU/8":function(t,e){t.exports=function(t,e,a,i,n,r){var s,o=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(s=t,o=t.default);var l,u="function"==typeof o?o.options:o;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),a&&(u.functional=!0),n&&(u._scopeId=n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=l):i&&(l=i),l){var c=u.functional,f=c?u.render:u.beforeCreate;c?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:s,exports:o,options:u}}},VYsD:function(t,e,a){t.exports.Chart=a("78th").default,t.exports.Stock=a("kDkS").default},W2nU:function(t,e){var a,i,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(a===setTimeout)return setTimeout(t,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:r}catch(t){a=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,l=[],u=!1,c=-1;function f(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&C())}function C(){if(!u){var t=o(f);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function D(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];l.push(new d(t,e)),1!==l.length||u||o(C)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=D,n.addListener=D,n.once=D,n.off=D,n.removeListener=D,n.removeAllListeners=D,n.emit=D,n.prependListener=D,n.prependOnceListener=D,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},Xqxu:function(t,e,a){var i=a("Y+et"),n=a("AszH"),r=a("ARv7")("engine.io-client:socket"),s=a("Csua"),o=a("ElvI"),h=a("fOB9"),l=a("gVZZ");function u(t,e){if(!(this instanceof u))return new u(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=h(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=h(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=u,u.priorWebsocketSuccess=!1,n(u.prototype),u.protocol=o.protocol,u.Socket=u,u.Transport=a("ZOjo"),u.transports=a("Y+et"),u.parser=a("ElvI"),u.prototype.createTransport=function(t){r('creating transport "%s"',t);var e=function(t){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}(this.query);e.EIO=o.protocol,e.transport=t;var a=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:a.agent||this.agent,hostname:a.hostname||this.hostname,port:a.port||this.port,secure:a.secure||this.secure,path:a.path||this.path,forceJSONP:a.forceJSONP||this.forceJSONP,jsonp:a.jsonp||this.jsonp,forceBase64:a.forceBase64||this.forceBase64,enablesXDR:a.enablesXDR||this.enablesXDR,withCredentials:a.withCredentials||this.withCredentials,timestampRequests:a.timestampRequests||this.timestampRequests,timestampParam:a.timestampParam||this.timestampParam,policyPort:a.policyPort||this.policyPort,pfx:a.pfx||this.pfx,key:a.key||this.key,passphrase:a.passphrase||this.passphrase,cert:a.cert||this.cert,ca:a.ca||this.ca,ciphers:a.ciphers||this.ciphers,rejectUnauthorized:a.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:a.perMessageDeflate||this.perMessageDeflate,extraHeaders:a.extraHeaders||this.extraHeaders,forceNode:a.forceNode||this.forceNode,localAddress:a.localAddress||this.localAddress,requestTimeout:a.requestTimeout||this.requestTimeout,protocols:a.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var t;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},u.prototype.setTransport=function(t){r("setting transport %s",t.name);var e=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},u.prototype.probe=function(t){r('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),a=!1,i=this;function n(){if(i.onlyBinaryUpgrades){var n=!this.supportsBinary&&i.transport.supportsBinary;a=a||n}a||(r('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(n){if(!a)if("pong"===n.type&&"probe"===n.data){if(r('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;u.priorWebsocketSuccess="websocket"===e.name,r('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){a||"closed"!==i.readyState&&(r("changing transport and sending upgrade packet"),f(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())})}else{r('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,i.emit("upgradeError",s)}}))}function s(){a||(a=!0,f(),e.close(),e=null)}function o(a){var n=new Error("probe error: "+a);n.transport=e.name,s(),r('probe transport "%s" failed because of error: %s',t,a),i.emit("upgradeError",n)}function h(){o("transport closed")}function l(){o("socket closed")}function c(t){e&&t.name!==e.name&&(r('"%s" works - aborting "%s"',t.name,e.name),s())}function f(){e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",h),i.removeListener("close",l),i.removeListener("upgrading",c)}u.priorWebsocketSuccess=!1,e.once("open",n),e.once("error",o),e.once("close",h),this.once("close",l),this.once("upgrading",c),e.open()},u.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},u.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else r('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},u.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},u.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(t,e,a){return this.sendPacket("message",t,e,a),this},u.prototype.sendPacket=function(t,e,a,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof a&&(i=a,a=null),"closing"!==this.readyState&&"closed"!==this.readyState){(a=a||{}).compress=!1!==a.compress;var n={type:t,data:e,options:a};this.emit("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():e()}):this.upgrading?i():e()}function e(){t.onClose("forced close"),r("socket closing - telling transport to close"),t.transport.close()}function a(){t.removeListener("upgrade",a),t.removeListener("upgradeError",a),e()}function i(){t.once("upgrade",a),t.once("upgradeError",a)}return this},u.prototype.onError=function(t){r("socket error %j",t),u.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},u.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){r('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(t){for(var e=[],a=0,i=t.length;a<i;a++)~s(this.transports,t[a])&&e.push(t[a]);return e}},"Y+et":function(t,e,a){var i=a("P2cu"),n=a("nXuP"),r=a("ZEn9"),s=a("cwTZ");e.polling=function(t){var e=!1,a=!1,s=!1!==t.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,h=location.port;h||(h=o?443:80),e=t.hostname!==location.hostname||h!==t.port,a=t.secure!==o}if(t.xdomain=e,t.xscheme=a,"open"in new i(t)&&!t.forceJSONP)return new n(t);if(!s)throw new Error("JSONP disabled");return new r(t)},e.websocket=s},YUmt:function(t,e){function a(){}t.exports=function(t,e,i){var n=!1;return i=i||a,r.count=t,0===t?e():r;function r(t,a){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(n=!0,e(t),e=i):0!==r.count||n||e(null,a)}}},ZEn9:function(t,e,a){(function(e){var i=a("5+9/"),n=a("QamB");t.exports=u;var r,s=/\n/g,o=/\\n/g;function h(){}function l(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}}function u(t){if(i.call(this,t),this.query=this.query||{},!r){var e=l();r=e.___eio=e.___eio||[]}this.index=r.length;var a=this;r.push(function(t){a.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){a.script&&(a.script.onerror=h)},!1)}n(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var a=document.getElementsByTagName("script")[0];a?a.parentNode.insertBefore(e,a):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},u.prototype.doWrite=function(t,e){var a=this;if(!this.form){var i,n=document.createElement("form"),r=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=h,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r}function l(){u(),e()}function u(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(t){a.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+a.iframeId+'">';i=document.createElement(t)}catch(t){(i=document.createElement("iframe")).name=a.iframeId,i.src="javascript:0"}i.id=a.iframeId,a.form.appendChild(i),a.iframe=i}this.form.action=this.uri(),u(),t=t.replace(o,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===a.iframe.readyState&&l()}:this.iframe.onload=l}}).call(e,a("DuR2"))},ZOjo:function(t,e,a){var i=a("ElvI"),n=a("AszH");function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=r,n(r.prototype),r.prototype.onError=function(t,e){var a=new Error(t);return a.type="TransportError",a.description=e,this.emit("error",a),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},bKul:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},"baT+":function(t,e){var a=1e3,i=60*a,n=60*i,r=24*n,s=365.25*r;function o(t,e,a){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+a:Math.ceil(t/e)+" "+a+"s"}t.exports=function(t,e){e=e||{};var h,l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var o=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*s;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*n;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(t);if("number"===l&&!1===isNaN(t))return e.long?o(h=t,r,"day")||o(h,n,"hour")||o(h,i,"minute")||o(h,a,"second")||h+" ms":function(t){if(t>=r)return Math.round(t/r)+"d";if(t>=n)return Math.round(t/n)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=a)return Math.round(t/a)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},bqFq:function(t,e){t.exports=function(t,e){for(var a=[],i=(e=e||0)||0;i<t.length;i++)a[i-e]=t[i];return a}},cwTZ:function(t,e,a){(function(e){var i,n,r=a("ZOjo"),s=a("ElvI"),o=a("gVZZ"),h=a("QamB"),l=a("9rXv"),u=a("ARv7")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{n=a(0)}catch(t){}var c=i||n;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=i&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(c=n),r.call(this,t)}t.exports=f,h(f,r),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,a={agent:this.agent,perMessageDeflate:this.perMessageDeflate};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(a.headers=this.extraHeaders),this.localAddress&&(a.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new c(t,e):new c(t):new c(t,e,a)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},f.prototype.write=function(t){var a=this;this.writable=!1;for(var i=t.length,n=0,r=i;n<r;n++)!function(t){s.encodePacket(t,a.supportsBinary,function(n){if(!a.usingBrowserWebSocket){var r={};if(t.options&&(r.compress=t.options.compress),a.perMessageDeflate)("string"==typeof n?e.byteLength(n):n.length)<a.perMessageDeflate.threshold&&(r.compress=!1)}try{a.usingBrowserWebSocket?a.ws.send(n):a.ws.send(n,r)}catch(t){u("websocket closed before onclose event")}--i||o()})}(t[n]);function o(){a.emit("flush"),setTimeout(function(){a.writable=!0,a.emit("drain")},0)}},f.prototype.onClose=function(){r.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",a="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(a=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=o.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+a+this.path+t},f.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===f.prototype.name)}}).call(e,a("EuP9").Buffer)},dtwh:function(t,e,a){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;e.splice(1,0,a,"color: inherit");let i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&"%c"===t&&(n=++i)}),e.splice(n,0,a)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=Object({NODE_ENV:"production"}).DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=a("lxYE")(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(e,a("W2nU"))},eAwk:function(t,e){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var a,i,n,r=String.fromCharCode;function s(t){for(var e,a,i=[],n=0,r=t.length;n<r;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<r?56320==(64512&(a=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&a)+65536):(i.push(e),n--):i.push(e);return i}function o(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function h(t,e){return r(t>>e&63|128)}function l(t,e){if(0==(4294967168&t))return r(t);var a="";return 0==(4294965248&t)?a=r(t>>6&31|192):0==(4294901760&t)?(o(t,e)||(t=65533),a=r(t>>12&15|224),a+=h(t,6)):0==(4292870144&t)&&(a=r(t>>18&7|240),a+=h(t,12),a+=h(t,6)),a+=r(63&t|128)}function u(){if(n>=i)throw Error("Invalid byte index");var t=255&a[n];if(n++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function c(t){var e,r;if(n>i)throw Error("Invalid byte index");if(n==i)return!1;if(e=255&a[n],n++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return o(r,t)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var a=!1!==(e=e||{}).strict,i=s(t),n=i.length,r=-1,o="";++r<n;)o+=l(i[r],a);return o},decode:function(t,e){var o=!1!==(e=e||{}).strict;a=s(t),i=a.length,n=0;for(var h,l=[];!1!==(h=c(o));)l.push(h);return function(t){for(var e,a=t.length,i=-1,n="";++i<a;)(e=t[i])>65535&&(n+=r((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=r(e);return n}(l)}}},fOB9:function(t,e){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var s=a.exec(t||""),o={},h=14;h--;)o[i[h]]=s[h]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},gVZZ:function(t,e){e.encode=function(t){var e="";for(var a in t)t.hasOwnProperty(a)&&(e.length&&(e+="&"),e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e},e.decode=function(t){for(var e={},a=t.split("&"),i=0,n=a.length;i<n;i++){var r=a[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},kDkS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7t+N"),n=a.n(i);var r=new function(){this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com"};function s(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.MainNetInRatio,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin,this.MainNetInRatio=t.mainnetinratio}}function o(){this.DDX,this.DDY,this.DDZ,this.SetData=function(t){this.DDX=t.ddx,this.DDY=t.ddy,this.DDZ=t.ddz}}function h(t){var e=t.toUpperCase();if(e.indexOf(".SH")>0){if("0"==(e=e.replace(".SH","")).charAt(0)&&parseInt(e)<=3e3)return!0}else if(e.indexOf(".SZ")>0){if("3"==(e=e.replace(".SZ","")).charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1}function l(t){this.Symbol=t,this.Name,this.Open,this.Price,this.High,this.Low,this.YClose,this.Vol,this.Amount,this.Date,this.Time,this.ExchangeRate,this.Amplitude,this.Increase,this.MaxPrice,this.MinPrice,this.RFPrice,this.IndexTop,this.Week,this.MinuteAmplitude={},this.RiseFallSpeed={},this.MAmount={},this.GetBaseData=function(t,e){switch(this.BaseDataTagID.add(t),e){case u.SYMBOL:return this.Symbol;case u.NAME:return this.Name;case u.OPEN:return this.Open;case u.PRICE:return this.Price;case u.YCLOSE:return this.YClose;case u.HIGH:return this.High;case u.LOW:return this.Low;case u.VOL:return this.Vol;case u.AMOUNT:return this.Amount;case u.DATE:return this.Date;case u.TIME:return this.Time;case u.INCREASE:return this.Increase;case u.EXCHANGE_RATE:return this.ExchangeRate;case u.AMPLITUDE:return this.Amplitude;case u.MAX_PRICE:return this.MaxPrice;case u.MIN_PRICE:return this.MinPrice;case u.RISE_FALL_PRICE:return this.RFPrice;case u.INDEXTOP:return this.IndexTop;case u.WEEK:return this.Week}},this.Heat,this.GetHeatData=function(t){return this.HeatTagID.add(t),this.Heat},this.Sort=new Map,this.GetSortData=function(t,e,a){var i=e.toString()+"-"+a.toString();if(!this.Sort.has(i)){var n=new function(t,e,a){this.arySymbol=new Array,this.SortField=t,this.Order=e,this.TagID=new Set([a])}(e,a,t);return this.Sort.set(i,n),n}return(n=this.Sort.get(i)).TagID.add(t),n},this.Buy5,this.GetBuy5=function(t){return this.BuySellTagID.add(t),this.Buy5},this.Sell5,this.GetSell5=function(t){return this.BuySellTagID.add(t),this.Sell5},this.Deal,this.GetDeal=function(t){return this.DealTagID.add(t),this.Deal},this.MarketValue,this.FlowMarketValue,this.Bookrate,this.Bookdiffer,this.PE,this.PB,this.GetDerivative=function(t,e){switch(this.DerivativeTagID.add(t),e){case u.MARKET_VALUE:return this.MarketValue;case u.FLOW_MARKET_VALUE:return this.FlowMarketValue;case u.BOOK_RATE:return this.Bookrate;case u.BOOK_DIFFER:return this.Bookdiffer;case u.PE:return this.PE;case u.PB:return this.PB}},this.Finance,this.GetFinance=function(t,e){if(!this.Finance)return this.FinanceTagID.add(t),null;switch(e){case u.ROE:return this.Finance.ROE;case u.FINANCE_DATE:return this.Finance.Date;case u.FINANCE_PERSEARNING:return this.Finance.PerSEarning;case u.FINANCE_PERNETASSET:return this.Finance.PerNetAsset;case u.FINANCE_NPROFIT:return this.Finance.NProfit;case u.FINANCE_NPROFITINCREASE:return this.Finance.NProfitIncrease;case u.FINANCE_NNETPROFIT:return this.Finance.NnetProfit;case u.FINANCE_NNPROFITINCREASE:return this.Finance.NnProfitIncrease;case u.FINANCE_NNPROFITSPEED:return this.Finance.NnProfitSpeed;case u.FINANCE_EPS:return this.Finance.EPS;case u.FINANCE_BENFORD:return this.Finance.Benford}},this.CapitalFlowDay,this.CapitalFlowDay3,this.CapitalFlowDay5,this.CapitalFlowDay10,this.GetCapitalFlowDay=function(t,e){let a=null;switch(e){case u.CAPITAL_FLOW_DAY:this.CapitalFlowDayID.add(t),this.CapitalFlowDay&&(a=this.CapitalFlowDay);break;case u.CAPITAL_FLOW_DAY3:this.CapitalFlowDay3ID.add(t),this.CapitalFlowDay3&&(a=this.CapitalFlowDay3);break;case u.CAPITAL_FLOW_DAY5:this.CapitalFlowDay5ID.add(t),this.CapitalFlowDay5&&(a=this.CapitalFlowDay5);break;case u.CAPITAL_FLOW_DAY10:this.CapitalFlowDay10ID.add(t),this.CapitalFlowDay10&&(a=this.CapitalFlowDay10)}return a},this.DDE,this.DDE3,this.DDE5,this.DDE10,this.GetDDE=function(t,e){let a=null;switch(e){case u.DDE:this.DDEID.add(t),this.DDE&&(a=this.DDE);break;case u.DDE3:this.DDE3ID.add(t),this.DDE3&&(a=this.DDE3);break;case u.DDE5:this.DDE5ID.add(t),this.DDE5&&(a=this.DDE5);break;case u.DDE10:this.DDE10ID.add(t),this.DDE10&&(a=this.DDE10)}return a},this.Event,this.GetEvent=function(t,e){return this.Event?this.Event:(this.EventTagID.add(t),null)},this.Company,this.GetCompany=function(t,e){if(!this.Company)return this.CompanyTagID.add(t),null;switch(e){case u.COMPANY_NAME:return this.Company.Name;case u.COMPANY_BUSINESS:return this.Company.Business;case u.COMPANY_VOL:return this.Company.Vol;case u.COMPANY_PRICE:return this.Company.Price;case u.COMPANY_RELEASEDATE:return this.Company.ReleaseDate;case u.COMPANY_COMPETENCE:return this.Company.Competence}},this.Plate,this.GetPlate=function(t,e){if(!this.Plate)return this.PlateTagID.add(t),null;switch(e){case u.PLATE_INDUSTRY:return this.Plate.Industry;case u.PLATE_CONCEPT:return this.Plate.Concept;case u.PLATE_REGION:return this.Plate.Region}},this.TagID=new Set,this.BaseDataTagID=new Set,this.HeatTagID=new Set,this.BuySellTagID=new Set,this.DealTagID=new Set,this.DerivativeTagID=new Set,this.FinanceTagID=new Set,this.CapitalFlowDayID=new Set,this.CapitalFlowDay3ID=new Set,this.CapitalFlowDay5ID=new Set,this.CapitalFlowDay10ID=new Set,this.DDEID=new Set,this.DDE3ID=new Set,this.DDE5ID=new Set,this.DDE10ID=new Set,this.EventTagID=new Set,this.CompanyTagID=new Set,this.PlateTagID=new Set,this.AttachTagID=function(t){this.TagID.add(t)},this.ClearTagID=function(){for(var t of(this.TagID.clear(),this.BaseDataTagID.clear(),this.HeatTagID.clear(),this.BuySellTagID.clear(),this.DealTagID.clear(),this.DerivativeTagID.clear(),this.FinanceTagID.clear(),this.CapitalFlowDayID.clear(),this.CapitalFlowDay3ID.clear(),this.CapitalFlowDay5ID.clear(),this.CapitalFlowDay10ID.clear(),this.DDEID.clear(),this.DDE3ID.clear(),this.DDE5ID.clear(),this.DDE10ID.clear(),this.EventTagID.clear(),this.CompanyTagID.clear(),this.Sort))t[1].TagID.clear()},this.RemoveTagID=function(t){for(var e of(this.TagID.delete(t),this.BaseDataTagID.delete(t),this.HeatTagID.delete(t),this.BuySellTagID.delete(t),this.DealTagID.delete(t),this.DerivativeTagID.delete(t),this.FinanceTagID.delete(t),this.CapitalFlowDayID.delete(t),this.CapitalFlowDay3ID.delete(t),this.CapitalFlowDay5ID.delete(t),this.CapitalFlowDay10ID.delete(t),this.DDEID.delete(t),this.DDE3ID.delete(t),this.DDE5ID.delete(t),this.DDE10ID.delete(t),this.EventTagID.delete(t),this.CompanyTagID.delete(t),this.Sort))e[1].TagID.delete(t)},this.SetBaseData=function(t){this.Name=t.name,this.YClose=t.yclose,this.Price=t.price,this.High=t.high,this.Low=t.low,this.Open=t.open,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,isNaN(t.exchangerate)||(this.ExchangeRate=t.exchangerate),isNaN(t.amplitude)||(this.Amplitude=t.amplitude),this.Name.indexOf("ST")>=0?(this.MaxPrice=1.05*this.Open,this.MinPrice=.95*this.Open):(this.MaxPrice=1.1*this.Open,this.MinPrice=.9*this.Open),this.Price&&this.YClose&&(this.RFPrice=this.Price-this.YClose),t.week&&(this.Week={},this.Week.Week1=t.week.week1,this.Week.Week4=t.week.week4,this.Week.Week13=t.week.week13,this.Week.Week26=t.week.week26,this.Week.Week52=t.week.week52)},this.SetDerivativeData=function(t){this.MarketValue=t.marketvalue,this.FlowMarketValue=t.flowmarketvalue,this.Bookrate=t.bookrate,this.Bookdiffer=t.bookdiffer,this.PE=t.pe,this.PB=t.pb},this.SetFinanceData=function(t){console.log(t),t.finance&&(this.Finance=new function(){this.ROE,this.Date,this.PerSEarning,this.EPS,this.PerNetAsset,this.NProfit,this.NProfitIncrease,this.NnetProfit,this.NnProfitIncrease,this.NnProfitSpeed,this.Benford,this.SetData=function(t){isNaN(t.roe)||(this.ROE=t.roe),isNaN(t.finance.date)||(this.Date=t.finance.date),isNaN(t.finance.persearning)||(this.PerSEarning=t.finance.persearning),isNaN(t.finance.eps)||(this.EPS=t.finance.eps),isNaN(t.finance.pernetasset)||(this.PerNetAsset=t.finance.pernetasset),isNaN(t.finance.nprofit)||(this.NProfit=t.finance.nprofit),isNaN(t.finance.nprofitincrease)||(this.NProfitIncrease=t.finance.nprofitincrease),isNaN(t.finance.nnetprofit)||(this.NnetProfit=t.finance.nnetprofit),isNaN(t.finance.nnprofitincrease)||(this.NnProfitIncrease=t.finance.nnprofitincrease),isNaN(t.finance.nnprofitspeed)||(this.NnProfitSpeed=t.finance.nnprofitspeed),isNaN(t.finance.benford)||(this.Benford=t.finance.benford)}},this.Finance.SetData(t))},this.SetIndexBaseData=function(t){this.SetBaseData(t);var e=new function(){this.Stop,this.Down,this.Up,this.Unchanged,this.UpStock={Symbol:null,Name:null},this.DownStock={Symbol:null,Name:null}};t.indextop&&(e.Up=t.indextop.up,e.Down=t.indextop.down,e.Unchanged=t.indextop.unchanged,e.Stop=t.indextop.stop,e.UpStock.Symbol=t.indextop.upstock.symbol,e.UpStock.Name=t.indextop.upstock.name,e.DownStock.Symbol=t.indextop.downstock.symbol,e.DownStock.Name=t.indextop.downstock.name),this.IndexTop=e},this.SetBuySellData=function(t){for(var e in this.SetBaseData(t),this.Buy5=new Array,this.Sell5=new Array,t.buy){var a=t.buy[e];this.Buy5.push({Price:a.price,Vol:a.vol})}for(var e in t.sell){a=t.sell[e];this.Sell5.push({Price:a.price,Vol:a.vol})}},this.SetDealData=function(t){for(var e in this.Price=t.price,this.High=t.high,this.Low=t.low,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,this.Deal=new Array,t.deal){var a=t.deal[e];if(!isNaN(a.price)&&!isNaN(a.time)){var i="";0===a.bs?i="B":1===a.bs&&(i="S"),this.Deal.push({Price:a.price,Amount:a.amount,Vol:a.vol,Time:a.time,BS:i})}}},this.SetHeatData=function(t){var e=new function(){this.Good,this.GoodIncrease={Day1:null,Week1:null,Week4:null}};e.Good=t.quadrant.good,e.GoodIncrease.Day1=t.quadrant.gincrease.day1,e.GoodIncrease.Week1=t.quadrant.gincrease.week1,e.GoodIncrease.Week4=t.quadrant.gincrease.week4,this.Heat=e},this.SetCapitalFlowDayData=function(t,e){if(t)switch(e){case C.CAPITAL_FLOW_DAY_DATA:this.CapitalFlowDay=new function(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin}},this.CapitalFlowDay.SetData(t);break;case C.CAPITAL_FLOW_DAY3_DATA:this.CapitalFlowDay3=new s,this.CapitalFlowDay3.SetData(t);break;case C.CAPITAL_FLOW_DAY5_DATA:this.CapitalFlowDay5=new s,this.CapitalFlowDay5.SetData(t);break;case C.CAPITAL_FLOW_DAY10_DATA:this.CapitalFlowDay10=new s,this.CapitalFlowDay10.SetData(t)}},this.SetDDE=function(t,e){if(t){switch(e){case C.DDE_DAY_DATA:this.DDE=new o,this.DDE.SetData(t);break;case C.DDE_DAY3_DATA:this.DDE3=new o,this.DDE3.SetData(t);break;case C.DDE_DAY5_DATA:this.DDE5=new o,this.DDE5.SetData(t);break;case C.DDE_DAY10_DATA:this.DDE10=new o,this.DDE10.SetData(t)}return t}},this.SetEventData=function(t){t.events&&(this.Event=new function(){this.IsMargin=!1,this.IsHK=!1,this.IsSHHK=!1,this.IsSZHK=!1,this.STType=0,this.HK,this.SetData=function(t){t.events&&(isNaN(t.events.margin)||(this.IsMargin=1==t.events.margin),isNaN(t.events.hk)||(this.IsHK=1==t.events.hk),isNaN(t.events.shhk)||(this.IsSHHK=1==t.events.shhk),isNaN(t.events.szhk)||(this.IsSZHK=1==t.events.szhk),isNaN(t.events.st)||(this.STType=t.events.st),this.IsHK&&t.events.hksymbol&&t.events.hkname&&(this.HK={Symbol:t.events.hksymbol,Name:t.events.hkname}))}},this.Event.SetData(t))},this.SetCompanyData=function(t){t.company&&(this.Company=new function(){this.Name,this.Business,this.Vol,this.Price,this.ReleaseDate,this.Competence,this.SetData=function(t){t.company&&(this.Name=t.company.name,this.Business=t.company.business,this.Vol=t.company.vol,this.Price=t.company.price,this.ReleaseDate=t.company.releasedate,this.Competence=t.company.corecompetence)}},this.Company.SetData(t))},this.SetPlateData=function(t){(t.industry||t.region||t.concept)&&(this.Plate=new function(){this.Industry,this.Region,this.Concept,this.SetData=function(t){this.SetIndustryData(t),this.SetRegionData(t),this.SetConceptData(t)},this.SetIndustryData=function(t){if(t.industry){this.Industry=[];for(let e in t.industry){let a=t.industry[e];this.Industry.push({Name:a.name,Symbol:a.symbol})}}},this.SetRegionData=function(t){if(t.region){this.Region=[];for(let e in t.region){let a=t.region[e];this.Region.push({Name:a.name,Symbol:a.symbol})}}},this.SetConceptData=function(t){if(t.concept){this.Concept=[];for(let e in t.concept){let a=t.concept[e];this.Concept.push({Name:a.name,Symbol:a.symbol})}}}},this.Plate.SetData(t))},this.SetData=function(t){t.name&&(this.Name=t.name),isNaN(t.yclose)||(this.YClose=t.yclose),isNaN(t.price)||(this.Price=t.price),isNaN(t.high)||(this.High=t.high),isNaN(t.low)||(this.Low=t.low),isNaN(t.vol)||(this.Vol=t.vol),isNaN(t.amount)||(this.Amount=t.amount),isNaN(t.date)||(this.Date=t.date),isNaN(t.time)||(this.Time=t.time),isNaN(t.increase)||(this.Increase=t.increase),isNaN(t.marketvalue)||(this.MarketValue=t.marketvalue),isNaN(t.flowmarketvalue)||(this.FlowMarketValue=t.flowmarketvalue),isNaN(t.bookrate)||(this.Bookrate=t.bookrate),isNaN(t.bookdiffer)||(this.Bookdiffer=t.bookdiffer),isNaN(t.pe)||(this.PE=t.pe),isNaN(t.pb)||(this.PB=t.pb),t.finance&&this.SetFinanceData(t),t.finance&&this.SetFinanceDetailData(t),t.mamplitude&&(isNaN(t.mamplitude[1])||(this.MinuteAmplitude.M1=t.mamplitude[1]),isNaN(t.mamplitude[3])||(this.MinuteAmplitude.M3=t.mamplitude[3]),isNaN(t.mamplitude[5])||(this.MinuteAmplitude.M5=t.mamplitude[5]),isNaN(t.mamplitude[10])||(this.MinuteAmplitude.M10=t.mamplitude[10]),isNaN(t.mamplitude[15])||(this.MinuteAmplitude.M15=t.mamplitude[15])),t.risefallspeed&&(isNaN(t.risefallspeed[1])||(this.RiseFallSpeed.M1=t.risefallspeed[1]),isNaN(t.risefallspeed[3])||(this.RiseFallSpeed.M3=t.risefallspeed[3]),isNaN(t.risefallspeed[5])||(this.RiseFallSpeed.M5=t.risefallspeed[5]),isNaN(t.risefallspeed[10])||(this.RiseFallSpeed.M10=t.risefallspeed[10]),isNaN(t.risefallspeed[15])||(this.RiseFallSpeed.M15=t.risefallspeed[15])),t.mamount&&(isNaN(t.mamount[1])||(this.MAmount.M1=t.mamount[1]),isNaN(t.mamount[3])||(this.MAmount.M5=t.mamount[3]),isNaN(t.mamount[5])||(this.MAmount.M5=t.mamount[5]),isNaN(t.mamount[10])||(this.MAmount.M10=t.mamount[10]),isNaN(t.mamount[15])||(this.MAmount.M15=t.mamount[15]))}}var u={SYMBOL:0,NAME:1,OPEN:2,PRICE:3,HIGH:4,LOW:5,YCLOSE:6,VOL:7,AMOUNT:8,DATE:9,TIME:10,INCREASE:11,BUY5:12,SELL5:13,DEAL:14,AMPLITUDE:15,MARKET_VALUE:16,FLOW_MARKET_VALUE:17,BOOK_RATE:18,BOOK_DIFFER:19,PE:20,PB:21,EXCHANGE_RATE:23,ROE:24,FINANCE_DATE:25,FINANCE_PERSEARNING:26,FINANCE_PERNETASSET:27,FINANCE_NPROFIT:28,FINANCE_NPROFITINCREASE:29,FINANCE_NNETPROFIT:30,FINANCE_NNPROFITINCREASE:31,FINANCE_NNPROFITSPEED:32,FINANCE_EPS:33,MAX_PRICE:34,MIN_PRICE:35,RISE_FALL_PRICE:36,FINANCE_BENFORD:37,RISEFALLSPEED_1:38,RISEFALLSPEED_3:39,RISEFALLSPEED_5:40,RISEFALLSPEED_10:41,RISEFALLSPEED_15:42,MINUTE_AMPLITUDE_1:43,MINUTE_AMPLITUDE_3:44,MINUTE_AMPLITUDE_5:45,MINUTE_AMPLITUDE_10:46,MINUTE_AMPLITUDE_15:47,MINUTE_AMOUNT_1:48,MINUTE_AMOUNT_3:49,MINUTE_AMOUNT_5:50,MINUTE_AMOUNT_10:51,MINUTE_AMOUNT_15:52,COMPANY_NAME:53,PLATE_INDUSTRY:54,PLATE_CONCEPT:55,PLATE_REGION:56,COMPANY_BUSINESS:57,COMPANY_VOL:58,COMPANY_PRICE:59,COMPANY_RELEASEDATE:60,COMPANY_COMPETENCE:61,CAPITAL_FLOW_DAY:67,CAPITAL_FLOW_DAY3:68,CAPITAL_FLOW_DAY5:69,CAPITAL_FLOW_DAY10:70,DDE:71,DDE3:72,DDE5:73,DDE10:74,EVENTS:75,INDEXTOP:100,WEEK:101,HEAT:102},c={m_mapFiled:new Map([[u.NAME,"name"],[u.SYMBOL,"symbol"],[u.PRICE,"price"],[u.INCREASE,"increase"],[u.PE,"pe"],[u.FINANCE_BENFORD,"finance.benford"],[u.YCLOSE,"yclose"],[u.RISEFALLSPEED_1,"risefallspeed.1"],[u.RISEFALLSPEED_3,"risefallspeed.3"],[u.RISEFALLSPEED_5,"risefallspeed.5"],[u.RISEFALLSPEED_10,"risefallspeed.10"],[u.RISEFALLSPEED_15,"risefallspeed.15"],[u.MINUTE_AMPLITUDE_1,"mamplitude.1"],[u.MINUTE_AMPLITUDE_3,"mamplitude.3"],[u.MINUTE_AMPLITUDE_5,"mamplitude.5"],[u.MINUTE_AMPLITUDE_10,"mamplitude.10"],[u.MINUTE_AMPLITUDE_15,"mamplitude.15"],[u.MINUTE_AMOUNT_1,"mamount.1"],[u.MINUTE_AMOUNT_3,"mamount.3"],[u.MINUTE_AMOUNT_5,"mamount.5"],[u.MINUTE_AMOUNT_10,"mamount.10"],[u.MINUTE_AMOUNT_15,"mamount.15"]]),GetFieldName:function(t){return this.m_mapFiled.has(t)?this.m_mapFiled.get(t):null}};function f(t,e){this.JSStock=t,this.TagID=e,this.Get=function(e,a){var i=t.Get(e,this.TagID);if(!i)return null;switch(a){case u.SYMBOL:case u.NAME:case u.OPEN:case u.PRICE:case u.YCLOSE:case u.HIGH:case u.LOW:case u.VOL:case u.AMOUNT:case u.DATE:case u.TIME:case u.INCREASE:case u.EXCHANGE_RATE:case u.AMPLITUDE:case u.MAX_PRICE:case u.MIN_PRICE:case u.RISE_FALL_PRICE:case u.INDEXTOP:case u.WEEK:return i.GetBaseData(this.TagID,a);case u.HEAT:return i.GetHeatData(this.TagID);case u.BUY5:return i.GetBuy5(this.TagID);case u.SELL5:return i.GetSell5(this.TagID);case u.DEAL:return i.GetDeal(this.TagID);case u.MARKET_VALUE:case u.FLOW_MARKET_VALUE:case u.BOOK_RATE:case u.BOOK_DIFFER:case u.PE:case u.PB:return i.GetDerivative(this.TagID,a);case u.ROE:case u.FINANCE_DATE:case u.FINANCE_PERSEARNING:case u.FINANCE_PERNETASSET:case u.FINANCE_NPROFIT:case u.FINANCE_NPROFITINCREASE:case u.FINANCE_NNETPROFIT:case u.FINANCE_NNPROFITINCREASE:case u.FINANCE_NNPROFITSPEED:case u.FINANCE_EPS:case u.FINANCE_BENFORD:return i.GetFinance(this.TagID,a);case u.PLATE_INDUSTRY:case u.PLATE_CONCEPT:case u.PLATE_REGION:return i.GetPlate(this.TagID,a);case u.CAPITAL_FLOW_DAY:case u.CAPITAL_FLOW_DAY3:case u.CAPITAL_FLOW_DAY5:case u.CAPITAL_FLOW_DAY10:return i.GetCapitalFlowDay(this.TagID,a);case u.DDE:case u.DDE3:case u.DDE5:case u.DDE10:return i.GetDDE(this.TagID,a);case u.EVENTS:return i.GetEvent(this.TagID,a);case u.COMPANY_NAME:case u.COMPANY_BUSINESS:case u.COMPANY_VOL:case u.COMPANY_PRICE:case u.COMPANY_RELEASEDATE:case u.COMPANY_COMPETENCE:return i.GetCompany(this.TagID,a);default:return null}},this.GetSort=function(e,a,i){var n=t.Get(e,this.TagID);return null==n?n:n.GetSortData(this.TagID,a,i)},this.EndRead=function(t){1==t&&this.JSStock.ReqeustData()},this.SetQueryField=function(t,e){for(var a in e)this.Get(t,e[a])}}d.Init=function(){return new d},d.SetDomain=function(t,e){t&&(r.Domain=t),e&&(r.CacheDomain=e)},d.GetSearchStock=function(t){return new function(t){this.SearchStockApiUrl=r.Domain+"/API/StockSpell",this.UpdateUICallback=t,this.PageSize=50,this.Count,this.EndOffset,this.Data=new Array,this.SearchString="",this.SearchType=0,this.Search=function(t,e){if(this.SearchString==t&&this.SearchType==e)"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this);else{this.SearchString=t,this.SearchType=e,this.Count=0,this.EndOffset=0,this.Data=[];var a=this.PageSize-1;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,a)}},this.IsEndPage=function(){return this.Count<=0||this.EndOffset>this.Count-1},this.NextPage=function(){if(!(this.EndOffset+1>this.Count)){var t=this.EndOffset+this.PageSize;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,t)}},this.ReqeustSearchStock=function(t,e,a,i){var r=this;n.a.ajax({url:this.SearchStockApiUrl,data:{input:t,start:a,end:i,type:e},type:"post",dataType:"json",async:!0,success:function(t){r.RecvSearchStockData(t,C.SEARCH_STOCK_DATA)},error:function(t){r.RecvError(t,C.SEARCH_STOCK_DATA)}})},this.RecvSearchStockData=function(t){for(var e in t.stock){var a=t.stock[e];this.Data.push({Name:a.name,Symbol:a.symbol,Type:a.type})}0==t.count?(this.Count=0,this.EndOffset=0):(0==this.Count&&(this.Count=t.count),this.EndOffset=t.end,this.Count>0&&this.EndOffset>this.Count&&(this.EndOffset=this.Count-1)),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){console.log("[SearchStock::RecvError] datatype="+e.toString()),console.log(t),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this,"error")}}(t)},d.GetShortTerm=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=r.Domain+"/API/StockShortTerm",this.Count=20,this.RequestData=function(){var t=this;let e={count:this.Count};this.Symbol&&(e.symbol=this.Symbol),n.a.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,C.SHORT_TERM_DATA)},fail:function(e){t.RecvError(e,C.SHORT_TERM_DATA)}})},this.RecvData=function(t,e){this.Data=[];for(let e in t.shortterm){let a=t.shortterm[e];this.Data.push({Date:a.date,Name:a.name,Symbol:a.symbol,Time:a.time,Content:a.content,TypeInfo:a.typeinfo,Type:a.type})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}(t)},d.GetDealDay=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.Symbol=t,this.Date,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=r.CacheDomain+"/cache/dealday/day/"+this.Date+"/"+this.Symbol+".json";console.log("[DealDay::RequestData] cache url ",e),n.a.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,C.DEAL_DAY_DATA)},error:function(e){t.RecvError(e,C.DEAL_DAY_DATA)}})},this.RecvData=function(t,e){if(t.day&&t.deal){var a=t.deal.amount,i=t.deal.price,n=t.deal.time,r=t.deal.vol,s=t.deal.flag;if(s&&r&&n&&i&&a){var o={Date:t.date,Open:t.day.open,Close:t.day.price,YClose:t.day.yclose,Symbol:t.symbol,Name:t.name,Deal:[],PriceList:[]},h=new Map,l=0,u=Math.min(n.length,r.length,s.length,i.length,a.length);for(let t=0;t<u;++t){let e={Time:n[t],Vol:r[t],Flag:"",Price:i[t],Amount:a[t]};var c;0===s[t]?e.Flag="B":1===s[t]&&(e.Flag="S"),e.Time>15e4&&(e.Time=15e4),o.Deal.push(e),h.has(e.Price)?(c=h.get(e.Price)).Vol+=e.Vol:(c={Vol:e.Vol,Price:e.Price,BuyVol:0,SellVol:0,NoneVol:0},h.set(e.Price,c)),0===s[t]?c.BuyVol+=e.Vol:1===s[t]?c.SellVol+=e.Vol:c.NoneVol+=e.Vol,l+=e.Vol}for(var f of h){var C=f[1];l>0&&(C.Proportion=C.Vol/l),o.PriceList.push(C)}o.PriceList.sort(function(t,e){return e.Price-t.Price}),this.Data=o,this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log(`[DealDay::RecvError] status=${t.status} statusText=${t.statusText} responseText=${t.responseText}`),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}(t)},d.GetBlockMember=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.ApiUrl=r.Domain+"/API/StockBlockMember",this.PageSize=10,this.Start=0,this.OrderField,this.Order,this.Symbol=t,this.OrderNull=0,this.Field=new Array,this.Data=new Array,this.PageInfo,this.SetField=function(t){this.Field=new Array;for(let e in t){let a=t[e],i=c.GetFieldName(a);null!=i&&this.Field.push(i)}return this.Field.length>0},this.SetOrder=function(t,e){this.Order=null,this.OrderField=null;let a=c.GetFieldName(t);return null!=a&&(this.OrderField=a,this.Order=e,!0)},this.RequestData=function(){this.Data=[];var t=this;n.a.ajax({url:this.ApiUrl,data:{symbol:this.Symbol,field:this.Field,order:this.Order,orderfield:this.OrderField,start:this.Start,end:this.Start+this.PageSize,ordernull:this.OrderNull},type:"post",dataType:"json",success:function(e){t.RecvData(e,C.BLOCK_MEMBER_DATA)},error:function(e){t.RecvError(e,C.BLOCK_MEMBER_DATA)}})},this.RecvData=function(t,e){for(let e in t.stock){let i=t.stock[e];if(null!=i.symbol){var a=new l(i.symbol);a.SetData(i),this.Data.push(a)}}this.PageInfo={Count:t.count,Start:t.start,End:t.end},"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}(t)},d.GetBlockTop=function(){return new function(){this.newMethod=D,this.newMethod(),delete this.newMethod,this.BlockType=1,this.Count=20,this.OrderField="increase",this.Order=-1,this.Field=["symbol","price","name","vol","increase","indextop","risefall"],this.ApiUrl=r.Domain+"/API/StockBlockTop",this.SetField=function(t){},this.ReqeustData=function(){var t=this;n.a.ajax({url:this.ApiUrl,data:{blocktype:this.BlockType,start:0,end:this.Count,field:this.Field,orderfield:this.OrderField,order:this.Order},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,C.BLOCK_TOP_DATA)},fail:function(e){t.RecvError(e,C.BLOCK_TOP_DATA)}})},this.RecvData=function(t,e){let a=t;this.Data=[];for(let t in a.stock){let e=a.stock[t];this.Data.push({Name:e.name,Symbol:e.symbol,Increase:e.increase,Risefall:e.risefall,IndexTop:{Down:e.indextop.down,Stop:e.indextop.stop,Up:e.indextop.up,Unchanged:e.indextop.unchanged,DownStock:{Name:e.indextop.downstock.name,Symbol:e.indextop.downstock.symbol},UpStock:{Name:e.indextop.upstock.name,Symbol:e.indextop.upstock.symbol}}})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}},d.GetMinuteImage=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.ApiUrl=r.Domain+"/API/StockMinuteImage",this.Symbol=[t],this.Data=[],this.RequestData=function(){this.Data=[];var t=this;n.a.ajax({url:this.ApiUrl,data:{symbol:this.Symbol},type:"post",dataType:"json",success:function(e){t.RecvData(e,C.IMAGE_MINUTE_DATA)},error:function(e){t.RecvError(e,C.IMAGE_MINUTE_DATA)}})},this.RecvData=function(t,e){for(let e in t.symbol){let a={Symbol:t.symbol[e],Image:t.imagerelative[e]};this.Data.push(a)}"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){}}(t)},d.GetHistoryDayData=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.Symbol=t,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=r.CacheDomain+"/cache/historyday/all/"+this.Symbol+".json";console.log("[HistoryDayData::RequestData] cache url ",e),n.a.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,C.HISTORY_DAY_DATA)},error:function(e){t.RecvError(e,C.HISTORY_DAY_DATA)}})},this.RecvData=function(t,e){if(t.symbol&&t.name){var a=t.amount,i=t.close,n=t.date,r=t.high,s=t.low,o=t.open,h=t.vol,l=t.yclose;if(a&&i&&n&&r&&s&&o&&h&&l){var u={UpdateDate:t.update,Symbol:t.symbol,Name:t.name,KLine:[]};for(let t=0;t<n.length;++t){let e={Date:n[t],YClose:l[t],Open:o[t],High:r[t],Low:s[t],Close:i[t],Vol:h[t],Amount:a[t]};u.KLine.push(e)}this.Data=u,this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log(`[HistoryDayData::RecvError] status=${t.status} statusText=${t.statusText} responseText=${t.responseText}`),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()},this.GetWeekData=function(){if(!this.Data||!this.Data.KLine)return[];var t=this.GetDayPeriodData(1);return t},this.GetMonthData=function(){if(!this.Data||!this.Data.KLine)return[];var t=this.GetDayPeriodData(2);return t},this.GetDayPeriodData=function(t){var e=new Array,a=0,i=null;for(var n in this.Data.KLine){var r=!1,s=this.Data.KLine[n];switch(t){case 1:var o=this.GetFirday(s.Date);o!=a&&(r=!0,a=o);break;case 2:parseInt(s.Date/100)!=parseInt(a/100)&&(r=!0,a=s.Date);break;case 3:parseInt(s.Date/1e4)!=parseInt(a/1e4)&&(r=!0,a=s.Date)}if(r){if((i={}).Date=s.Date,e.push(i),null==s.Open||null==s.Close)continue;i.Open=s.Open,i.High=s.High,i.Low=s.Low,i.YClose=s.YClose,i.Close=s.Close,i.Vol=s.Vol,i.Amount=s.Amount}else{if(null==i)continue;if(null==s.Open||null==s.Close)continue;null==i.Open||null==i.Close?(i.Open=s.Open,i.High=s.High,i.Low=s.Low,i.YClose=s.YClose,i.Close=s.Close,i.Vol=s.Vol,i.Amount=s.Amount):(i.High<s.High&&(i.High=s.High),i.Low>s.Low&&(i.Low=s.Low),i.Close=s.Close,i.Vol+=s.Vol,i.Amount+=s.Amount,i.Date=s.Date)}}return e},this.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var n=864e5*(5-a);i+=n}else{var n=864e5*(a-5);i-=n}e.setTime(i);var r=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return r}}(t)},d.GetDealPriceListData=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=r.Domain+"/API/StockPriceList",this.RequestData=function(){if(this.Symbol){var t=this,e={};Array.isArray(this.Symbol)?e.Symbol=this.Symbol:e.Symbol=[this.Symbol],n.a.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,C.DEAL_PRICE_LIST_DATA)},fail:function(e){t.RecvError(e,C.DEAL_PRICE_LIST_DATA)}})}},this.RecvData=function(t,e){if(this.Data=null,!(t.statistics.length<=0)){this.Data={Day:{},PriceList:[]};var a=t.data[0];this.Data.Day={Date:a.date,YClose:a.yclose,Price:a.price,Vol:a.vol,Time:a.time},this.Data.Stock={Symbol:a.symbol,Name:a.name};var i=t.statistics[0];for(var n in i.list){var r=i.list[n],s={Price:r[0],Vol:r[1],BuyVol:r[2],SellVol:r[3],NoneVol:r[4]};a.vol>0&&(s.Proportion=s.Vol/a.vol),this.Data.PriceList.push(s)}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()}},this.RecvError=function(t,e){}}(t)},d.GetLatestDetailData=function(t){return new function(t){this.newMethod=D,this.newMethod(),delete this.newMethod,this.IsAutoUpdate=!1,this.Symbol=t,this.PageSize=20,this.Request=function(t,e){this.Error=null;var a=this,i=t*e,s=i+e,o=r.Domain+"/API/StockDetail";console.log(`[LatestDetailData::RequestData] url=${o}, start=${i} , end=${s}`),n.a.ajax({url:o,data:{symbol:this.Symbol,start:i,end:s},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,C.LATEST_DETAIL_DATA)},error:function(t){a.RecvError(t,C.LATEST_DETAIL_DATA)}})},this.RequestData=function(){this.Data={Deal:[],Count:0,Reqeust:{PageIndex:0},Response:{}},this.Request(0,this.PageSize)},this.RequestPage=function(t){this.Data||(this.Data={Deal:[],Count:0}),this.Data.Reqeust={PageIndex:t},this.Data.Response={};for(var e=t*this.PageSize,a=e+this.PageSize,i=!0,n=e;n<a;++n)if(!this.Data.Deal[n]){i=!1;break}i?(this.Data.Response={Start:e,End:a},this.InvokeUpdateUICallback()):this.Request(t,this.PageSize)},this.RecvData=function(t,e){if(this.Data.Count=t.count,t.detail){this.Data.Day={YClose:t.yclose,Open:t.open,Close:t.price,Date:t.date},this.Data.Stock={Symbol:t.symbol,Name:t.name};for(var a=t.start,i=0,n=a;i<t.detail.length;++i,++n){var r=t.detail[i],s={Time:r[0],Price:r[1],Vol:r[2],Amount:r[3],Flag:""};0===r[4]?s.Flag="B":1===r[4]&&(s.Flag="S"),this.Data.Deal[n]=s}this.Data.Response={Start:t.start,End:t.end},this.InvokeUpdateUICallback()}else this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log(`[LatestDetailData::RecvError] status=${t.status} statusText=${t.statusText} responseText=${t.responseText}`),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}(t)},d.GetAnalylisPlate=function(){return new function(){this.newMethod=D,this.newMethod(),delete this.newMethod,this.ApiUrl=r.Domain+"/api/StockListAnalyze",this.PolicyGuid,this.Plate="",this.SymbolList=[],this.RequestData=function(){var t=this;n.a.ajax({url:t.ApiUrl,data:{PolicyGuid:t.PolicyGuid,Plate:t.Plate,Symbol:t.SymbolList},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e)},error:function(e){t.RecvError(e)}})},this.RecvData=function(t){this.Data={};var e=t;if(0!=e.count){if(e.concept){var a=[];for(var i in e.concept.data){var n=e.concept.data[i],r={};r.Name=n[0],r.Symbol=n[1],r.Ratio=n[2],r.Count=n[3],r.Increase=n[4],r.Price=n[5],r.Week1=n[6],r.Week4=n[7],a.push(r)}this.Data.Concept=a}e.distributed&&(this.Data.Distributed=e.distributed),e.industry&&(this.Data.Industry=e.industry),e.quadrant&&(this.Data.Quadrant=e.quadrant),e.region&&(this.Data.Region=e.region),this.UpdateUICallback&&this.UpdateUICallback(this)}},this.RecvError=function(t){console.log(t)}}},d.GetStockHistory=function(){return new function(){this.Symbol,this.Callback,this.Order=-1,this.SortField,this.Field,this.Plate,this.Data=new Map,this.ApiUrl=r.Domain+"/API/StockHistoryDay",this.PageSize=20,this.PageIndex=1,this.Count,this.currentData=null,this.RequsetData=function(t,e){var a=this,i="string"==typeof a.Symbol?[this.Symbol]:this.Symbol,r=i?i.length:0;this.Plate?this.currentData={plate:this.Plate,symbol:i,start:0,end:this.PageSize,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]}:this.currentData={symbol:i,start:0,end:r,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]},n.a.ajax({url:this.ApiUrl,data:a.currentData,method:"POST",dataType:"json",success:function(e){a.Count=e.data.count,a.RecvData(e,t)},fail:function(e){a.RecvError(e,t)}})},this.GetNextPage=function(){var t=this;this.PageSize*this.PageIndex<this.Count?(this.currentData.start=this.PageSize*this.PageIndex,this.PageIndex++,this.currentData.end=this.PageSize*this.PageIndex,n.a.ajax({url:this.ApiUrl,data:t.currentData,method:"POST",dataType:"json",success:function(e){t.RecvData(e)},fail:function(e){t.RecvError(e)}})):alert("")},this.RecvData=function(t,e){let a=t.data;for(let t in a.stock){let e=a.stock[t],i=e.symbol,n={};this.Data.has(i)?n=this.Data.get(i):(n={Symbol:e.symbol,Name:e.name,Data:new Map},this.Data.set(i,n)),this.SetStockData(e,n)}this.Callback&&this.Callback(this,e)},this.SetStockData=function(t,e){for(let a in t.stockday){let i=t.stockday[a],n=i.date,r=new Map;this.SetFinanceData(i,r),this.SetBlocktradingData(i,r),this.SetChangesData(i,r),this.SetLiftingData(i,r),this.SetPforecastData(i,r),this.SetShortIndicatorsData(i,r),e.Data.set(n,r)}return e},this.SetFinanceData=function(t,e){var a,i;(a=t.finance1)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_BENFORD,a.benford)),(i=t.announcement1)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_QUARTER,i.quarter)),(a=t.finance2)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_BENFORD,a.benford)),(i=t.announcement2)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_QUARTER,i.quarter)),(a=t.finance3)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_BENFORD,a.benford)),(i=t.announcement3)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_QUARTER,i.quarter)),(a=t.finance4)&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_BENFORD,a.benford)),(i=t.announcement4)&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_QUARTER,i.quarter))},this.SetBlocktradingData=function(t,e){var a=t.blocktrading;a&&e.set(STOCK_HISTORY_FIELD_NAME.BLOCK_TRADING,{Premium:a.premium,Price:a.price,Vol:a.vol,Amount:a.amount})},this.SetChangesData=function(t,e){var a=t.changes;a&&e.set(STOCK_HISTORY_FIELD_NAME.HOLDERS_CHANGES,{List:a.list})},this.SetLiftingData=function(t,e){var a=t.lifting;a&&e.set(STOCK_HISTORY_FIELD_NAME.LIFTING,{Lifting:a})},this.SetPforecastData=function(t,e){var a=t.pforecast;a&&e.set(STOCK_HISTORY_FIELD_NAME.PFORECAST,{Lowprofit:a[0].lowprofit,Highprofit:a[0].highprofit,Lowchange:a[0].lowchange,Highchange:a[0].highchange,Reportdate:a[0].reportdate})},this.SetShortIndicatorsData=function(t,e){var a=t.policy;if(a){const t=["","","","","","","","","","","1"];let i=0,n=[],r=0,s="";a.forEach(e=>{t.some(t=>t===e.name)&&(i++,n.push(e.time))}),i?(r=Math.max.apply(n,n),s=a.find(t=>t.time===r).name):s="",console.log(s,i,"latestName-targetedCount"),e.set(STOCK_HISTORY_FIELD_NAME.SHORTIND_ICATORS,{latestIndicatorName:s,indicatorCount:i})}},this.RecvError=function(t,e){},this.CreateCondition=function(t){return new QueryCondition(t)}}};var C={BASE_DATA:1,INDEX_BASE_DATA:2,HEAT_DATA:3,SORT_DATA:4,BUY_SELL_DATA:5,DEAL_DATA:6,DERIVATIVE_DATA:7,FINANCE_DATA:8,SEARCH_STOCK_DATA:9,SELF_STOCK_DATA:10,LOGON_DATA:11,BLOCK_MEMBER_DATA:13,SHORT_TERM_DATA:14,COMPANY_DATA:15,PLATE_DATA:16,CAPITAL_FLOW_DAY_DATA:23,CAPITAL_FLOW_DAY3_DATA:24,CAPITAL_FLOW_DAY5_DATA:25,CAPITAL_FLOW_DAY10_DATA:26,DDE_DAY_DATA:27,DDE_DAY3_DATA:28,DDE_DAY5_DATA:29,DDE_DAY10_DATA:30,DEAL_DAY_DATA:105,EVENT_DATA:106,IMAGE_MINUTE_DATA:107,HISTORY_DAY_DATA:108,DEAL_PRICE_LIST_DATA:109,LATEST_DETAIL_DATA:110};function d(){this.MapStock=new Map,this.MapTagCallback=new Map,this.RequestVersion=new Array([100,100,100]),this.RealtimeApiUrl=r.Domain+"/API/Stock",this.PlateQuadrantApiUrl=r.Domain+"/API/StockPlateQuadrant",this.IsAutoUpdate=!0,this.AutoUpateTimeout=15e3,this.Timeout,this.NetworkFilter,this.GetStockRead=function(t,e){for(var a of this.MapStock)a[1].RemoveTagID(t);return this.MapTagCallback.set(t,e),new f(this,t)},this.Unsubscribe=function(t){for(var e of this.MapStock)e[1].RemoveTagID(t)},this.UnsubscribeStock=function(t,e){for(var a of this.MapStock)if(a[0]===t){e?a[1].RemoveTagID(e):a[1].ClearTagID(),console.log(`[JSStock::UnsubscribeStock] symbol=${t}, tagID=${e}`);break}},this.Get=function(t,e){this.MapStock.has(t)||this.MapStock.set(t,new l(t));var a=this.MapStock.get(t);return e&&a.AttachTagID(e),a},this.RequestData=function(){var t=new Array,e=new Array,a=new Array,i=new Array,n=new Array,r=new Array,s=new Array,o=[],l=[],u=[],c=[],f=[],C=[],d=[],D=[],p=new Array,m=new Array,v=new Array;for(var S of this.MapStock){var g=S[1],I=S[0];g.BaseDataTagID.size>0&&(h(I)?e.push(I):t.push(I)),g.BuySellTagID.size>0&&i.push(I),g.CapitalFlowDayID.size>0&&o.push(I),g.CapitalFlowDay3ID.size>0&&l.push(I),g.CapitalFlowDay5ID.size>0&&u.push(I),g.CapitalFlowDay10ID.size>0&&c.push(I),g.DDEID.size>0&&f.push(I),g.DDE3ID.size>0&&C.push(I),g.DDE5ID.size>0&&d.push(I),g.DDE10ID.size>0&&D.push(I),g.HeatTagID.size>0&&a.push(I),g.DealTagID.size>0&&n.push(I),g.DerivativeTagID.size>0&&r.push(I),g.FinanceTagID.size>0&&s.push(I),null==g.Event&&g.EventTagID.size>0&&p.push(I),null==g.Company&&g.CompanyTagID.size>0&&m.push(I),null==S[1].Plate&&S[1].PlateTagID.size>0&&v.push(S[0])}i.length>0&&this.RequestBuySellData(i),t.length>0&&this.RequestBaseData(t),e.length>0&&this.RequestIndexBaseData(e),a.length>0&&this.RequestIndexHeatData(a),n.length>0&&this.RequestDealData(n),r.length>0&&this.RequestDerivativeData(r),s.length>0&&this.RequestFinanceData(s),o.length>0&&this.RequestSubDocumentData(o,"flowday"),l.length>0&&this.RequestSubDocumentData(l,"flowday3"),u.length>0&&this.RequestSubDocumentData(u,"flowday5"),c.length>0&&this.RequestSubDocumentData(c,"flowday10"),f.length>0&&this.RequestSubDocumentData(f,"dde"),C.length>0&&this.RequestSubDocumentData(C,"dde3"),d.length>0&&this.RequestSubDocumentData(d,"dde5"),D.length>0&&this.RequestSubDocumentData(D,"dde10"),p.length>0&&this.RequestEventData(p),m.length>0&&this.RequestCompanyData(m),v.length>0&&this.RequestPlateData(v),this.ReqeustAllSortData()},this.ReqeustData=this.RequestData,this.RequestBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate","amplitude"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBaseData",Explain:"",ID:C.BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.BASE_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.BASE_DATA)},error:function(t){e.RecvError(t,C.BASE_DATA)}})},this.RequestDerivativeData=function(t){var e=this,a=["name","symbol","marketvalue","flowmarketvalue","pe","pb","bookrate","bookdiffer"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDerivativeData",Explain:"",ID:C.DERIVATIVE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.DERIVATIVE_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.DERIVATIVE_DATA)},error:function(t){e.RecvError(t,C.DERIVATIVE_DATA)}})},this.RequestFinanceData=function(t){var e=this,a=["name","symbol","roe","finance"];if(this.NetworkFilter){var i={Name:"JSStock::RequestFinanceData",Explain:"",ID:C.FINANCE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.FINANCE_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.FINANCE_DATA)},error:function(t){e.RecvError(t,C.FINANCE_DATA)}})},this.RequestBuySellData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","buy","sell","exchangerate","amplitude"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBuySellData",Explain:"",ID:C.BUY_SELL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.BUY_SELL_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.BUY_SELL_DATA)},error:function(t){e.RecvError(t,C.BUY_SELL_DATA)}})},this.RequestDealData=function(t){var e=this,a=["name","symbol","price","high","low","vol","amount","date","time","increase","deal"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDealData",Explain:"",ID:C.DEAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.DEAL_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.DEAL_DATA)},error:function(t){e.RecvError(t,C.DEAL_DATA)}})},this.RequestIndexBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","indextop","increase"];if(this.NetworkFilter){var i={Name:"JSStock::RequestIndexBaseData",Explain:"()",ID:C.INDEX_BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,C.INDEX_BASE_DATA)}),1==i.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){console.log(t),e.RecvData(t,C.INDEX_BASE_DATA)},error:function(t){e.RecvError(t,C.INDEX_BASE_DATA)}})},this.RequestIndexHeatData=function(t){var e=this;n.a.ajax({url:this.PlateQuadrantApiUrl,data:{plate:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.HEAT_DATA)},error:function(t){e.RecvError(t,C.HEAT_DATA)}})},this.ReqeustAllSortData=function(){var t=new Array;for(var e of this.MapStock)if(h(e[0])&&!(null==e[1].Sort||e[1].Sort.size<=0))for(var a of e[1].Sort){var i=a[1],n={Plate:e[0],SortField:i.SortField,Order:i.Order,TagID:i.TagID};t.push(n)}for(var r in t){a=t[r];this.ReqeustSortData(a)}},this.ReqeustSortData=function(t){var e=this,a=t,i="";switch(a.SortField){case u.INCREASE:i="increase";break;case u.PRICE:i="price";break;default:return}var r=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate"];if(this.NetworkFilter){var s={Name:"JSStock::ReqeustSortData",Explain:"",ID:C.SORT_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(t){e.RecvData(t,C.SORT_DATA,a)}),1==s.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,C.SORT_DATA,a)},error:function(t){e.RecvError(t,C.SORT_DATA,a)}})},this.RequestSubDocumentData=function(t,e){var a=this;const i=new Map([["flowday",{Field:"flowday",RecvID:C.CAPITAL_FLOW_DAY_DATA}],["flowday3",{Field:"flowday3",RecvID:C.CAPITAL_FLOW_DAY3_DATA}],["flowday5",{Field:"flowday5",RecvID:C.CAPITAL_FLOW_DAY5_DATA}],["flowday10",{Field:"flowday10",RecvID:C.CAPITAL_FLOW_DAY10_DATA}],["dde",{Field:"dde",RecvID:C.DDE_DAY_DATA}],["dde3",{Field:"dde3",RecvID:C.DDE_DAY3_DATA}],["dde5",{Field:"dde5",RecvID:C.DDE_DAY5_DATA}],["dde10",{Field:"dde10",RecvID:C.DDE_DAY10_DATA}]]);if(i.has(e)){var r=i.get(e);if(this.NetworkFilter){var s={Name:"JSStock::RequestSubDocumentData",Explain:"",ID:r.RecvID,Request:{Url:a.RealtimeApiUrl,Data:{field:["symbol",r.Field],symbol:t,start:0,end:50},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(t){a.RecvData(t,r.RecvID)}),1==s.PreventDefault)return}n.a.ajax({url:this.RealtimeApiUrl,data:{field:["symbol",r.Field],symbol:t,start:0,end:50},type:"post",dataType:"json",success:function(t){a.RecvData(t,r.RecvID)},error:function(t){a.RecvError(t,r.RecvID)}})}},this.RequestEventData=function(t){var e=this;n.a.ajax({url:this.RealtimeApiUrl,data:{field:["symbol","events.margin","events.shhk","events.hk","events.st","events.hksymbol","events.hkname","events.szhk"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,C.EVENT_DATA)},error:function(t){e.RecvError(t,C.EVENT_DATA)}})},this.RequestCompanyData=function(t){var e=this;n.a.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","company"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,C.COMPANY_DATA)},error:function(t){e.RecvError(t,C.COMPANY_DATA)}})},this.RequestPlateData=function(t){var e=this;n.a.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","industry","region","concept"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,C.PLATE_DATA)},error:function(t){e.RecvError(t,C.PLATE_DATA)}})},this.RecvError=function(t,e,a){console.log("RecvError: datatype="+e.toString()),console.log(t);var i=this;this.Timeout&&clearTimeout(this.Timeout),this.Timeout=setTimeout(function(){i.ReqeustData()},2*this.AutoUpateTimeout)},this.RecvData=function(t,e,a){var i;switch(e){case C.BASE_DATA:case C.INDEX_BASE_DATA:i=this.RecvBaseData(t,e);break;case C.HEAT_DATA:i=this.RecvHeatData(t,e);break;case C.SORT_DATA:i=this.RecvSortData(t,e,a);break;case C.BUY_SELL_DATA:i=this.RecvBuySellData(t,e);break;case C.DEAL_DATA:i=this.RecvDealData(t,e);break;case C.DERIVATIVE_DATA:i=this.RecvDerivativeData(t,e);break;case C.FINANCE_DATA:i=this.RecvFinanceData(t,e);break;case C.CAPITAL_FLOW_DAY_DATA:case C.CAPITAL_FLOW_DAY3_DATA:case C.CAPITAL_FLOW_DAY5_DATA:case C.CAPITAL_FLOW_DAY10_DATA:case C.DDE_DAY_DATA:case C.DDE_DAY3_DATA:case C.DDE_DAY5_DATA:case C.DDE_DAY10_DATA:i=this.RecvSubDocumentData(t,e);break;case C.EVENT_DATA:i=this.RecvEventData(t,e);break;case C.COMPANY_DATA:i=this.RecvCompanyData(t,e);break;case C.PLATE_DATA:i=this.RecvPlateData(t,e)}for(var n of i)this.MapTagCallback.has(n[0])&&this.MapTagCallback.get(n[0])(n[0],n[1],e,this);this.AutoUpdate()},this.AutoUpdate=function(){if(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate){var t=this,e=!1;for(var a of this.MapStock){var i=p.GetMarketStatus(a[0]);if(2==i)return void(this.Timeout=setTimeout(function(){t.ReqeustData()},this.AutoUpateTimeout));1==i&&(e=!0)}e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}},this.RecvBaseData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r){switch(e){case C.BASE_DATA:r.SetBaseData(n);break;case C.INDEX_BASE_DATA:r.SetIndexBaseData(n);break;default:continue}if(r.TagID.size>0)for(var s of r.TagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}}return a},this.RecvBuySellData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r){if(r.SetBuySellData(n),r.TagID.size>0)for(var s of r.TagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol));if(r.BuySellTagID.size>0)for(var s of r.BuySellTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}}return a},this.RecvDerivativeData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetDerivativeData(n),r.DerivativeTagID.size>0))for(var s of r.DerivativeTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvFinanceData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetFinanceData(n),r.FinanceTagID.size>0))for(var s of r.FinanceTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvDealData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetDealData(n),r.DealTagID.size>0))for(var s of r.DealTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvHeatData=function(t,e){var a=new Map;for(var i in t.data){var n=t.data[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetHeatData(n),r.HeatTagID.size>0))for(var s of r.HeatTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvSortData=function(t,e,a){var i=new Map,n=new Array,r=this.MapStock.get(a.Plate);for(var s in t.stock){var o,h=t.stock[s];if(n.push(h.symbol),this.MapStock.has(h.symbol))(o=this.MapStock.get(h.symbol)).SetBaseData(h);else(o=new l(h.symbol)).SetBaseData(h),this.MapStock.set(h.symbol,o)}var u=a.SortField.toString()+"-"+a.Order.toString();if(!r.Sort.has(u))return i;var c=r.Sort.get(u);for(var h of(c.arySymbol=n,a.TagID))i.set(h,new Array([r.Symbol]));return i},this.RecvSubDocumentData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r){var s=null;switch(e){case C.CAPITAL_FLOW_DAY_DATA:r.SetCapitalFlowDayData(n.flowday,e),s=r.CapitalFlowDayID;break;case C.CAPITAL_FLOW_DAY3_DATA:r.SetCapitalFlowDayData(n.flowday3,e),s=r.CapitalFlowDay3ID;break;case C.CAPITAL_FLOW_DAY5_DATA:r.SetCapitalFlowDayData(n.flowday5,e),s=r.CapitalFlowDay5ID;break;case C.CAPITAL_FLOW_DAY10_DATA:r.SetCapitalFlowDayData(n.flowday10,e),s=r.CapitalFlowDay10ID;break;case C.DDE_DAY_DATA:r.SetDDE(n.dde,e),s=r.DDEID;break;case C.DDE_DAY3_DATA:r.SetDDE(n.dde3,e),s=r.DDE3ID;break;case C.DDE_DAY5_DATA:r.SetDDE(n.dde5,e),s=r.DDE5ID;break;case C.DDE_DAY10_DATA:r.SetDDE(n.dde10,e),s=r.DDE10ID}if(s&&s.size>0)for(var o of s)a.has(o)?a.get(o).push(r.Symbol):a.set(o,new Array(r.Symbol))}}return a},this.RecvEventData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetEventData(n),r.EventTagID.size>0))for(var s of r.EventTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvCompanyData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetCompanyData(n),r.CompanyTagID.size>0))for(var s of r.CompanyTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a},this.RecvPlateData=function(t,e){var a=new Map;for(var i in t.stock){var n=t.stock[i],r=this.MapStock.get(n.symbol);if(r&&(r.SetPlateData(n),r.PlateTagID.size>0))for(var s of r.PlateTagID)a.has(s)?a.get(s).push(r.Symbol):a.set(s,new Array(r.Symbol))}return a}}function D(){this.IsAutoUpdate=!0,this.AutoUpateTimeout=5e3,this.Timeout,this.ApiUrl,this.Data,this.Error,this.UpdateUICallback,this.RequestData=function(){},this.Stop=function(){this.IsAutoUpdate=!1,this.Timeout&&clearTimeout(this.Timeout)},this.AutoUpate=function(){if(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate&&(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate)){var t=this;if(this.Symbol){var e=p.GetMarketStatus(this.Symbol);2==e?this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout):1==e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}else{t=this;let e=new Date,a=100*e.getHours()+e.getMinutes();e.getDay()>0&&e.getDay()<6&&a>=930&&a<1530&&(this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout))}}},this.InvokeUpdateUICallback=function(){this.UpdateUICallback&&this.UpdateUICallback(this)}}var p={SH:".SH",SZ:".SZ",HK:".HK",SHFE:".SHF",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return t.indexOf(this.SHFE)>0},IsCFFEX:function(t){return t.indexOf(this.CFFEX)>0},IsDCE:function(t){return t.indexOf(this.DCE)>0},IsCZCE:function(t){return t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e)&&"0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(1))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}return!1},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase();if(this.IsUSA(e)){var a=GetLocalTime(-4);return n=a.getDay(),r=100*a.getHours()+a.getMinutes(),6==n||0==n?0:r>1730?3:r<930?1:2}var i=new Date,n=i.getDay(),r=100*i.getHours()+i.getMinutes();return 6==n||0==n?0:r>1540?3:r<925?1:2}};e.default={JSStockInit:d.Init,STOCK_FIELD_NAME:u,JSStock:d,StockRead:f,STOCK_FIELD_NAME:u,RECV_DATA_TYPE:C}},kVGU:function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(256),i=0;i<t.length;i++)a[t.charCodeAt(i)]=i;e.encode=function(e){var a,i=new Uint8Array(e),n=i.length,r="";for(a=0;a<n;a+=3)r+=t[i[a]>>2],r+=t[(3&i[a])<<4|i[a+1]>>4],r+=t[(15&i[a+1])<<2|i[a+2]>>6],r+=t[63&i[a+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(t){var e,i,n,r,s,o=.75*t.length,h=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(e=0;e<h;e+=4)i=a[t.charCodeAt(e)],n=a[t.charCodeAt(e+1)],r=a[t.charCodeAt(e+2)],s=a[t.charCodeAt(e+3)],c[l++]=i<<2|n>>4,c[l++]=(15&n)<<4|r>>2,c[l++]=(3&r)<<6|63&s;return u}}()},lxYE:function(t,e,a){t.exports=function(t){function e(t){let e=0;for(let a=0;a<t.length;a++)e=(e<<5)-e+t.charCodeAt(a),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let a;function s(...t){if(!s.enabled)return;const e=s,n=Number(new Date),r=n-(a||n);e.diff=r,e.prev=a,e.curr=n,a=n,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(a,n)=>{if("%%"===a)return a;o++;const r=i.formatters[n];if("function"==typeof r){const i=t[o];a=r.call(e,i),t.splice(o,1),o--}return a}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return s.namespace=t,s.enabled=i.enabled(t),s.useColors=i.useColors(),s.color=e(t),s.destroy=n,s.extend=r,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function n(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,e){const a=i(this.namespace+(void 0===e?":":e)+t);return a.log=this.log,a}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const a=("string"==typeof t?t:"").split(/[\s,]+/),n=a.length;for(e=0;e<n;e++)a[e]&&("-"===(t=a[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,a;for(e=0,a=i.skips.length;e<a;e++)if(i.skips[e].test(t))return!1;for(e=0,a=i.names.length;e<a;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=a("6RrG"),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},nXuP:function(t,e,a){var i=a("P2cu"),n=a("5+9/"),r=a("AszH"),s=a("QamB"),o=a("ARv7")("engine.io-client:polling-xhr");function h(){}function l(t){if(n.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,a=location.port;a||(a=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||a!==t.port,this.xs=t.secure!==e}}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=l,t.exports.Request=u,s(l,n),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new u(t)},l.prototype.doWrite=function(t,e){var a="string"!=typeof t&&void 0!==t,i=this.request({method:"POST",data:t,isBinary:a}),n=this;i.on("success",e),i.on("error",function(t){n.onError("xhr post error",t)}),this.sendXhr=i},l.prototype.doPoll=function(){o("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},r(u.prototype),u.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new i(t),a=this;try{o("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&e.setRequestHeader(n,this.extraHeaders[n])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){a.onLoad()},e.onerror=function(){a.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(a.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?a.onLoad():setTimeout(function(){a.onError("number"==typeof e.status?e.status:0)},0))},o("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){a.onError(t)},0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=h:this.xhr.onreadystatechange=h,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){var c="onpagehide"in self?"pagehide":"unload";addEventListener(c,f,!1)}function f(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}},psuf:function(t,e,a){t.exports=a("Xqxu"),t.exports.parser=a("ElvI")},qjVX:function(t,e,a){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function a(){this.off(t,a),e.apply(this,arguments)}return a.fn=e,this.on(t,a),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((a=i[n])===e||a.fn===e){i.splice(n,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),a=this._callbacks["$"+t];if(a)for(var i=0,n=(a=a.slice(0)).length;i<n;++i)a[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},sOR5:function(t,e){var a={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},sVLd:function(t,e,a){(function(e){t.exports=function(t){return a&&e.isBuffer(t)||i&&(t instanceof ArrayBuffer||n(t))};var a="function"==typeof e&&"function"==typeof e.isBuffer,i="function"==typeof ArrayBuffer,n=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}).call(e,a("EuP9").Buffer)},sib1:function(t,e,a){(function(i){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=Object({NODE_ENV:"production"}).DEBUG),t}(e=t.exports=a("yPMe")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var a=this.useColors;if(t[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+t[0]+(a?"%c ":" ")+"+"+e.humanize(this.diff),!a)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(r=++n)}),t.splice(r,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(n())}).call(e,a("W2nU"))},ujcs:function(t,e){e.read=function(t,e,a,i,n){var r,s,o=8*n-i-1,h=(1<<o)-1,l=h>>1,u=-7,c=a?n-1:0,f=a?-1:1,C=t[e+c];for(c+=f,r=C&(1<<-u)-1,C>>=-u,u+=o;u>0;r=256*r+t[e+c],c+=f,u-=8);for(s=r&(1<<-u)-1,r>>=-u,u+=i;u>0;s=256*s+t[e+c],c+=f,u-=8);if(0===r)r=1-l;else{if(r===h)return s?NaN:1/0*(C?-1:1);s+=Math.pow(2,i),r-=l}return(C?-1:1)*s*Math.pow(2,r-i)},e.write=function(t,e,a,i,n,r){var s,o,h,l=8*r-n-1,u=(1<<l)-1,c=u>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,C=i?0:r-1,d=i?1:-1,D=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+c>=1?f/h:f*Math.pow(2,1-c))*h>=2&&(s++,h/=2),s+c>=u?(o=0,s=u):s+c>=1?(o=(e*h-1)*Math.pow(2,n),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;t[a+C]=255&o,C+=d,o/=256,n-=8);for(s=s<<n|o,l+=n;l>0;t[a+C]=255&s,C+=d,s/=256,l-=8);t[a+C-d]|=128*D}},w9ur:function(t,e){var a={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},yPMe:function(t,e,a){function i(t){var a;function i(){if(i.enabled){var t=i,n=+new Date,r=n-(a||n);t.diff=r,t.prev=a,t.curr=n,a=n;for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var h=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(a,i){if("%%"===a)return a;h++;var n=e.formatters[i];if("function"==typeof n){var r=s[h];a=n.call(t,r),s.splice(h,1),h--}return a}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var a,i=0;for(a in t)i=(i<<5)-i+t.charCodeAt(a),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=n,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function n(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var a;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),n=i.length;for(a=0;a<n;a++)i[a]&&("-"===(t=i[a].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(a=0;a<e.instances.length;a++){var r=e.instances[a];r.enabled=e.enabled(r.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var a,i;for(a=0,i=e.skips.length;a<i;a++)if(e.skips[a].test(t))return!1;for(a=0,i=e.names.length;a<i;a++)if(e.names[a].test(t))return!0;return!1},e.humanize=a("baT+"),e.instances=[],e.names=[],e.skips=[],e.formatters={}},zqJT:function(t,e){var a=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=a.call(arguments,2);return function(){return e.apply(t,i.concat(a.call(arguments)))}}}});
//# sourceMappingURL=vendor.9eb40c4d624f83389b68.js.map